import { Canvas, Meta, Story } from "@storybook/addon-docs";
import { createForm, createBuilder } from "../../utils";

<Meta title="Components/Custom/PdfSubmitButton" />

# PdfSubmitButton

TODO - description of this component.

## Renderer

Below is an interactive example, please check the form data output in the console log in browser's inspector.

<Canvas>
  <Story name="Renderer">
    {() =>
      createForm({
        form: {
          components: [
            {
              type: "pdfsubmitbutton",
              key: "pdfsubmitbutton",
              label: "Submit",
              downloadSuccessMessage: "This is a download message.",
              debugMode: true,
              debugPdfUrl: "https://qld.gov.au",
              downloadSuccessMessageClass: "alert alert-success",
              downloadFailedMessageClass: "alert alert-warning",
            },
          ],
        },
        controller: (formio) => {
          formio.on("submit", (e) => {
            console.info("submit", e.data);
          });
          formio.on("change", (e) => {
            console.info("change", e.data);
          });
        },
      })
    }
  </Story>
</Canvas>

This example show the case when PDF is failed to generate, form action is missing or form action is blocked intentionally.

<Canvas>
  <Story name="Renderer for missing PDF">
    {() =>
      createForm({
        form: {
          components: [
            {
              type: "pdfsubmitbutton",
              key: "pdfsubmitbutton",
              label: "Submit",
              downloadSuccessMessage: "This is a download message.",
              downloadFailedMessage: "No PDF available.",
              downloadSuccessMessageClass: "alert alert-success",
              downloadFailedMessageClass: "alert alert-warning",
              debugMode: true,
            },
          ],
        },
        controller: (formio) => {
          formio.on("submit", (e) => {
            console.info("submit", e.data);
          });
          formio.on("change", (e) => {
            console.info("change", e.data);
          });
        },
      })
    }
  </Story>
</Canvas>

Example of putting a PdfSubmitButton in a wizard form.

<Canvas>
  <Story name="Renderer for form wizard">
    {() =>
      createForm({
        form: {
          components: [
            {
              title: "Page 1",
              label: "Page 1",
              type: "panel",
              key: "page1",
              components: [
                {
                  label: "Text Field1",
                  tableView: true,
                  key: "textField",
                  type: "textfield",
                  input: true,
                },
              ],
              input: false,
              tableView: false,
            },
            {
              title: "Page 2",
              label: "Page 2",
              type: "panel",
              key: "page2",
              buttonSettings: {
                previous: false,
              },
              components: [
                {
                  label: "Text Field2",
                  tableView: true,
                  key: "textField1",
                  type: "textfield",
                  input: true,
                },
                {
                  type: "pdfsubmitbutton",
                  key: "pdfsubmitbutton",
                  label: "Submit",
                  downloadSuccessMessage: "This is a download message.",
                  debugMode: true,
                  debugPdfUrl: "https://qld.gov.au",
                },
              ],
              input: false,
              tableView: false,
            },
          ],
          display: "wizard",
        },
        controller: (formio) => {
          formio.on("submit", (e) => {
            console.info("submit", e.data);
          });
          formio.on("change", (e) => {
            console.info("change", e.data);
          });
        },
      })
    }
  </Story>
</Canvas>

## Builder

This component can be drag and drop from the Form.io builder sidebar `custom` group.
You can preview the component's settings in the example below.

<Canvas>
  <Story name="Builder">
    {() =>
      createBuilder({
        form: {
          components: [
            {
              type: "pdfsubmitbutton",
              key: "pdfsubmitbutton",
              label: "Submit",
              downloadSuccessMessage: "This is a download message.",
              debugMode: true,
              debugPdfUrl: "https://qld.gov.au",
            },
          ],
        },
      })
    }
  </Story>
</Canvas>
