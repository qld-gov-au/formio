import { Canvas, Meta, Story } from "@storybook/addon-docs";
import { createForm, createBuilder } from "../../utils";

<Meta title="Components/PlsPlusAddress" />

# PlsPlusAddress

This address component utilise the [Property Location Service Plus PLSPlus QG Version RESTFUL api](https://servicesmadesimpler.govnet.qld.gov.au/wiki/display/PUB/DNRE+qld+only+address+lookup+service), provides a free of charge address lookup service.

User needs to obtain a franchise API key for using this component, by entering it in the `Provider` options in the component builder,
please look up the keys in [this document](https://www.qld.gov.au/_resources/matrix-documentation/components/form.io-guides/form.io-plsplusaddress-component) or contact [online@smartservice.qld.gov.au](mailto:online@smartservice.qld.gov.au) to request an API key.

## Renderer

Below is an interactive example, please check the form data output in the console log in browser's inspector.

<Canvas>
  <Story name="Renderer">
    {() =>
      createForm({
        form: {
          components: [
            {
              type: "plsplusaddress",
              key: "plsplusaddress",
              label: "PlsPlus Address field",
              providerOptions: {
                params: {
                  apiKey: "formiotest",
                },
              },
            },
            {
              type: "button",
              key: "submit",
              label: "Submit",
              action: "submit",
            },
          ],
        },
        controller: (formio) => {
          formio.on("submit", (e) => {
            console.info("submit", e.data);
          });
          formio.on("change", (e) => {
            console.info("change", e.data);
          });
        },
      })
    }
  </Story>
</Canvas>

## Builder

This component can be drag and drop from the Form.io builder sidebar `custom` group.
You can preview the component's settings in the example below.

<Canvas>
  <Story name="Builder">
    {() =>
      createBuilder({
        form: {
          components: [
            {
              type: "plsplusaddress",
              key: "plsplusaddress",
              label: "PlsPlus Address field",
              providerOptions: {
                params: {
                  apiKey: "formiotest",
                },
              },
            },
            {
              type: "button",
              key: "submit",
              label: "Submit",
              action: "submit",
            },
          ],
        },
      })
    }
  </Story>
</Canvas>
