/*! For license information please see premium.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("Formio")):"function"==typeof define&&define.amd?define(["Formio"],e):"object"==typeof exports?exports.premium=e(require("Formio")):t.premium=e(t.Formio)}(self,(function(t){return function(){var e={86131:function(t,e){e.Z=function(t){return'<div class="row">\n  <div class="col-sm-2">\n    Users\n  </div>\n</div>'}},26213:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<div class="list-group-item">\n  <div class="list-group-subheader">\n    <div class="row">\n      <div class="col-sm-2">\n        User '+(null==(e=rowIndex+1)?"":e)+"\n      </div>\n      ",t.self.options.readOnly||(n+='\n      <div class="col-sm-2">\n        <div class="btn-group pull-right">\n          <button class="btn btn-default btn-light btn-sm editCard"><i class="'+(null==(e=t.iconClass("edit"))?"":e)+'"></i></button>\n          <button class="btn btn-danger btn-sm removeCard"><i class="'+(null==(e=t.iconClass("trash"))?"":e)+'"></i></button>\n        </div>\n      </div>\n      '),n+="\n    </div>\n  </div>\n  ",t.util.eachComponent(t.components,(function(i){n+="\n  ",i.hasOwnProperty("tableView")&&!i.tableView||!t.isVisibleInRow(i)||(n+='\n  <div class="row">\n    <div class="col-sm-2">\n      '+(null==(e=i.key)?"":e)+'\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-sm-2">\n      '+(null==(e=t.getView(i,t.row[i.key]))?"":e)+"\n    </div>\n  </div>\n  "),n+="\n  "})),n+="\n</div>"}},35353:function(t,e){e.Z=function(t){var e;return""+'<div class="d-flex">\n  <button class="btn btn-secondary" ref="'+(null==(e=t.ref)?"":e)+'">\n    <i class="fa fa-barcode component-icon"></i> '+(null==(e=t.label)?"":e)+'\n  </button>\n  <div class="info-text">\n    '+(null==(e=t.dataValue?t.dataValue:"No code")?"":e)+"\n  </div>\n</div>\n"}},1752:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<div ref="tableContainer"></div>\n\n<div class="formio-component-modal-wrapper formio-component-modal-wrapper-'+(null==(e=t.component.type)?"":e)+'" ref="componentModalWrapper">\n  <div class="formio-dialog formio-dialog-theme-default component-rendering-hidden" ref="dataTableModalWrapper">\n    <div class="formio-dialog-overlay" ref="dataTableModalOverlay"></div>\n    <div class="formio-dialog-content" ref="dataTableModalContents">\n      <div ref="dataTableModalContents">\n        <ul class="editgrid-listgroup list-group\n            '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n            "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n            "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n            "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n            ">\n          ',t.header&&(n+='\n          <li class="list-group-item list-group-header">\n            '+(null==(e=t.header)?"":e)+"\n          </li>\n          "),n+="\n          ",t.rows.forEach((function(i,r){n+='\n          <li class="list-group-item" ref="'+(null==(e=t.ref.row)?"":e)+'">\n            '+(null==(e=i)?"":e)+"\n            ",t.openRows[r]&&!t.readOnly&&(n+='\n            <div class="editgrid-actions">\n              <button class="btn btn-primary" ref="'+(null==(e=t.ref.saveRow)?"":e)+'">'+(null==(e=t.t(t.component.saveRow||"Save",{_userInput:!0}))?"":e)+"</button>\n              ",t.component.removeRow&&(n+='\n              <button class="btn btn-danger" ref="'+(null==(e=t.ref.cancelRow)?"":e)+'">'+(null==(e=t.t(t.component.removeRow||"Cancel",{_userInput:!0}))?"":e)+"</button>\n              "),n+="\n            </div>\n            "),n+='\n            <div class="has-error">\n              <div class="editgrid-row-error help-block">\n                '+(null==(e=t.errors[r])?"":e)+"\n              </div>\n            </div>\n          </li>\n          "})),n+="\n          ",t.footer&&(n+='\n          <li class="list-group-item list-group-footer">\n            '+(null==(e=t.footer)?"":e)+"\n          </li>\n          "),n+='\n        </ul>\n      </div>\n      <button class="formio-dialog-close float-right btn btn-secondary btn-sm" aria-label="close" ref="dataTableModalClose"></button>\n    </div>\n  </div>\n</div>\n'}},55066:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<ul class="editgrid-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    ">\n  ',t.header&&(n+='\n  <li class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </li>\n  "),n+="\n  ",t.rows.forEach((function(i,r){n+='\n  <li class="list-group-item" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=i)?"":e)+"\n    ",t.openRows[r]&&!t.readOnly&&(n+='\n    <div class="editgrid-actions">\n      <button class="btn btn-primary" ref="'+(null==(e=t.ref.saveRow)?"":e)+'">'+(null==(e=t.t(t.component.saveRow||"Save",{_userInput:!0}))?"":e)+"</button>\n      ",t.component.removeRow&&(n+='\n      <button class="btn btn-danger" ref="'+(null==(e=t.ref.cancelRow)?"":e)+'">'+(null==(e=t.t(t.component.removeRow||"Cancel",{_userInput:!0}))?"":e)+"</button>\n      "),n+="\n    </div>\n    "),n+='\n    <div class="has-error">\n      <div class="editgrid-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </li>\n  "})),n+="\n  ",t.footer&&(n+='\n  <li class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </li>\n  "),n+="\n</ul>\n"}},82656:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<div class="dynamicWizard-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    "\n    role="grid"\n    aria-labelledby="l-'+(null==(e=t.instance.id)?"":e)+"-"+(null==(e=t.component.key)?"":e)+" \n    ",t.component.description&&(n+="d-"+(null==(e=t.instance.id)?"":e)+"-"+(null==(e=t.component.key)?"":e)),n+='"\n>\n  ',t.readOnly||!t.isChangingMode||t.isDisabled?(n+="\n  ",t.header&&(n+='\n  <div role="presentation" class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </div>\n  "),n+="\n  ",t.rows.forEach((function(i,r){n+='\n  <div role="presentation" class="list-group-card" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=i)?"":e)+'\n    <div class="has-error">\n      <div class="dynamicWizard-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </div>\n  "})),n+="\n  ",t.footer&&(n+='\n  <div class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </div>\n  "),n+="\n  "):n+='\n  <div class="list-group-field" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=t.currentComponent)?"":e)+"\n  </div>\n  ",n+="\n</div>\n",t.readOnly||t.isBlocking||(n+="\n",t.isChangingMode?(n+='\n<div class="list-inline" id="'+(null==(e=t.dynamicWizardKey)?"":e)+'-nav">\n  ',t.buttons.cancel&&(n+='\n  <div class="list-inline-item">\n    <button class="btn btn-secondary btn-wizard-nav-cancel"\n      aria-label="Cancel button. Click to reset entry"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-cancel"\n    >\n    '+(null==(e=t.t("cancel"))?"":e)+"\n    </button>\n  </div>\n  "),n+="\n  ",t.buttons.previous&&(n+='\n  <div class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-previous"\n      aria-label="Previous button. Click to go back to the previous component"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-previous"\n    >\n      '+(null==(e=t.t("previous"))?"":e)+"\n    </button>\n  </div>\n  "),n+="\n  ",t.buttons.next&&(n+='\n  <div class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-next" \n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-next"\n      aria-label="Next button. Click to go to the next component"\n    >\n      '+(null==(e=t.t("next"))?"":e)+"\n    </button>\n  </div>\n  "),n+="\n</div>\n"):(n+="\n",t.hasAddButton&&(n+='\n  <p>Would you like to add another?</p>\n  <button class="btn btn-primary"\n    ref="'+(null==(e=t.ref.agreeButton)?"":e)+'"\n    aria-label="Add Another Entry"\n  >\n    '+(null==(e=t.t("Add another"))?"":e)+"\n  </button>\n"),n+="\n"),n+="\n"),n+="\n",t.options.vpat&&(n+='\n<span class="sr-only" aria-live="assertive" ref="dWizardLiveRegion"></span>\n'),n}},11970:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<ul class="dynamicWizard-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    ">\n  ',t.readOnly||!t.isChangingMode||t.isDisabled?(n+="\n  ",t.header&&(n+='\n  <li class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </li>\n  "),n+="\n  ",t.rows.forEach((function(i,r){n+='\n  <li class="list-group-card" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=i)?"":e)+'\n    <div class="has-error">\n      <div class="dynamicWizard-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </li>\n  "})),n+="\n  ",t.footer&&(n+='\n  <li class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </li>\n  "),n+="\n  "):n+='\n  <li class="list-group-field" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=t.currentComponent)?"":e)+"\n  </li>\n  ",n+="\n</ul>\n",t.readOnly||t.isBlocking||(n+="\n",t.isChangingMode?(n+='\n<ul class="list-inline" id="'+(null==(e=t.dynamicWizardKey)?"":e)+'-nav">\n  ',t.buttons.cancel&&(n+='\n  <li class="list-inline-item">\n    <button class="btn btn-secondary btn-wizard-nav-cancel"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-cancel">'+(null==(e=t.t("cancel"))?"":e)+"</button>\n  </li>\n  "),n+="\n  ",t.buttons.previous&&(n+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-previous"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-previous">'+(null==(e=t.t("previous"))?"":e)+"</button>\n  </li>\n  "),n+="\n  ",t.buttons.next&&(n+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-next" ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-next">'+(null==(e=t.t("next"))?"":e)+"</button>\n  </li>\n  "),n+="\n</ul>\n"):(n+="\n",t.hasAddButton&&(n+='\n  <p>Would you like to add another?</p>\n  <button class="btn btn-primary" ref="'+(null==(e=t.ref.agreeButton)?"":e)+'">\n    '+(null==(e=t.t("Yes"))?"":e)+"\n  </button>\n"),n+="\n"),n+="\n"),n}},62175:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<div class="formio-sketchpad-body">\n  <div class="formio-sketchpad-header" ref="header">\n    <div class="btn-toolbar formio-sketchpad-toolbar" role="toolbar">\n      ',!t.disabled&&t.buttonGroups.forEach((function(i){n+='\n        <div class="btn-group formio-sketchpad-toolbar-group" role="group">\n          ',i.forEach((function(i){n+='\n            <div class="btn formio-sketchpad-toolbar-button formio-sketchpad-toolbar-button-'+(null==(e=i.key)?"":e)+'" ref="'+(null==(e=i.key)?"":e)+'" title="'+(null==(e=i.title)?"":e)+'">\n              <i class="'+(null==(e=i.icon)?"":e)+'"></i>\n              ',i.input&&(n+='\n                <input type="'+(null==(e=i.input.type)?"":e)+'" class="formio-sketchpad-toolbar-input '+(null==(e=i.input.class)?"":e)+'" ref="'+(null==(e=i.key)?"":e)+'-input"\n                '+(null==(e=t.self.buttonAttributes(i))?"":e)+"/>\n              "),n+="\n            </div>\n          "})),n+="\n        </div>\n      "})),n+='\n    </div>\n  </div>\n  <div class="formio-sketchpad-container" ref="drawingContainer">\n    <div class="formio-sketchpad-background" ref="background">\n      ',t.component.image||t.component.imageUrl||(n+="\n          Background image is not specified. Sketchpad doesn\\'t work without background image\n      "),n+="\n      ",t.component.imageUrl&&"svg"!==t.component.imageType&&(n+='\n        <img ref="backgroundImage" alt="'+(null==(e=t.t("sketchpad background"))?"":e)+'"/>\n      '),n+='\n    </div>\n    <div class="formio-sketchpad-canvas" ref="canvas"></div>\n  </div>\n  <div class="formio-sketchpad-footer" ref="footer">\n    <div class="formio-sketchpad-meta-info"><div><span ref="totalMultiplier">'+(null==(e=t.zoomInfo.totalMultiplier)?"":e)+"</span>x</div>\n  </div>\n</div></div>\n"}},48352:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<div class="formio-tagpad-container clearfix">\n  <div ref="canvasContainer" class="formio-tagpad-image-container" style="max-width: '+(null==(e=t.canvasMaxWidth)?"":e)+"; max-height: "+(null==(e=t.canvasMaxHeight)?"":e)+';">\n      <div ref="background" class="formio-tagpad-background">\n        ',t.component.image||t.component.imageUrl||(n+="\n            Background image is not specified. Tagpad doesn\\'t work without background image\n        "),n+="\n        ",t.component.imageUrl&&(n+="\n            <img src="+(null==(e=t.component.imageUrl)?"":e)+' ref="image" alt="" width="100%"/>\n        '),n+='\n      </div>\n      <div ref="canvas" class="formio-tagpad-canvas"></div>\n  </div>\n  <div ref="formContainer" class="formio-tagpad-form-container">\n      <div class="formio-tagpad-form">\n        ',t.selectedDot?(n+='\n          <p class="formio-tagpad-form-title">Dot: '+(null==(e=t.selectedDot.index+1)?"":e)+'</p>\n          <div  ref="form">'+(null==(e=t.components)?"":e)+"</div>\n          ",t.buttons.removeDot&&(n+='\n            <button class="btn btn-sm btn-danger formio-tagpad-remove-button" ref="removeDot">\n              <i class="fa fa-trash"></i>\n            </button>\n          '),n+="\n        "):!t.hasDots||t.disabled||t.component.disabled||t.self.shouldDisabled?(t.component.disabled||t.disabled||t.self.shouldDisabled)&&(n+='\n          <div class="formio-tagpad-all-data">'+(null==(e=t.self.getDataAsString())?"":e)+"</div>\n        "):n+='\n          <p class="formio-tagpad-form-title">No dot selected</p>\n        ',n+"\n      </div>\n  </div>\n</div>\n"}},10333:function(t,e){e.Z=function(t){var e;return""+'<div class="d-flex">\n  <button class="btn btn-secondary" ref="'+(null==(e=t.ref)?"":e)+'">\n    <i class="fa fa-barcode component-icon"></i> '+(null==(e=t.label)?"":e)+'\n  </button>\n  <div class="info-text">\n    '+(null==(e=t.dataValue?t.dataValue:"No code")?"":e)+"\n  </div>\n</div>\n"}},52209:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<div ref="tableContainer"></div>\n<div class="formio-component-modal-wrapper formio-component-modal-wrapper-'+(null==(e=t.component.type)?"":e)+'" ref="componentModalWrapper">\n  <div class="formio-dialog formio-dialog-theme-default component-rendering-hidden" ref="dataTableModalWrapper">\n    <div class="formio-dialog-overlay" ref="dataTableModalOverlay"></div>\n    <div class="formio-dialog-content" ref="dataTableModalContents">\n      <div ref="dataTableModalContents">\n        <ul class="editgrid-listgroup list-group\n            '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n            "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n            "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n            "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n            ">\n          ',t.header&&(n+='\n          <li class="list-group-item list-group-header">\n            '+(null==(e=t.header)?"":e)+"\n          </li>\n          "),n+="\n          ",t.rows.forEach((function(i,r){n+='\n          <li class="list-group-item" ref="'+(null==(e=t.ref.row)?"":e)+'">\n            '+(null==(e=i)?"":e)+"\n            ",t.openRows[r]&&!t.readOnly&&(n+='\n            <div class="editgrid-actions">\n              <button class="btn btn-primary" ref="'+(null==(e=t.ref.saveRow)?"":e)+'">'+(null==(e=t.t(t.component.saveRow||"Save",{_userInput:!0}))?"":e)+"</button>\n              ",t.component.removeRow&&(n+='\n              <button class="btn btn-danger" ref="'+(null==(e=t.ref.cancelRow)?"":e)+'">'+(null==(e=t.t(t.component.removeRow||"Cancel",{_userInput:!0}))?"":e)+"</button>\n              "),n+="\n            </div>\n            "),n+='\n            <div class="has-error">\n              <div class="editgrid-row-error help-block">\n                '+(null==(e=t.errors[r])?"":e)+"\n              </div>\n            </div>\n          </li>\n          "})),n+="\n          ",t.footer&&(n+='\n          <li class="list-group-item list-group-footer">\n            '+(null==(e=t.footer)?"":e)+"\n          </li>\n          "),n+='\n        </ul>\n      </div>\n      <button class="formio-dialog-close float-right btn btn-secondary btn-sm" aria-label="close" ref="dataTableModalClose"></button>\n    </div>\n  </div>\n</div>\n\n'}},80339:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<ul class="editgrid-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    ">\n  ',t.header&&(n+='\n  <li class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </li>\n  "),n+="\n  ",t.rows.forEach((function(i,r){n+='\n  <li class="list-group-item" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=i)?"":e)+"\n    ",t.openRows[r]&&!t.readOnly&&(n+='\n    <div class="editgrid-actions">\n      <button class="btn btn-primary" ref="'+(null==(e=t.ref.saveRow)?"":e)+'">'+(null==(e=t.t(t.component.saveRow||"Save",{_userInput:!0}))?"":e)+"</button>\n      ",t.component.removeRow&&(n+='\n      <button class="btn btn-danger" ref="'+(null==(e=t.ref.cancelRow)?"":e)+'">'+(null==(e=t.t(t.component.removeRow||"Cancel",{_userInput:!0}))?"":e)+"</button>\n      "),n+="\n    </div>\n    "),n+='\n    <div class="has-error">\n      <div class="editgrid-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </li>\n  "})),n+="\n  ",t.footer&&(n+='\n  <li class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </li>\n  "),n+="\n</ul>\n"}},43290:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<ul class="dynamicWizard-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    ">\n  ',t.readOnly||!t.isChangingMode||t.isDisabled?(n+="\n  ",t.header&&(n+='\n  <li class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </li>\n  "),n+="\n  ",t.rows.forEach((function(i,r){n+='\n  <li class="list-group-card" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=i)?"":e)+'\n    <div class="has-error">\n      <div class="dynamicWizard-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </li>\n  "})),n+="\n  ",t.footer&&(n+='\n  <li class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </li>\n  "),n+="\n  "):n+='\n  <li class="list-group-field" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=t.currentComponent)?"":e)+"\n  </li>\n  ",n+="\n</ul>\n",t.readOnly||t.isBlocking||(n+="\n",t.isChangingMode?(n+='\n<ul class="list-inline" id="'+(null==(e=t.dynamicWizardKey)?"":e)+'-nav">\n  ',t.buttons.cancel&&(n+='\n  <li class="list-inline-item">\n    <button class="btn btn-secondary btn-wizard-nav-cancel"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-cancel">'+(null==(e=t.t("cancel"))?"":e)+"</button>\n  </li>\n  "),n+="\n  ",t.buttons.previous&&(n+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-previous"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-previous">'+(null==(e=t.t("previous"))?"":e)+"</button>\n  </li>\n  "),n+="\n  ",t.buttons.next&&(n+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-next" ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-next">'+(null==(e=t.t("next"))?"":e)+"</button>\n  </li>\n  "),n+="\n</ul>\n"):(n+="\n",t.hasAddButton&&(n+='\n  <p>Would you like to add another?</p>\n  <button class="btn btn-primary" ref="'+(null==(e=t.ref.agreeButton)?"":e)+'">\n    '+(null==(e=t.t("Yes"))?"":e)+"\n  </button>\n"),n+="\n"),n+="\n"),n}},60469:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<ul class="dynamicWizard-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    ">\n  ',t.readOnly||!t.isChangingMode||t.isDisabled?(n+="\n  ",t.header&&(n+='\n  <li class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </li>\n  "),n+="\n  ",t.rows.forEach((function(i,r){n+='\n  <li class="list-group-card" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=i)?"":e)+'\n    <div class="has-error">\n      <div class="dynamicWizard-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </li>\n  "})),n+="\n  ",t.footer&&(n+='\n  <li class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </li>\n  "),n+="\n  "):n+='\n  <li class="list-group-field" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=t.currentComponent)?"":e)+"\n  </li>\n  ",n+="\n</ul>\n",t.readOnly||t.isBlocking||(n+="\n",t.isChangingMode?(n+='\n<ul class="list-inline" id="'+(null==(e=t.dynamicWizardKey)?"":e)+'-nav">\n  ',t.buttons.cancel&&(n+='\n  <li class="list-inline-item">\n    <button class="btn btn-secondary btn-wizard-nav-cancel"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-cancel">'+(null==(e=t.t("cancel"))?"":e)+"</button>\n  </li>\n  "),n+="\n  ",t.buttons.previous&&(n+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-previous"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-previous">'+(null==(e=t.t("previous"))?"":e)+"</button>\n  </li>\n  "),n+="\n  ",t.buttons.next&&(n+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-next" ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-next">'+(null==(e=t.t("next"))?"":e)+"</button>\n  </li>\n  "),n+="\n</ul>\n"):(n+="\n",t.hasAddButton&&(n+='\n  <p>Would you like to add another?</p>\n  <button class="btn btn-primary" ref="'+(null==(e=t.ref.agreeButton)?"":e)+'">\n    '+(null==(e=t.t("Yes"))?"":e)+"\n  </button>\n"),n+="\n"),n+="\n"),n}},432:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<div class="formio-sketchpad-body">\n  <div class="formio-sketchpad-header" ref="header">\n    <div class="btn-toolbar formio-sketchpad-toolbar" role="toolbar">\n      ',!t.disabled&&t.buttonGroups.forEach((function(i){n+='\n        <div class="btn-group formio-sketchpad-toolbar-group" role="group">\n          ',i.forEach((function(i){n+='\n            <div class="btn formio-sketchpad-toolbar-button formio-sketchpad-toolbar-button-'+(null==(e=i.key)?"":e)+'" ref="'+(null==(e=i.key)?"":e)+'" title="'+(null==(e=i.title)?"":e)+'">\n              <i class="'+(null==(e=i.icon)?"":e)+'"></i>\n              ',i.input&&(n+='\n                <input type="'+(null==(e=i.input.type)?"":e)+'" class="formio-sketchpad-toolbar-input '+(null==(e=i.input.class)?"":e)+'" ref="'+(null==(e=i.key)?"":e)+'-input"\n                '+(null==(e=t.self.buttonAttributes(i))?"":e)+"/>\n              "),n+="\n            </div>\n          "})),n+="\n        </div>\n      "})),n+='\n    </div>\n  </div>\n  <div class="formio-sketchpad-container" ref="drawingContainer">\n    <div class="formio-sketchpad-background" ref="background">\n      ',t.component.image||t.component.imageUrl||(n+="\n          Background image is not specified. Sketchpad doesn\\'t work without background image\n      "),n+="\n      ",t.component.imageUrl&&"svg"!==t.component.imageType&&(n+='\n        <img ref="backgroundImage" alt=""/>\n      '),n+='\n    </div>\n    <div class="formio-sketchpad-canvas" ref="canvas"></div>\n  </div>\n  <div class="formio-sketchpad-footer" ref="footer">\n    <div class="formio-sketchpad-meta-info"><div><span ref="totalMultiplier">'+(null==(e=t.zoomInfo.totalMultiplier)?"":e)+"</span>x</div>\n  </div>\n</div></div>\n"}},76005:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<div class="formio-tagpad-container clearfix">\n  <div ref="canvasContainer" class="formio-tagpad-image-container" style="max-width: '+(null==(e=t.canvasMaxWidth)?"":e)+"; max-height: "+(null==(e=t.canvasMaxHeight)?"":e)+';">\n      <div ref="background" class="formio-tagpad-background">\n        ',t.component.image||t.component.imageUrl||(n+="\n            Background image is not specified. Tagpad doesn\\'t work without background image\n        "),n+="\n        ",t.component.imageUrl&&(n+="\n            <img src="+(null==(e=t.component.imageUrl)?"":e)+' ref="image" alt="" width="100%"/>\n        '),n+='\n      </div>\n      <div ref="canvas" class="formio-tagpad-canvas"></div>\n  </div>\n  <div ref="formContainer" class="formio-tagpad-form-container">\n      <div class="formio-tagpad-form">\n        ',t.selectedDot?(n+='\n          <p class="formio-tagpad-form-title">Dot: '+(null==(e=t.selectedDot.index+1)?"":e)+'</p>\n          <div  ref="form">'+(null==(e=t.components)?"":e)+"</div>\n          ",t.buttons.removeDot&&(n+='\n            <button class="btn btn-sm btn-danger formio-tagpad-remove-button" ref="removeDot">\n              <i class="fa fa-trash"></i>\n            </button>\n          '),n+="\n        "):!t.hasDots||t.disabled||t.component.disabled||t.self.shouldDisabled?(t.component.disabled||t.disabled||t.self.shouldDisabled)&&(n+='\n          <div class="formio-tagpad-all-data">'+(null==(e=t.self.getDataAsString())?"":e)+"</div>\n        "):n+='\n          <p class="formio-tagpad-form-title">No dot selected</p>\n        ',n+"\n      </div>\n  </div>\n</div>\n"}},96486:function(t,e,n){var i;t=n.nmd(t),function(){var r,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",l=32,h=128,c=1/0,u=9007199254740991,d=NaN,f=4294967295,p=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",l],["partialRight",64],["rearg",256]],g="[object Arguments]",m="[object Array]",v="[object Boolean]",y="[object Date]",_="[object Error]",b="[object Function]",w="[object GeneratorFunction]",x="[object Map]",k="[object Number]",S="[object Object]",R="[object Promise]",C="[object RegExp]",O="[object Set]",E="[object String]",A="[object Symbol]",M="[object WeakMap]",T="[object ArrayBuffer]",I="[object DataView]",P="[object Float32Array]",F="[object Float64Array]",j="[object Int8Array]",z="[object Int16Array]",L="[object Int32Array]",D="[object Uint8Array]",B="[object Uint8ClampedArray]",V="[object Uint16Array]",W="[object Uint32Array]",U=/\b__p \+= '';/g,N=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/&(?:amp|lt|gt|quot|#39);/g,G=/[&<>"']/g,Z=RegExp(H.source),Y=RegExp(G.source),K=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,X=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),it=/^\s+/,rt=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,at=/\{\n\/\* \[wrapped with (.+)\] \*/,st=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ht=/[()=,{}\[\]\/\s]/,ct=/\\(\\)?/g,ut=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,ft=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,mt=/^0o[0-7]+$/i,vt=/^(?:0|[1-9]\d*)$/,yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_t=/($^)/,bt=/['\n\r\u2028\u2029\\]/g,wt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xt="a-z\\xdf-\\xf6\\xf8-\\xff",kt="A-Z\\xc0-\\xd6\\xd8-\\xde",St="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Rt="["+St+"]",Ct="["+wt+"]",Ot="\\d+",Et="["+xt+"]",At="[^\\ud800-\\udfff"+St+Ot+"\\u2700-\\u27bf"+xt+kt+"]",Mt="\\ud83c[\\udffb-\\udfff]",Tt="[^\\ud800-\\udfff]",It="(?:\\ud83c[\\udde6-\\uddff]){2}",Pt="[\\ud800-\\udbff][\\udc00-\\udfff]",Ft="["+kt+"]",jt="(?:"+Et+"|"+At+")",zt="(?:"+Ft+"|"+At+")",Lt="(?:['’](?:d|ll|m|re|s|t|ve))?",Dt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Bt="(?:"+Ct+"|"+Mt+")?",Vt="[\\ufe0e\\ufe0f]?",Wt=Vt+Bt+"(?:\\u200d(?:"+[Tt,It,Pt].join("|")+")"+Vt+Bt+")*",Ut="(?:"+["[\\u2700-\\u27bf]",It,Pt].join("|")+")"+Wt,Nt="(?:"+[Tt+Ct+"?",Ct,It,Pt,"[\\ud800-\\udfff]"].join("|")+")",qt=RegExp("['’]","g"),Ht=RegExp(Ct,"g"),Gt=RegExp(Mt+"(?="+Mt+")|"+Nt+Wt,"g"),Zt=RegExp([Ft+"?"+Et+"+"+Lt+"(?="+[Rt,Ft,"$"].join("|")+")",zt+"+"+Dt+"(?="+[Rt,Ft+jt,"$"].join("|")+")",Ft+"?"+jt+"+"+Lt,Ft+"+"+Dt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ot,Ut].join("|"),"g"),Yt=RegExp("[\\u200d\\ud800-\\udfff"+wt+"\\ufe0e\\ufe0f]"),Kt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$t=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xt=-1,Jt={};Jt[P]=Jt[F]=Jt[j]=Jt[z]=Jt[L]=Jt[D]=Jt[B]=Jt[V]=Jt[W]=!0,Jt[g]=Jt[m]=Jt[T]=Jt[v]=Jt[I]=Jt[y]=Jt[_]=Jt[b]=Jt[x]=Jt[k]=Jt[S]=Jt[C]=Jt[O]=Jt[E]=Jt[M]=!1;var Qt={};Qt[g]=Qt[m]=Qt[T]=Qt[I]=Qt[v]=Qt[y]=Qt[P]=Qt[F]=Qt[j]=Qt[z]=Qt[L]=Qt[x]=Qt[k]=Qt[S]=Qt[C]=Qt[O]=Qt[E]=Qt[A]=Qt[D]=Qt[B]=Qt[V]=Qt[W]=!0,Qt[_]=Qt[b]=Qt[M]=!1;var te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ee=parseFloat,ne=parseInt,ie="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,re="object"==typeof self&&self&&self.Object===Object&&self,oe=ie||re||Function("return this")(),ae=e&&!e.nodeType&&e,se=ae&&t&&!t.nodeType&&t,le=se&&se.exports===ae,he=le&&ie.process,ce=function(){try{return se&&se.require&&se.require("util").types||he&&he.binding&&he.binding("util")}catch(t){}}(),ue=ce&&ce.isArrayBuffer,de=ce&&ce.isDate,fe=ce&&ce.isMap,pe=ce&&ce.isRegExp,ge=ce&&ce.isSet,me=ce&&ce.isTypedArray;function ve(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ye(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var a=t[r];e(i,a,n(a),t)}return i}function _e(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function be(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function we(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function xe(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}function ke(t,e){return!(null==t||!t.length)&&Pe(t,e,0)>-1}function Se(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function Re(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function Ce(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function Oe(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function Ee(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function Ae(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var Me=Le("length");function Te(t,e,n){var i;return n(t,(function(t,n,r){if(e(t,n,r))return i=n,!1})),i}function Ie(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function Pe(t,e,n){return e==e?function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):Ie(t,je,n)}function Fe(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function je(t){return t!=t}function ze(t,e){var n=null==t?0:t.length;return n?Ve(t,e)/n:d}function Le(t){return function(e){return null==e?r:e[t]}}function De(t){return function(e){return null==t?r:t[e]}}function Be(t,e,n,i,r){return r(t,(function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)})),n}function Ve(t,e){for(var n,i=-1,o=t.length;++i<o;){var a=e(t[i]);a!==r&&(n=n===r?a:n+a)}return n}function We(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function Ue(t){return t?t.slice(0,sn(t)+1).replace(it,""):t}function Ne(t){return function(e){return t(e)}}function qe(t,e){return Re(e,(function(e){return t[e]}))}function He(t,e){return t.has(e)}function Ge(t,e){for(var n=-1,i=t.length;++n<i&&Pe(e,t[n],0)>-1;);return n}function Ze(t,e){for(var n=t.length;n--&&Pe(e,t[n],0)>-1;);return n}function Ye(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}var Ke=De({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),$e=De({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Xe(t){return"\\"+te[t]}function Je(t){return Yt.test(t)}function Qe(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function tn(t,e){return function(n){return t(e(n))}}function en(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n];a!==e&&a!==s||(t[n]=s,o[r++]=n)}return o}function nn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function rn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function on(t){return Je(t)?function(t){for(var e=Gt.lastIndex=0;Gt.test(t);)++e;return e}(t):Me(t)}function an(t){return Je(t)?function(t){return t.match(Gt)||[]}(t):function(t){return t.split("")}(t)}function sn(t){for(var e=t.length;e--&&rt.test(t.charAt(e)););return e}var ln=De({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),hn=function t(e){var n,i=(e=null==e?oe:hn.defaults(oe.Object(),e,hn.pick(oe,$t))).Array,rt=e.Date,wt=e.Error,xt=e.Function,kt=e.Math,St=e.Object,Rt=e.RegExp,Ct=e.String,Ot=e.TypeError,Et=i.prototype,At=xt.prototype,Mt=St.prototype,Tt=e["__core-js_shared__"],It=At.toString,Pt=Mt.hasOwnProperty,Ft=0,jt=(n=/[^.]+$/.exec(Tt&&Tt.keys&&Tt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",zt=Mt.toString,Lt=It.call(St),Dt=oe._,Bt=Rt("^"+It.call(Pt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vt=le?e.Buffer:r,Wt=e.Symbol,Ut=e.Uint8Array,Nt=Vt?Vt.allocUnsafe:r,Gt=tn(St.getPrototypeOf,St),Yt=St.create,te=Mt.propertyIsEnumerable,ie=Et.splice,re=Wt?Wt.isConcatSpreadable:r,ae=Wt?Wt.iterator:r,se=Wt?Wt.toStringTag:r,he=function(){try{var t=ho(St,"defineProperty");return t({},"",{}),t}catch(t){}}(),ce=e.clearTimeout!==oe.clearTimeout&&e.clearTimeout,Me=rt&&rt.now!==oe.Date.now&&rt.now,De=e.setTimeout!==oe.setTimeout&&e.setTimeout,cn=kt.ceil,un=kt.floor,dn=St.getOwnPropertySymbols,fn=Vt?Vt.isBuffer:r,pn=e.isFinite,gn=Et.join,mn=tn(St.keys,St),vn=kt.max,yn=kt.min,_n=rt.now,bn=e.parseInt,wn=kt.random,xn=Et.reverse,kn=ho(e,"DataView"),Sn=ho(e,"Map"),Rn=ho(e,"Promise"),Cn=ho(e,"Set"),On=ho(e,"WeakMap"),En=ho(St,"create"),An=On&&new On,Mn={},Tn=Bo(kn),In=Bo(Sn),Pn=Bo(Rn),Fn=Bo(Cn),jn=Bo(On),zn=Wt?Wt.prototype:r,Ln=zn?zn.valueOf:r,Dn=zn?zn.toString:r;function Bn(t){if(ns(t)&&!Ha(t)&&!(t instanceof Nn)){if(t instanceof Un)return t;if(Pt.call(t,"__wrapped__"))return Vo(t)}return new Un(t)}var Vn=function(){function t(){}return function(e){if(!es(e))return{};if(Yt)return Yt(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function Wn(){}function Un(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function Nn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Zn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Gn;++e<n;)this.add(t[e])}function Yn(t){var e=this.__data__=new Hn(t);this.size=e.size}function Kn(t,e){var n=Ha(t),i=!n&&qa(t),r=!n&&!i&&Ka(t),o=!n&&!i&&!r&&cs(t),a=n||i||r||o,s=a?We(t.length,Ct):[],l=s.length;for(var h in t)!e&&!Pt.call(t,h)||a&&("length"==h||r&&("offset"==h||"parent"==h)||o&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||vo(h,l))||s.push(h);return s}function $n(t){var e=t.length;return e?t[Gi(0,e-1)]:r}function Xn(t,e){return Fo(Or(t),ai(e,0,t.length))}function Jn(t){return Fo(Or(t))}function Qn(t,e,n){(n!==r&&!Wa(t[e],n)||n===r&&!(e in t))&&ri(t,e,n)}function ti(t,e,n){var i=t[e];Pt.call(t,e)&&Wa(i,n)&&(n!==r||e in t)||ri(t,e,n)}function ei(t,e){for(var n=t.length;n--;)if(Wa(t[n][0],e))return n;return-1}function ni(t,e,n,i){return ui(t,(function(t,r,o){e(i,t,n(t),o)})),i}function ii(t,e){return t&&Er(e,Is(e),t)}function ri(t,e,n){"__proto__"==e&&he?he(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function oi(t,e){for(var n=-1,o=e.length,a=i(o),s=null==t;++n<o;)a[n]=s?r:Os(t,e[n]);return a}function ai(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function si(t,e,n,i,o,a){var s,l=1&e,h=2&e,c=4&e;if(n&&(s=o?n(t,i,o,a):n(t)),s!==r)return s;if(!es(t))return t;var u=Ha(t);if(u){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Pt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!l)return Or(t,s)}else{var d=fo(t),f=d==b||d==w;if(Ka(t))return wr(t,l);if(d==S||d==g||f&&!o){if(s=h||f?{}:go(t),!l)return h?function(t,e){return Er(t,uo(t),e)}(t,function(t,e){return t&&Er(e,Ps(e),t)}(s,t)):function(t,e){return Er(t,co(t),e)}(t,ii(s,t))}else{if(!Qt[d])return o?t:{};s=function(t,e,n){var i,r=t.constructor;switch(e){case T:return xr(t);case v:case y:return new r(+t);case I:return function(t,e){var n=e?xr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case P:case F:case j:case z:case L:case D:case B:case V:case W:return kr(t,n);case x:return new r;case k:case E:return new r(t);case C:return function(t){var e=new t.constructor(t.source,dt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case O:return new r;case A:return i=t,Ln?St(Ln.call(i)):{}}}(t,d,l)}}a||(a=new Yn);var p=a.get(t);if(p)return p;a.set(t,s),ss(t)?t.forEach((function(i){s.add(si(i,e,n,i,t,a))})):is(t)&&t.forEach((function(i,r){s.set(r,si(i,e,n,r,t,a))}));var m=u?r:(c?h?no:eo:h?Ps:Is)(t);return _e(m||t,(function(i,r){m&&(i=t[r=i]),ti(s,r,si(i,e,n,r,t,a))})),s}function li(t,e,n){var i=n.length;if(null==t)return!i;for(t=St(t);i--;){var o=n[i],a=e[o],s=t[o];if(s===r&&!(o in t)||!a(s))return!1}return!0}function hi(t,e,n){if("function"!=typeof t)throw new Ot(o);return Mo((function(){t.apply(r,n)}),e)}function ci(t,e,n,i){var r=-1,o=ke,a=!0,s=t.length,l=[],h=e.length;if(!s)return l;n&&(e=Re(e,Ne(n))),i?(o=Se,a=!1):e.length>=200&&(o=He,a=!1,e=new Zn(e));t:for(;++r<s;){var c=t[r],u=null==n?c:n(c);if(c=i||0!==c?c:0,a&&u==u){for(var d=h;d--;)if(e[d]===u)continue t;l.push(c)}else o(e,u,i)||l.push(c)}return l}Bn.templateSettings={escape:K,evaluate:$,interpolate:X,variable:"",imports:{_:Bn}},Bn.prototype=Wn.prototype,Bn.prototype.constructor=Bn,Un.prototype=Vn(Wn.prototype),Un.prototype.constructor=Un,Nn.prototype=Vn(Wn.prototype),Nn.prototype.constructor=Nn,qn.prototype.clear=function(){this.__data__=En?En(null):{},this.size=0},qn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},qn.prototype.get=function(t){var e=this.__data__;if(En){var n=e[t];return n===a?r:n}return Pt.call(e,t)?e[t]:r},qn.prototype.has=function(t){var e=this.__data__;return En?e[t]!==r:Pt.call(e,t)},qn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=En&&e===r?a:e,this},Hn.prototype.clear=function(){this.__data__=[],this.size=0},Hn.prototype.delete=function(t){var e=this.__data__,n=ei(e,t);return!(n<0||(n==e.length-1?e.pop():ie.call(e,n,1),--this.size,0))},Hn.prototype.get=function(t){var e=this.__data__,n=ei(e,t);return n<0?r:e[n][1]},Hn.prototype.has=function(t){return ei(this.__data__,t)>-1},Hn.prototype.set=function(t,e){var n=this.__data__,i=ei(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new qn,map:new(Sn||Hn),string:new qn}},Gn.prototype.delete=function(t){var e=so(this,t).delete(t);return this.size-=e?1:0,e},Gn.prototype.get=function(t){return so(this,t).get(t)},Gn.prototype.has=function(t){return so(this,t).has(t)},Gn.prototype.set=function(t,e){var n=so(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},Zn.prototype.add=Zn.prototype.push=function(t){return this.__data__.set(t,a),this},Zn.prototype.has=function(t){return this.__data__.has(t)},Yn.prototype.clear=function(){this.__data__=new Hn,this.size=0},Yn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Yn.prototype.get=function(t){return this.__data__.get(t)},Yn.prototype.has=function(t){return this.__data__.has(t)},Yn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Hn){var i=n.__data__;if(!Sn||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Gn(i)}return n.set(t,e),this.size=n.size,this};var ui=Tr(_i),di=Tr(bi,!0);function fi(t,e){var n=!0;return ui(t,(function(t,i,r){return n=!!e(t,i,r)})),n}function pi(t,e,n){for(var i=-1,o=t.length;++i<o;){var a=t[i],s=e(a);if(null!=s&&(l===r?s==s&&!hs(s):n(s,l)))var l=s,h=a}return h}function gi(t,e){var n=[];return ui(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function mi(t,e,n,i,r){var o=-1,a=t.length;for(n||(n=mo),r||(r=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?mi(s,e-1,n,i,r):Ce(r,s):i||(r[r.length]=s)}return r}var vi=Ir(),yi=Ir(!0);function _i(t,e){return t&&vi(t,e,Is)}function bi(t,e){return t&&yi(t,e,Is)}function wi(t,e){return xe(e,(function(e){return Ja(t[e])}))}function xi(t,e){for(var n=0,i=(e=vr(e,t)).length;null!=t&&n<i;)t=t[Do(e[n++])];return n&&n==i?t:r}function ki(t,e,n){var i=e(t);return Ha(t)?i:Ce(i,n(t))}function Si(t){return null==t?t===r?"[object Undefined]":"[object Null]":se&&se in St(t)?function(t){var e=Pt.call(t,se),n=t[se];try{t[se]=r;var i=!0}catch(t){}var o=zt.call(t);return i&&(e?t[se]=n:delete t[se]),o}(t):function(t){return zt.call(t)}(t)}function Ri(t,e){return t>e}function Ci(t,e){return null!=t&&Pt.call(t,e)}function Oi(t,e){return null!=t&&e in St(t)}function Ei(t,e,n){for(var o=n?Se:ke,a=t[0].length,s=t.length,l=s,h=i(s),c=1/0,u=[];l--;){var d=t[l];l&&e&&(d=Re(d,Ne(e))),c=yn(d.length,c),h[l]=!n&&(e||a>=120&&d.length>=120)?new Zn(l&&d):r}d=t[0];var f=-1,p=h[0];t:for(;++f<a&&u.length<c;){var g=d[f],m=e?e(g):g;if(g=n||0!==g?g:0,!(p?He(p,m):o(u,m,n))){for(l=s;--l;){var v=h[l];if(!(v?He(v,m):o(t[l],m,n)))continue t}p&&p.push(m),u.push(g)}}return u}function Ai(t,e,n){var i=null==(t=Co(t,e=vr(e,t)))?t:t[Do(Xo(e))];return null==i?r:ve(i,t,n)}function Mi(t){return ns(t)&&Si(t)==g}function Ti(t,e,n,i,o){return t===e||(null==t||null==e||!ns(t)&&!ns(e)?t!=t&&e!=e:function(t,e,n,i,o,a){var s=Ha(t),l=Ha(e),h=s?m:fo(t),c=l?m:fo(e),u=(h=h==g?S:h)==S,d=(c=c==g?S:c)==S,f=h==c;if(f&&Ka(t)){if(!Ka(e))return!1;s=!0,u=!1}if(f&&!u)return a||(a=new Yn),s||cs(t)?Qr(t,e,n,i,o,a):function(t,e,n,i,r,o,a){switch(n){case I:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case T:return!(t.byteLength!=e.byteLength||!o(new Ut(t),new Ut(e)));case v:case y:case k:return Wa(+t,+e);case _:return t.name==e.name&&t.message==e.message;case C:case E:return t==e+"";case x:var s=Qe;case O:var l=1&i;if(s||(s=nn),t.size!=e.size&&!l)return!1;var h=a.get(t);if(h)return h==e;i|=2,a.set(t,e);var c=Qr(s(t),s(e),i,r,o,a);return a.delete(t),c;case A:if(Ln)return Ln.call(t)==Ln.call(e)}return!1}(t,e,h,n,i,o,a);if(!(1&n)){var p=u&&Pt.call(t,"__wrapped__"),b=d&&Pt.call(e,"__wrapped__");if(p||b){var w=p?t.value():t,R=b?e.value():e;return a||(a=new Yn),o(w,R,n,i,a)}}return!!f&&(a||(a=new Yn),function(t,e,n,i,o,a){var s=1&n,l=eo(t),h=l.length;if(h!=eo(e).length&&!s)return!1;for(var c=h;c--;){var u=l[c];if(!(s?u in e:Pt.call(e,u)))return!1}var d=a.get(t),f=a.get(e);if(d&&f)return d==e&&f==t;var p=!0;a.set(t,e),a.set(e,t);for(var g=s;++c<h;){var m=t[u=l[c]],v=e[u];if(i)var y=s?i(v,m,u,e,t,a):i(m,v,u,t,e,a);if(!(y===r?m===v||o(m,v,n,i,a):y)){p=!1;break}g||(g="constructor"==u)}if(p&&!g){var _=t.constructor,b=e.constructor;_==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b||(p=!1)}return a.delete(t),a.delete(e),p}(t,e,n,i,o,a))}(t,e,n,i,Ti,o))}function Ii(t,e,n,i){var o=n.length,a=o,s=!i;if(null==t)return!a;for(t=St(t);o--;){var l=n[o];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<a;){var h=(l=n[o])[0],c=t[h],u=l[1];if(s&&l[2]){if(c===r&&!(h in t))return!1}else{var d=new Yn;if(i)var f=i(c,u,h,t,e,d);if(!(f===r?Ti(u,c,3,i,d):f))return!1}}return!0}function Pi(t){return!(!es(t)||(e=t,jt&&jt in e))&&(Ja(t)?Bt:gt).test(Bo(t));var e}function Fi(t){return"function"==typeof t?t:null==t?rl:"object"==typeof t?Ha(t)?Bi(t[0],t[1]):Di(t):fl(t)}function ji(t){if(!xo(t))return mn(t);var e=[];for(var n in St(t))Pt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function zi(t,e){return t<e}function Li(t,e){var n=-1,r=Za(t)?i(t.length):[];return ui(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function Di(t){var e=lo(t);return 1==e.length&&e[0][2]?So(e[0][0],e[0][1]):function(n){return n===t||Ii(n,t,e)}}function Bi(t,e){return _o(t)&&ko(e)?So(Do(t),e):function(n){var i=Os(n,t);return i===r&&i===e?Es(n,t):Ti(e,i,3)}}function Vi(t,e,n,i,o){t!==e&&vi(e,(function(a,s){if(o||(o=new Yn),es(a))!function(t,e,n,i,o,a,s){var l=Eo(t,n),h=Eo(e,n),c=s.get(h);if(c)Qn(t,n,c);else{var u=a?a(l,h,n+"",t,e,s):r,d=u===r;if(d){var f=Ha(h),p=!f&&Ka(h),g=!f&&!p&&cs(h);u=h,f||p||g?Ha(l)?u=l:Ya(l)?u=Or(l):p?(d=!1,u=wr(h,!0)):g?(d=!1,u=kr(h,!0)):u=[]:os(h)||qa(h)?(u=l,qa(l)?u=ys(l):es(l)&&!Ja(l)||(u=go(h))):d=!1}d&&(s.set(h,u),o(u,h,i,a,s),s.delete(h)),Qn(t,n,u)}}(t,e,s,n,Vi,i,o);else{var l=i?i(Eo(t,s),a,s+"",t,e,o):r;l===r&&(l=a),Qn(t,s,l)}}),Ps)}function Wi(t,e){var n=t.length;if(n)return vo(e+=e<0?n:0,n)?t[e]:r}function Ui(t,e,n){e=e.length?Re(e,(function(t){return Ha(t)?function(e){return xi(e,1===t.length?t[0]:t)}:t})):[rl];var i=-1;return e=Re(e,Ne(ao())),function(t,e){var i=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,a=r.length,s=n.length;++i<a;){var l=Sr(r[i],o[i]);if(l)return i>=s?l:l*("desc"==n[i]?-1:1)}return t.index-e.index}(t,e,n)}));i--;)t[i]=t[i].value;return t}(Li(t,(function(t,n,r){return{criteria:Re(e,(function(e){return e(t)})),index:++i,value:t}})))}function Ni(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var a=e[i],s=xi(t,a);n(s,a)&&Xi(o,vr(a,t),s)}return o}function qi(t,e,n,i){var r=i?Fe:Pe,o=-1,a=e.length,s=t;for(t===e&&(e=Or(e)),n&&(s=Re(t,Ne(n)));++o<a;)for(var l=0,h=e[o],c=n?n(h):h;(l=r(s,c,l,i))>-1;)s!==t&&ie.call(s,l,1),ie.call(t,l,1);return t}function Hi(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;vo(r)?ie.call(t,r,1):hr(t,r)}}return t}function Gi(t,e){return t+un(wn()*(e-t+1))}function Zi(t,e){var n="";if(!t||e<1||e>u)return n;do{e%2&&(n+=t),(e=un(e/2))&&(t+=t)}while(e);return n}function Yi(t,e){return To(Ro(t,e,rl),t+"")}function Ki(t){return $n(Ws(t))}function $i(t,e){var n=Ws(t);return Fo(n,ai(e,0,n.length))}function Xi(t,e,n,i){if(!es(t))return t;for(var o=-1,a=(e=vr(e,t)).length,s=a-1,l=t;null!=l&&++o<a;){var h=Do(e[o]),c=n;if("__proto__"===h||"constructor"===h||"prototype"===h)return t;if(o!=s){var u=l[h];(c=i?i(u,h,l):r)===r&&(c=es(u)?u:vo(e[o+1])?[]:{})}ti(l,h,c),l=l[h]}return t}var Ji=An?function(t,e){return An.set(t,e),t}:rl,Qi=he?function(t,e){return he(t,"toString",{configurable:!0,enumerable:!1,value:el(e),writable:!0})}:rl;function tr(t){return Fo(Ws(t))}function er(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=i(o);++r<o;)a[r]=t[r+e];return a}function nr(t,e){var n;return ui(t,(function(t,i,r){return!(n=e(t,i,r))})),!!n}function ir(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;i<r;){var o=i+r>>>1,a=t[o];null!==a&&!hs(a)&&(n?a<=e:a<e)?i=o+1:r=o}return r}return rr(t,e,rl,n)}function rr(t,e,n,i){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!=e,l=null===e,h=hs(e),c=e===r;o<a;){var u=un((o+a)/2),d=n(t[u]),f=d!==r,p=null===d,g=d==d,m=hs(d);if(s)var v=i||g;else v=c?g&&(i||f):l?g&&f&&(i||!p):h?g&&f&&!p&&(i||!m):!p&&!m&&(i?d<=e:d<e);v?o=u+1:a=u}return yn(a,4294967294)}function or(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n],s=e?e(a):a;if(!n||!Wa(s,l)){var l=s;o[r++]=0===a?0:a}}return o}function ar(t){return"number"==typeof t?t:hs(t)?d:+t}function sr(t){if("string"==typeof t)return t;if(Ha(t))return Re(t,sr)+"";if(hs(t))return Dn?Dn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function lr(t,e,n){var i=-1,r=ke,o=t.length,a=!0,s=[],l=s;if(n)a=!1,r=Se;else if(o>=200){var h=e?null:Zr(t);if(h)return nn(h);a=!1,r=He,l=new Zn}else l=e?[]:s;t:for(;++i<o;){var c=t[i],u=e?e(c):c;if(c=n||0!==c?c:0,a&&u==u){for(var d=l.length;d--;)if(l[d]===u)continue t;e&&l.push(u),s.push(c)}else r(l,u,n)||(l!==s&&l.push(u),s.push(c))}return s}function hr(t,e){return null==(t=Co(t,e=vr(e,t)))||delete t[Do(Xo(e))]}function cr(t,e,n,i){return Xi(t,e,n(xi(t,e)),i)}function ur(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?er(t,i?0:o,i?o+1:r):er(t,i?o+1:0,i?r:o)}function dr(t,e){var n=t;return n instanceof Nn&&(n=n.value()),Oe(e,(function(t,e){return e.func.apply(e.thisArg,Ce([t],e.args))}),n)}function fr(t,e,n){var r=t.length;if(r<2)return r?lr(t[0]):[];for(var o=-1,a=i(r);++o<r;)for(var s=t[o],l=-1;++l<r;)l!=o&&(a[o]=ci(a[o]||s,t[l],e,n));return lr(mi(a,1),e,n)}function pr(t,e,n){for(var i=-1,o=t.length,a=e.length,s={};++i<o;){var l=i<a?e[i]:r;n(s,t[i],l)}return s}function gr(t){return Ya(t)?t:[]}function mr(t){return"function"==typeof t?t:rl}function vr(t,e){return Ha(t)?t:_o(t,e)?[t]:Lo(_s(t))}var yr=Yi;function _r(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:er(t,e,n)}var br=ce||function(t){return oe.clearTimeout(t)};function wr(t,e){if(e)return t.slice();var n=t.length,i=Nt?Nt(n):new t.constructor(n);return t.copy(i),i}function xr(t){var e=new t.constructor(t.byteLength);return new Ut(e).set(new Ut(t)),e}function kr(t,e){var n=e?xr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Sr(t,e){if(t!==e){var n=t!==r,i=null===t,o=t==t,a=hs(t),s=e!==r,l=null===e,h=e==e,c=hs(e);if(!l&&!c&&!a&&t>e||a&&s&&h&&!l&&!c||i&&s&&h||!n&&h||!o)return 1;if(!i&&!a&&!c&&t<e||c&&n&&o&&!i&&!a||l&&n&&o||!s&&o||!h)return-1}return 0}function Rr(t,e,n,r){for(var o=-1,a=t.length,s=n.length,l=-1,h=e.length,c=vn(a-s,0),u=i(h+c),d=!r;++l<h;)u[l]=e[l];for(;++o<s;)(d||o<a)&&(u[n[o]]=t[o]);for(;c--;)u[l++]=t[o++];return u}function Cr(t,e,n,r){for(var o=-1,a=t.length,s=-1,l=n.length,h=-1,c=e.length,u=vn(a-l,0),d=i(u+c),f=!r;++o<u;)d[o]=t[o];for(var p=o;++h<c;)d[p+h]=e[h];for(;++s<l;)(f||o<a)&&(d[p+n[s]]=t[o++]);return d}function Or(t,e){var n=-1,r=t.length;for(e||(e=i(r));++n<r;)e[n]=t[n];return e}function Er(t,e,n,i){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var l=e[a],h=i?i(n[l],t[l],l,n,t):r;h===r&&(h=t[l]),o?ri(n,l,h):ti(n,l,h)}return n}function Ar(t,e){return function(n,i){var r=Ha(n)?ye:ni,o=e?e():{};return r(n,t,ao(i,2),o)}}function Mr(t){return Yi((function(e,n){var i=-1,o=n.length,a=o>1?n[o-1]:r,s=o>2?n[2]:r;for(a=t.length>3&&"function"==typeof a?(o--,a):r,s&&yo(n[0],n[1],s)&&(a=o<3?r:a,o=1),e=St(e);++i<o;){var l=n[i];l&&t(e,l,i,a)}return e}))}function Tr(t,e){return function(n,i){if(null==n)return n;if(!Za(n))return t(n,i);for(var r=n.length,o=e?r:-1,a=St(n);(e?o--:++o<r)&&!1!==i(a[o],o,a););return n}}function Ir(t){return function(e,n,i){for(var r=-1,o=St(e),a=i(e),s=a.length;s--;){var l=a[t?s:++r];if(!1===n(o[l],l,o))break}return e}}function Pr(t){return function(e){var n=Je(e=_s(e))?an(e):r,i=n?n[0]:e.charAt(0),o=n?_r(n,1).join(""):e.slice(1);return i[t]()+o}}function Fr(t){return function(e){return Oe(Js(qs(e).replace(qt,"")),t,"")}}function jr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Vn(t.prototype),i=t.apply(n,e);return es(i)?i:n}}function zr(t){return function(e,n,i){var o=St(e);if(!Za(e)){var a=ao(n,3);e=Is(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,i);return s>-1?o[a?e[s]:s]:r}}function Lr(t){return to((function(e){var n=e.length,i=n,a=Un.prototype.thru;for(t&&e.reverse();i--;){var s=e[i];if("function"!=typeof s)throw new Ot(o);if(a&&!l&&"wrapper"==ro(s))var l=new Un([],!0)}for(i=l?i:n;++i<n;){var h=ro(s=e[i]),c="wrapper"==h?io(s):r;l=c&&bo(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[ro(c[0])].apply(l,c[3]):1==s.length&&bo(s)?l[h]():l.thru(s)}return function(){var t=arguments,i=t[0];if(l&&1==t.length&&Ha(i))return l.plant(i).value();for(var r=0,o=n?e[r].apply(this,t):i;++r<n;)o=e[r].call(this,o);return o}}))}function Dr(t,e,n,o,a,s,l,c,u,d){var f=e&h,p=1&e,g=2&e,m=24&e,v=512&e,y=g?r:jr(t);return function r(){for(var h=arguments.length,_=i(h),b=h;b--;)_[b]=arguments[b];if(m)var w=oo(r),x=Ye(_,w);if(o&&(_=Rr(_,o,a,m)),s&&(_=Cr(_,s,l,m)),h-=x,m&&h<d){var k=en(_,w);return Hr(t,e,Dr,r.placeholder,n,_,k,c,u,d-h)}var S=p?n:this,R=g?S[t]:t;return h=_.length,c?_=Oo(_,c):v&&h>1&&_.reverse(),f&&u<h&&(_.length=u),this&&this!==oe&&this instanceof r&&(R=y||jr(R)),R.apply(S,_)}}function Br(t,e){return function(n,i){return function(t,e,n,i){return _i(t,(function(t,r,o){e(i,n(t),r,o)})),i}(n,t,e(i),{})}}function Vr(t,e){return function(n,i){var o;if(n===r&&i===r)return e;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=sr(n),i=sr(i)):(n=ar(n),i=ar(i)),o=t(n,i)}return o}}function Wr(t){return to((function(e){return e=Re(e,Ne(ao())),Yi((function(n){var i=this;return t(e,(function(t){return ve(t,i,n)}))}))}))}function Ur(t,e){var n=(e=e===r?" ":sr(e)).length;if(n<2)return n?Zi(e,t):e;var i=Zi(e,cn(t/on(e)));return Je(e)?_r(an(i),0,t).join(""):i.slice(0,t)}function Nr(t){return function(e,n,o){return o&&"number"!=typeof o&&yo(e,n,o)&&(n=o=r),e=ps(e),n===r?(n=e,e=0):n=ps(n),function(t,e,n,r){for(var o=-1,a=vn(cn((e-t)/(n||1)),0),s=i(a);a--;)s[r?a:++o]=t,t+=n;return s}(e,n,o=o===r?e<n?1:-1:ps(o),t)}}function qr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=vs(e),n=vs(n)),t(e,n)}}function Hr(t,e,n,i,o,a,s,h,c,u){var d=8&e;e|=d?l:64,4&(e&=~(d?64:l))||(e&=-4);var f=[t,e,o,d?a:r,d?s:r,d?r:a,d?r:s,h,c,u],p=n.apply(r,f);return bo(t)&&Ao(p,f),p.placeholder=i,Io(p,t,e)}function Gr(t){var e=kt[t];return function(t,n){if(t=vs(t),(n=null==n?0:yn(gs(n),292))&&pn(t)){var i=(_s(t)+"e").split("e");return+((i=(_s(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var Zr=Cn&&1/nn(new Cn([,-0]))[1]==c?function(t){return new Cn(t)}:hl;function Yr(t){return function(e){var n=fo(e);return n==x?Qe(e):n==O?rn(e):function(t,e){return Re(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Kr(t,e,n,a,c,u,d,f){var p=2&e;if(!p&&"function"!=typeof t)throw new Ot(o);var g=a?a.length:0;if(g||(e&=-97,a=c=r),d=d===r?d:vn(gs(d),0),f=f===r?f:gs(f),g-=c?c.length:0,64&e){var m=a,v=c;a=c=r}var y=p?r:io(t),_=[t,e,n,a,c,m,v,u,d,f];if(y&&function(t,e){var n=t[1],i=e[1],r=n|i,o=r<131,a=i==h&&8==n||i==h&&256==n&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&i&&(t[2]=e[2],r|=1&n?0:4);var l=e[3];if(l){var c=t[3];t[3]=c?Rr(c,l,e[4]):l,t[4]=c?en(t[3],s):e[4]}(l=e[5])&&(c=t[5],t[5]=c?Cr(c,l,e[6]):l,t[6]=c?en(t[5],s):e[6]),(l=e[7])&&(t[7]=l),i&h&&(t[8]=null==t[8]?e[8]:yn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(_,y),t=_[0],e=_[1],n=_[2],a=_[3],c=_[4],!(f=_[9]=_[9]===r?p?0:t.length:vn(_[9]-g,0))&&24&e&&(e&=-25),e&&1!=e)b=8==e||16==e?function(t,e,n){var o=jr(t);return function a(){for(var s=arguments.length,l=i(s),h=s,c=oo(a);h--;)l[h]=arguments[h];var u=s<3&&l[0]!==c&&l[s-1]!==c?[]:en(l,c);return(s-=u.length)<n?Hr(t,e,Dr,a.placeholder,r,l,u,r,r,n-s):ve(this&&this!==oe&&this instanceof a?o:t,this,l)}}(t,e,f):e!=l&&33!=e||c.length?Dr.apply(r,_):function(t,e,n,r){var o=1&e,a=jr(t);return function e(){for(var s=-1,l=arguments.length,h=-1,c=r.length,u=i(c+l),d=this&&this!==oe&&this instanceof e?a:t;++h<c;)u[h]=r[h];for(;l--;)u[h++]=arguments[++s];return ve(d,o?n:this,u)}}(t,e,n,a);else var b=function(t,e,n){var i=1&e,r=jr(t);return function e(){return(this&&this!==oe&&this instanceof e?r:t).apply(i?n:this,arguments)}}(t,e,n);return Io((y?Ji:Ao)(b,_),t,e)}function $r(t,e,n,i){return t===r||Wa(t,Mt[n])&&!Pt.call(i,n)?e:t}function Xr(t,e,n,i,o,a){return es(t)&&es(e)&&(a.set(e,t),Vi(t,e,r,Xr,a),a.delete(e)),t}function Jr(t){return os(t)?r:t}function Qr(t,e,n,i,o,a){var s=1&n,l=t.length,h=e.length;if(l!=h&&!(s&&h>l))return!1;var c=a.get(t),u=a.get(e);if(c&&u)return c==e&&u==t;var d=-1,f=!0,p=2&n?new Zn:r;for(a.set(t,e),a.set(e,t);++d<l;){var g=t[d],m=e[d];if(i)var v=s?i(m,g,d,e,t,a):i(g,m,d,t,e,a);if(v!==r){if(v)continue;f=!1;break}if(p){if(!Ae(e,(function(t,e){if(!He(p,e)&&(g===t||o(g,t,n,i,a)))return p.push(e)}))){f=!1;break}}else if(g!==m&&!o(g,m,n,i,a)){f=!1;break}}return a.delete(t),a.delete(e),f}function to(t){return To(Ro(t,r,Go),t+"")}function eo(t){return ki(t,Is,co)}function no(t){return ki(t,Ps,uo)}var io=An?function(t){return An.get(t)}:hl;function ro(t){for(var e=t.name+"",n=Mn[e],i=Pt.call(Mn,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function oo(t){return(Pt.call(Bn,"placeholder")?Bn:t).placeholder}function ao(){var t=Bn.iteratee||ol;return t=t===ol?Fi:t,arguments.length?t(arguments[0],arguments[1]):t}function so(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function lo(t){for(var e=Is(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,ko(r)]}return e}function ho(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return Pi(n)?n:r}var co=dn?function(t){return null==t?[]:(t=St(t),xe(dn(t),(function(e){return te.call(t,e)})))}:ml,uo=dn?function(t){for(var e=[];t;)Ce(e,co(t)),t=Gt(t);return e}:ml,fo=Si;function po(t,e,n){for(var i=-1,r=(e=vr(e,t)).length,o=!1;++i<r;){var a=Do(e[i]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&ts(r)&&vo(a,r)&&(Ha(t)||qa(t))}function go(t){return"function"!=typeof t.constructor||xo(t)?{}:Vn(Gt(t))}function mo(t){return Ha(t)||qa(t)||!!(re&&t&&t[re])}function vo(t,e){var n=typeof t;return!!(e=null==e?u:e)&&("number"==n||"symbol"!=n&&vt.test(t))&&t>-1&&t%1==0&&t<e}function yo(t,e,n){if(!es(n))return!1;var i=typeof e;return!!("number"==i?Za(n)&&vo(e,n.length):"string"==i&&e in n)&&Wa(n[e],t)}function _o(t,e){if(Ha(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!hs(t))||Q.test(t)||!J.test(t)||null!=e&&t in St(e)}function bo(t){var e=ro(t),n=Bn[e];if("function"!=typeof n||!(e in Nn.prototype))return!1;if(t===n)return!0;var i=io(n);return!!i&&t===i[0]}(kn&&fo(new kn(new ArrayBuffer(1)))!=I||Sn&&fo(new Sn)!=x||Rn&&fo(Rn.resolve())!=R||Cn&&fo(new Cn)!=O||On&&fo(new On)!=M)&&(fo=function(t){var e=Si(t),n=e==S?t.constructor:r,i=n?Bo(n):"";if(i)switch(i){case Tn:return I;case In:return x;case Pn:return R;case Fn:return O;case jn:return M}return e});var wo=Tt?Ja:vl;function xo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Mt)}function ko(t){return t==t&&!es(t)}function So(t,e){return function(n){return null!=n&&n[t]===e&&(e!==r||t in St(n))}}function Ro(t,e,n){return e=vn(e===r?t.length-1:e,0),function(){for(var r=arguments,o=-1,a=vn(r.length-e,0),s=i(a);++o<a;)s[o]=r[e+o];o=-1;for(var l=i(e+1);++o<e;)l[o]=r[o];return l[e]=n(s),ve(t,this,l)}}function Co(t,e){return e.length<2?t:xi(t,er(e,0,-1))}function Oo(t,e){for(var n=t.length,i=yn(e.length,n),o=Or(t);i--;){var a=e[i];t[i]=vo(a,n)?o[a]:r}return t}function Eo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Ao=Po(Ji),Mo=De||function(t,e){return oe.setTimeout(t,e)},To=Po(Qi);function Io(t,e,n){var i=e+"";return To(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return _e(p,(function(n){var i="_."+n[0];e&n[1]&&!ke(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match(at);return e?e[1].split(st):[]}(i),n)))}function Po(t){var e=0,n=0;return function(){var i=_n(),o=16-(i-n);if(n=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(r,arguments)}}function Fo(t,e){var n=-1,i=t.length,o=i-1;for(e=e===r?i:e;++n<e;){var a=Gi(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var jo,zo,Lo=(jo=ja((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,i,r){e.push(i?r.replace(ct,"$1"):n||t)})),e}),(function(t){return 500===zo.size&&zo.clear(),t})),zo=jo.cache,jo);function Do(t){if("string"==typeof t||hs(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Bo(t){if(null!=t){try{return It.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Vo(t){if(t instanceof Nn)return t.clone();var e=new Un(t.__wrapped__,t.__chain__);return e.__actions__=Or(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Wo=Yi((function(t,e){return Ya(t)?ci(t,mi(e,1,Ya,!0)):[]})),Uo=Yi((function(t,e){var n=Xo(e);return Ya(n)&&(n=r),Ya(t)?ci(t,mi(e,1,Ya,!0),ao(n,2)):[]})),No=Yi((function(t,e){var n=Xo(e);return Ya(n)&&(n=r),Ya(t)?ci(t,mi(e,1,Ya,!0),r,n):[]}));function qo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:gs(n);return r<0&&(r=vn(i+r,0)),Ie(t,ao(e,3),r)}function Ho(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return n!==r&&(o=gs(n),o=n<0?vn(i+o,0):yn(o,i-1)),Ie(t,ao(e,3),o,!0)}function Go(t){return null!=t&&t.length?mi(t,1):[]}function Zo(t){return t&&t.length?t[0]:r}var Yo=Yi((function(t){var e=Re(t,gr);return e.length&&e[0]===t[0]?Ei(e):[]})),Ko=Yi((function(t){var e=Xo(t),n=Re(t,gr);return e===Xo(n)?e=r:n.pop(),n.length&&n[0]===t[0]?Ei(n,ao(e,2)):[]})),$o=Yi((function(t){var e=Xo(t),n=Re(t,gr);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?Ei(n,r,e):[]}));function Xo(t){var e=null==t?0:t.length;return e?t[e-1]:r}var Jo=Yi(Qo);function Qo(t,e){return t&&t.length&&e&&e.length?qi(t,e):t}var ta=to((function(t,e){var n=null==t?0:t.length,i=oi(t,e);return Hi(t,Re(e,(function(t){return vo(t,n)?+t:t})).sort(Sr)),i}));function ea(t){return null==t?t:xn.call(t)}var na=Yi((function(t){return lr(mi(t,1,Ya,!0))})),ia=Yi((function(t){var e=Xo(t);return Ya(e)&&(e=r),lr(mi(t,1,Ya,!0),ao(e,2))})),ra=Yi((function(t){var e=Xo(t);return e="function"==typeof e?e:r,lr(mi(t,1,Ya,!0),r,e)}));function oa(t){if(!t||!t.length)return[];var e=0;return t=xe(t,(function(t){if(Ya(t))return e=vn(t.length,e),!0})),We(e,(function(e){return Re(t,Le(e))}))}function aa(t,e){if(!t||!t.length)return[];var n=oa(t);return null==e?n:Re(n,(function(t){return ve(e,r,t)}))}var sa=Yi((function(t,e){return Ya(t)?ci(t,e):[]})),la=Yi((function(t){return fr(xe(t,Ya))})),ha=Yi((function(t){var e=Xo(t);return Ya(e)&&(e=r),fr(xe(t,Ya),ao(e,2))})),ca=Yi((function(t){var e=Xo(t);return e="function"==typeof e?e:r,fr(xe(t,Ya),r,e)})),ua=Yi(oa),da=Yi((function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,aa(t,n)}));function fa(t){var e=Bn(t);return e.__chain__=!0,e}function pa(t,e){return e(t)}var ga=to((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return oi(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Nn&&vo(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:pa,args:[o],thisArg:r}),new Un(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(r),t}))):this.thru(o)})),ma=Ar((function(t,e,n){Pt.call(t,n)?++t[n]:ri(t,n,1)})),va=zr(qo),ya=zr(Ho);function _a(t,e){return(Ha(t)?_e:ui)(t,ao(e,3))}function ba(t,e){return(Ha(t)?be:di)(t,ao(e,3))}var wa=Ar((function(t,e,n){Pt.call(t,n)?t[n].push(e):ri(t,n,[e])})),xa=Yi((function(t,e,n){var r=-1,o="function"==typeof e,a=Za(t)?i(t.length):[];return ui(t,(function(t){a[++r]=o?ve(e,t,n):Ai(t,e,n)})),a})),ka=Ar((function(t,e,n){ri(t,n,e)}));function Sa(t,e){return(Ha(t)?Re:Li)(t,ao(e,3))}var Ra=Ar((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Ca=Yi((function(t,e){if(null==t)return[];var n=e.length;return n>1&&yo(t,e[0],e[1])?e=[]:n>2&&yo(e[0],e[1],e[2])&&(e=[e[0]]),Ui(t,mi(e,1),[])})),Oa=Me||function(){return oe.Date.now()};function Ea(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,Kr(t,h,r,r,r,r,e)}function Aa(t,e){var n;if("function"!=typeof e)throw new Ot(o);return t=gs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var Ma=Yi((function(t,e,n){var i=1;if(n.length){var r=en(n,oo(Ma));i|=l}return Kr(t,i,e,n,r)})),Ta=Yi((function(t,e,n){var i=3;if(n.length){var r=en(n,oo(Ta));i|=l}return Kr(e,i,t,n,r)}));function Ia(t,e,n){var i,a,s,l,h,c,u=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw new Ot(o);function g(e){var n=i,o=a;return i=a=r,u=e,l=t.apply(o,n)}function m(t){return u=t,h=Mo(y,e),d?g(t):l}function v(t){var n=t-c;return c===r||n>=e||n<0||f&&t-u>=s}function y(){var t=Oa();if(v(t))return _(t);h=Mo(y,function(t){var n=e-(t-c);return f?yn(n,s-(t-u)):n}(t))}function _(t){return h=r,p&&i?g(t):(i=a=r,l)}function b(){var t=Oa(),n=v(t);if(i=arguments,a=this,c=t,n){if(h===r)return m(c);if(f)return br(h),h=Mo(y,e),g(c)}return h===r&&(h=Mo(y,e)),l}return e=vs(e)||0,es(n)&&(d=!!n.leading,s=(f="maxWait"in n)?vn(vs(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p),b.cancel=function(){h!==r&&br(h),u=0,i=c=a=h=r},b.flush=function(){return h===r?l:_(Oa())},b}var Pa=Yi((function(t,e){return hi(t,1,e)})),Fa=Yi((function(t,e,n){return hi(t,vs(e)||0,n)}));function ja(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Ot(o);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(ja.Cache||Gn),n}function za(t){if("function"!=typeof t)throw new Ot(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}ja.Cache=Gn;var La=yr((function(t,e){var n=(e=1==e.length&&Ha(e[0])?Re(e[0],Ne(ao())):Re(mi(e,1),Ne(ao()))).length;return Yi((function(i){for(var r=-1,o=yn(i.length,n);++r<o;)i[r]=e[r].call(this,i[r]);return ve(t,this,i)}))})),Da=Yi((function(t,e){var n=en(e,oo(Da));return Kr(t,l,r,e,n)})),Ba=Yi((function(t,e){var n=en(e,oo(Ba));return Kr(t,64,r,e,n)})),Va=to((function(t,e){return Kr(t,256,r,r,r,e)}));function Wa(t,e){return t===e||t!=t&&e!=e}var Ua=qr(Ri),Na=qr((function(t,e){return t>=e})),qa=Mi(function(){return arguments}())?Mi:function(t){return ns(t)&&Pt.call(t,"callee")&&!te.call(t,"callee")},Ha=i.isArray,Ga=ue?Ne(ue):function(t){return ns(t)&&Si(t)==T};function Za(t){return null!=t&&ts(t.length)&&!Ja(t)}function Ya(t){return ns(t)&&Za(t)}var Ka=fn||vl,$a=de?Ne(de):function(t){return ns(t)&&Si(t)==y};function Xa(t){if(!ns(t))return!1;var e=Si(t);return e==_||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!os(t)}function Ja(t){if(!es(t))return!1;var e=Si(t);return e==b||e==w||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Qa(t){return"number"==typeof t&&t==gs(t)}function ts(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=u}function es(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ns(t){return null!=t&&"object"==typeof t}var is=fe?Ne(fe):function(t){return ns(t)&&fo(t)==x};function rs(t){return"number"==typeof t||ns(t)&&Si(t)==k}function os(t){if(!ns(t)||Si(t)!=S)return!1;var e=Gt(t);if(null===e)return!0;var n=Pt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&It.call(n)==Lt}var as=pe?Ne(pe):function(t){return ns(t)&&Si(t)==C},ss=ge?Ne(ge):function(t){return ns(t)&&fo(t)==O};function ls(t){return"string"==typeof t||!Ha(t)&&ns(t)&&Si(t)==E}function hs(t){return"symbol"==typeof t||ns(t)&&Si(t)==A}var cs=me?Ne(me):function(t){return ns(t)&&ts(t.length)&&!!Jt[Si(t)]},us=qr(zi),ds=qr((function(t,e){return t<=e}));function fs(t){if(!t)return[];if(Za(t))return ls(t)?an(t):Or(t);if(ae&&t[ae])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ae]());var e=fo(t);return(e==x?Qe:e==O?nn:Ws)(t)}function ps(t){return t?(t=vs(t))===c||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function gs(t){var e=ps(t),n=e%1;return e==e?n?e-n:e:0}function ms(t){return t?ai(gs(t),0,f):0}function vs(t){if("number"==typeof t)return t;if(hs(t))return d;if(es(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=es(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ue(t);var n=pt.test(t);return n||mt.test(t)?ne(t.slice(2),n?2:8):ft.test(t)?d:+t}function ys(t){return Er(t,Ps(t))}function _s(t){return null==t?"":sr(t)}var bs=Mr((function(t,e){if(xo(e)||Za(e))Er(e,Is(e),t);else for(var n in e)Pt.call(e,n)&&ti(t,n,e[n])})),ws=Mr((function(t,e){Er(e,Ps(e),t)})),xs=Mr((function(t,e,n,i){Er(e,Ps(e),t,i)})),ks=Mr((function(t,e,n,i){Er(e,Is(e),t,i)})),Ss=to(oi),Rs=Yi((function(t,e){t=St(t);var n=-1,i=e.length,o=i>2?e[2]:r;for(o&&yo(e[0],e[1],o)&&(i=1);++n<i;)for(var a=e[n],s=Ps(a),l=-1,h=s.length;++l<h;){var c=s[l],u=t[c];(u===r||Wa(u,Mt[c])&&!Pt.call(t,c))&&(t[c]=a[c])}return t})),Cs=Yi((function(t){return t.push(r,Xr),ve(js,r,t)}));function Os(t,e,n){var i=null==t?r:xi(t,e);return i===r?n:i}function Es(t,e){return null!=t&&po(t,e,Oi)}var As=Br((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=zt.call(e)),t[e]=n}),el(rl)),Ms=Br((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=zt.call(e)),Pt.call(t,e)?t[e].push(n):t[e]=[n]}),ao),Ts=Yi(Ai);function Is(t){return Za(t)?Kn(t):ji(t)}function Ps(t){return Za(t)?Kn(t,!0):function(t){if(!es(t))return function(t){var e=[];if(null!=t)for(var n in St(t))e.push(n);return e}(t);var e=xo(t),n=[];for(var i in t)("constructor"!=i||!e&&Pt.call(t,i))&&n.push(i);return n}(t)}var Fs=Mr((function(t,e,n){Vi(t,e,n)})),js=Mr((function(t,e,n,i){Vi(t,e,n,i)})),zs=to((function(t,e){var n={};if(null==t)return n;var i=!1;e=Re(e,(function(e){return e=vr(e,t),i||(i=e.length>1),e})),Er(t,no(t),n),i&&(n=si(n,7,Jr));for(var r=e.length;r--;)hr(n,e[r]);return n})),Ls=to((function(t,e){return null==t?{}:function(t,e){return Ni(t,e,(function(e,n){return Es(t,n)}))}(t,e)}));function Ds(t,e){if(null==t)return{};var n=Re(no(t),(function(t){return[t]}));return e=ao(e),Ni(t,n,(function(t,n){return e(t,n[0])}))}var Bs=Yr(Is),Vs=Yr(Ps);function Ws(t){return null==t?[]:qe(t,Is(t))}var Us=Fr((function(t,e,n){return e=e.toLowerCase(),t+(n?Ns(e):e)}));function Ns(t){return Xs(_s(t).toLowerCase())}function qs(t){return(t=_s(t))&&t.replace(yt,Ke).replace(Ht,"")}var Hs=Fr((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Gs=Fr((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Zs=Pr("toLowerCase"),Ys=Fr((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Ks=Fr((function(t,e,n){return t+(n?" ":"")+Xs(e)})),$s=Fr((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Xs=Pr("toUpperCase");function Js(t,e,n){return t=_s(t),(e=n?r:e)===r?function(t){return Kt.test(t)}(t)?function(t){return t.match(Zt)||[]}(t):function(t){return t.match(lt)||[]}(t):t.match(e)||[]}var Qs=Yi((function(t,e){try{return ve(t,r,e)}catch(t){return Xa(t)?t:new wt(t)}})),tl=to((function(t,e){return _e(e,(function(e){e=Do(e),ri(t,e,Ma(t[e],t))})),t}));function el(t){return function(){return t}}var nl=Lr(),il=Lr(!0);function rl(t){return t}function ol(t){return Fi("function"==typeof t?t:si(t,1))}var al=Yi((function(t,e){return function(n){return Ai(n,t,e)}})),sl=Yi((function(t,e){return function(n){return Ai(t,n,e)}}));function ll(t,e,n){var i=Is(e),r=wi(e,i);null!=n||es(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=wi(e,Is(e)));var o=!(es(n)&&"chain"in n&&!n.chain),a=Ja(t);return _e(r,(function(n){var i=e[n];t[n]=i,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),r=n.__actions__=Or(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,Ce([this.value()],arguments))})})),t}function hl(){}var cl=Wr(Re),ul=Wr(we),dl=Wr(Ae);function fl(t){return _o(t)?Le(Do(t)):function(t){return function(e){return xi(e,t)}}(t)}var pl=Nr(),gl=Nr(!0);function ml(){return[]}function vl(){return!1}var yl,_l=Vr((function(t,e){return t+e}),0),bl=Gr("ceil"),wl=Vr((function(t,e){return t/e}),1),xl=Gr("floor"),kl=Vr((function(t,e){return t*e}),1),Sl=Gr("round"),Rl=Vr((function(t,e){return t-e}),0);return Bn.after=function(t,e){if("function"!=typeof e)throw new Ot(o);return t=gs(t),function(){if(--t<1)return e.apply(this,arguments)}},Bn.ary=Ea,Bn.assign=bs,Bn.assignIn=ws,Bn.assignInWith=xs,Bn.assignWith=ks,Bn.at=Ss,Bn.before=Aa,Bn.bind=Ma,Bn.bindAll=tl,Bn.bindKey=Ta,Bn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ha(t)?t:[t]},Bn.chain=fa,Bn.chunk=function(t,e,n){e=(n?yo(t,e,n):e===r)?1:vn(gs(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var a=0,s=0,l=i(cn(o/e));a<o;)l[s++]=er(t,a,a+=e);return l},Bn.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r},Bn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=i(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Ce(Ha(n)?Or(n):[n],mi(e,1))},Bn.cond=function(t){var e=null==t?0:t.length,n=ao();return t=e?Re(t,(function(t){if("function"!=typeof t[1])throw new Ot(o);return[n(t[0]),t[1]]})):[],Yi((function(n){for(var i=-1;++i<e;){var r=t[i];if(ve(r[0],this,n))return ve(r[1],this,n)}}))},Bn.conforms=function(t){return function(t){var e=Is(t);return function(n){return li(n,t,e)}}(si(t,1))},Bn.constant=el,Bn.countBy=ma,Bn.create=function(t,e){var n=Vn(t);return null==e?n:ii(n,e)},Bn.curry=function t(e,n,i){var o=Kr(e,8,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},Bn.curryRight=function t(e,n,i){var o=Kr(e,16,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},Bn.debounce=Ia,Bn.defaults=Rs,Bn.defaultsDeep=Cs,Bn.defer=Pa,Bn.delay=Fa,Bn.difference=Wo,Bn.differenceBy=Uo,Bn.differenceWith=No,Bn.drop=function(t,e,n){var i=null==t?0:t.length;return i?er(t,(e=n||e===r?1:gs(e))<0?0:e,i):[]},Bn.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?er(t,0,(e=i-(e=n||e===r?1:gs(e)))<0?0:e):[]},Bn.dropRightWhile=function(t,e){return t&&t.length?ur(t,ao(e,3),!0,!0):[]},Bn.dropWhile=function(t,e){return t&&t.length?ur(t,ao(e,3),!0):[]},Bn.fill=function(t,e,n,i){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&yo(t,e,n)&&(n=0,i=o),function(t,e,n,i){var o=t.length;for((n=gs(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:gs(i))<0&&(i+=o),i=n>i?0:ms(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},Bn.filter=function(t,e){return(Ha(t)?xe:gi)(t,ao(e,3))},Bn.flatMap=function(t,e){return mi(Sa(t,e),1)},Bn.flatMapDeep=function(t,e){return mi(Sa(t,e),c)},Bn.flatMapDepth=function(t,e,n){return n=n===r?1:gs(n),mi(Sa(t,e),n)},Bn.flatten=Go,Bn.flattenDeep=function(t){return null!=t&&t.length?mi(t,c):[]},Bn.flattenDepth=function(t,e){return null!=t&&t.length?mi(t,e=e===r?1:gs(e)):[]},Bn.flip=function(t){return Kr(t,512)},Bn.flow=nl,Bn.flowRight=il,Bn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},Bn.functions=function(t){return null==t?[]:wi(t,Is(t))},Bn.functionsIn=function(t){return null==t?[]:wi(t,Ps(t))},Bn.groupBy=wa,Bn.initial=function(t){return null!=t&&t.length?er(t,0,-1):[]},Bn.intersection=Yo,Bn.intersectionBy=Ko,Bn.intersectionWith=$o,Bn.invert=As,Bn.invertBy=Ms,Bn.invokeMap=xa,Bn.iteratee=ol,Bn.keyBy=ka,Bn.keys=Is,Bn.keysIn=Ps,Bn.map=Sa,Bn.mapKeys=function(t,e){var n={};return e=ao(e,3),_i(t,(function(t,i,r){ri(n,e(t,i,r),t)})),n},Bn.mapValues=function(t,e){var n={};return e=ao(e,3),_i(t,(function(t,i,r){ri(n,i,e(t,i,r))})),n},Bn.matches=function(t){return Di(si(t,1))},Bn.matchesProperty=function(t,e){return Bi(t,si(e,1))},Bn.memoize=ja,Bn.merge=Fs,Bn.mergeWith=js,Bn.method=al,Bn.methodOf=sl,Bn.mixin=ll,Bn.negate=za,Bn.nthArg=function(t){return t=gs(t),Yi((function(e){return Wi(e,t)}))},Bn.omit=zs,Bn.omitBy=function(t,e){return Ds(t,za(ao(e)))},Bn.once=function(t){return Aa(2,t)},Bn.orderBy=function(t,e,n,i){return null==t?[]:(Ha(e)||(e=null==e?[]:[e]),Ha(n=i?r:n)||(n=null==n?[]:[n]),Ui(t,e,n))},Bn.over=cl,Bn.overArgs=La,Bn.overEvery=ul,Bn.overSome=dl,Bn.partial=Da,Bn.partialRight=Ba,Bn.partition=Ra,Bn.pick=Ls,Bn.pickBy=Ds,Bn.property=fl,Bn.propertyOf=function(t){return function(e){return null==t?r:xi(t,e)}},Bn.pull=Jo,Bn.pullAll=Qo,Bn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?qi(t,e,ao(n,2)):t},Bn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?qi(t,e,r,n):t},Bn.pullAt=ta,Bn.range=pl,Bn.rangeRight=gl,Bn.rearg=Va,Bn.reject=function(t,e){return(Ha(t)?xe:gi)(t,za(ao(e,3)))},Bn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=ao(e,3);++i<o;){var a=t[i];e(a,i,t)&&(n.push(a),r.push(i))}return Hi(t,r),n},Bn.rest=function(t,e){if("function"!=typeof t)throw new Ot(o);return Yi(t,e=e===r?e:gs(e))},Bn.reverse=ea,Bn.sampleSize=function(t,e,n){return e=(n?yo(t,e,n):e===r)?1:gs(e),(Ha(t)?Xn:$i)(t,e)},Bn.set=function(t,e,n){return null==t?t:Xi(t,e,n)},Bn.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:Xi(t,e,n,i)},Bn.shuffle=function(t){return(Ha(t)?Jn:tr)(t)},Bn.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&yo(t,e,n)?(e=0,n=i):(e=null==e?0:gs(e),n=n===r?i:gs(n)),er(t,e,n)):[]},Bn.sortBy=Ca,Bn.sortedUniq=function(t){return t&&t.length?or(t):[]},Bn.sortedUniqBy=function(t,e){return t&&t.length?or(t,ao(e,2)):[]},Bn.split=function(t,e,n){return n&&"number"!=typeof n&&yo(t,e,n)&&(e=n=r),(n=n===r?f:n>>>0)?(t=_s(t))&&("string"==typeof e||null!=e&&!as(e))&&!(e=sr(e))&&Je(t)?_r(an(t),0,n):t.split(e,n):[]},Bn.spread=function(t,e){if("function"!=typeof t)throw new Ot(o);return e=null==e?0:vn(gs(e),0),Yi((function(n){var i=n[e],r=_r(n,0,e);return i&&Ce(r,i),ve(t,this,r)}))},Bn.tail=function(t){var e=null==t?0:t.length;return e?er(t,1,e):[]},Bn.take=function(t,e,n){return t&&t.length?er(t,0,(e=n||e===r?1:gs(e))<0?0:e):[]},Bn.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?er(t,(e=i-(e=n||e===r?1:gs(e)))<0?0:e,i):[]},Bn.takeRightWhile=function(t,e){return t&&t.length?ur(t,ao(e,3),!1,!0):[]},Bn.takeWhile=function(t,e){return t&&t.length?ur(t,ao(e,3)):[]},Bn.tap=function(t,e){return e(t),t},Bn.throttle=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new Ot(o);return es(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Ia(t,e,{leading:i,maxWait:e,trailing:r})},Bn.thru=pa,Bn.toArray=fs,Bn.toPairs=Bs,Bn.toPairsIn=Vs,Bn.toPath=function(t){return Ha(t)?Re(t,Do):hs(t)?[t]:Or(Lo(_s(t)))},Bn.toPlainObject=ys,Bn.transform=function(t,e,n){var i=Ha(t),r=i||Ka(t)||cs(t);if(e=ao(e,4),null==n){var o=t&&t.constructor;n=r?i?new o:[]:es(t)&&Ja(o)?Vn(Gt(t)):{}}return(r?_e:_i)(t,(function(t,i,r){return e(n,t,i,r)})),n},Bn.unary=function(t){return Ea(t,1)},Bn.union=na,Bn.unionBy=ia,Bn.unionWith=ra,Bn.uniq=function(t){return t&&t.length?lr(t):[]},Bn.uniqBy=function(t,e){return t&&t.length?lr(t,ao(e,2)):[]},Bn.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?lr(t,r,e):[]},Bn.unset=function(t,e){return null==t||hr(t,e)},Bn.unzip=oa,Bn.unzipWith=aa,Bn.update=function(t,e,n){return null==t?t:cr(t,e,mr(n))},Bn.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:cr(t,e,mr(n),i)},Bn.values=Ws,Bn.valuesIn=function(t){return null==t?[]:qe(t,Ps(t))},Bn.without=sa,Bn.words=Js,Bn.wrap=function(t,e){return Da(mr(e),t)},Bn.xor=la,Bn.xorBy=ha,Bn.xorWith=ca,Bn.zip=ua,Bn.zipObject=function(t,e){return pr(t||[],e||[],ti)},Bn.zipObjectDeep=function(t,e){return pr(t||[],e||[],Xi)},Bn.zipWith=da,Bn.entries=Bs,Bn.entriesIn=Vs,Bn.extend=ws,Bn.extendWith=xs,ll(Bn,Bn),Bn.add=_l,Bn.attempt=Qs,Bn.camelCase=Us,Bn.capitalize=Ns,Bn.ceil=bl,Bn.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=vs(n))==n?n:0),e!==r&&(e=(e=vs(e))==e?e:0),ai(vs(t),e,n)},Bn.clone=function(t){return si(t,4)},Bn.cloneDeep=function(t){return si(t,5)},Bn.cloneDeepWith=function(t,e){return si(t,5,e="function"==typeof e?e:r)},Bn.cloneWith=function(t,e){return si(t,4,e="function"==typeof e?e:r)},Bn.conformsTo=function(t,e){return null==e||li(t,e,Is(e))},Bn.deburr=qs,Bn.defaultTo=function(t,e){return null==t||t!=t?e:t},Bn.divide=wl,Bn.endsWith=function(t,e,n){t=_s(t),e=sr(e);var i=t.length,o=n=n===r?i:ai(gs(n),0,i);return(n-=e.length)>=0&&t.slice(n,o)==e},Bn.eq=Wa,Bn.escape=function(t){return(t=_s(t))&&Y.test(t)?t.replace(G,$e):t},Bn.escapeRegExp=function(t){return(t=_s(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Bn.every=function(t,e,n){var i=Ha(t)?we:fi;return n&&yo(t,e,n)&&(e=r),i(t,ao(e,3))},Bn.find=va,Bn.findIndex=qo,Bn.findKey=function(t,e){return Te(t,ao(e,3),_i)},Bn.findLast=ya,Bn.findLastIndex=Ho,Bn.findLastKey=function(t,e){return Te(t,ao(e,3),bi)},Bn.floor=xl,Bn.forEach=_a,Bn.forEachRight=ba,Bn.forIn=function(t,e){return null==t?t:vi(t,ao(e,3),Ps)},Bn.forInRight=function(t,e){return null==t?t:yi(t,ao(e,3),Ps)},Bn.forOwn=function(t,e){return t&&_i(t,ao(e,3))},Bn.forOwnRight=function(t,e){return t&&bi(t,ao(e,3))},Bn.get=Os,Bn.gt=Ua,Bn.gte=Na,Bn.has=function(t,e){return null!=t&&po(t,e,Ci)},Bn.hasIn=Es,Bn.head=Zo,Bn.identity=rl,Bn.includes=function(t,e,n,i){t=Za(t)?t:Ws(t),n=n&&!i?gs(n):0;var r=t.length;return n<0&&(n=vn(r+n,0)),ls(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&Pe(t,e,n)>-1},Bn.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:gs(n);return r<0&&(r=vn(i+r,0)),Pe(t,e,r)},Bn.inRange=function(t,e,n){return e=ps(e),n===r?(n=e,e=0):n=ps(n),function(t,e,n){return t>=yn(e,n)&&t<vn(e,n)}(t=vs(t),e,n)},Bn.invoke=Ts,Bn.isArguments=qa,Bn.isArray=Ha,Bn.isArrayBuffer=Ga,Bn.isArrayLike=Za,Bn.isArrayLikeObject=Ya,Bn.isBoolean=function(t){return!0===t||!1===t||ns(t)&&Si(t)==v},Bn.isBuffer=Ka,Bn.isDate=$a,Bn.isElement=function(t){return ns(t)&&1===t.nodeType&&!os(t)},Bn.isEmpty=function(t){if(null==t)return!0;if(Za(t)&&(Ha(t)||"string"==typeof t||"function"==typeof t.splice||Ka(t)||cs(t)||qa(t)))return!t.length;var e=fo(t);if(e==x||e==O)return!t.size;if(xo(t))return!ji(t).length;for(var n in t)if(Pt.call(t,n))return!1;return!0},Bn.isEqual=function(t,e){return Ti(t,e)},Bn.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?Ti(t,e,r,n):!!i},Bn.isError=Xa,Bn.isFinite=function(t){return"number"==typeof t&&pn(t)},Bn.isFunction=Ja,Bn.isInteger=Qa,Bn.isLength=ts,Bn.isMap=is,Bn.isMatch=function(t,e){return t===e||Ii(t,e,lo(e))},Bn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,Ii(t,e,lo(e),n)},Bn.isNaN=function(t){return rs(t)&&t!=+t},Bn.isNative=function(t){if(wo(t))throw new wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pi(t)},Bn.isNil=function(t){return null==t},Bn.isNull=function(t){return null===t},Bn.isNumber=rs,Bn.isObject=es,Bn.isObjectLike=ns,Bn.isPlainObject=os,Bn.isRegExp=as,Bn.isSafeInteger=function(t){return Qa(t)&&t>=-9007199254740991&&t<=u},Bn.isSet=ss,Bn.isString=ls,Bn.isSymbol=hs,Bn.isTypedArray=cs,Bn.isUndefined=function(t){return t===r},Bn.isWeakMap=function(t){return ns(t)&&fo(t)==M},Bn.isWeakSet=function(t){return ns(t)&&"[object WeakSet]"==Si(t)},Bn.join=function(t,e){return null==t?"":gn.call(t,e)},Bn.kebabCase=Hs,Bn.last=Xo,Bn.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=gs(n))<0?vn(i+o,0):yn(o,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,o):Ie(t,je,o,!0)},Bn.lowerCase=Gs,Bn.lowerFirst=Zs,Bn.lt=us,Bn.lte=ds,Bn.max=function(t){return t&&t.length?pi(t,rl,Ri):r},Bn.maxBy=function(t,e){return t&&t.length?pi(t,ao(e,2),Ri):r},Bn.mean=function(t){return ze(t,rl)},Bn.meanBy=function(t,e){return ze(t,ao(e,2))},Bn.min=function(t){return t&&t.length?pi(t,rl,zi):r},Bn.minBy=function(t,e){return t&&t.length?pi(t,ao(e,2),zi):r},Bn.stubArray=ml,Bn.stubFalse=vl,Bn.stubObject=function(){return{}},Bn.stubString=function(){return""},Bn.stubTrue=function(){return!0},Bn.multiply=kl,Bn.nth=function(t,e){return t&&t.length?Wi(t,gs(e)):r},Bn.noConflict=function(){return oe._===this&&(oe._=Dt),this},Bn.noop=hl,Bn.now=Oa,Bn.pad=function(t,e,n){t=_s(t);var i=(e=gs(e))?on(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return Ur(un(r),n)+t+Ur(cn(r),n)},Bn.padEnd=function(t,e,n){t=_s(t);var i=(e=gs(e))?on(t):0;return e&&i<e?t+Ur(e-i,n):t},Bn.padStart=function(t,e,n){t=_s(t);var i=(e=gs(e))?on(t):0;return e&&i<e?Ur(e-i,n)+t:t},Bn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),bn(_s(t).replace(it,""),e||0)},Bn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&yo(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=ps(t),e===r?(e=t,t=0):e=ps(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=wn();return yn(t+o*(e-t+ee("1e-"+((o+"").length-1))),e)}return Gi(t,e)},Bn.reduce=function(t,e,n){var i=Ha(t)?Oe:Be,r=arguments.length<3;return i(t,ao(e,4),n,r,ui)},Bn.reduceRight=function(t,e,n){var i=Ha(t)?Ee:Be,r=arguments.length<3;return i(t,ao(e,4),n,r,di)},Bn.repeat=function(t,e,n){return e=(n?yo(t,e,n):e===r)?1:gs(e),Zi(_s(t),e)},Bn.replace=function(){var t=arguments,e=_s(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Bn.result=function(t,e,n){var i=-1,o=(e=vr(e,t)).length;for(o||(o=1,t=r);++i<o;){var a=null==t?r:t[Do(e[i])];a===r&&(i=o,a=n),t=Ja(a)?a.call(t):a}return t},Bn.round=Sl,Bn.runInContext=t,Bn.sample=function(t){return(Ha(t)?$n:Ki)(t)},Bn.size=function(t){if(null==t)return 0;if(Za(t))return ls(t)?on(t):t.length;var e=fo(t);return e==x||e==O?t.size:ji(t).length},Bn.snakeCase=Ys,Bn.some=function(t,e,n){var i=Ha(t)?Ae:nr;return n&&yo(t,e,n)&&(e=r),i(t,ao(e,3))},Bn.sortedIndex=function(t,e){return ir(t,e)},Bn.sortedIndexBy=function(t,e,n){return rr(t,e,ao(n,2))},Bn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=ir(t,e);if(i<n&&Wa(t[i],e))return i}return-1},Bn.sortedLastIndex=function(t,e){return ir(t,e,!0)},Bn.sortedLastIndexBy=function(t,e,n){return rr(t,e,ao(n,2),!0)},Bn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ir(t,e,!0)-1;if(Wa(t[n],e))return n}return-1},Bn.startCase=Ks,Bn.startsWith=function(t,e,n){return t=_s(t),n=null==n?0:ai(gs(n),0,t.length),e=sr(e),t.slice(n,n+e.length)==e},Bn.subtract=Rl,Bn.sum=function(t){return t&&t.length?Ve(t,rl):0},Bn.sumBy=function(t,e){return t&&t.length?Ve(t,ao(e,2)):0},Bn.template=function(t,e,n){var i=Bn.templateSettings;n&&yo(t,e,n)&&(e=r),t=_s(t),e=xs({},e,i,$r);var o,a,s=xs({},e.imports,i.imports,$r),l=Is(s),h=qe(s,l),c=0,u=e.interpolate||_t,d="__p += '",f=Rt((e.escape||_t).source+"|"+u.source+"|"+(u===X?ut:_t).source+"|"+(e.evaluate||_t).source+"|$","g"),p="//# sourceURL="+(Pt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Xt+"]")+"\n";t.replace(f,(function(e,n,i,r,s,l){return i||(i=r),d+=t.slice(c,l).replace(bt,Xe),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+e.length,e})),d+="';\n";var g=Pt.call(e,"variable")&&e.variable;if(g){if(ht.test(g))throw new wt("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(U,""):d).replace(N,"$1").replace(q,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Qs((function(){return xt(l,p+"return "+d).apply(r,h)}));if(m.source=d,Xa(m))throw m;return m},Bn.times=function(t,e){if((t=gs(t))<1||t>u)return[];var n=f,i=yn(t,f);e=ao(e),t-=f;for(var r=We(i,e);++n<t;)e(n);return r},Bn.toFinite=ps,Bn.toInteger=gs,Bn.toLength=ms,Bn.toLower=function(t){return _s(t).toLowerCase()},Bn.toNumber=vs,Bn.toSafeInteger=function(t){return t?ai(gs(t),-9007199254740991,u):0===t?t:0},Bn.toString=_s,Bn.toUpper=function(t){return _s(t).toUpperCase()},Bn.trim=function(t,e,n){if((t=_s(t))&&(n||e===r))return Ue(t);if(!t||!(e=sr(e)))return t;var i=an(t),o=an(e);return _r(i,Ge(i,o),Ze(i,o)+1).join("")},Bn.trimEnd=function(t,e,n){if((t=_s(t))&&(n||e===r))return t.slice(0,sn(t)+1);if(!t||!(e=sr(e)))return t;var i=an(t);return _r(i,0,Ze(i,an(e))+1).join("")},Bn.trimStart=function(t,e,n){if((t=_s(t))&&(n||e===r))return t.replace(it,"");if(!t||!(e=sr(e)))return t;var i=an(t);return _r(i,Ge(i,an(e))).join("")},Bn.truncate=function(t,e){var n=30,i="...";if(es(e)){var o="separator"in e?e.separator:o;n="length"in e?gs(e.length):n,i="omission"in e?sr(e.omission):i}var a=(t=_s(t)).length;if(Je(t)){var s=an(t);a=s.length}if(n>=a)return t;var l=n-on(i);if(l<1)return i;var h=s?_r(s,0,l).join(""):t.slice(0,l);if(o===r)return h+i;if(s&&(l+=h.length-l),as(o)){if(t.slice(l).search(o)){var c,u=h;for(o.global||(o=Rt(o.source,_s(dt.exec(o))+"g")),o.lastIndex=0;c=o.exec(u);)var d=c.index;h=h.slice(0,d===r?l:d)}}else if(t.indexOf(sr(o),l)!=l){var f=h.lastIndexOf(o);f>-1&&(h=h.slice(0,f))}return h+i},Bn.unescape=function(t){return(t=_s(t))&&Z.test(t)?t.replace(H,ln):t},Bn.uniqueId=function(t){var e=++Ft;return _s(t)+e},Bn.upperCase=$s,Bn.upperFirst=Xs,Bn.each=_a,Bn.eachRight=ba,Bn.first=Zo,ll(Bn,(yl={},_i(Bn,(function(t,e){Pt.call(Bn.prototype,e)||(yl[e]=t)})),yl),{chain:!1}),Bn.VERSION="4.17.21",_e(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Bn[t].placeholder=Bn})),_e(["drop","take"],(function(t,e){Nn.prototype[t]=function(n){n=n===r?1:vn(gs(n),0);var i=this.__filtered__&&!e?new Nn(this):this.clone();return i.__filtered__?i.__takeCount__=yn(n,i.__takeCount__):i.__views__.push({size:yn(n,f),type:t+(i.__dir__<0?"Right":"")}),i},Nn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),_e(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=1==n||3==n;Nn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ao(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),_e(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Nn.prototype[t]=function(){return this[n](1).value()[0]}})),_e(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Nn.prototype[t]=function(){return this.__filtered__?new Nn(this):this[n](1)}})),Nn.prototype.compact=function(){return this.filter(rl)},Nn.prototype.find=function(t){return this.filter(t).head()},Nn.prototype.findLast=function(t){return this.reverse().find(t)},Nn.prototype.invokeMap=Yi((function(t,e){return"function"==typeof t?new Nn(this):this.map((function(n){return Ai(n,t,e)}))})),Nn.prototype.reject=function(t){return this.filter(za(ao(t)))},Nn.prototype.slice=function(t,e){t=gs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Nn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=gs(e))<0?n.dropRight(-e):n.take(e-t)),n)},Nn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Nn.prototype.toArray=function(){return this.take(f)},_i(Nn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=Bn[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);o&&(Bn.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,l=e instanceof Nn,h=s[0],c=l||Ha(e),u=function(t){var e=o.apply(Bn,Ce([t],s));return i&&d?e[0]:e};c&&n&&"function"==typeof h&&1!=h.length&&(l=c=!1);var d=this.__chain__,f=!!this.__actions__.length,p=a&&!d,g=l&&!f;if(!a&&c){e=g?e:new Nn(this);var m=t.apply(e,s);return m.__actions__.push({func:pa,args:[u],thisArg:r}),new Un(m,d)}return p&&g?t.apply(this,s):(m=this.thru(u),p?i?m.value()[0]:m.value():m)})})),_e(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Et[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);Bn.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(Ha(r)?r:[],t)}return this[n]((function(n){return e.apply(Ha(n)?n:[],t)}))}})),_i(Nn.prototype,(function(t,e){var n=Bn[e];if(n){var i=n.name+"";Pt.call(Mn,i)||(Mn[i]=[]),Mn[i].push({name:e,func:n})}})),Mn[Dr(r,2).name]=[{name:"wrapper",func:r}],Nn.prototype.clone=function(){var t=new Nn(this.__wrapped__);return t.__actions__=Or(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Or(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Or(this.__views__),t},Nn.prototype.reverse=function(){if(this.__filtered__){var t=new Nn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Nn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ha(t),i=e<0,r=n?t.length:0,o=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=yn(e,t+a);break;case"takeRight":t=vn(t,e-a)}}return{start:t,end:e}}(0,r,this.__views__),a=o.start,s=o.end,l=s-a,h=i?s:a-1,c=this.__iteratees__,u=c.length,d=0,f=yn(l,this.__takeCount__);if(!n||!i&&r==l&&f==l)return dr(t,this.__actions__);var p=[];t:for(;l--&&d<f;){for(var g=-1,m=t[h+=e];++g<u;){var v=c[g],y=v.iteratee,_=v.type,b=y(m);if(2==_)m=b;else if(!b){if(1==_)continue t;break t}}p[d++]=m}return p},Bn.prototype.at=ga,Bn.prototype.chain=function(){return fa(this)},Bn.prototype.commit=function(){return new Un(this.value(),this.__chain__)},Bn.prototype.next=function(){this.__values__===r&&(this.__values__=fs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},Bn.prototype.plant=function(t){for(var e,n=this;n instanceof Wn;){var i=Vo(n);i.__index__=0,i.__values__=r,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e},Bn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Nn){var e=t;return this.__actions__.length&&(e=new Nn(this)),(e=e.reverse()).__actions__.push({func:pa,args:[ea],thisArg:r}),new Un(e,this.__chain__)}return this.thru(ea)},Bn.prototype.toJSON=Bn.prototype.valueOf=Bn.prototype.value=function(){return dr(this.__wrapped__,this.__actions__)},Bn.prototype.first=Bn.prototype.head,ae&&(Bn.prototype[ae]=function(){return this}),Bn}();oe._=hn,(i=function(){return hn}.call(e,n,e,t))===r||(t.exports=i)}.call(this)},57460:function(t,e){var n,i;void 0===(i="function"==typeof(n=function t(){"use strict";var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},n=!e.document&&!!e.postMessage,i=n&&/blob:/i.test((e.location||{}).protocol),r={},o=0,a={parse:function(n,i){var s=(i=i||{}).dynamicTyping||!1;if(w(s)&&(i.dynamicTypingFunction=s,s={}),i.dynamicTyping=s,i.transform=!!w(i.transform)&&i.transform,i.worker&&a.WORKERS_SUPPORTED){var l=function(){if(!a.WORKERS_SUPPORTED)return!1;var n,i,s=(n=e.URL||e.webkitURL||null,i=t.toString(),a.BLOB_URL||(a.BLOB_URL=n.createObjectURL(new Blob(["(",i,")();"],{type:"text/javascript"})))),l=new e.Worker(s);return l.onmessage=m,l.id=o++,r[l.id]=l}();return l.userStep=i.step,l.userChunk=i.chunk,l.userComplete=i.complete,l.userError=i.error,i.step=w(i.step),i.chunk=w(i.chunk),i.complete=w(i.complete),i.error=w(i.error),delete i.worker,void l.postMessage({input:n,config:i,workerId:l.id})}var f=null;return a.NODE_STREAM_INPUT,"string"==typeof n?f=i.download?new h(i):new u(i):!0===n.readable&&w(n.read)&&w(n.on)?f=new d(i):(e.File&&n instanceof File||n instanceof Object)&&(f=new c(i)),f.stream(n)},unparse:function(t,e){var n=!1,i=!0,r=",",o="\r\n",s='"',l=s+s,h=!1,c=null,u=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||a.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(r=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(n=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(h=e.skipEmptyLines),"string"==typeof e.newline&&(o=e.newline),"string"==typeof e.quoteChar&&(s=e.quoteChar),"boolean"==typeof e.header&&(i=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");c=e.columns}void 0!==e.escapeChar&&(l=e.escapeChar+s),"boolean"==typeof e.escapeFormulae&&(u=e.escapeFormulae)}}();var d=new RegExp(p(s),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return f(null,t,h);if("object"==typeof t[0])return f(c||Object.keys(t[0]),t,h)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==typeof t.data[0]?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),f(t.fields||[],t.data||[],h);throw new Error("Unable to serialize unrecognized input");function f(t,e,n){var a="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var s=Array.isArray(t)&&0<t.length,l=!Array.isArray(e[0]);if(s&&i){for(var h=0;h<t.length;h++)0<h&&(a+=r),a+=g(t[h],h);0<e.length&&(a+=o)}for(var c=0;c<e.length;c++){var u=s?t.length:e[c].length,d=!1,f=s?0===Object.keys(e[c]).length:0===e[c].length;if(n&&!s&&(d="greedy"===n?""===e[c].join("").trim():1===e[c].length&&0===e[c][0].length),"greedy"===n&&s){for(var p=[],m=0;m<u;m++){var v=l?t[m]:m;p.push(e[c][v])}d=""===p.join("").trim()}if(!d){for(var y=0;y<u;y++){0<y&&!f&&(a+=r);var _=s&&l?t[y]:y;a+=g(e[c][_],y)}c<e.length-1&&(!n||0<u&&!f)&&(a+=o)}}return a}function g(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);!0===u&&"string"==typeof t&&null!==t.match(/^[=+\-@].*$/)&&(t="'"+t);var i=t.toString().replace(d,l);return"boolean"==typeof n&&n||"function"==typeof n&&n(t,e)||Array.isArray(n)&&n[e]||function(t,e){for(var n=0;n<e.length;n++)if(-1<t.indexOf(e[n]))return!0;return!1}(i,a.BAD_DELIMITERS)||-1<i.indexOf(r)||" "===i.charAt(0)||" "===i.charAt(i.length-1)?s+i+s:i}}};if(a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\ufeff",a.BAD_DELIMITERS=["\r","\n",'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!n&&!!e.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=g,a.ParserHandle=f,a.NetworkStreamer=h,a.FileStreamer=c,a.StringStreamer=u,a.ReadableStreamStreamer=d,e.jQuery){var s=e.jQuery;s.fn.parse=function(t){var n=t.config||{},i=[];return this.each((function(t){if("INPUT"!==s(this).prop("tagName").toUpperCase()||"file"!==s(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0===this.files.length)return!0;for(var r=0;r<this.files.length;r++)i.push({file:this.files[r],inputElem:this,instanceConfig:s.extend({},n)})})),r(),this;function r(){if(0!==i.length){var e,n,r,l=i[0];if(w(t.before)){var h=t.before(l.file,l.inputElem);if("object"==typeof h){if("abort"===h.action)return"AbortError",e=l.file,n=l.inputElem,r=h.reason,void(w(t.error)&&t.error({name:"AbortError"},e,n,r));if("skip"===h.action)return void o();"object"==typeof h.config&&(l.instanceConfig=s.extend(l.instanceConfig,h.config))}else if("skip"===h)return void o()}var c=l.instanceConfig.complete;l.instanceConfig.complete=function(t){w(c)&&c(t,l.file,l.inputElem),o()},a.parse(l.file,l.instanceConfig)}else w(t.complete)&&t.complete()}function o(){i.splice(0,1),r()}}}function l(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=_(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new f(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,n){if(this.isFirstChunk&&w(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(t);void 0!==r&&(t=r)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+t;this._partialLine="";var s=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=s.meta.cursor;this._finished||(this._partialLine=o.substring(l-this._baseIndex),this._baseIndex=l),s&&s.data&&(this._rowCount+=s.data.length);var h=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(i)e.postMessage({results:s,workerId:a.WORKER_ID,finished:h});else if(w(this._config.chunk)&&!n){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);s=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),this._completed||!h||!w(this._config.complete)||s&&s.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),h||s&&s.meta.paused||this._nextChunk(),s}this._halted=!0},this._sendError=function(t){w(this._config.error)?this._config.error(t):i&&this._config.error&&e.postMessage({workerId:a.WORKER_ID,error:t,finished:!1})}}function h(t){var e;(t=t||{}).chunkSize||(t.chunkSize=a.RemoteChunkSize),l.call(this,t),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),n||(e.onload=b(this._chunkLoaded,this),e.onerror=b(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var i in t)e.setRequestHeader(i,t[i])}if(this._config.chunkSize){var r=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+r)}try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}n&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substring(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){var n=e.statusText||t;this._sendError(new Error(n))}}function c(t){var e,n;(t=t||{}).chunkSize||(t.chunkSize=a.LocalChunkSize),l.call(this,t);var i="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,i?((e=new FileReader).onload=b(this._chunkLoaded,this),e.onerror=b(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var r=Math.min(this._start+this._config.chunkSize,this._input.size);t=n.call(t,this._start,r)}var o=e.readAsText(t,this._config.encoding);i||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function u(t){var e;l.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,n=this._config.chunkSize;return n?(t=e.substring(0,n),e=e.substring(n)):(t=e,e=""),this._finished=!e,this.parseChunk(t)}}}function d(t){l.call(this,t=t||{});var e=[],n=!0,i=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){i&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):n=!0},this._streamData=b((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=b((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=b((function(){this._streamCleanUp(),i=!0,this._streamData("")}),this),this._streamCleanUp=b((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function f(t){var e,n,i,r=Math.pow(2,53),o=-r,s=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,l=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,h=this,c=0,u=0,d=!1,f=!1,m=[],v={data:[],errors:[],meta:{}};if(w(t.step)){var y=t.step;t.step=function(e){if(v=e,k())x();else{if(x(),0===v.data.length)return;c+=e.data.length,t.preview&&c>t.preview?n.abort():(v.data=v.data[0],y(v,h))}}}function b(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function x(){if(v&&i&&(R("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),i=!1),t.skipEmptyLines)for(var e=0;e<v.data.length;e++)b(v.data[e])&&v.data.splice(e--,1);return k()&&function(){if(v)if(Array.isArray(v.data[0])){for(var e=0;k()&&e<v.data.length;e++)v.data[e].forEach(n);v.data.splice(0,1)}else v.data.forEach(n);function n(e,n){w(t.transformHeader)&&(e=t.transformHeader(e,n)),m.push(e)}}(),function(){if(!v||!t.header&&!t.dynamicTyping&&!t.transform)return v;function e(e,n){var i,r=t.header?{}:[];for(i=0;i<e.length;i++){var o=i,a=e[i];t.header&&(o=i>=m.length?"__parsed_extra":m[i]),t.transform&&(a=t.transform(a,o)),a=S(o,a),"__parsed_extra"===o?(r[o]=r[o]||[],r[o].push(a)):r[o]=a}return t.header&&(i>m.length?R("FieldMismatch","TooManyFields","Too many fields: expected "+m.length+" fields but parsed "+i,u+n):i<m.length&&R("FieldMismatch","TooFewFields","Too few fields: expected "+m.length+" fields but parsed "+i,u+n)),r}var n=1;return!v.data.length||Array.isArray(v.data[0])?(v.data=v.data.map(e),n=v.data.length):v.data=e(v.data,0),t.header&&v.meta&&(v.meta.fields=m),u+=n,v}()}function k(){return t.header&&0===m.length}function S(e,n){return i=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[i]&&(t.dynamicTyping[i]=t.dynamicTypingFunction(i)),!0===(t.dynamicTyping[i]||t.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(t){if(s.test(t)){var e=parseFloat(t);if(o<e&&e<r)return!0}return!1}(n)?parseFloat(n):l.test(n)?new Date(n):""===n?null:n):n;var i}function R(t,e,n,i){var r={type:t,code:e,message:n};void 0!==i&&(r.row=i),v.errors.push(r)}this.parse=function(r,o,s){var l=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substring(0,1048576);var n=new RegExp(p(e)+"([^]*?)"+p(e),"gm"),i=(t=t.replace(n,"")).split("\r"),r=t.split("\n"),o=1<r.length&&r[0].length<i[0].length;if(1===i.length||o)return"\n";for(var a=0,s=0;s<i.length;s++)"\n"===i[s][0]&&a++;return a>=i.length/2?"\r\n":"\r"}(r,l)),i=!1,t.delimiter)w(t.delimiter)&&(t.delimiter=t.delimiter(r),v.meta.delimiter=t.delimiter);else{var h=function(e,n,i,r,o){var s,l,h,c;o=o||[",","\t","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var u=0;u<o.length;u++){var d=o[u],f=0,p=0,m=0;h=void 0;for(var v=new g({comments:r,delimiter:d,newline:n,preview:10}).parse(e),y=0;y<v.data.length;y++)if(i&&b(v.data[y]))m++;else{var _=v.data[y].length;p+=_,void 0!==h?0<_&&(f+=Math.abs(_-h),h=_):h=_}0<v.data.length&&(p/=v.data.length-m),(void 0===l||f<=l)&&(void 0===c||c<p)&&1.99<p&&(l=f,s=d,c=p)}return{successful:!!(t.delimiter=s),bestDelimiter:s}}(r,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);h.successful?t.delimiter=h.bestDelimiter:(i=!0,t.delimiter=a.DefaultDelimiter),v.meta.delimiter=t.delimiter}var c=_(t);return t.preview&&t.header&&c.preview++,e=r,n=new g(c),v=n.parse(e,o,s),x(),d?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,n.abort(),e=w(t.chunk)?"":e.substring(n.getCharIndex())},this.resume=function(){h.streamer._halted?(d=!1,h.streamer.parseChunk(e,!0)):setTimeout(h.resume,3)},this.aborted=function(){return f},this.abort=function(){f=!0,n.abort(),v.meta.aborted=!0,w(t.complete)&&t.complete(v),e=""}}function p(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(t){var e,n=(t=t||{}).delimiter,i=t.newline,r=t.comments,o=t.step,s=t.preview,l=t.fastMode,h=e=void 0===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(h=t.escapeChar),("string"!=typeof n||-1<a.BAD_DELIMITERS.indexOf(n))&&(n=","),r===n)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<a.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==i&&"\r"!==i&&"\r\n"!==i&&(i="\n");var c=0,u=!1;this.parse=function(t,a,d){if("string"!=typeof t)throw new Error("Input must be a string");var f=t.length,g=n.length,m=i.length,v=r.length,y=w(o),_=[],b=[],x=[],k=c=0;if(!t)return z();if(l||!1!==l&&-1===t.indexOf(e)){for(var S=t.split(i),R=0;R<S.length;R++){if(x=S[R],c+=x.length,R!==S.length-1)c+=i.length;else if(d)return z();if(!r||x.substring(0,v)!==r){if(y){if(_=[],I(x.split(n)),L(),u)return z()}else I(x.split(n));if(s&&s<=R)return _=_.slice(0,s),z(!0)}}return z()}for(var C=t.indexOf(n,c),O=t.indexOf(i,c),E=new RegExp(p(h)+p(e),"g"),A=t.indexOf(e,c);;)if(t[c]!==e)if(r&&0===x.length&&t.substring(c,c+v)===r){if(-1===O)return z();c=O+m,O=t.indexOf(i,c),C=t.indexOf(n,c)}else if(-1!==C&&(C<O||-1===O))x.push(t.substring(c,C)),c=C+g,C=t.indexOf(n,c);else{if(-1===O)break;if(x.push(t.substring(c,O)),j(O+m),y&&(L(),u))return z();if(s&&_.length>=s)return z(!0)}else for(A=c,c++;;){if(-1===(A=t.indexOf(e,A+1)))return d||b.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:_.length,index:c}),F();if(A===f-1)return F(t.substring(c,A).replace(E,e));if(e!==h||t[A+1]!==h){if(e===h||0===A||t[A-1]!==h){-1!==C&&C<A+1&&(C=t.indexOf(n,A+1)),-1!==O&&O<A+1&&(O=t.indexOf(i,A+1));var M=P(-1===O?C:Math.min(C,O));if(t[A+1+M]===n){x.push(t.substring(c,A).replace(E,e)),t[c=A+1+M+g]!==e&&(A=t.indexOf(e,c)),C=t.indexOf(n,c),O=t.indexOf(i,c);break}var T=P(O);if(t.substring(A+1+T,A+1+T+m)===i){if(x.push(t.substring(c,A).replace(E,e)),j(A+1+T+m),C=t.indexOf(n,c),A=t.indexOf(e,c),y&&(L(),u))return z();if(s&&_.length>=s)return z(!0);break}b.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:_.length,index:c}),A++}}else A++}return F();function I(t){_.push(t),k=c}function P(e){var n=0;if(-1!==e){var i=t.substring(A+1,e);i&&""===i.trim()&&(n=i.length)}return n}function F(e){return d||(void 0===e&&(e=t.substring(c)),x.push(e),c=f,I(x),y&&L()),z()}function j(e){c=e,I(x),x=[],O=t.indexOf(i,c)}function z(t){return{data:_,errors:b,meta:{delimiter:n,linebreak:i,aborted:u,truncated:!!t,cursor:k+(a||0)}}}function L(){o(z()),_=[],b=[]}},this.abort=function(){u=!0},this.getCharIndex=function(){return c}}function m(t){var e=t.data,n=r[e.workerId],i=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){i=!0,v(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(w(n.userStep)){for(var a=0;a<e.results.data.length&&(n.userStep({data:e.results.data[a],errors:e.results.errors,meta:e.results.meta},o),!i);a++);delete e.results}else w(n.userChunk)&&(n.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!i&&v(e.workerId,e.results)}function v(t,e){var n=r[t];w(n.userComplete)&&n.userComplete(e),n.terminate(),delete r[t]}function y(){throw new Error("Not implemented.")}function _(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var n in t)e[n]=_(t[n]);return e}function b(t,e){return function(){t.apply(e,arguments)}}function w(t){return"function"==typeof t}return i&&(e.onmessage=function(t){var n=t.data;if(void 0===a.WORKER_ID&&n&&(a.WORKER_ID=n.workerId),"string"==typeof n.input)e.postMessage({workerId:a.WORKER_ID,results:a.parse(n.input,n.config),finished:!0});else if(e.File&&n.input instanceof File||n.input instanceof Object){var i=a.parse(n.input,n.config);i&&e.postMessage({workerId:a.WORKER_ID,results:i,finished:!0})}}),(h.prototype=Object.create(l.prototype)).constructor=h,(c.prototype=Object.create(l.prototype)).constructor=c,(u.prototype=Object.create(u.prototype)).constructor=u,(d.prototype=Object.create(l.prototype)).constructor=d,a})?n.apply(e,[]):n)||(t.exports=i)},86910:function(e){"use strict";e.exports=t}},n={};function i(t){var r=n[t];if(void 0!==r)return r.exports;var o=n[t]={id:t,loaded:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,{a:e}),e},i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t};var r={};return function(){"use strict";i.d(r,{default:function(){return er}});var t=i(86910),e=[{weight:0,type:"textfield",input:!0,key:"label",label:"Label",placeholder:"Field Label",tooltip:"The label for this field.",validate:{required:!0}},{key:"multiple",ignore:!0},{key:"defaultValue",ignore:!0},{key:"dbIndex",ignore:!0},{key:"allowCalculateOverride",ignore:!0},{key:"customDefaultValuePanel",ignore:!0},{key:"calculateValuePanel",ignore:!0}],n=[{type:"select",input:!0,weight:0,tooltip:"The source to get the data. You can fetch from a URL or use javascript to get the value.",key:"dataSrc",defaultValue:"url",label:"Data Source Type",dataSrc:"values",data:{values:[{label:"URL",value:"url"},{label:"IndexedDB",value:"indexeddb"}]}},{type:"checkbox",input:!0,weight:9,key:"indexeddb.fromExisting",label:"Choose from existing databases?",defaultValue:!1,tooltip:"Check it if you want to select an existing database.",conditional:{json:{in:[{var:"data.dataSrc"},["indexeddb"]]}}},{type:"textfield",weight:10,input:!0,key:"indexeddb.database",label:"Database name",forceOverride:!0,tooltip:"The name of the indexeddb database.",conditional:{json:{and:[{in:[{var:"data.dataSrc"},["indexeddb"]]},{"!==":[{var:"data.indexeddb.fromExisting"},!0]}]}}},{type:"textfield",input:!0,key:"indexeddb.table",label:"Table name",forceOverride:!0,weight:16,tooltip:"The name of table in the indexeddb database.",conditional:{json:{and:[{in:[{var:"data.dataSrc"},["indexeddb"]]},{"!==":[{var:"data.indexeddb.fromExisting"},!0]}]}}},{type:"select",input:!0,key:"indexeddb.database",label:"Existing Database name",weight:10,tooltip:"The name of the existing indexeddb database.",dataSrc:"custom",valueProperty:"value",skipMerge:!0,data:{custom:function(t){return window.indexedDB?window.indexedDB.databases().then((function(t){return t.map((function(t){var e=t.name;return{value:e,label:e}}))})):(window.alert("Your browser doesn't support current version of indexedDB"),[])}},conditional:{json:{"===":[{var:"data.indexeddb.fromExisting"},!0]}}},{type:"select",input:!0,key:"indexeddb.table",label:"Existing Table name",refreshOn:"indexeddb.database",clearOnRefresh:!0,weight:16,tooltip:"The name of an existing table in the indexeddb database.",dataSrc:"custom",valueProperty:"value",skipMerge:!0,data:{custom:function(t){if(!window.indexedDB)return window.alert("Your browser doesn't support current version of indexedDB"),[];var e=t.data.indexeddb.database;return e?new Promise((function(t){var n=window.indexedDB.open(e);n.onsuccess=function(e){var n=e.target.result.objectStoreNames;if(n.length){var i=Array.from(n).map((function(t){return{value:t,label:t}}));t(i)}else t([])},n.onerror=function(){return t([])}})):[]}},conditional:{json:{"===":[{var:"data.indexeddb.fromExisting"},!0]}}},{type:"textfield",input:!0,key:"fetch.url",weight:10,label:"Data Source URL",placeholder:"Data Source URL",tooltip:"A URL that returns data. You can interpolate form data using curly bracket notation.",clearOnHide:!0,conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"select",input:!0,label:"Method",key:"fetch.method",clearOnHide:!0,tooltip:"The HTTP Request method to use when making the request.",defaultValue:"get",weight:11,template:"<span>{{ item.label }}</span>",dataSrc:"values",data:{values:[{label:"Get",value:"get"},{label:"Post",value:"post"}]},conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"datagrid",input:!0,label:"Request Headers",key:"fetch.headers",tooltip:"Set any headers that should be sent along with the request to the url. This is useful for authentication.",weight:12,components:[{label:"Key",key:"key",input:!0,type:"textfield"},{label:"Value",key:"value",input:!0,type:"textfield"}],clearOnHide:!0,conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"panel",title:"Transform data",theme:"default",collapsible:!0,collapsed:!0,key:"specifyMapFunction",weight:1e3,tooltip:"Write custom code to transform DataSource data.",components:[{type:"htmlelement",tag:"div",content:'<p>The following variables are available in all scripts.</p><table class="table table-bordered table-condensed table-striped"><tr><th>form</th><td>The complete form JSON object</td></tr><tr><th>submission</th><td>The complete submission object.</td></tr><tr><th>data</th><td>The complete submission data object.</td></tr><tr><th>responseData</th><td>The data object form response.</td></tr><tr><th>row</th><td>Contextual "row" data, used within DataGrid, EditGrid, and Container components</td></tr><tr><th>component</th><td>The current component JSON</td></tr><tr><th>instance</th><td>The current component instance.</td></tr><tr><th>value</th><td>The current value of the component.</td></tr><tr><th>moment</th><td>The moment.js library for date manipulation.</td></tr><tr><th>_</th><td>An instance of <a href="https://lodash.com/docs/" target="_blank">Lodash</a>.</td></tr><tr><th>utils</th><td>An instance of the <a href="http://formio.github.io/formio.js/docs/identifiers.html#utils" target="_blank">FormioUtils</a> object.</td></tr><tr><th>util</th><td>An alias for "utils".</td></tr></table><br/>'},{type:"textarea",key:"fetch.mapFunction",rows:5,editor:"ace",hideLabel:!0,input:!0,placeholder:"value = responseData.map(i => i.title);"},{type:"htmlelement",tag:"div",content:"<p>Enter custom javascript code.</p><p><h4>Example:</h4><pre>value = responseData.map(i => i.title);</pre></p>"}]},{type:"checkbox",input:!0,key:"fetch.forwardHeaders",label:"Forward Headers",tooltip:"Check this if you would like to forward the headers passed to the server to the fetch endpoint.",clearOnHide:!0,conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"checkbox",input:!0,weight:26,key:"fetch.authenticate",label:"Form.io Authentication",tooltip:"Check this if you would like to pass Form.io Authentication headers with the request.",clearOnHide:!0,conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"panel",title:"POST Body Specification",theme:"default",collapsible:!0,collapsed:!0,key:"specifyPostBodyPanel",weight:1e3,tooltip:"Write custom code to specify POST Body.",conditional:{json:{and:[{"===":[{var:"data.dataSrc"},"url"]},{"===":[{var:"data.fetch.method"},"post"]}]}},components:[{type:"htmlelement",tag:"div",content:'<p>The following variables are available in all scripts.</p><table class="table table-bordered table-condensed table-striped"><tr><th>form</th><td>The complete form JSON object</td></tr><tr><th>submission</th><td>The complete submission object.</td></tr><tr><th>data</th><td>The complete submission data object.</td></tr><tr><th>row</th><td>Contextual "row" data, used within DataGrid, EditGrid, and Container components</td></tr><tr><th>component</th><td>The current component JSON</td></tr><tr><th>instance</th><td>The current component instance.</td></tr><tr><th>value</th><td>The current value of the component.</td></tr><tr><th>moment</th><td>The moment.js library for date manipulation.</td></tr><tr><th>_</th><td>An instance of <a href="https://lodash.com/docs/" target="_blank">Lodash</a>.</td></tr><tr><th>utils</th><td>An instance of the <a href="http://formio.github.io/formio.js/docs/identifiers.html#utils" target="_blank">FormioUtils</a> object.</td></tr><tr><th>util</th><td>An alias for "utils".</td></tr></table><br/>'},{type:"textarea",key:"fetch.specifyPostBody",rows:5,editor:"ace",hideLabel:!0,input:!0,placeholder:"body = {\n  data: {\n    b: data.a,\n    submit: true,\n  },\n}"},{type:"htmlelement",tag:"div",content:"<p>Enter custom javascript code.</p><p><h4>Example:</h4><pre>body = {\n  data: {\n    b: data.a,\n    submit: true,\n  },\n};</pre></p>"}]},{type:"checkbox",input:!0,weight:1001,key:"allowCaching",label:"Enable to Store Request Result in the Cache",defaultValue:!0,tooltip:"When checked, the requests and its results will be stored in the cache and if the Select will try to make the request to the same URL with the same paremetrs, the cached data will be returned. It allows to increase performance, but if the remote source's data is changing quite often and you always need to keep it up-to-date, uncheck this option.",conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}}],o=[{type:"checkbox",input:!0,key:"trigger.init",label:"Trigger on form init",tooltip:"When enabled the request will be made when the form is initialized.",weight:15},{type:"checkbox",input:!0,key:"trigger.server",label:"Trigger on server",tooltip:"When enabled the request will be made on the server during validation.",description:"Async requests on the server can slow down processing since the server must wait for a response before proceeding. Do not add too many server side requests or performance will suffer.",weight:15},{type:"select",input:!0,key:"refreshOn",label:"Trigger on Data change",weight:10,tooltip:"Refresh data when another field changes.",dataSrc:"custom",valueProperty:"value",data:{custom:function(t){var e=[];return e.push({label:"Any Change",value:"data"}),t.utils.eachComponent(t.instance.options.editForm.components,(function(n,i){n.key!==t.data.key&&e.push({label:n.label||n.key,value:i})})),e}}},{type:"select",input:!0,key:"refreshOnBlur",label:"Trigger on blur of Component",weight:10,tooltip:"Refresh data when another field was blured.",dataSrc:"custom",valueProperty:"value",data:{custom:function(t){var e=[];return e.push({label:"Any Change",value:"data"}),t.utils.eachComponent(t.instance.options.editForm.components,(function(n,i){n.key!==t.data.key&&e.push({label:n.label||n.key,value:i})})),e}}},{type:"textfield",label:"Trigger on Event",key:"refreshOnEvent",input:!0,weight:110,tooltip:"Refresh data when this event is fired."},{type:"textfield",label:"Triggered Event",key:"event",input:!0,weight:120,tooltip:"The event to fire when triggered.",description:"When in a datagrid or editgrid, { { rowIndex } } is available for interpolation to target a specific row."}],a=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},s=t.Components.components.component.editForm;function l(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return s.apply(void 0,a([[{key:"data",components:e},{label:"Trigger",key:"trigger",weight:10,components:o},{label:"Fetch",key:"fetch",weight:20,components:n},{key:"display",ignore:!0},{key:"validation",ignore:!0},{key:"layout",ignore:!0}]],t))}var h,c,u=(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),d=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},f=t.Components.components.component,p=function(e){function n(t,n,i){return e.call(this,t,n,i)||this}return u(n,e),Object.defineProperty(n,"builderInfo",{get:function(){return{title:"Data Source",icon:"cloud",group:"premium",documentation:"http://help.form.io/userguide/#datasource",weight:30,schema:n.schema()}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"requestHeaders",{get:function(){var e=this,n=new t.Formio.Headers;if(this.component.fetch&&this.component.fetch.headers)try{this.component.fetch.headers.forEach((function(t){t.key&&n.set(t.key,e.interpolate(t.value))}))}catch(t){console.warn(t.message)}return"POST"!==this.reqMethod||n.has("Content-type")||n.set("Content-type","application/json"),n},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"reqMethod",{get:function(){return t.Utils._.get(this.component,"fetch.method","get").toUpperCase()},enumerable:!1,configurable:!0}),n.schema=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return f.schema.apply(f,d([{label:"Data Source",key:"dataSource",type:"datasource",persistent:"client-only"}],t))},n.prototype.init=function(){return t.Utils._.get(this.component,"trigger.init",!1)&&this.refresh(),e.prototype.init.call(this)},n.prototype.render=function(){return this.builderMode?e.prototype.render.call(this,this.component.label||"Data Source"):e.prototype.render.call(this," ")},n.prototype.attach=function(t){return this.attachRefreshOnBlur(),this.attachRefreshOnEvent(),e.prototype.attach.call(this,t)},n.prototype.attachRefreshOnBlur=function(){var t=this;this.component.refreshOnBlur&&this.on("blur",(function(e){t.checkRefreshOn([{instance:e,value:e.dataValue}],{fromBlur:!0})}))},n.prototype.attachRefreshOnEvent=function(){var t=this;this.component.refreshOnEvent&&this.on(this.component.refreshOnEvent,(function(){return t.refresh()}))},n.prototype.dettachRefreshOnBlur=function(){this.component.refreshOnBlur&&this.off("blur")},n.prototype.dettachRefreshOnEvent=function(){this.component.refreshOnEvent&&this.off(this.component.refreshOnEvent)},n.prototype.refresh=function(t,e,n){if(!this.options.readOnly)switch(this.component.dataSrc){case"url":this.getDataFromUrl(n);break;case"indexeddb":window.indexedDB||window.alert("Your browser doesn't support current version of indexedDB"),this.getDataFromIndexedDb(n)}},n.prototype.getDataFromUrl=function(e){var n,i=this,r=null;t.Utils._.get(this.component,"fetch.specifyPostBody","")&&"POST"===this.reqMethod&&(r=this.specifyBody());var o=t.Formio.makeStaticRequest(this.interpolate(this.component.fetch.url),this.reqMethod,r,{headers:this.requestHeaders,noToken:!(this.component.fetch&&this.component.fetch.authenticate),ignoreCache:!this.component.allowCaching});Promise.all([o,(null===(n=this.root)||void 0===n?void 0:n.formReady)?this.root.formReady:Promise.resolve()]).then((function(t){setTimeout((function(){i.assign(t[0],e)}))})).catch((function(t){console.warn(t)}))},n.prototype.getDataFromIndexedDb=function(e){var n=this;if(this.component.indexeddb&&this.component.indexeddb.database&&this.component.indexeddb.table){var i=window.indexedDB.open(this.component.indexeddb.database);i.onupgradeneeded=function(t){if(n.component.customOptions){var e=t.target.result;e.createObjectStore(n.component.indexeddb.table,{keyPath:"myKey",autoIncrement:!0}).transaction.oncomplete=function(){var t=e.transaction(n.component.indexeddb.table,"readwrite");n.component.customOptions.forEach((function(e){t.objectStore(n.component.indexeddb.table).put(e)}))}}},i.onerror=function(){window.alert(i.errorCode)},i.onsuccess=function(i){var r=i.target.result.transaction(n.component.indexeddb.table,"readwrite").objectStore(n.component.indexeddb.table);new t.Formio.Promise((function(t){var e=[];r.getAll().onsuccess=function(n){n.target.result.forEach((function(t){e.push(t)})),t(e)}})).then((function(t){return n.assign(t,e)}))}}},n.prototype.assign=function(e,n){e=this.mapData(e),t.Utils._.isEqual(this.dataValue,e)||(this.dataValue=e,this.triggerChange(n&&n.fromSubmission?{dataSourceInitialLoading:!0}:null)),this.component.event&&this.emitEvents()},n.prototype.emitEvents=function(){this.emit(this.interpolate(this.component.event),this.data),this.events.emit(this.interpolate(this.component.event),this.data),this.emit("customEvent",{type:this.interpolate(this.component.event),component:this.component,data:this.data})},n.prototype.validateMultiple=function(){return!1},n.prototype.specifyBody=function(){var t=null;try{t=this.evaluate(this.component.fetch.specifyPostBody,{value:this.dataValue,row:this.data,data:this.rootValue,component:this.component},"body")}catch(e){t=null}return t},n.prototype.mapData=function(e){var n=t.Utils._.get(this.component,"fetch.mapFunction");if(!n)return e;var i=null;try{i=this.evaluate(n,{responseData:e,value:this.dataValue,row:this.data,data:this.rootValue,component:this.component},"value")}catch(t){i=null}return i},n.prototype.destroy=function(){return this.dettachRefreshOnBlur(),this.dettachRefreshOnEvent(),e.prototype.destroy.call(this)},n.editForm=l,n}(f),g={move:"M",line:"L",curve:"C",arc:"A",close:"Z"};"undefined"!=typeof window?c=window:void 0!==i.g?c=i.g:"undefined"!=typeof self&&(c=self);var m,v=c,y=function(t){return{translateX:t.e,translateY:t.f,scaleX:Math.sqrt(t.a*t.a+t.b*t.b),scaleY:Math.sqrt(t.c*t.c+t.d*t.d),rotation:180*Math.atan2(t.b,t.a)/Math.PI}},_=function(t){m=t},b=function(t,e){e=e&&e.identity()||new m;for(var n=t,i=[];n&&n._matrix;)i.push(n._matrix),n=n.parent;i.reverse();for(var r=0;r<i.length;r++){var o=i[r].elements;e.multiply(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9])}return e},w=function(t,e,n){return n*(e-t)+t},x=function(t,e){for(;t<0;)t+=e;return t%e},k=v.Float32Array||Array,S=function(t){return Math.floor(1e6*t)/1e6},R=Object.freeze({__proto__:null,decomposeMatrix:y,getComputedMatrix:b,setMatrix:_,lerp:w,mod:x,NumArray:k,toFixed:S}),C=Array.prototype.slice,O={isNaN:function(t){return"number"==typeof t&&t!==+t},isElement:function(t){return!(!t||1!==t.nodeType)},isObject:function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},extend:function(t){for(var e=C.call(arguments,1),n=0;n<e.length;n++){var i=e[n];for(var r in i)t[r]=i[r]}return t},defaults:function(t){for(var e=C.call(arguments,1),n=0;n<e.length;n++){var i=e[n];for(var r in i)void 0===t[r]&&(t[r]=i[r])}return t},each:function(t,e,n){for(var i=n||this,r=!function(t){if(null==t)return!1;var e=t.length;return"number"==typeof e&&e>=0&&e<4294967296}(t)&&Object.keys(t),o=(r||t).length,a=0;a<o;a++){var s=r?r[a]:a;e.call(i,t[s],s,t)}return t},performance:v.performance&&v.performance.now?v.performance:Date},E=function(t,e,n){var i;switch(n.length){case 0:i=function(i){e[i].call(t,n[0])};break;case 1:i=function(i){e[i].call(t,n[0],n[1])};break;case 2:i=function(i){e[i].call(t,n[0],n[1],n[2])};break;case 3:i=function(i){e[i].call(t,n[0],n[1],n[2],n[3])};break;default:i=function(i){e[i].apply(t,n)}}for(var r=0;r<e.length;r++)i(r)},A={on:function(t,e){return this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push(e),this},off:function(t,e){if(!this._events)return this;if(!t&&!e)return this._events={},this;for(var n=t?[t]:Object.keys(this._events),i=0,r=n.length;i<r;i++){t=n[i];var o=this._events[t];if(o){var a=[];if(e)for(var s=0,l=o.length;s<l;s++){var h=o[s];h=h.handler?h.handler:h,e&&e!==h&&a.push(h)}this._events[t]=a}}return this},trigger:function(t){if(!this._events)return this;var e=Array.prototype.slice.call(arguments,1),n=this._events[t];return n&&E(this,n,e),this},listen:function(t,e,n){var i=this;if(t){var r=function(){n.apply(i,arguments)};r.obj=t,r.name=e,r.handler=n,t.on(e,r)}return this},ignore:function(t,e,n){return t.off(e,n),this},Types:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert",order:"order",load:"load"}};A.bind=A.on,A.unbind=A.off;var M=function(t,e){this.x=t||0,this.y=e||0};O.extend(M,{zero:new M,add:function(t,e){return new M(t.x+e.x,t.y+e.y)},sub:function(t,e){return new M(t.x-e.x,t.y-e.y)},subtract:function(t,e){return M.sub(t,e)},ratioBetween:function(t,e){return(t.x*e.x+t.y*e.y)/(t.length()*e.length())},angleBetween:function(t,e){var n,i;return arguments.length>=4?(n=arguments[0]-arguments[2],i=arguments[1]-arguments[3],Math.atan2(i,n)):(n=t.x-e.x,i=t.y-e.y,Math.atan2(i,n))},distanceBetween:function(t,e){return Math.sqrt(M.distanceBetweenSquared(t,e))},distanceBetweenSquared:function(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},MakeObservable:function(t){t.bind=t.on=function(){return this._bound||(this._x=this.x,this._y=this.y,Object.defineProperty(this,"x",I),Object.defineProperty(this,"y",P),O.extend(this,T),this._bound=!0),A.bind.apply(this,arguments),this}}}),O.extend(M.prototype,A,{constructor:M,set:function(t,e){return this.x=t,this.y=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this},clear:function(){return this.x=0,this.y=0,this},clone:function(){return new M(this.x,this.y)},add:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x+=t,this.y+=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=e)),this},addSelf:function(t){return this.add.apply(this,arguments)},sub:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x-=t,this.y-=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-=e)),this},subtract:function(){return this.sub.apply(this,arguments)},subSelf:function(t){return this.sub.apply(this,arguments)},subtractSelf:function(t){return this.sub.apply(this,arguments)},multiply:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x*=t,this.y*=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=e)),this},multiplySelf:function(t){return this.multiply.apply(this,arguments)},multiplyScalar:function(t){return this.multiply(t)},divide:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x/=t,this.y/=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/=e),O.isNaN(this.x)&&(this.x=0),O.isNaN(this.y)&&(this.y=0)),this},divideSelf:function(t){return this.divide.apply(this,arguments)},divideScalar:function(t){return this.divide(t)},negate:function(){return this.multiply(-1)},dot:function(t){return this.x*t.x+this.y*t.y},length:function(){return Math.sqrt(this.lengthSquared())},lengthSquared:function(){return this.x*this.x+this.y*this.y},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},setLength:function(t){return this.normalize().multiplyScalar(t)},equals:function(t,e){return e=void 0===e?1e-4:e,this.distanceTo(t)<e},lerp:function(t,e){var n=(t.x-this.x)*e+this.x,i=(t.y-this.y)*e+this.y;return this.set(n,i)},isZero:function(t){return t=void 0===t?1e-4:t,this.length()<t},toString:function(){return this.x+", "+this.y},toObject:function(){return{x:this.x,y:this.y}},rotate:function(t){var e=Math.cos(t),n=Math.sin(t);return this.x=this.x*e-this.y*n,this.y=this.x*n+this.y*e,this}});var T={constructor:M,set:function(t,e){return this._x=t,this._y=e,this.trigger(A.Types.change)},copy:function(t){return this._x=t.x,this._y=t.y,this.trigger(A.Types.change)},clear:function(){return this._x=0,this._y=0,this.trigger(A.Types.change)},clone:function(){return new M(this._x,this._y)},add:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x+=t,this._y+=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x+=t.x,this._y+=t.y):(this._x+=t,this._y+=e),this.trigger(A.Types.change))},sub:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x-=t,this._y-=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x-=t.x,this._y-=t.y):(this._x-=t,this._y-=e),this.trigger(A.Types.change))},multiply:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x*=t,this._y*=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x*=t.x,this._y*=t.y):(this._x*=t,this._y*=e),this.trigger(A.Types.change))},divide:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x/=t,this._y/=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x/=t.x,this._y/=t.y):(this._x/=t,this._y/=e),O.isNaN(this._x)&&(this._x=0),O.isNaN(this._y)&&(this._y=0),this.trigger(A.Types.change))},dot:function(t){return this._x*t.x+this._y*t.y},lengthSquared:function(){return this._x*this._x+this._y*this._y},distanceToSquared:function(t){var e=this._x-t.x,n=this._y-t.y;return e*e+n*n},lerp:function(t,e){var n=(t.x-this._x)*e+this._x,i=(t.y-this._y)*e+this._y;return this.set(n,i)},toString:function(){return this._x+", "+this._y},toObject:function(){return{x:this._x,y:this._y}},rotate:function(t){var e=Math.cos(t),n=Math.sin(t);return this._x=this._x*e-this._y*n,this._y=this._x*n+this._y*e,this}},I={enumerable:!0,get:function(){return this._x},set:function(t){this._x=t,this.trigger(A.Types.change,"x")}},P={enumerable:!0,get:function(){return this._y},set:function(t){this._y=t,this.trigger(A.Types.change,"y")}};M.MakeObservable(M.prototype);var F=function(t,e,n,i,r,o,a){M.call(this,t,e),this._broadcast=function(){this.trigger(A.Types.change)}.bind(this),this._command=a||g.move,this._relative=!0;var s="number"==typeof n,l="number"==typeof i,h="number"==typeof r,c="number"==typeof o;(s||l||h||c)&&F.AppendCurveProperties(this),s&&(this.controls.left.x=n),l&&(this.controls.left.y=i),h&&(this.controls.right.x=r),c&&(this.controls.right.y=o)};O.extend(F,{AppendCurveProperties:function(t){t.relative=!0,t.controls={},t.controls.left=new M(0,0),t.controls.right=new M(0,0)},MakeObservable:function(t){Object.defineProperty(t,"command",{enumerable:!0,get:function(){return this._command},set:function(t){this._command=t,this._command!==g.curve||O.isObject(this.controls)||F.AppendCurveProperties(this),this.trigger(A.Types.change)}}),Object.defineProperty(t,"relative",{enumerable:!0,get:function(){return this._relative},set:function(t){this._relative!=t&&(this._relative=!!t,this.trigger(A.Types.change))}}),O.extend(t,M.prototype,j),t.bind=t.on=function(){var t=this._bound;M.prototype.bind.apply(this,arguments),t||O.extend(this,j)}}});var j={constructor:F,listen:function(){return O.isObject(this.controls)||F.AppendCurveProperties(this),this.controls.left.bind(A.Types.change,this._broadcast),this.controls.right.bind(A.Types.change,this._broadcast),this},ignore:function(){return this.controls.left.unbind(A.Types.change,this._broadcast),this.controls.right.unbind(A.Types.change,this._broadcast),this},copy:function(t){return this.x=t.x,this.y=t.y,"string"==typeof t.command&&(this.command=t.command),O.isObject(t.controls)&&(O.isObject(this.controls)||F.AppendCurveProperties(this),this.controls.left.copy(t.controls.left),this.controls.right.copy(t.controls.right)),"boolean"==typeof t.relative&&(this.relative=t.relative),this.command===g.arc&&(this.rx=t.rx,this.ry=t.ry,this.xAxisRotation=t.xAxisRotation,this.largeArcFlag=t.largeArcFlag,this.sweepFlag=t.sweepFlag),this},clone:function(){var t=this.controls,e=new F(this.x,this.y,t&&t.left.x,t&&t.left.y,t&&t.right.x,t&&t.right.y,this.command);return e.relative=this._relative,e},toObject:function(){var t={x:this.x,y:this.y};return this._command&&(t.command=this._command),this._relative&&(t.relative=this._relative),this.controls&&(t.controls={left:this.controls.left.toObject(),right:this.controls.right.toObject()}),t},toString:function(){return this.controls?[this._x,this._y,this.controls.left.x,this.controls.left.y,this.controls.right.x,this.controls.right.y,this._command,this._relative?1:0].join(", "):[this._x,this._y].join(", ")}};F.MakeObservable(F.prototype);var z=Math.cos,L=Math.sin,D=Math.tan,B=[],V=function(t,e,n,i,r,o){this.elements=new k(9);var a=t;Array.isArray(a)||(a=Array.prototype.slice.call(arguments)),this.identity(),a.length>0&&this.set(a)};_(V),O.extend(V,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(t,e,n){if(e.length<=3){var i=t,r=e[0]||0,o=e[1]||0,a=e[2]||0;return{x:i[0]*r+i[1]*o+i[2]*a,y:i[3]*r+i[4]*o+i[5]*a,z:i[6]*r+i[7]*o+i[8]*a}}var s=t[0],l=t[1],h=t[2],c=t[3],u=t[4],d=t[5],f=t[6],p=t[7],g=t[8],m=e[0],v=e[1],y=e[2],_=e[3],b=e[4],w=e[5],x=e[6],S=e[7],R=e[8];return(n=n||new k(9))[0]=s*m+l*_+h*x,n[1]=s*v+l*b+h*S,n[2]=s*y+l*w+h*R,n[3]=c*m+u*_+d*x,n[4]=c*v+u*b+d*S,n[5]=c*y+u*w+d*R,n[6]=f*m+p*_+g*x,n[7]=f*v+p*b+g*S,n[8]=f*y+p*w+g*R,n}}),O.extend(V.prototype,A,{constructor:V,manual:!1,set:function(t,e,n,i,r,o,a,s,l){var h;return void 0===e&&(t=(h=t)[0],e=h[1],n=h[2],i=h[3],r=h[4],o=h[5],a=h[6],s=h[7],l=h[8]),this.elements[0]=t,this.elements[1]=e,this.elements[2]=n,this.elements[3]=i,this.elements[4]=r,this.elements[5]=o,this.elements[6]=a,this.elements[7]=s,this.elements[8]=l,this.trigger(A.Types.change)},copy:function(t){return this.elements[0]=t.elements[0],this.elements[1]=t.elements[1],this.elements[2]=t.elements[2],this.elements[3]=t.elements[3],this.elements[4]=t.elements[4],this.elements[5]=t.elements[5],this.elements[6]=t.elements[6],this.elements[7]=t.elements[7],this.elements[8]=t.elements[8],this.manual=t.manual,this.trigger(A.Types.change)},identity:function(){return this.elements[0]=V.Identity[0],this.elements[1]=V.Identity[1],this.elements[2]=V.Identity[2],this.elements[3]=V.Identity[3],this.elements[4]=V.Identity[4],this.elements[5]=V.Identity[5],this.elements[6]=V.Identity[6],this.elements[7]=V.Identity[7],this.elements[8]=V.Identity[8],this.trigger(A.Types.change)},multiply:function(t,e,n,i,r,o,a,s,l){if(void 0===e)return this.elements[0]*=t,this.elements[1]*=t,this.elements[2]*=t,this.elements[3]*=t,this.elements[4]*=t,this.elements[5]*=t,this.elements[6]*=t,this.elements[7]*=t,this.elements[8]*=t,this.trigger(A.Types.change);if(void 0===i)return t=t||0,e=e||0,n=n||0,{x:(r=this.elements)[0]*t+r[1]*e+r[2]*n,y:r[3]*t+r[4]*e+r[5]*n,z:r[6]*t+r[7]*e+r[8]*n};var h=this.elements,c=[t,e,n,i,r,o,a,s,l],u=h[0],d=h[1],f=h[2],p=h[3],g=h[4],m=h[5],v=h[6],y=h[7],_=h[8],b=c[0],w=c[1],x=c[2],k=c[3],S=c[4],R=c[5],C=c[6],O=c[7],E=c[8];return this.elements[0]=u*b+d*k+f*C,this.elements[1]=u*w+d*S+f*O,this.elements[2]=u*x+d*R+f*E,this.elements[3]=p*b+g*k+m*C,this.elements[4]=p*w+g*S+m*O,this.elements[5]=p*x+g*R+m*E,this.elements[6]=v*b+y*k+_*C,this.elements[7]=v*w+y*S+_*O,this.elements[8]=v*x+y*R+_*E,this.trigger(A.Types.change)},inverse:function(t){var e=this.elements;t=t||new V;var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],h=e[7],c=e[8],u=c*a-s*h,d=-c*o+s*l,f=h*o-a*l,p=n*u+i*d+r*f;return p?(p=1/p,t.elements[0]=u*p,t.elements[1]=(-c*i+r*h)*p,t.elements[2]=(s*i-r*a)*p,t.elements[3]=d*p,t.elements[4]=(c*n-r*l)*p,t.elements[5]=(-s*n+r*o)*p,t.elements[6]=f*p,t.elements[7]=(-h*n+i*l)*p,t.elements[8]=(a*n-i*o)*p,t):null},scale:function(t,e){var n=arguments.length;return n<=1&&(e=t),this.multiply(t,0,0,0,e,0,0,0,1)},rotate:function(t){var e=z(t),n=L(t);return this.multiply(e,-n,0,n,e,0,0,0,1)},translate:function(t,e){return this.multiply(1,0,t,0,1,e,0,0,1)},skewX:function(t){var e=D(t);return this.multiply(1,e,0,0,1,0,0,0,1)},skewY:function(t){var e=D(t);return this.multiply(1,0,0,e,1,0,0,0,1)},toString:function(t){return B.length=0,this.toTransformArray(t,B),B.map(S).join(" ")},toTransformArray:function(t,e){var n=this.elements,i=!!e,r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],h=n[5];if(t){var c=n[6],u=n[7],d=n[8];return i?(e[0]=r,e[1]=s,e[2]=c,e[3]=o,e[4]=l,e[5]=u,e[6]=a,e[7]=h,void(e[8]=d)):[r,s,c,o,l,u,a,h,d]}return i?(e[0]=r,e[1]=s,e[2]=o,e[3]=l,e[4]=a,void(e[5]=h)):[r,s,o,l,a,h]},toArray:function(t,e){var n=this.elements,i=!!e,r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],h=n[5];if(t){var c=n[6],u=n[7],d=n[8];return i?(e[0]=r,e[1]=o,e[2]=a,e[3]=s,e[4]=l,e[5]=h,e[6]=c,e[7]=u,void(e[8]=d)):[r,o,a,s,l,h,c,u,d]}return i?(e[0]=r,e[1]=o,e[2]=a,e[3]=s,e[4]=l,void(e[5]=h)):[r,o,a,s,l,h]},toObject:function(){return{elements:this.toArray(!0),manual:!!this.manual}},clone:function(){return(new V).copy(this)}});var W=0,U={nextFrameID:null,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.7.1",PublishDate:"2021-01-13T01:57:28.198Z",Identifier:"two-",Resolution:12,AutoCalculateImportedMatrices:!0,Instances:[],uniqueId:function(){return W++}},N=Math.PI/2,q={CollinearityEpsilon:Math.pow(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:Number.EPSILON},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]},H=function(t,e,n,i,r){var o=1-t;return o*o*o*e+3*o*o*t*n+3*o*t*t*i+t*t*t*r},G=function(t,e,n,i,r,o,a,s,l){var h=(l=l||q.RecursionLimit)+1;if(Math.abs(t-a)<.001&&Math.abs(e-s)<.001)return[new F(a,s)];for(var c=[],u=0;u<h;u++){var d=u/h,f=H(d,t,n,r,a),p=H(d,e,i,o,s);c.push(new F(f,p))}return c},Z=function(t,e,n,i,r,o,a,s,l){if(t===n&&e===i&&r===a&&o===s){var h=a-t,c=s-e;return Math.sqrt(h*h+c*c)}var u=9*(n-r)+3*(a-t),d=6*(t+r)-12*n,f=3*(n-t),p=9*(i-o)+3*(s-e),g=6*(e+o)-12*i,m=3*(i-e);return K((function(t){var e=(u*t+d)*t+f,n=(p*t+g)*t+m;return Math.sqrt(e*e+n*n)}),0,1,l||q.RecursionLimit)},Y=function(t,e,n,i,r,o,a,s){for(var l,h,c,u,d,f,p,g,m=[],v=[[],[]],y=0;y<2;++y)if(0==y?(h=6*t-12*n+6*r,l=-3*t+9*n-9*r+3*a,c=3*n-3*t):(h=6*e-12*i+6*o,l=-3*e+9*i-9*o+3*s,c=3*i-3*e),Math.abs(l)<1e-12){if(Math.abs(h)<1e-12)continue;0<(u=-c/h)&&u<1&&m.push(u)}else p=h*h-4*c*l,g=Math.sqrt(p),p<0||(0<(d=(-h+g)/(2*l))&&d<1&&m.push(d),0<(f=(-h-g)/(2*l))&&f<1&&m.push(f));for(var _,b=m.length,w=b;b--;)_=1-(u=m[b]),v[0][b]=_*_*_*t+3*_*_*u*n+3*_*u*u*r+u*u*u*a,v[1][b]=_*_*_*e+3*_*_*u*i+3*_*u*u*o+u*u*u*s;return v[0][w]=t,v[1][w]=e,v[0][w+1]=a,v[1][w+1]=s,v[0].length=v[1].length=w+2,{min:{x:Math.min.apply(0,v[0]),y:Math.min.apply(0,v[1])},max:{x:Math.max.apply(0,v[0]),y:Math.max.apply(0,v[1])}}},K=function(t,e,n,i){for(var r=q.abscissas[i-2],o=q.weights[i-2],a=.5*(n-e),s=a+e,l=0,h=i+1>>1,c=1&i?o[l++]*t(s):0;l<h;){var u=a*r[l];c+=o[l++]*(t(s+u)+t(s-u))}return a*c},$=function(t,e){for(var n=t.length,i=n-1,r=0;r<n;r++){var o=t[r];O.isObject(o.controls)||F.AppendCurveProperties(o);var a=e?x(r-1,n):Math.max(r-1,0),s=e?x(r+1,n):Math.min(r+1,i),l=t[a],h=o,c=t[s];X(l,h,c),h.command=0===r?g.move:g.curve}},X=function(t,e,n){var i=M.angleBetween(t,e),r=M.angleBetween(n,e),o=M.distanceBetween(t,e),a=M.distanceBetween(n,e),s=(i+r)/2;return o<1e-4||a<1e-4?("boolean"!=typeof e.relative||e.relative||(e.controls.left.copy(e),e.controls.right.copy(e)),e):(o*=.33,a*=.33,r<i?s+=N:s-=N,e.controls.left.x=Math.cos(s)*o,e.controls.left.y=Math.sin(s)*o,s-=Math.PI,e.controls.right.x=Math.cos(s)*a,e.controls.right.y=Math.sin(s)*a,"boolean"!=typeof e.relative||e.relative||(e.controls.left.x+=e.x,e.controls.left.y+=e.y,e.controls.right.x+=e.x,e.controls.right.y+=e.y),e)},J=function(t,e,n){return new M(2*t.x-(e.x+t.x)-(n?t.x:0),2*t.y-(e.y+t.y)-(n?t.y:0))},Q=Object.freeze({__proto__:null,Curve:q,getComponentOnCubicBezier:H,subdivide:G,getCurveLength:Z,getCurveBoundingBox:Y,integrate:K,getCurveFromPoints:$,getControlPoints:X,getReflection:J,getAnchorsFromArcData:function(t,e,n,i,r,o,a){(new V).translate(t.x,t.y).rotate(e);for(var s=U.Resolution,l=0;l<s;l++){var h=(l+1)/s;a&&(h=1-h);var c=h*o+r,u=n*Math.cos(c),d=i*Math.sin(c),f=new F(u,d);F.AppendCurveProperties(f),f.command=g.line}}}),tt=v.devicePixelRatio||1,et=function(t){return tt/function(t){return t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1}(t)},nt=function(){Array.call(this),arguments.length>1?Array.prototype.push.apply(this,arguments):arguments[0]&&Array.isArray(arguments[0])&&Array.prototype.push.apply(this,arguments[0])};(nt.prototype=new Array).constructor=nt,O.extend(nt.prototype,A,{pop:function(){var t=Array.prototype.pop.apply(this,arguments);return this.trigger(A.Types.remove,[t]),t},shift:function(){var t=Array.prototype.shift.apply(this,arguments);return this.trigger(A.Types.remove,[t]),t},push:function(){var t=Array.prototype.push.apply(this,arguments);return this.trigger(A.Types.insert,arguments),t},unshift:function(){var t=Array.prototype.unshift.apply(this,arguments);return this.trigger(A.Types.insert,arguments),t},splice:function(){var t,e=Array.prototype.splice.apply(this,arguments);return this.trigger(A.Types.remove,e),arguments.length>2&&(t=this.slice(arguments[0],arguments[0]+arguments.length-2),this.trigger(A.Types.insert,t),this.trigger(A.Types.order)),e},sort:function(){return Array.prototype.sort.apply(this,arguments),this.trigger(A.Types.order),this},reverse:function(){return Array.prototype.reverse.apply(this,arguments),this.trigger(A.Types.order),this}});var it=function(){this._renderer={},this._renderer.flagMatrix=it.FlagMatrix.bind(this),this.isShape=!0,this.id=U.Identifier+U.uniqueId(),this.classList=[],this.matrix=new V,this.translation=new M,this.rotation=0,this.scale=1};O.extend(it,{FlagMatrix:function(){this._flagMatrix=!0},MakeObservable:function(t){var e={enumerable:!1,get:function(){return this._translation},set:function(t){this._translation&&this._translation.unbind(A.Types.change,this._renderer.flagMatrix),this._translation=t,this._translation.bind(A.Types.change,this._renderer.flagMatrix),it.FlagMatrix.call(this)}};Object.defineProperty(t,"translation",e),Object.defineProperty(t,"position",e),Object.defineProperty(t,"rotation",{enumerable:!0,get:function(){return this._rotation},set:function(t){this._rotation=t,this._flagMatrix=!0}}),Object.defineProperty(t,"scale",{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof M&&this._scale.unbind(A.Types.change,this._renderer.flagMatrix),this._scale=t,this._scale instanceof M&&this._scale.bind(A.Types.change,this._renderer.flagMatrix),this._flagMatrix=!0,this._flagScale=!0}}),Object.defineProperty(t,"matrix",{enumerable:!0,get:function(){return this._matrix},set:function(t){this._matrix=t,this._flagMatrix=!0}}),Object.defineProperty(t,"className",{enumerable:!0,get:function(){return this._className},set:function(t){if(this._flagClassName=this._className!==t,this._flagClassName){for(var e=this._className.split(/\s+?/),n=t.split(/\s+?/),i=0;i<e.length;i++){var r=e[i],o=Array.prototype.indexOf.call(this.classList,r);o>=0&&this.classList.splice(o,1)}this.classList=this.classList.concat(n)}this._className=t}})}}),O.extend(it.prototype,A,{_flagMatrix:!0,_flagScale:!1,_flagClassName:!1,_translation:null,_rotation:0,_scale:1,_className:"",constructor:it,addTo:function(t){return t.add(this),this},clone:function(t){var e=new it;return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},_update:function(t){return!this._matrix.manual&&this._flagMatrix&&(this._matrix.identity().translate(this.translation.x,this.translation.y),this._scale instanceof M?this._matrix.scale(this._scale.x,this._scale.y):this._matrix.scale(this._scale),this._matrix.rotate(this.rotation)),t&&this.parent&&this.parent._update&&this.parent._update(),this},flagReset:function(){return this._flagMatrix=this._flagScale=this._flagClassName=!1,this}}),it.MakeObservable(it.prototype);var rt=function(){nt.apply(this,arguments),Object.defineProperty(this,"_events",{value:{},enumerable:!1}),this.ids={},this.on(A.Types.insert,this.attach),this.on(A.Types.remove,this.detach),rt.prototype.attach.apply(this,arguments)};rt.prototype=new nt,O.extend(rt.prototype,{constructor:rt,attach:function(t){for(var e=0;e<t.length;e++)this.ids[t[e].id]=t[e];return this},detach:function(t){for(var e=0;e<t.length;e++)delete this.ids[t[e].id];return this}});var ot=Math.min,at=Math.max,st=function(t){it.call(this,!0),this._renderer.type="group",this.additions=[],this.subtractions=[],this.children=Array.isArray(t)?t:Array.prototype.slice.call(arguments)};function lt(t,e){var n,i=t.parent;function r(){e.subtractions.length>0&&(n=Array.prototype.indexOf.call(e.subtractions,t))>=0&&e.subtractions.splice(n,1),e.additions.length>0&&(n=Array.prototype.indexOf.call(e.additions,t))>=0&&e.additions.splice(n,1),t.parent=e,e.additions.push(t),e._flagAdditions=!0}function o(){(n=Array.prototype.indexOf.call(i.additions,t))>=0&&i.additions.splice(n,1),(n=Array.prototype.indexOf.call(i.subtractions,t))<0&&(i.subtractions.push(t),i._flagSubtractions=!0)}i!==e?(i&&i.children.ids[t.id]&&(n=Array.prototype.indexOf.call(i.children,t),i.children.splice(n,1),o()),e?r():(o(),i._flagAdditions&&0===i.additions.length&&(i._flagAdditions=!1),i._flagSubtractions&&0===i.subtractions.length&&(i._flagSubtractions=!1),delete t.parent)):r()}O.extend(st,{Children:rt,InsertChildren:function(t){for(var e=0;e<t.length;e++)lt.call(this,t[e],this)},RemoveChildren:function(t){for(var e=0;e<t.length;e++)lt.call(this,t[e])},OrderChildren:function(t){this._flagOrder=!0},Properties:["fill","stroke","linewidth","visible","cap","join","miter","closed","curved","automatic"],MakeObservable:function(t){var e=st.Properties;Object.defineProperty(t,"opacity",{enumerable:!0,get:function(){return this._opacity},set:function(t){this._flagOpacity=this._opacity!==t,this._opacity=t}}),Object.defineProperty(t,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(t){this._flagBeginning=this._beginning!==t,this._beginning=t}}),Object.defineProperty(t,"ending",{enumerable:!0,get:function(){return this._ending},set:function(t){this._flagEnding=this._ending!==t,this._ending=t}}),Object.defineProperty(t,"length",{enumerable:!0,get:function(){if(this._flagLength||this._length<=0){if(this._length=0,!this.children)return this._length;for(var t=0;t<this.children.length;t++){var e=this.children[t];this._length+=e.length}}return this._length}}),it.MakeObservable(t),st.MakeGetterSetters(t,e),Object.defineProperty(t,"children",{enumerable:!0,get:function(){return this._children},set:function(t){var e=st.InsertChildren.bind(this),n=st.RemoveChildren.bind(this),i=st.OrderChildren.bind(this);this._children&&this._children.unbind(),this._children=new rt(t),this._children.bind(A.Types.insert,e),this._children.bind(A.Types.remove,n),this._children.bind(A.Types.order,i)}}),Object.defineProperty(t,"mask",{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,t.clip||(t.clip=!0)}})},MakeGetterSetters:function(t,e){Array.isArray(e)||(e=[e]),O.each(e,(function(e){st.MakeGetterSetter(t,e)}))},MakeGetterSetter:function(t,e){var n="_"+e;Object.defineProperty(t,e,{enumerable:!0,get:function(){return this[n]},set:function(t){this[n]=t;for(var i=0;i<this.children.length;i++)this.children[i][e]=t}})}}),O.extend(st.prototype,it.prototype,{_flagAdditions:!1,_flagSubtractions:!1,_flagOrder:!1,_flagOpacity:!0,_flagBeginning:!1,_flagEnding:!1,_flagLength:!1,_flagMask:!1,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_length:0,_mask:null,constructor:st,clone:function(t){var e=new st,n=this.children.map((function(t){return t.clone()}));return e.add(n),e.opacity=this.opacity,this.mask&&(e.mask=this.mask),e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.className=this.className,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},toObject:function(){var t={children:[],translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale instanceof M?this.scale.toObject():this.scale,opacity:this.opacity,className:this.className,mask:this.mask?this.mask.toObject():null};return this.matrix.manual&&(t.matrix=this.matrix.toObject()),O.each(this.children,(function(e,n){t.children[n]=e.toObject()}),this),t},corner:function(){var t=this.getBoundingClientRect(!0),e={x:t.left,y:t.top};return this.children.forEach((function(t){t.translation.sub(e)})),this},center:function(){var t=this.getBoundingClientRect(!0);return t.centroid={x:t.left+t.width/2-this.translation.x,y:t.top+t.height/2-this.translation.y},this.children.forEach((function(e){e.isShape&&e.translation.sub(t.centroid)})),this},getById:function(t){var e=null;return function n(i){if(i.id===t)return i;if(i.children)for(var r=0;r<i.children.length;r++)if(e=n(i.children[r]))return e;return null}(this)},getByClassName:function(t){var e=[];return function n(i){if(Array.prototype.indexOf.call(i.classList,t)>=0&&e.push(i),i.children)for(var r=0;r<i.children.length;r++)n(i.children[r]);return e}(this)},getByType:function(t){var e=[];return function n(i){if(i instanceof t&&e.push(i),i.children)for(var r=0;r<i.children.length;r++)n(i.children[r]);return e}(this)},add:function(t){t=t instanceof Array?t.slice():Array.prototype.slice.call(arguments);for(var e=0;e<t.length;e++){var n=t[e];if(n&&n.id){var i=Array.prototype.indexOf.call(this.children,n);i>=0&&this.children.splice(i,1),this.children.push(n)}}return this},remove:function(t){var e=arguments.length,n=this.parent;if(e<=0&&n)return n.remove(this),this;t=t instanceof Array?t.slice():Array.prototype.slice.call(arguments);for(var i=0;i<t.length;i++)t[i]&&this.children.ids[t[i].id]&&this.children.splice(Array.prototype.indexOf.call(this.children,t[i]),1);return this},getBoundingClientRect:function(t){var e;this._update(!0);for(var n=1/0,i=-1/0,r=1/0,o=-1/0,a=/texture|gradient/i,s=0;s<this.children.length;s++){var l=this.children[s];l.visible&&!a.test(l._renderer.type)&&"number"==typeof(e=l.getBoundingClientRect(t)).top&&"number"==typeof e.left&&"number"==typeof e.right&&"number"==typeof e.bottom&&(r=ot(e.top,r),n=ot(e.left,n),i=at(e.right,i),o=at(e.bottom,o))}return{top:r,left:n,right:i,bottom:o,width:i-n,height:o-r}},noFill:function(){return this.children.forEach((function(t){t.noFill()})),this},noStroke:function(){return this.children.forEach((function(t){t.noStroke()})),this},subdivide:function(){var t=arguments;return this.children.forEach((function(e){e.subdivide.apply(e,t)})),this},_update:function(){if(this._flagBeginning||this._flagEnding)for(var t=Math.min(this._beginning,this._ending),e=Math.max(this._beginning,this._ending),n=this.length,i=0,r=t*n,o=e*n,a=0;a<this.children.length;a++){var s=this.children[a],l=s.length;r>i+l?(s.beginning=1,s.ending=1):o<i?(s.beginning=0,s.ending=0):r>i&&r<i+l?(s.beginning=(r-i)/l,s.ending=1):o>i&&o<i+l?(s.beginning=0,s.ending=(o-i)/l):(s.beginning=0,s.ending=1),i+=l}return it.prototype._update.apply(this,arguments)},flagReset:function(){return this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1),this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1),this._flagOrder=this._flagMask=this._flagOpacity=this._flagBeginning=this._flagEnding=!1,it.prototype.flagReset.call(this),this}}),st.MakeObservable(st.prototype);var ht=[],ct=2*Math.PI,ut=Math.max,dt=Math.min,ft=Math.abs,pt=Math.sin,gt=Math.cos,mt=Math.acos,vt=Math.sqrt,yt=function(t){return 1==t[0]&&0==t[3]&&0==t[1]&&1==t[4]&&0==t[2]&&0==t[5]},_t={isHidden:/(undefined|none|transparent)/i,alignments:{left:"start",middle:"center",right:"end"},shim:function(t,e){return t.tagName=t.nodeName=e||"canvas",t.nodeType=1,t.getAttribute=function(t){return this[t]},t.setAttribute=function(t,e){return this[t]=e,this},t},group:{renderChild:function(t){_t[t._renderer.type].render.call(t,this.ctx,!0,this.clip)},render:function(t){this._update();var e=this._matrix.elements,n=this.parent;this._renderer.opacity=this._opacity*(n&&n._renderer?n._renderer.opacity:1);var i=this._mask,r=yt(e),o=!r||!!i;if(this._renderer.context||(this._renderer.context={}),this._renderer.context.ctx=t,o&&(t.save(),r||t.transform(e[0],e[3],e[1],e[4],e[2],e[5])),i&&_t[i._renderer.type].render.call(i,t,!0),this.opacity>0&&0!==this.scale)for(var a=0;a<this.children.length;a++){var s=this.children[a];_t[s._renderer.type].render.call(s,t)}return o&&t.restore(),this.flagReset()}},path:{render:function(t,e,n){var i,r,o,a,s,l,h,c,u,d,f,p,m,v,y,_,b,w,k,S,R,C,O,E,A,T,I,P,F,j,z,L,D;if(this._update(),i=this._matrix.elements,r=this._stroke,o=this._linewidth,a=this._fill,s=this._opacity*this.parent._renderer.opacity,l=this._visible,h=this._cap,c=this._join,u=this._miter,d=this._closed,m=(p=(f=this._renderer.vertices).length)-1,z=yt(i),D=this.dashes,j=this._clip,!e&&(!l||j))return this;z||(t.save(),t.transform(i[0],i[3],i[1],i[4],i[2],i[5])),a&&("string"==typeof a?t.fillStyle=a:(_t[a._renderer.type].render.call(a,t),t.fillStyle=a._renderer.effect)),r&&("string"==typeof r?t.strokeStyle=r:(_t[r._renderer.type].render.call(r,t),t.strokeStyle=r._renderer.effect),o&&(t.lineWidth=o),u&&(t.miterLimit=u),c&&(t.lineJoin=c),!d&&h&&(t.lineCap=h)),"number"==typeof s&&(t.globalAlpha=s),D&&D.length>0&&(t.lineDashOffset=D.offset||0,t.setLineDash(D)),t.beginPath();for(var B=0;B<f.length;B++)switch(P=(b=f[B]).x,F=b.y,b.command){case g.close:t.closePath();break;case g.arc:var V=b.rx,W=b.ry,U=b.xAxisRotation,N=b.largeArcFlag,q=b.sweepFlag,H=(_=f[y=d?x(B-1,p):ut(B-1,0)]).x,G=_.y;_t.renderSvgArcCommand(t,H,G,V,W,N,q,U,P,F);break;case g.curve:y=d?x(B-1,p):Math.max(B-1,0),v=d?x(B+1,p):Math.min(B+1,m),_=f[y],w=f[v],E=_.controls&&_.controls.right||M.zero,A=b.controls&&b.controls.left||M.zero,_._relative?(C=E.x+_.x,O=E.y+_.y):(C=E.x,O=E.y),b._relative?(S=A.x+b.x,R=A.y+b.y):(S=A.x,R=A.y),t.bezierCurveTo(C,O,S,R,P,F),B>=m&&d&&(w=k,T=b.controls&&b.controls.right||M.zero,I=w.controls&&w.controls.left||M.zero,b._relative?(C=T.x+b.x,O=T.y+b.y):(C=T.x,O=T.y),w._relative?(S=I.x+w.x,R=I.y+w.y):(S=I.x,R=I.y),P=w.x,F=w.y,t.bezierCurveTo(C,O,S,R,P,F));break;case g.line:t.lineTo(P,F);break;case g.move:k=b,t.moveTo(P,F)}return d&&t.closePath(),j||n||(_t.isHidden.test(a)||((L=a._renderer&&a._renderer.offset)&&(t.save(),t.translate(-a._renderer.offset.x,-a._renderer.offset.y),t.scale(a._renderer.scale.x,a._renderer.scale.y)),t.fill(),L&&t.restore()),_t.isHidden.test(r)||((L=r._renderer&&r._renderer.offset)&&(t.save(),t.translate(-r._renderer.offset.x,-r._renderer.offset.y),t.scale(r._renderer.scale.x,r._renderer.scale.y),t.lineWidth=o/r._renderer.scale.x),t.stroke(),L&&t.restore())),z||t.restore(),j&&!n&&t.clip(),D&&D.length>0&&t.setLineDash(ht),this.flagReset()}},text:{render:function(t,e,n){this._update();var i,r,o,a,s,l,h,c,u,d,f,p=this._matrix.elements,g=this._stroke,m=this._linewidth,v=this._fill,y=this._decoration,_=this._opacity*this.parent._renderer.opacity,b=this._visible,w=yt(p),x=v._renderer&&v._renderer.offset&&g._renderer&&g._renderer.offset,k=this.dashes,S=_t.alignments[this._alignment]||this._alignment,R=this._baseline,C=this._clip;if(!e&&(!b||C))return this;if(w||(t.save(),t.transform(p[0],p[3],p[1],p[4],p[2],p[5])),x||(t.font=[this._style,this._weight,this._size+"px/"+this._leading+"px",this._family].join(" ")),t.textAlign=S,t.textBaseline=R,v&&("string"==typeof v?t.fillStyle=v:(_t[v._renderer.type].render.call(v,t),t.fillStyle=v._renderer.effect)),g&&("string"==typeof g?t.strokeStyle=g:(_t[g._renderer.type].render.call(g,t),t.strokeStyle=g._renderer.effect),m&&(t.lineWidth=m)),"number"==typeof _&&(t.globalAlpha=_),k&&k.length>0&&(t.lineDashOffset=k.offset||0,t.setLineDash(k)),C||n||(_t.isHidden.test(v)||(v._renderer&&v._renderer.offset?(l=v._renderer.scale.x,h=v._renderer.scale.y,t.save(),t.translate(-v._renderer.offset.x,-v._renderer.offset.y),t.scale(l,h),i=this._size/v._renderer.scale.y,r=this._leading/v._renderer.scale.y,t.font=[this._style,this._weight,i+"px/",r+"px",this._family].join(" "),o=v._renderer.offset.x/v._renderer.scale.x,a=v._renderer.offset.y/v._renderer.scale.y,t.fillText(this.value,o,a),t.restore()):t.fillText(this.value,0,0)),_t.isHidden.test(g)||(g._renderer&&g._renderer.offset?(l=g._renderer.scale.x,h=g._renderer.scale.y,t.save(),t.translate(-g._renderer.offset.x,-g._renderer.offset.y),t.scale(l,h),i=this._size/g._renderer.scale.y,r=this._leading/g._renderer.scale.y,t.font=[this._style,this._weight,i+"px/",r+"px",this._family].join(" "),o=g._renderer.offset.x/g._renderer.scale.x,a=g._renderer.offset.y/g._renderer.scale.y,s=m/g._renderer.scale.x,t.lineWidth=s,t.strokeText(this.value,o,a),t.restore()):t.strokeText(this.value,0,0))),/(underline|strikethrough)/i.test(y)){var O=t.measureText(this.value),E=1;switch(y){case"underline":u=O.actualBoundingBoxAscent,f=O.actualBoundingBoxAscent;break;case"strikethrough":u=0,f=0,E=.5}switch(R){case"top":u+=this._size*E,f+=this._size*E;break;case"baseline":case"bottom":u-=this._size*E,f-=this._size*E}switch(S){case"left":case"start":c=0,d=O.width;break;case"right":case"end":c=-O.width,d=0;break;default:c=-O.width/2,d=O.width/2}t.lineWidth=Math.max(Math.floor(this._size/15),1),t.strokeStyle=t.fillStyle,t.beginPath(),t.moveTo(c,u),t.lineTo(d,f),t.stroke()}return w||t.restore(),C&&!n&&t.clip(),k&&k.length>0&&t.setLineDash(ht),this.flagReset()}},"linear-gradient":{render:function(t){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops){this._renderer.effect=t.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y);for(var e=0;e<this.stops.length;e++){var n=this.stops[e];this._renderer.effect.addColorStop(n._offset,n._color)}}return this.flagReset()}},"radial-gradient":{render:function(t){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops){this._renderer.effect=t.createRadialGradient(this.center._x,this.center._y,0,this.focal._x,this.focal._y,this._radius);for(var e=0;e<this.stops.length;e++){var n=this.stops[e];this._renderer.effect.addColorStop(n._offset,n._color)}}return this.flagReset()}},texture:{render:function(t){this._update();var e=this.image;return(!this._renderer.effect||(this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)&&(this._renderer.effect=t.createPattern(this.image,this._repeat)),(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof M||(this._renderer.offset=new M),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,e&&(this._renderer.offset.x+=e.width/2,this._renderer.offset.y+=e.height/2,this._scale instanceof M?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof M||(this._renderer.scale=new M),this._scale instanceof M?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}},renderSvgArcCommand:function(t,e,n,i,r,o,a,s,l,h){s=s*Math.PI/180,i=ft(i),r=ft(r);var c=(e-l)/2,u=(n-h)/2,d=gt(s)*c+pt(s)*u,f=-pt(s)*c+gt(s)*u,p=i*i,g=r*r,m=d*d,v=f*f,y=m/p+v/g;if(y>1){var _=vt(y);p=(i*=_)*i,g=(r*=_)*r}var b=p*v+g*m,w=vt(ut(0,(p*g-b)/b));o===a&&(w=-w);var k=w*i*f/r,S=-w*r*d/i,R=gt(s)*k-pt(s)*S+(e+l)/2,C=pt(s)*k+gt(s)*S+(n+h)/2,O=wt(1,0,(d-k)/i,(f-S)/r);!function(t,e,n,i,r,o,a,s,l){var h=q.Tolerance.epsilon,c=a-o,u=Math.abs(c)<h;(c=x(c,ct))<h&&(c=u?0:ct),!0!==s||u||(c===ct?c=-ct:c-=ct);for(var d=0;d<U.Resolution;d++){var f=o+d/(U.Resolution-1)*c,p=e+i*Math.cos(f),g=n+r*Math.sin(f);if(0!==l){var m=Math.cos(l),v=Math.sin(l),y=p-e,_=g-n;p=y*m-_*v+e,g=y*v+_*m+n}t.lineTo(p,g)}}(t,R,C,i,r,O,O+wt((d-k)/i,(f-S)/r,(-d-k)/i,(-f-S)/r)%ct,0===a,s)}},bt=function(t){var e=!1!==t.smoothing;this.domElement=t.domElement||document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.overdraw=t.overdraw||!1,void 0!==this.ctx.imageSmoothingEnabled&&(this.ctx.imageSmoothingEnabled=e),this.scene=new st,this.scene.parent=this};function wt(t,e,n,i){var r=t*n+e*i,o=vt(t*t+e*e)*vt(n*n+i*i),a=mt(ut(-1,dt(1,r/o)));return t*i-e*n<0&&(a=-a),a}O.extend(bt,{Utils:_t}),O.extend(bt.prototype,A,{constructor:bt,setSize:function(t,e,n){return this.width=t,this.height=e,this.ratio=void 0===n?et(this.ctx):n,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,this.domElement.style&&O.extend(this.domElement.style,{width:t+"px",height:e+"px"}),this.trigger(A.Types.resize,t,e,n)},render:function(){var t=1===this.ratio;return t||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio)),this.overdraw||this.ctx.clearRect(0,0,this.width,this.height),_t.group.render.call(this.scene,this.ctx),t||this.ctx.restore(),this}});var xt={Image:null,isHeadless:!1,shim:function(t,e){return bt.Utils.shim(t),void 0!==e&&(xt.Image=e),xt.isHeadless=!0,t}},kt={temp:v.document?v.document.createElement("div"):{},hasEventListeners:"function"==typeof v.addEventListener,bind:function(t,e,n,i){return this.hasEventListeners?t.addEventListener(e,n,!!i):t.attachEvent("on"+e,n),kt},unbind:function(t,e,n,i){return kt.hasEventListeners?t.removeEventListeners(e,n,!!i):t.detachEvent("on"+e,n),kt},getRequestAnimationFrame:function(){var t,e=0,n=["ms","moz","webkit","o"],i=v.requestAnimationFrame;if(!i){for(var r=0;r<n.length;r++)i=v[n[r]+"RequestAnimationFrame"]||i,t=v[n[r]+"CancelAnimationFrame"]||v[n[r]+"CancelRequestAnimationFrame"]||t;i=i||function(t,n){var i=(new Date).getTime(),r=Math.max(0,16-(i-e)),o=v.setTimeout((function(){t(i+r)}),r);return e=i+r,o}}return i}},St=function(t){this.name="Two.js",this.message=t};(St.prototype=new Error).constructor=St;var Rt=function(t){var e="_"+t,n="_flag"+t.charAt(0).toUpperCase()+t.slice(1);Object.defineProperty(this,t,{enumerable:!0,get:function(){return this[e]},set:function(t){this[e]=t,this[n]=!0}})},Ct=function(){this.map={}};O.extend(Ct.prototype,{constructor:Ct,add:function(t,e){return this.map[t]=e,this},remove:function(t){return delete this.map[t],this},get:function(t){return this.map[t]},contains:function(t){return t in this.map}});var Ot=function(t,e,n){this._renderer={},this._renderer.type="stop",this.offset="number"==typeof t?t:Ot.Index<=0?0:1,this.opacity="number"==typeof n?n:1,this.color="string"==typeof e?e:Ot.Index<=0?"#fff":"#000",Ot.Index=(Ot.Index+1)%2};O.extend(Ot,{Index:0,Properties:["offset","opacity","color"],MakeObservable:function(t){O.each(Ot.Properties,(function(t){var e="_"+t,n="_flag"+t.charAt(0).toUpperCase()+t.slice(1);Object.defineProperty(this,t,{enumerable:!0,get:function(){return this[e]},set:function(t){this[e]=t,this[n]=!0,this.parent&&(this.parent._flagStops=!0)}})}),t)}}),O.extend(Ot.prototype,A,{constructor:Ot,clone:function(){var t=new Ot;return O.each(Ot.Properties,(function(e){t[e]=this[e]}),this),t},toObject:function(){var t={};return O.each(Ot.Properties,(function(e){t[e]=this[e]}),this),t},flagReset:function(){return this._flagOffset=this._flagColor=this._flagOpacity=!1,this}}),Ot.MakeObservable(Ot.prototype),Ot.prototype.constructor=Ot;var Et=function(t){this._renderer={},this._renderer.type="gradient",this.id=U.Identifier+U.uniqueId(),this.classList=[],this._renderer.flagStops=Et.FlagStops.bind(this),this._renderer.bindStops=Et.BindStops.bind(this),this._renderer.unbindStops=Et.UnbindStops.bind(this),this.spread="pad",this.stops=t};O.extend(Et,{Stop:Ot,Properties:["spread"],MakeObservable:function(t){O.each(Et.Properties,Rt,t),Object.defineProperty(t,"stops",{enumerable:!0,get:function(){return this._stops},set:function(t){this._renderer.flagStops;var e=this._renderer.bindStops,n=this._renderer.unbindStops;this._stops&&this._stops.unbind(A.Types.insert,e).unbind(A.Types.remove,n),this._stops=new nt((t||[]).slice(0)),this._stops.bind(A.Types.insert,e).bind(A.Types.remove,n),e(this._stops)}})},FlagStops:function(){this._flagStops=!0},BindStops:function(t){for(var e=t.length;e--;)t[e].bind(A.Types.change,this._renderer.flagStops),t[e].parent=this;this._renderer.flagStops()},UnbindStops:function(t){for(var e=t.length;e--;)t[e].unbind(A.Types.change,this._renderer.flagStops),delete t[e].parent;this._renderer.flagStops()}}),O.extend(Et.prototype,A,{_flagStops:!1,_flagSpread:!1,clone:function(t){var e=this.stops.map((function(t){return t.clone()})),n=new Et(e);return O.each(Et.Properties,(function(t){n[t]=this[t]}),this),t&&t.add(n),n},toObject:function(){var t={stops:this.stops.map((function(t){return t.toObject()}))};return O.each(Et.Properties,(function(e){t[e]=this[e]}),this),t},_update:function(){return(this._flagSpread||this._flagStops)&&this.trigger(A.Types.change),this},flagReset:function(){return this._flagSpread=this._flagStops=!1,this}}),Et.MakeObservable(Et.prototype);var At=function(t,e,n,i,r){Et.call(this,r),this._renderer.type="linear-gradient";var o=At.FlagEndPoints.bind(this);this.left=(new M).bind(A.Types.change,o),this.right=(new M).bind(A.Types.change,o),"number"==typeof t&&(this.left.x=t),"number"==typeof e&&(this.left.y=e),"number"==typeof n&&(this.right.x=n),"number"==typeof i&&(this.right.y=i)};O.extend(At,{Stop:Ot,MakeObservable:function(t){Et.MakeObservable(t)},FlagEndPoints:function(){this._flagEndPoints=!0}}),O.extend(At.prototype,Et.prototype,{_flagEndPoints:!1,constructor:At,clone:function(t){var e=this.stops.map((function(t){return t.clone()})),n=new At(this.left._x,this.left._y,this.right._x,this.right._y,e);return O.each(Et.Properties,(function(t){n[t]=this[t]}),this),t&&t.add(n),n},toObject:function(){var t=Et.prototype.toObject.call(this);return t.left=this.left.toObject(),t.right=this.right.toObject(),t},_update:function(){return(this._flagEndPoints||this._flagSpread||this._flagStops)&&this.trigger(A.Types.change),this},flagReset:function(){return this._flagEndPoints=!1,Et.prototype.flagReset.call(this),this}}),At.MakeObservable(At.prototype);var Mt,Tt=function(t,e,n,i,r,o){Et.call(this,i),this._renderer.type="radial-gradient",this.center=(new M).bind(A.Types.change,function(){this._flagCenter=!0}.bind(this)),this.radius="number"==typeof n?n:20,this.focal=(new M).bind(A.Types.change,function(){this._flagFocal=!0}.bind(this)),"number"==typeof t&&(this.center.x=t),"number"==typeof e&&(this.center.y=e),this.focal.copy(this.center),"number"==typeof r&&(this.focal.x=r),"number"==typeof o&&(this.focal.y=o)};O.extend(Tt,{Stop:Ot,Properties:["radius"],MakeObservable:function(t){Et.MakeObservable(t),O.each(Tt.Properties,Rt,t)}}),O.extend(Tt.prototype,Et.prototype,{_flagRadius:!1,_flagCenter:!1,_flagFocal:!1,constructor:Tt,clone:function(t){var e=this.stops.map((function(t){return t.clone()})),n=new Tt(this.center._x,this.center._y,this._radius,e,this.focal._x,this.focal._y);return O.each(Et.Properties.concat(Tt.Properties),(function(t){n[t]=this[t]}),this),t&&t.add(n),n},toObject:function(){var t=Et.prototype.toObject.call(this);return O.each(Tt.Properties,(function(e){t[e]=this[e]}),this),t.center=this.center.toObject(),t.focal=this.focal.toObject(),t},_update:function(){return(this._flagRadius||this._flatCenter||this._flagFocal||this._flagSpread||this._flagStops)&&this.trigger(A.Types.change),this},flagReset:function(){return this._flagRadius=this._flagCenter=this._flagFocal=!1,Et.prototype.flagReset.call(this),this}}),Tt.MakeObservable(Tt.prototype);var It={video:/\.(mp4|webm|ogg)$/i,image:/\.(jpe?g|png|gif|tiff|webp)$/i,effect:/texture|gradient/i};v.document&&(Mt=document.createElement("a"));var Pt=function(t,e){if(this._renderer={},this._renderer.type="texture",this._renderer.flagOffset=Pt.FlagOffset.bind(this),this._renderer.flagScale=Pt.FlagScale.bind(this),this.id=U.Identifier+U.uniqueId(),this.classList=[],this.loaded=!1,this.repeat="no-repeat",this.offset=new M,"function"==typeof e){var n=function(){this.unbind(A.Types.load,n),"function"==typeof e&&e()}.bind(this);this.bind(A.Types.load,n)}if("string"==typeof t)this.src=t;else if("object"==typeof t){var i=Object.prototype.toString.call(t);"[object HTMLImageElement]"!==i&&"[object HTMLCanvasElement]"!==i&&"[object HTMLVideoElement]"!==i&&"[object Image]"!==i||(this.image=t)}this._update()};O.extend(Pt,{Properties:["src","loaded","repeat"],RegularExpressions:It,ImageRegistry:new Ct,getAbsoluteURL:function(t){return Mt?(Mt.href=t,Mt.href):t},loadHeadlessBuffer:function(t,e){t.image.onload=e,t.image.src=t.src},getTag:function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||"img"},getImage:function(t){var e,n=Pt.getAbsoluteURL(t);return Pt.ImageRegistry.contains(n)?Pt.ImageRegistry.get(n):(xt.Image?(e=new xt.Image,bt.Utils.shim(e,"img")):v.document?e=It.video.test(n)?document.createElement("video"):document.createElement("img"):console.warn("Two.js: no prototypical image defined for Two.Texture"),e.crossOrigin="anonymous",e)},Register:{canvas:function(t,e){t._src="#"+t.id,Pt.ImageRegistry.add(t.src,t.image),"function"==typeof e&&e()},img:function(t,e){var n=t.image,i=function(t){!xt.isHeadless&&n.removeEventListener&&"function"==typeof n.removeEventListener&&(n.removeEventListener("load",i,!1),n.removeEventListener("error",r,!1)),"function"==typeof e&&e()},r=function(e){throw xt.isHeadless||"function"!=typeof n.removeEventListener||(n.removeEventListener("load",i,!1),n.removeEventListener("error",r,!1)),new St("unable to load "+t.src)};"number"==typeof n.width&&n.width>0&&"number"==typeof n.height&&n.height>0?i():xt.isHeadless||"function"!=typeof n.addEventListener||(n.addEventListener("load",i,!1),n.addEventListener("error",r,!1)),t._src=Pt.getAbsoluteURL(t._src),!xt.isHeadless&&n&&n.getAttribute("two-src")||(xt.isHeadless||n.setAttribute("two-src",t.src),Pt.ImageRegistry.add(t.src,n),xt.isHeadless?Pt.loadHeadlessBuffer(t,i):t.image.src=t.src)},video:function(t,e){if(xt.isHeadless)throw new St("video textures are not implemented in headless environments.");var n=function(r){t.image.removeEventListener("canplaythrough",n,!1),t.image.removeEventListener("error",i,!1),t.image.width=t.image.videoWidth,t.image.height=t.image.videoHeight,"function"==typeof e&&e()},i=function(e){throw t.image.removeEventListener("canplaythrough",n,!1),t.image.removeEventListener("error",i,!1),new St("unable to load "+t.src)};t._src=Pt.getAbsoluteURL(t._src),t.image.getAttribute("two-src")||(t.image.setAttribute("two-src",t.src),Pt.ImageRegistry.add(t.src,t.image)),t.image.readyState>=4?n():(t.image.addEventListener("canplaythrough",n,!1),t.image.addEventListener("error",i,!1),t.image.src=t.src,t.image.load())}},load:function(t,e){t.src;var n=t.image,i=Pt.getTag(n);t._flagImage&&(/canvas/i.test(i)?Pt.Register.canvas(t,e):(t._src=!xt.isHeadless&&n.getAttribute("two-src")||n.src,Pt.Register[i](t,e))),t._flagSrc&&(n||(n=Pt.getImage(t.src),t.image=n),i=Pt.getTag(n),Pt.Register[i](t,e))},FlagOffset:function(){this._flagOffset=!0},FlagScale:function(){this._flagScale=!0},MakeObservable:function(t){O.each(Pt.Properties,Rt,t),Object.defineProperty(t,"image",{enumerable:!0,get:function(){return this._image},set:function(t){var e;switch(Pt.getTag(t)){case"canvas":e="#"+t.id;break;default:e=t.src}Pt.ImageRegistry.contains(e)?this._image=Pt.ImageRegistry.get(t.src):this._image=t,this._flagImage=!0}}),Object.defineProperty(t,"offset",{enumerable:!0,get:function(){return this._offset},set:function(t){this._offset&&this._offset.unbind(A.Types.change,this._renderer.flagOffset),this._offset=t,this._offset.bind(A.Types.change,this._renderer.flagOffset),this._flagOffset=!0}}),Object.defineProperty(t,"scale",{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof M&&this._scale.unbind(A.Types.change,this._renderer.flagScale),this._scale=t,this._scale instanceof M&&this._scale.bind(A.Types.change,this._renderer.flagScale),this._flagScale=!0}})}}),O.extend(Pt.prototype,A,it.prototype,{_flagSrc:!1,_flagImage:!1,_flagVideo:!1,_flagLoaded:!1,_flagRepeat:!1,_flagOffset:!1,_flagScale:!1,_src:"",_image:null,_loaded:!1,_repeat:"no-repeat",_scale:1,_offset:null,constructor:Pt,clone:function(){var t=new Pt(this.src);return t.repeat=this.repeat,t.offset.copy(this.origin),t.scale=this.scale,t},toObject:function(){return{src:this.src,repeat:this.repeat,origin:this.origin.toObject(),scale:"number"==typeof this.scale?this.scale:this.scale.toObject()}},_update:function(){return(this._flagSrc||this._flagImage)&&(this.trigger(A.Types.change),(this._flagSrc||this._flagImage)&&(this.loaded=!1,Pt.load(this,function(){this.loaded=!0,this.trigger(A.Types.change).trigger(A.Types.load)}.bind(this)))),this._image&&this._image.readyState>=4&&(this._flagVideo=!0),this},flagReset:function(){return this._flagSrc=this._flagImage=this._flagLoaded=this._flagVideo=this._flagScale=this._flagOffset=!1,this}}),Pt.MakeObservable(Pt.prototype);var Ft=Math.min,jt=Math.max,zt=Math.ceil,Lt=Math.floor,Dt=function(t,e,n,i){it.call(this),this._renderer.type="path",this._renderer.flagVertices=Dt.FlagVertices.bind(this),this._renderer.bindVertices=Dt.BindVertices.bind(this),this._renderer.unbindVertices=Dt.UnbindVertices.bind(this),this._renderer.flagFill=Dt.FlagFill.bind(this),this._renderer.flagStroke=Dt.FlagStroke.bind(this),this._renderer.vertices=[],this._renderer.collection=[],this._closed=!!e,this._curved=!!n,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.linewidth=1,this.opacity=1,this.className="",this.visible=!0,this.cap="butt",this.join="miter",this.miter=4,this.vertices=t,this.automatic=!i,this.dashes=[],this.dashes.offset=0};function Bt(t,e){if(0===e||1===e)return!0;for(var n=t._length*e,i=0,r=0;r<t._lengths.length;r++){var o=t._lengths[r];if(i>=n)return n-i>=0;i+=o}return!1}function Vt(t,e){var n=t._length;if(e<=0)return 0;if(e>=n)return t._lengths.length-1;for(var i=0,r=0;i<t._lengths.length;i++){if(r+t._lengths[i]>=e)return e-=r,Math.max(i-1,0)+e/t._lengths[i];r+=t._lengths[i]}return-1}function Wt(t,e,n){var i,r,o,a,s,l,h,c,u=e.controls&&e.controls.right,d=t.controls&&t.controls.left;return i=e.x,s=e.y,r=(u||e).x,l=(u||e).y,o=(d||t).x,h=(d||t).y,a=t.x,c=t.y,u&&e._relative&&(r+=e.x,l+=e.y),d&&t._relative&&(o+=t.x,h+=t.y),Z(i,s,r,l,o,h,a,c,n)}function Ut(t,e,n){var i,r,o,a,s,l,h,c,u=e.controls&&e.controls.right,d=t.controls&&t.controls.left;return i=e.x,s=e.y,r=(u||e).x,l=(u||e).y,o=(d||t).x,h=(d||t).y,a=t.x,c=t.y,u&&e._relative&&(r+=e.x,l+=e.y),d&&t._relative&&(o+=t.x,h+=t.y),G(i,s,r,l,o,h,a,c,n)}O.extend(Dt,{Properties:["fill","stroke","linewidth","opacity","visible","cap","join","miter","closed","curved","automatic","beginning","ending"],Utils:{getCurveLength:Wt},FlagVertices:function(){this._flagVertices=!0,this._flagLength=!0,this.parent&&(this.parent._flagLength=!0)},BindVertices:function(t){for(var e=t.length;e--;)t[e].bind(A.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()},UnbindVertices:function(t){for(var e=t.length;e--;)t[e].unbind(A.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()},FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(t){it.MakeObservable(t),O.each(Dt.Properties.slice(2,8),Rt,t),Object.defineProperty(t,"fill",{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof Et||this._fill instanceof At||this._fill instanceof Tt||this._fill instanceof Pt)&&this._fill.unbind(A.Types.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof Et||this._fill instanceof At||this._fill instanceof Tt||this._fill instanceof Pt)&&this._fill.bind(A.Types.change,this._renderer.flagFill)}}),Object.defineProperty(t,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof Et||this._stroke instanceof At||this._stroke instanceof Tt||this._stroke instanceof Pt)&&this._stroke.unbind(A.Types.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof Et||this._stroke instanceof At||this._stroke instanceof Tt||this._stroke instanceof Pt)&&this._stroke.bind(A.Types.change,this._renderer.flagStroke)}}),Object.defineProperty(t,"length",{get:function(){return this._flagLength&&this._updateLength(),this._length}}),Object.defineProperty(t,"closed",{enumerable:!0,get:function(){return this._closed},set:function(t){this._closed=!!t,this._flagVertices=!0}}),Object.defineProperty(t,"curved",{enumerable:!0,get:function(){return this._curved},set:function(t){this._curved=!!t,this._flagVertices=!0}}),Object.defineProperty(t,"automatic",{enumerable:!0,get:function(){return this._automatic},set:function(t){if(t!==this._automatic){this._automatic=!!t;var e=this._automatic?"ignore":"listen";O.each(this.vertices,(function(t){t[e]()}))}}}),Object.defineProperty(t,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(t){this._beginning=t,this._flagVertices=!0}}),Object.defineProperty(t,"ending",{enumerable:!0,get:function(){return this._ending},set:function(t){this._ending=t,this._flagVertices=!0}}),Object.defineProperty(t,"vertices",{enumerable:!0,get:function(){return this._collection},set:function(t){this._renderer.flagVertices;var e=this._renderer.bindVertices,n=this._renderer.unbindVertices;this._collection&&this._collection.unbind(A.Types.insert,e).unbind(A.Types.remove,n),this._collection=t instanceof nt?t:new nt(t||[]),this._collection.bind(A.Types.insert,e).bind(A.Types.remove,n),e(this._collection)}}),Object.defineProperty(t,"clip",{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}}),Object.defineProperty(t,"dashes",{enumerable:!0,get:function(){return this._dashes},set:function(t){"number"!=typeof t.offset&&(t.offset=this._dashes.offset||0),this._dashes=t}})}}),O.extend(Dt.prototype,it.prototype,{_flagVertices:!0,_flagLength:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagCap:!0,_flagJoin:!0,_flagMiter:!0,_flagClip:!1,_length:0,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_clip:!1,_dashes:[],constructor:Dt,clone:function(t){for(var e=new Dt,n=0;n<this.vertices.length;n++)e.vertices.push(this.vertices[n].clone());for(var i=0;i<Dt.Properties.length;i++){var r=Dt.Properties[i];e[r]=this[r]}return e.className=this.className,e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},toObject:function(){var t={vertices:this.vertices.map((function(t){return t.toObject()}))};return O.each(Dt.Properties,(function(e){t[e]=this[e]}),this),t.className=this.className,t.translation=this.translation.toObject(),t.rotation=this.rotation,t.scale=this.scale instanceof M?this.scale.toObject():this.scale,this.matrix.manual&&(t.matrix=this.matrix.toObject()),t},noFill:function(){return this.fill="transparent",this},noStroke:function(){return this.stroke=void 0,this},corner:function(){var t=this.getBoundingClientRect(!0);return t.centroid={x:t.left+t.width/2,y:t.top+t.height/2},O.each(this.vertices,(function(e){e.subSelf(t.centroid),e.x+=t.width/2,e.y+=t.height/2})),this},center:function(){var t=this.getBoundingClientRect(!0);return t.centroid={x:t.left+t.width/2-this.translation.x,y:t.top+t.height/2-this.translation.y},O.each(this.vertices,(function(e){e.subSelf(t.centroid)})),this},remove:function(){return this.parent?(this.parent.remove(this),this):this},getBoundingClientRect:function(t){var e,n,i,r,o,a,s,l,h=1/0,c=-1/0,u=1/0,d=-1/0;if(this._update(!0),e=t?this._matrix:b(this),n=this.linewidth/2,(i=this._renderer.vertices.length)<=0)return{width:0,height:0};for(r=0;r<i;r++)if(l=this._renderer.vertices[r],(o=this._renderer.vertices[(r+i-1)%i]).controls&&l.controls){a=o.relative?e.multiply(o.controls.right.x+o.x,o.controls.right.y+o.y,1):e.multiply(o.controls.right.x,o.controls.right.y,1),o=e.multiply(o.x,o.y,1),s=l.relative?e.multiply(l.controls.left.x+l.x,l.controls.left.y+l.y,1):e.multiply(l.controls.left.x,l.controls.left.y,1),l=e.multiply(l.x,l.y,1);var f=Y(o.x,o.y,a.x,a.y,s.x,s.y,l.x,l.y);u=Ft(f.min.y-n,u),h=Ft(f.min.x-n,h),c=jt(f.max.x+n,c),d=jt(f.max.y+n,d)}else r<=1&&(o=e.multiply(o.x,o.y,1),u=Ft(o.y-n,u),h=Ft(o.x-n,h),c=jt(o.x+n,c),d=jt(o.y+n,d)),l=e.multiply(l.x,l.y,1),u=Ft(l.y-n,u),h=Ft(l.x-n,h),c=jt(l.x+n,c),d=jt(l.y+n,d);return{top:u,left:h,right:c,bottom:d,width:c-h,height:d-u}},getPointAt:function(t,e){for(var n,i,r,o,a,s,l,h,c,u,d,f,p,m,v,y=this.length*Math.min(Math.max(t,0),1),_=this.vertices.length,b=_-1,k=null,S=null,R=0,C=this._lengths.length,E=0;R<C;R++){if(E+this._lengths[R]>=y){this._closed?(n=x(R,_),i=x(R-1,_),0===R&&(n=i,i=R)):(n=R,i=Math.min(Math.max(R-1,0),b)),k=this.vertices[n],S=this.vertices[i],y-=E,t=0!==this._lengths[R]?y/this._lengths[R]:0;break}E+=this._lengths[R]}if(null===k||null===S)return null;if(!k)return S;if(!S)return k;v=S.controls&&S.controls.right,m=k.controls&&k.controls.left,a=S.x,u=S.y,s=(v||S).x,d=(v||S).y,l=(m||k).x,f=(m||k).y,h=k.x,p=k.y,v&&S.relative&&(s+=S.x,d+=S.y),m&&k.relative&&(l+=k.x,f+=k.y),o=H(t,a,s,l,h),c=H(t,u,d,f,p);var A=w(a,s,t),M=w(u,d,t),T=w(s,l,t),I=w(d,f,t),P=w(l,h,t),j=w(f,p,t),z=w(A,T,t),L=w(M,I,t),D=w(T,P,t),B=w(I,j,t);return O.isObject(e)?(e.x=o,e.y=c,O.isObject(e.controls)||F.AppendCurveProperties(e),e.controls.left.x=z,e.controls.left.y=L,e.controls.right.x=D,e.controls.right.y=B,("boolean"===(e.relative,!1)||e.relative)&&(e.controls.left.x-=o,e.controls.left.y-=c,e.controls.right.x-=o,e.controls.right.y-=c),e.t=t,e):((r=new F(o,c,z-o,L-c,D-o,B-c,this._curved?g.curve:g.line)).t=t,r)},plot:function(){if(this.curved)return $(this._collection,this.closed),this;for(var t=0;t<this._collection.length;t++)this._collection[t].command=0===t?g.move:g.line;return this},subdivide:function(t){this._update();var e=this.vertices.length-1,n=this.vertices[e],i=this._closed||this.vertices[e]._command===g.close,r=[];return O.each(this.vertices,(function(o,a){if(a<=0&&!i)n=o;else{if(o.command===g.move)return r.push(new F(n.x,n.y)),a>0&&(r[r.length-1].command=g.line),void(n=o);var s=Ut(o,n,t);r=r.concat(s),O.each(s,(function(t,e){e<=0&&n.command===g.move?t.command=g.move:t.command=g.line})),a>=e&&(this._closed&&this._automatic?(s=Ut(o,n=o,t),r=r.concat(s),O.each(s,(function(t,e){e<=0&&n.command===g.move?t.command=g.move:t.command=g.line}))):i&&r.push(new F(o.x,o.y)),r[r.length-1].command=i?g.close:g.line),n=o}}),this),this._automatic=!1,this._curved=!1,this.vertices=r,this},_updateLength:function(t,e){e||this._update();var n=this.vertices.length-1,i=this.vertices[n],r=0;return void 0===this._lengths&&(this._lengths=[]),O.each(this.vertices,(function(e,n){if(n<=0||e.command===g.move)return i=e,void(this._lengths[n]=0);this._lengths[n]=Wt(e,i,t),r+=this._lengths[n],i=e}),this),this._length=r,this._flagLength=!1,this},_update:function(){if(this._flagVertices){this._automatic&&this.plot(),this._flagLength&&this._updateLength(void 0,!0);var t,e,n,i,r,o=this._collection.length,a=this._closed,s=Math.min(this._beginning,this._ending),l=Math.max(this._beginning,this._ending),h=Vt(this,s*this._length),c=Vt(this,l*this._length),u=zt(h),d=Lt(c);this._renderer.vertices.length=0;for(var f=0;f<o;f++)this._renderer.collection.length<=f&&this._renderer.collection.push(new F),f>d&&!e?((r=this._renderer.collection[f]).copy(this._collection[f]),this.getPointAt(l,r),r.command=this._renderer.collection[f].command,this._renderer.vertices.push(r),e=r,(n=this._collection[f-1])&&n.controls&&(r.controls.right.clear(),this._renderer.collection[f-1].controls.right.clear().lerp(n.controls.right,r.t))):f>=u&&f<=d&&(r=this._renderer.collection[f].copy(this._collection[f]),this._renderer.vertices.push(r),f===d&&Bt(this,l)?(e=r,!a&&e.controls&&e.controls.right.clear()):f===u&&Bt(this,s)&&((t=r).command=g.move,!a&&t.controls&&t.controls.left.clear()));u>0&&!t&&(f=u-1,(r=this._renderer.collection[f]).copy(this._collection[f]),this.getPointAt(s,r),r.command=g.move,this._renderer.vertices.unshift(r),t=r,(i=this._collection[f+1])&&i.controls&&(r.controls.left.clear(),this._renderer.collection[f+1].controls.left.copy(i.controls.left).lerp(M.zero,r.t)))}return it.prototype._update.apply(this,arguments),this},flagReset:function(){return this._flagVertices=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClip=!1,it.prototype.flagReset.call(this),this}}),Dt.MakeObservable(Dt.prototype);var Nt=2*Math.PI,qt=Math.PI/2,Ht=Math.cos,Gt=Math.sin,Zt=function(t,e,n,i){for(var r=i?Math.max(i,2):4,o=[],a=0;a<r;a++)o.push(new F);Dt.call(this,o,!0,!0,!0),this.radius=n,this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)};O.extend(Zt,{Properties:["radius"],MakeObservable:function(t){Dt.MakeObservable(t),O.each(Zt.Properties,Rt,t)}}),O.extend(Zt.prototype,Dt.prototype,{_flagRadius:!1,_radius:0,constructor:Zt,_update:function(){if(this._flagRadius)for(var t=4/3*Math.tan(Math.PI/(2*this.vertices.length)),e=this._radius,n=e*t,i=0,r=this.vertices.length;i<r;i++){var o=i/r*Nt,a=e*Ht(o),s=e*Gt(o),l=n*Ht(o-qt),h=n*Gt(o-qt),c=n*Ht(o+qt),u=n*Gt(o+qt),d=this.vertices[i];d.command=g.curve,d.set(a,s),d.controls.left.set(l,h),d.controls.right.set(c,u)}return Dt.prototype._update.call(this),this},flagReset:function(){return this._flagRadius=!1,Dt.prototype.flagReset.call(this),this},clone:function(t){var e=new Zt(0,0,this.radius,this.vertices.length);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,this.matrix.manual&&e.matrix.copy(this.matrix),O.each(Dt.Properties,(function(t){e[t]=this[t]}),this),t&&t.add(e),e},toObject:function(){var t=Dt.prototype.toObject.call(this);return O.each(Zt.Properties,(function(e){t[e]=this[e]}),this),t}}),Zt.MakeObservable(Zt.prototype);var Yt=2*Math.PI,Kt=Math.PI/2,$t=Math.cos,Xt=Math.sin,Jt=function(t,e,n,i,r){"number"!=typeof i&&(i=n);for(var o=r?Math.max(r,2):4,a=[],s=0;s<o;s++)a.push(new F);Dt.call(this,a,!0,!0,!0),this.width=2*n,this.height=2*i,this._update(),this.translation.set(t,e)};O.extend(Jt,{Properties:["width","height"],MakeObservable:function(t){Dt.MakeObservable(t),O.each(Jt.Properties,Rt,t)}}),O.extend(Jt.prototype,Dt.prototype,{_flagWidth:!1,_flagHeight:!1,_width:0,_height:0,constructor:Jt,_update:function(){if(this._flagWidth||this._flagHeight)for(var t=4/3*Math.tan(Math.PI/(2*this.vertices.length)),e=this._width/2,n=this._height/2,i=0,r=this.vertices.length;i<r;i++){var o=i/r*Yt,a=e*$t(o),s=n*Xt(o),l=e*t*$t(o-Kt),h=n*t*Xt(o-Kt),c=e*t*$t(o+Kt),u=n*t*Xt(o+Kt),d=this.vertices[i];d.command=g.curve,d.set(a,s),d.controls.left.set(l,h),d.controls.right.set(c,u)}return Dt.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,Dt.prototype.flagReset.call(this),this},clone:function(t){var e=this.width/2,n=this.height/2,i=this.vertices.length,r=new Jt(0,0,e,n,i);return r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,this.matrix.manual&&r.matrix.copy(this.matrix),O.each(Dt.Properties,(function(t){r[t]=this[t]}),this),t&&t.add(r),r},toObject:function(){var t=Dt.prototype.toObject.call(this);return O.each(Jt.Properties,(function(e){t[e]=this[e]}),this),t}}),Jt.MakeObservable(Jt.prototype);var Qt=function(t,e,n,i){Dt.call(this,[new F(t,e),new F(n,i)]),this.vertices[0].command=g.move,this.vertices[1].command=g.line,this.automatic=!1};O.extend(Qt.prototype,Dt.prototype),Qt.prototype.constructor=Qt,Dt.MakeObservable(Qt.prototype);var te=function(t,e,n,i){Dt.call(this,[new F,new F,new F,new F],!0,!1,!0),this.width=n,this.height=i,this.origin=new M,this.translation.set(t,e),this._update()};O.extend(te,{Properties:["width","height"],MakeObservable:function(t){Dt.MakeObservable(t),O.each(te.Properties,Rt,t),Object.defineProperty(t,"origin",{enumerable:!0,get:function(){return this._origin},set:function(t){this._origin&&this._origin.unbind(A.Types.change,this._renderer.flagVertices),this._origin=t,this._origin.bind(A.Types.change,this._renderer.flagVertices),this._renderer.flagVertices()}})}}),O.extend(te.prototype,Dt.prototype,{_flagWidth:0,_flagHeight:0,_width:0,_height:0,_origin:null,constructor:te,_update:function(){if(this._flagWidth||this._flagHeight){var t=this._width/2,e=this._height/2;this.vertices[0].set(-t,-e).add(this._origin).command=g.move,this.vertices[1].set(t,-e).add(this._origin).command=g.line,this.vertices[2].set(t,e).add(this._origin).command=g.line,this.vertices[3].set(-t,e).add(this._origin).command=g.line,this.vertices[4]&&(this.vertices[4].set(-t,-e).add(this._origin).command=g.line)}return Dt.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,Dt.prototype.flagReset.call(this),this},clone:function(t){var e=new te(0,0,this.width,this.height);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,this.matrix.manual&&e.matrix.copy(this.matrix),O.each(Dt.Properties,(function(t){e[t]=this[t]}),this),t&&t.add(e),e},toObject:function(){var t=Dt.prototype.toObject.call(this);return t.width=this.width,t.height=this.height,t.origin=this.origin.toObject(),t}}),te.MakeObservable(te.prototype);var ee=function(t,e,n,i,r){void 0===r&&(r=Math.floor(Math.min(n,i)/12));for(var o=[],a=0;a<10;a++)o.push(new F(0,0,0,0,0,0,0===a?g.move:g.curve));Dt.call(this,o),this.closed=!0,this.automatic=!1,this._renderer.flagRadius=ee.FlagRadius.bind(this),this.width=n,this.height=i,this.radius=r,this._update(),this.translation.set(t,e)};O.extend(ee,{Properties:["width","height"],FlagRadius:function(){this._flagRadius=!0},MakeObservable:function(t){Dt.MakeObservable(t),O.each(ee.Properties,Rt,t),Object.defineProperty(t,"radius",{enumerable:!0,get:function(){return this._radius},set:function(t){this._radius instanceof M&&this._radius.unbind(A.Types.change,this._renderer.flagRadius),this._radius=t,this._radius instanceof M&&this._radius.bind(A.Types.change,this._renderer.flagRadius),this._flagRadius=!0}})}}),O.extend(ee.prototype,Dt.prototype,{_flagWidth:!1,_flagHeight:!1,_flagRadius:!1,_width:0,_height:0,_radius:0,constructor:ee,_update:function(){if(this._flagWidth||this._flagHeight||this._flagRadius){var t,e,n,i=this._width,r=this._height;this._radius instanceof M?(t=this._radius.x,e=this._radius.y):(t=this._radius,e=this._radius);var o=i/2,a=r/2;(n=this.vertices[0]).x=-(o-t),n.y=-a,(n=this.vertices[1]).x=o-t,n.y=-a,n.controls.left.clear(),n.controls.right.x=t,n.controls.right.y=0,(n=this.vertices[2]).x=o,n.y=-(a-e),n.controls.right.clear(),n.controls.left.clear(),(n=this.vertices[3]).x=o,n.y=a-e,n.controls.left.clear(),n.controls.right.x=0,n.controls.right.y=e,(n=this.vertices[4]).x=o-t,n.y=a,n.controls.right.clear(),n.controls.left.clear(),(n=this.vertices[5]).x=-(o-t),n.y=a,n.controls.left.clear(),n.controls.right.x=-t,n.controls.right.y=0,(n=this.vertices[6]).x=-o,n.y=a-e,n.controls.left.clear(),n.controls.right.clear(),(n=this.vertices[7]).x=-o,n.y=-(a-e),n.controls.left.clear(),n.controls.right.x=0,n.controls.right.y=-e,(n=this.vertices[8]).x=-(o-t),n.y=-a,n.controls.left.clear(),n.controls.right.clear(),(n=this.vertices[9]).copy(this.vertices[8])}return Dt.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagRadius=!1,Dt.prototype.flagReset.call(this),this},clone:function(t){var e=this.width,n=this.height,i=this.radius,r=new ee(0,0,e,n,i);return r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,this.matrix.manual&&r.matrix.copy(this.matrix),O.each(Dt.Properties,(function(t){r[t]=this[t]}),this),t&&t.add(r),r},toObject:function(){var t=Dt.prototype.toObject.call(this);return O.each(ee.Properties,(function(e){t[e]=this[e]}),this),t.radius="number"==typeof this.radius?this.radius:this.radius.toObject(),t}}),ee.MakeObservable(ee.prototype);var ne=function(t,e,n,i){if(it.call(this),this._renderer.type="text",this._renderer.flagFill=ne.FlagFill.bind(this),this._renderer.flagStroke=ne.FlagStroke.bind(this),this.value=t,"number"==typeof e&&(this.translation.x=e),"number"==typeof n&&(this.translation.y=n),this.dashes=[],this.dashes.offset=0,!O.isObject(i))return this;O.each(ne.Properties,(function(t){t in i&&(this[t]=i[t])}),this)};O.extend(ne,{Ratio:.6,Properties:["value","family","size","leading","alignment","linewidth","style","weight","decoration","baseline","opacity","visible","className","fill","stroke"],FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(t){it.MakeObservable(t),O.each(ne.Properties.slice(0,12),Rt,t),Object.defineProperty(t,"fill",{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof Et||this._fill instanceof At||this._fill instanceof Tt||this._fill instanceof Pt)&&this._fill.unbind(A.Types.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof Et||this._fill instanceof At||this._fill instanceof Tt||this._fill instanceof Pt)&&this._fill.bind(A.Types.change,this._renderer.flagFill)}}),Object.defineProperty(t,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof Et||this._stroke instanceof At||this._stroke instanceof Tt||this._stroke instanceof Pt)&&this._stroke.unbind(A.Types.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof Et||this._stroke instanceof At||this._stroke instanceof Tt||this._stroke instanceof Pt)&&this._stroke.bind(A.Types.change,this._renderer.flagStroke)}}),Object.defineProperty(t,"clip",{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}}),Object.defineProperty(t,"dashes",{enumerable:!0,get:function(){return this._dashes},set:function(t){"number"!=typeof t.offset&&(t.offset=this._dashes.offset||0),this._dashes=t}})}}),O.extend(ne.prototype,it.prototype,{_flagValue:!0,_flagFamily:!0,_flagSize:!0,_flagLeading:!0,_flagAlignment:!0,_flagBaseline:!0,_flagStyle:!0,_flagWeight:!0,_flagDecoration:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagClassName:!0,_flagVisible:!0,_flagClip:!1,_value:"",_family:"sans-serif",_size:13,_leading:17,_alignment:"center",_baseline:"middle",_style:"normal",_weight:500,_decoration:"none",_fill:"#000",_stroke:"transparent",_linewidth:1,_opacity:1,_className:"",_visible:!0,_clip:!1,_dashes:[],constructor:ne,remove:function(){return this.parent?(this.parent.remove(this),this):this},clone:function(t){var e=new ne(this.value);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,O.each(ne.Properties,(function(t){e[t]=this[t]}),this),this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},toObject:function(){var t={translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};return this.matrix.manual&&(t.matrix=this.matrix.toObject()),O.each(ne.Properties,(function(e){t[e]=this[e]}),this),t},noFill:function(){return this.fill="transparent",this},noStroke:function(){return this.stroke=void 0,this.linewidth=void 0,this},getBoundingClientRect:function(t){var e,n,i,r,o,a;this._update(!0),e=t?this._matrix:b(this);var s=this.leading,l=this.value.length*this.size*ne.Ratio;switch(this.alignment){case"left":i=0,r=l;break;case"right":i=-l,r=0;break;default:i=-l/2,r=l/2}switch(this.baseline){case"top":o=0,a=s;break;case"bottom":o=-s,a=0;break;default:o=-s/2,a=s/2}return{top:o=(n=e.multiply(i,o,1)).y,left:i=n.x,right:r=(n=e.multiply(r,a,1)).x,bottom:a=n.y,width:r-i,height:a-o}},flagReset:function(){return this._flagValue=this._flagFamily=this._flagSize=this._flagLeading=this._flagAlignment=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagClip=this._flagDecoration=this._flagClassName=this._flagBaseline=this._flagWeight=this._flagStyle=!1,it.prototype.flagReset.call(this),this}}),ne.MakeObservable(ne.prototype);var ie={start:"left",middle:"center",end:"right"},re=function(t,e){var n,i,r,o;e||(e={}),n=t.split(";");for(var a=0;a<n.length;a++)r=(i=n[a].split(":"))[0],o=i[1],void 0!==r&&void 0!==o&&(e[r]=o.replace(/\s/,""));return e},oe=function(t){for(var e={},n=ae(t),i=Math.max(n.length,t.style.length),r=0;r<i;r++){var o=t.style[r],a=n[r];o&&(e[o]=t.style[o]),a&&(e[a]=t.getAttribute(a))}return e},ae=function(t){for(var e=t.getAttributeNames(),n=["id","class","transform","xmlns","viewBox"],i=0;i<n.length;i++){var r=n[i],o=Array.prototype.indexOf.call(e,r);o>=0&&e.splice(o,1)}return e},se=function(t,e){var n=e.split(/\s/),i=parseFloat(n[0]),r=parseFloat(n[1]),o=parseFloat(n[2]),a=parseFloat(n[3]),s=Math.min(this.width/o,this.height/a);return t.translation.x-=i*s,t.translation.y-=r*s,t.scale=s,t},le=function(t,e,n){var i,r,o,a,s={},l={},h={};if(v.getComputedStyle){var c=v.getComputedStyle(t);for(i=c.length;i--;)void 0!==(o=c[r=c[i]])&&(s[r]=o)}for(i=0;i<t.attributes.length;i++)a=t.attributes[i],/style/i.test(a.nodeName)?re(a.value,h):l[a.nodeName]=a.value;for(r in void 0!==s.opacity&&(s["stroke-opacity"]=s.opacity,s["fill-opacity"]=s.opacity,delete s.opacity),n&&O.defaults(s,n),O.extend(s,h,l),s.visible=!(void 0===s.display&&/none/i.test(s.display))||void 0===s.visibility&&/hidden/i.test(s.visibility),s)switch(o=s[r],r){case"transform":if(/none/i.test(o))break;if(null===(p=t.transform&&t.transform.baseVal&&t.transform.baseVal.length>0?t.transform.baseVal[0].matrix:t.getCTM?t.getCTM():null))break;if(U.AutoCalculateImportedMatrices){var u=y(p);e.translation.set(u.translateX,u.translateY),e.rotation=Math.PI*(u.rotation/180),e.scale=new M(u.scaleX,u.scaleY);var d=parseFloat((s.x+"").replace("px")),f=parseFloat((s.y+"").replace("px"));d&&(e.translation.x=d),f&&(e.translation.y=f)}else{var p=t.getCTM();e._matrix.manual=!0,e._matrix.set(p.a,p.b,p.c,p.d,p.e,p.f)}break;case"viewBox":se.call(this,e,o);break;case"visible":if(e instanceof st){e._visible=o;break}e.visible=o;break;case"stroke-linecap":if(e instanceof st){e._cap=o;break}e.cap=o;break;case"stroke-linejoin":if(e instanceof st){e._join=o;break}e.join=o;break;case"stroke-miterlimit":if(e instanceof st){e._miter=o;break}e.miter=o;break;case"stroke-width":if(e instanceof st){e._linewidth=parseFloat(o);break}e.linewidth=parseFloat(o);break;case"opacity":case"stroke-opacity":case"fill-opacity":if(e instanceof st){e._opacity=parseFloat(o);break}e.opacity=parseFloat(o);break;case"fill":case"stroke":if(e instanceof st&&(r="_"+r),/url\(#.*\)/i.test(o)){var g=ce(this);e[r]=g.getById(o.replace(/url\(#(.*)\)/i,"$1"))}else e[r]=/none/i.test(o)?"transparent":o;break;case"id":e.id=o,t.id=o+"-"+U.Identifier+"applied";break;case"class":case"className":e.classList=o.split(" ");break;case"x":case"y":if(e instanceof Et||e instanceof At||e instanceof Tt)break;if(o.match("[a-z%]$")&&!o.endsWith("px")){var m=new St("only pixel values are supported with the "+r+" attribute.");console.warn(m.name,m.message)}e.translation[r]=parseFloat(o);break;case"font-family":e instanceof ne&&(e.family=o);break;case"font-size":e instanceof ne&&(e.size=o);break;case"font-weight":e instanceof ne&&(e.weight=o);break;case"font-style":e instanceof ne&&(e.style=o);break;case"text-decoration":e instanceof ne&&(e.decoration=o);break;case"line-height":e instanceof ne&&(e.leading=o)}return s},he=function(t,e){for(var n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];r.id&&"#text"!==r.localName&&e.add(r.id,r)}},ce=function(t){for(;t.parent;)t=t.parent;return t.scene},ue={svg:function(t){for(var e=ue.defs.current=new Ct,n=t.getElementsByTagName("defs"),i=0;i<n.length;i++)he(n[i],e);var r=ue.g.call(this,t);return t.getAttribute("viewBox"),r.defs=e,delete ue.defs.current,r},defs:function(t){return null},use:function(t,e){var n=t.getAttribute("href")||t.getAttribute("xlink:href");if(!n){var i=new St("encountered <use /> with no href.");return console.warn(i.name,i.message),null}var r=n.slice(1);if(!ue.defs.current.contains(r))return i=new St("unable to find element for reference "+n+"."),console.warn(i.name,i.message),null;for(var o=ue.defs.current.get(r).cloneNode(!0),a=["x","y","width","height","href","xlink:href"],s=0;s<t.attributes.length;s++){var l=t.attributes[s],h=a.includes(l.nodeName),c=!o.hasAttribute(l.nodeName);(h||c)&&o.setAttribute(l.nodeName,l.value)}var u=o.localName;return ue[u].call(this,o,e)},g:function(t,e){var n,i=new st;le.call(this,t,i,e),this.add(i),n=oe.call(this,t);for(var r=0,o=t.childNodes.length;r<o;r++){var a=t.childNodes[r],s=a.nodeName;if(!s)return;var l=s.replace(/svg:/gi,"").toLowerCase();if(l in ue){var h=ue[l].call(i,a,n);h&&!h.parent&&i.add(h)}}return i},polygon:function(t,e){var n=t.getAttribute("points"),i=[];n.replace(/(-?[\d.?]+)[,|\s](-?[\d.?]+)/g,(function(t,e,n){i.push(new F(parseFloat(e),parseFloat(n)))}));var r=new Dt(i,!0).noStroke();return r.fill="black",le.call(this,t,r,e),r},polyline:function(t,e){var n=ue.polygon.call(this,t,e);return n.closed=!1,n},path:function(t,e){var n=t.getAttribute("d"),i=[],r=!1,o=!1;if(n){var a,s,l=new F,h=n.match(/[a-df-z][^a-df-z]*/gi),c=h.length-1;O.each(h.slice(0),(function(t,e){var n,i,r,o,a,s,l,c,u,d=(t=function(t){var e=t.match(/[\+\-]?[\d\.]*e[\-\+]?\d*/gi);if(e&&e.length>0)for(var n=0;n<e.length;n++){var i=e[n],r=i.split(/e/i),o=parseFloat(r[0]),a=Math.pow(10,parseFloat(r[1]));a<0?o/=a:o*=a,t=t.replace(i,o)}return t}(t))[0],f=d.toLowerCase(),p=t.slice(1).trim().split(/[\s,]+|(?=\s?[+-])/),g=[],m=!1;for(a=0;a<p.length;a++)if((n=p[a]).indexOf(".")!==n.lastIndexOf(".")){for(r=(i=n.split("."))[0]+"."+i[1],p.splice(a,1,r),o=2;o<i.length;o++)p.splice(a+o-1,0,"0."+i[o]);m=!0}switch(m&&(t=d+p.join(",")),e<=0&&(h=[]),f){case"h":case"v":p.length>1&&(u=1);break;case"m":case"l":case"t":p.length>2&&(u=2);break;case"s":case"q":p.length>4&&(u=4);break;case"c":p.length>6&&(u=6);break;case"a":p.length>7&&(u=7)}if(u){for(a=0,l=p.length,c=0;a<l;a+=u){if(s=d,c>0)switch(d){case"m":s="l";break;case"M":s="L"}g.push(s+p.slice(a,a+u).join(" ")),c++}h=Array.prototype.concat.apply(h,g)}else h.push(t)})),O.each(h,(function(t,e){var n,h,u,d,f,p,m,v,y,_,b,w,x=t[0],k=x.toLowerCase();switch(s=(s=(s=t.slice(1).trim()).replace(/(-?\d+(?:\.\d*)?)[eE]([+-]?\d+)/g,(function(t,e,n){return parseFloat(e)*Math.pow(10,n)}))).split(/[\s,]+|(?=\s?[+-])/),o=x===k,k){case"z":if(e>=c)r=!0;else{h=l.x,u=l.y,n=new F(h,u,void 0,void 0,void 0,void 0,g.close);for(var S=i.length-1;S>=0;S--){var R=i[S];if(/m/i.test(R.command)){l=R;break}}}break;case"m":case"l":a=void 0,h=parseFloat(s[0]),u=parseFloat(s[1]),n=new F(h,u,void 0,void 0,void 0,void 0,/m/i.test(k)?g.move:g.line),o&&n.addSelf(l),l=n;break;case"h":case"v":var C=/h/i.test(k)?"x":"y",E=/x/i.test(C)?"y":"x";(n=new F(void 0,void 0,void 0,void 0,void 0,void 0,g.line))[C]=parseFloat(s[0]),n[E]=l[E],o&&(n[C]+=l[C]),l=n;break;case"c":case"s":d=l.x,f=l.y,a||(a=new M),/c/i.test(k)?(p=parseFloat(s[0]),m=parseFloat(s[1]),v=parseFloat(s[2]),y=parseFloat(s[3]),_=parseFloat(s[4]),b=parseFloat(s[5])):(p=(w=J(l,a,o)).x,m=w.y,v=parseFloat(s[0]),y=parseFloat(s[1]),_=parseFloat(s[2]),b=parseFloat(s[3])),o&&(p+=d,m+=f,v+=d,y+=f,_+=d,b+=f),O.isObject(l.controls)||F.AppendCurveProperties(l),l.controls.right.set(p-l.x,m-l.y),n=new F(_,b,v-_,y-b,void 0,void 0,g.curve),l=n,a=n.controls.left;break;case"t":case"q":d=l.x,f=l.y,a||(a=new M),/q/i.test(k)?(p=parseFloat(s[0]),m=parseFloat(s[1]),v=parseFloat(s[0]),y=parseFloat(s[1]),_=parseFloat(s[2]),b=parseFloat(s[3])):(p=(w=J(l,a,o)).x,m=w.y,v=w.x,y=w.y,_=parseFloat(s[0]),b=parseFloat(s[1])),o&&(p+=d,m+=f,v+=d,y+=f,_+=d,b+=f),O.isObject(l.controls)||F.AppendCurveProperties(l),l.controls.right.set(.33*(p-l.x),.33*(m-l.y)),n=new F(_,b,v-_,y-b,void 0,void 0,g.curve),l=n,a=n.controls.left;break;case"a":d=l.x,f=l.y;var A=parseFloat(s[0]),T=parseFloat(s[1]),I=parseFloat(s[2]),P=parseFloat(s[3]),j=parseFloat(s[4]);_=parseFloat(s[5]),b=parseFloat(s[6]),o&&(_+=d,b+=f);var z=new F(_,b);z.command=g.arc,z.rx=A,z.ry=T,z.xAxisRotation=I,z.largeArcFlag=P,z.sweepFlag=j,n=z,l=z,a=void 0}n&&(Array.isArray(n)?i=i.concat(n):i.push(n))}))}(n=new Dt(i,r,void 0,!0).noStroke()).fill="black";var u=n.getBoundingClientRect(!0);return u.centroid={x:u.left+u.width/2,y:u.top+u.height/2},O.each(n.vertices,(function(t){t.subSelf(u.centroid)})),le.call(this,t,n,e),n.translation.addSelf(u.centroid),n},circle:function(t,e){var n=parseFloat(t.getAttribute("cx")),i=parseFloat(t.getAttribute("cy")),r=parseFloat(t.getAttribute("r")),o=new Zt(0,0,r).noStroke();return o.fill="black",le.call(this,t,o,e),o.translation.x=n,o.translation.y=i,o},ellipse:function(t,e){var n=parseFloat(t.getAttribute("cx")),i=parseFloat(t.getAttribute("cy")),r=parseFloat(t.getAttribute("rx")),o=parseFloat(t.getAttribute("ry")),a=new Jt(0,0,r,o).noStroke();return a.fill="black",le.call(this,t,a,e),a.translation.x=n,a.translation.y=i,a},rect:function(t,e){var n=parseFloat(t.getAttribute("rx")),i=parseFloat(t.getAttribute("ry"));if(!O.isNaN(n)||!O.isNaN(i))return ue["rounded-rect"](t);parseFloat(t.getAttribute("x")),parseFloat(t.getAttribute("y"));var r=parseFloat(t.getAttribute("width")),o=parseFloat(t.getAttribute("height")),a=r/2,s=o/2,l=new te(0,0,r,o).noStroke();return l.fill="black",le.call(this,t,l,e),l.translation.x+=a,l.translation.y+=s,l},"rounded-rect":function(t,e){parseFloat(t.getAttribute("x")),parseFloat(t.getAttribute("y"));var n=parseFloat(t.getAttribute("rx"))||0,i=parseFloat(t.getAttribute("ry"))||0,r=parseFloat(t.getAttribute("width")),o=parseFloat(t.getAttribute("height")),a=r/2,s=o/2,l=new M(n,i),h=new ee(0,0,r,o,l).noStroke();return h.fill="black",le.call(this,t,h,e),h.translation.x+=a,h.translation.y+=s,h},line:function(t,e){var n=parseFloat(t.getAttribute("x1")),i=parseFloat(t.getAttribute("y1")),r=parseFloat(t.getAttribute("x2")),o=parseFloat(t.getAttribute("y2")),a=new Qt(n,i,r,o).noFill();return le.call(this,t,a,e),a},lineargradient:function(t,e){for(var n=parseFloat(t.getAttribute("x1")),i=parseFloat(t.getAttribute("y1")),r=parseFloat(t.getAttribute("x2")),o=parseFloat(t.getAttribute("y2")),a=(r+n)/2,s=(o+i)/2,l=[],h=0;h<t.children.length;h++){var c=t.children[h],u=c.getAttribute("offset");/%/gi.test(u)&&(u=parseFloat(u.replace(/%/gi,""))/100),u=parseFloat(u);var d,f=c.getAttribute("stop-color"),p=c.getAttribute("stop-opacity"),g=c.getAttribute("style");null===f&&(f=(d=!!g&&g.match(/stop-color:\s?([#a-fA-F0-9]*)/))&&d.length>1?d[1]:void 0),p=null===p?(d=!!g&&g.match(/stop-opacity:\s?([0-9.-]*)/))&&d.length>1?parseFloat(d[1]):1:parseFloat(p),l.push(new Ot(u,f,p))}var m=new At(n-a,i-s,r-a,o-s,l);return le.call(this,t,m,e),m},radialgradient:function(t,e){var n=parseFloat(t.getAttribute("cx"))||0,i=parseFloat(t.getAttribute("cy"))||0,r=parseFloat(t.getAttribute("r")),o=parseFloat(t.getAttribute("fx")),a=parseFloat(t.getAttribute("fy"));O.isNaN(o)&&(o=n),O.isNaN(a)&&(a=i);for(var s=Math.abs(n+o)/2,l=Math.abs(i+a)/2,h=[],c=0;c<t.children.length;c++){var u=t.children[c],d=u.getAttribute("offset");/%/gi.test(d)&&(d=parseFloat(d.replace(/%/gi,""))/100),d=parseFloat(d);var f,p=u.getAttribute("stop-color"),g=u.getAttribute("stop-opacity"),m=u.getAttribute("style");null===p&&(p=(f=!!m&&m.match(/stop-color:\s?([#a-fA-F0-9]*)/))&&f.length>1?f[1]:void 0),g=null===g?(f=!!m&&m.match(/stop-opacity:\s?([0-9.-]*)/))&&f.length>1?parseFloat(f[1]):1:parseFloat(g),h.push(new Ot(d,p,g))}var v=new Tt(n-s,i-l,r,h,o-s,a-l);return le.call(this,t,v,e),v},text:function(t,e){var n,i=(n=t.getAttribute("text-anchor"),ie[n]||"left"),r=function(t){var e=t.getAttribute("dominant-baseline"),n=t.getAttribute("alignment-baseline");return e||n}(t)||"baseline",o=t.textContent,a=new ne(o);return le.call(this,t,a,e),a.alignment=i,a.baseline=r,a}},de=function(t,e){var n=new XMLHttpRequest;return n.open("GET",t),n.onreadystatechange=function(){4===n.readyState&&200===n.status&&e(n.responseText)},n.send(),n},fe=function(t,e,n,i){Dt.call(this,[new F,new F,new F,new F],!0),this._renderer.flagTextures=fe.FlagTextures.bind(this),this._renderer.bindTextures=fe.BindTextures.bind(this),this._renderer.unbindTextures=fe.UnbindTextures.bind(this),this.noStroke(),this.noFill(),Array.isArray(t)?this.textures=t.map(fe.GenerateTexture.bind(this)):this.textures=[fe.GenerateTexture(t)],this.origin=new M,this._update(),this.translation.set(e||0,n||0),this.frameRate="number"==typeof i?i:fe.DefaultFrameRate,this.index=0};O.extend(fe,{Properties:["frameRate","index"],DefaultFrameRate:30,FlagTextures:function(){this._flagTextures=!0},BindTextures:function(t){for(var e=t.length;e--;)t[e].bind(A.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()},UnbindTextures:function(t){for(var e=t.length;e--;)t[e].unbind(A.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()},MakeObservable:function(t){te.MakeObservable(t),O.each(fe.Properties,Rt,t),Object.defineProperty(t,"textures",{enumerable:!0,get:function(){return this._textures},set:function(t){this._renderer.flagTextures;var e=this._renderer.bindTextures,n=this._renderer.unbindTextures;this._textures&&this._textures.unbind(A.Types.insert,e).unbind(A.Types.remove,n),this._textures=new nt((t||[]).slice(0)),this._textures.bind(A.Types.insert,e).bind(A.Types.remove,n),e(this._textures)}})},GenerateTexture:function(t){return t instanceof Pt?t:"string"==typeof t?new Pt(t):void 0}}),O.extend(fe.prototype,te.prototype,{_flagTextures:!1,_flagFrameRate:!1,_flagIndex:!1,_amount:1,_duration:0,_index:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_textures:null,_frameRate:0,_origin:null,constructor:fe,play:function(t,e,n){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=O.performance.now(),"number"==typeof t&&(this._firstFrame=t),"number"==typeof e&&(this._lastFrame=e),"function"==typeof n?this._onLastFrame=n:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=this._firstFrame,this},clone:function(t){var e=new fe(this.textures,this.translation.x,this.translation.y,this.frameRate);return e._loop=this._loop,this._playing&&e.play(),t&&t.add(e),e},toObject:function(){var t=te.prototype.toObject.call(this);return t.textures=this.textures.map((function(t){return t.toObject()})),t.frameRate=this.frameRate,t.index=this.index,t._firstFrame=this._firstFrame,t._lastFrame=this._lastFrame,t._loop=this._loop,t},_update:function(){var t,e,n,i,r,o,a,s,l=this._textures;return this._flagTextures&&(this._amount=l.length),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._playing&&this._frameRate>0?(i=this._amount,O.isNaN(this._lastFrame)&&(this._lastFrame=i-1),n=O.performance.now()-this._startTime,r=1e3*((s=this._lastFrame+1)-this._firstFrame)/this._frameRate,this._loop?n%=r:n=Math.min(n,r),a=w(this._firstFrame,s,n/r),(a=Math.floor(a))!==this._index&&(this._index=a,(o=l[this._index]).loaded&&(t=o.image.width,e=o.image.height,this.width!==t&&(this.width=t),this.height!==e&&(this.height=e),this.fill=o,a>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()))):!this._flagIndex&&this.fill instanceof Pt||((o=l[this._index]).loaded&&(t=o.image.width,e=o.image.height,this.width!==t&&(this.width=t),this.height!==e&&(this.height=e)),this.fill=o),te.prototype._update.call(this),this},flagReset:function(){return this._flagTextures=this._flagFrameRate=!1,te.prototype.flagReset.call(this),this}}),fe.MakeObservable(fe.prototype);var pe=function(t,e,n,i,r,o){Dt.call(this,[new F,new F,new F,new F],!0),this.noStroke(),this.noFill(),t instanceof Pt?this.texture=t:"string"==typeof t&&(this.texture=new Pt(t)),this.origin=new M,this._update(),this.translation.set(e||0,n||0),"number"==typeof i&&(this.columns=i),"number"==typeof r&&(this.rows=r),"number"==typeof o&&(this.frameRate=o),this.index=0};O.extend(pe,{Properties:["texture","columns","rows","frameRate","index"],MakeObservable:function(t){te.MakeObservable(t),O.each(pe.Properties,Rt,t)}}),O.extend(pe.prototype,te.prototype,{_flagTexture:!1,_flagColumns:!1,_flagRows:!1,_flagFrameRate:!1,flagIndex:!1,_amount:1,_duration:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_texture:null,_columns:1,_rows:1,_frameRate:0,_index:0,_origin:null,constructor:pe,play:function(t,e,n){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=O.performance.now(),"number"==typeof t&&(this._firstFrame=t),"number"==typeof e&&(this._lastFrame=e),"function"==typeof n?this._onLastFrame=n:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=0,this},clone:function(t){var e=new pe(this.texture,this.translation.x,this.translation.y,this.columns,this.rows,this.frameRate);return this.playing&&(e.play(this._firstFrame,this._lastFrame),e._loop=this._loop),t&&t.add(e),e},toObject:function(){var t=te.prototype.toObject.call(this);return t.texture=this.texture.toObject(),t.columns=this.columns,t.rows=this.rows,t.frameRate=this.frameRate,t.index=this.index,t._firstFrame=this._firstFrame,t._lastFrame=this._lastFrame,t._loop=this._loop,t},_update:function(){var t,e,n,i,r,o,a,s,l,h=this._texture,c=this._columns,u=this._rows;if((this._flagColumns||this._flagRows)&&(this._amount=this._columns*this._rows),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._flagTexture&&(this.fill=this._texture),this._texture.loaded){t=(a=h.image.width)/c,e=(s=h.image.height)/u,i=this._amount,this.width!==t&&(this.width=t),this.height!==e&&(this.height=e),this._playing&&this._frameRate>0&&(O.isNaN(this._lastFrame)&&(this._lastFrame=i-1),n=O.performance.now()-this._startTime,r=1e3*((l=this._lastFrame+1)-this._firstFrame)/this._frameRate,this._loop?n%=r:n=Math.min(n,r),o=w(this._firstFrame,l,n/r),(o=Math.floor(o))!==this._index&&(this._index=o,o>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()));var d=-t*(this._index%c)+(a-t)/2,f=-e*Math.floor(this._index/c)+(s-e)/2;d!==h.offset.x&&(h.offset.x=d),f!==h.offset.y&&(h.offset.y=f)}return te.prototype._update.call(this),this},flagReset:function(){return this._flagTexture=this._flagColumns=this._flagRows=this._flagFrameRate=!1,te.prototype.flagReset.call(this),this}}),pe.MakeObservable(pe.prototype);var ge=2*Math.PI,me=Math.PI/2,ve=function(t,e,n,i,r,o,a){for(var s=a||3*U.Resolution,l=[],h=0;h<s;h++)l.push(new F);Dt.call(this,l,!0,!1,!0),this.innerRadius=n,this.outerRadius=i,this.startAngle=r,this.endAngle=o,this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)};O.extend(ve,{Properties:["startAngle","endAngle","innerRadius","outerRadius"],MakeObservable:function(t){Dt.MakeObservable(t),O.each(ve.Properties,Rt,t)}}),O.extend(ve.prototype,Dt.prototype,{_flagStartAngle:!1,_flagEndAngle:!1,_flagInnerRadius:!1,_flagOuterRadius:!1,_startAngle:0,_endAngle:ge,_innerRadius:0,_outerRadius:0,constructor:ve,_update:function(){if(this._flagStartAngle||this._flagEndAngle||this._flagInnerRadius||this._flagOuterRadius){var t,e=this._startAngle,n=this._endAngle,i=this._innerRadius,r=this._outerRadius,o=x(e,ge)===x(n,ge),a=i>0,s=this.vertices,l=a?s.length/2:s.length,h=0;o?l--:a||(l-=2);for(var c=0,u=l-1;c<l;c++){var d=c/u,f=s[h],p=d*(n-e)+e,m=(n-e)/l,v=r*Math.cos(p),y=r*Math.sin(p);switch(c){case 0:t=g.move;break;default:t=g.curve}if(f.command=t,f.x=v,f.y=y,f.controls.left.clear(),f.controls.right.clear(),f.command===g.curve){var _=r*m/Math.PI;f.controls.left.x=_*Math.cos(p-me),f.controls.left.y=_*Math.sin(p-me),f.controls.right.x=_*Math.cos(p+me),f.controls.right.y=_*Math.sin(p+me),1===c&&f.controls.left.multiplyScalar(2),c===u&&f.controls.right.multiplyScalar(2)}h++}if(a){for(o?(s[h].command=g.close,h++):u=--l-1,c=0;c<l;c++)d=c/u,f=s[h],p=(1-d)*(n-e)+e,m=(n-e)/l,v=i*Math.cos(p),y=i*Math.sin(p),t=g.curve,c<=0&&(t=o?g.move:g.line),f.command=t,f.x=v,f.y=y,f.controls.left.clear(),f.controls.right.clear(),f.command===g.curve&&(_=i*m/Math.PI,f.controls.left.x=_*Math.cos(p+me),f.controls.left.y=_*Math.sin(p+me),f.controls.right.x=_*Math.cos(p-me),f.controls.right.y=_*Math.sin(p-me),1===c&&f.controls.left.multiplyScalar(2),c===u&&f.controls.right.multiplyScalar(2)),h++;s[h].copy(s[0]),s[h].command=g.line}else o||(s[h].command=g.line,s[h].x=0,s[h].y=0,s[++h].copy(s[0]),s[h].command=g.line)}return Dt.prototype._update.call(this),this},flagReset:function(){return Dt.prototype.flagReset.call(this),this._flagStartAngle=this._flagEndAngle=this._flagInnerRadius=this._flagOuterRadius=!1,this},clone:function(t){var e=this.innerRadius,n=this.outerradius,i=this.startAngle,r=this.endAngle,o=this.vertices.length,a=new ve(0,0,e,n,i,r,o);return a.translation.copy(this.translation),a.rotation=this.rotation,a.scale=this.scale,this.matrix.manual&&a.matrix.copy(this.matrix),O.each(Dt.Properties,(function(t){a[t]=this[t]}),this),t&&t.add(a),a},toObject:function(){var t=Dt.prototype.toObject.call(this);return O.each(ve.Properties,(function(e){t[e]=this[e]}),this),t}}),ve.MakeObservable(ve.prototype);var ye=2*Math.PI,_e=Math.cos,be=Math.sin,we=function(t,e,n,i){i=Math.max(i||0,3),Dt.call(this),this.closed=!0,this.automatic=!1,this.width=2*n,this.height=2*n,this.sides=i,this._update(),this.translation.set(t,e)};O.extend(we,{Properties:["width","height","sides"],MakeObservable:function(t){Dt.MakeObservable(t),O.each(we.Properties,Rt,t)}}),O.extend(we.prototype,Dt.prototype,{_flagWidth:!1,_flagHeight:!1,_flagSides:!1,_width:0,_height:0,_sides:0,constructor:we,_update:function(){if(this._flagWidth||this._flagHeight||this._flagSides){var t=this._sides,e=t+1,n=this.vertices.length;n>t&&(this.vertices.splice(t-1,n-t),n=t);for(var i=0;i<e;i++){var r=ye*((i+.5)/t)+Math.PI/2,o=this._width*_e(r)/2,a=this._height*be(r)/2;i>=n?this.vertices.push(new F(o,a)):this.vertices[i].set(o,a),this.vertices[i].command=0===i?g.move:g.line}}return Dt.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagSides=!1,Dt.prototype.flagReset.call(this),this},clone:function(t){var e=new we(0,0,this.radius,this.sides);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,this.matrix.manual&&e.matrix.copy(this.matrix),O.each(Dt.Properties,(function(t){e[t]=this[t]}),this),t&&t.add(e),e},toObject:function(){var t=Dt.prototype.toObject.call(this);return O.each(we.Properties,(function(e){t[e]=this[e]}),this),t}}),we.MakeObservable(we.prototype);var xe=2*Math.PI,ke=Math.cos,Se=Math.sin,Re=function(t,e,n,i,r){arguments.length<=3&&(n=(i=n)/2),("number"!=typeof r||r<=0)&&(r=5),Dt.call(this),this.closed=!0,this.automatic=!1,this.innerRadius=n,this.outerRadius=i,this.sides=r,this._update(),this.translation.set(t,e)};O.extend(Re,{Properties:["innerRadius","outerRadius","sides"],MakeObservable:function(t){Dt.MakeObservable(t),O.each(Re.Properties,Rt,t)}}),O.extend(Re.prototype,Dt.prototype,{_flagInnerRadius:!1,_flagOuterRadius:!1,_flagSides:!1,_innerRadius:0,_outerRadius:0,_sides:0,constructor:Re,_update:function(){if(this._flagInnerRadius||this._flagOuterRadius||this._flagSides){var t=2*this._sides,e=t+1,n=this.vertices.length;n>t&&(this.vertices.splice(t-1,n-t),n=t);for(var i=0;i<e;i++){var r=xe*((i+.5)/t),o=(i%2?this._outerRadius:this._innerRadius)/2,a=o*ke(r),s=o*Se(r);i>=n?this.vertices.push(new F(a,s)):this.vertices[i].set(a,s),this.vertices[i].command=0===i?g.move:g.line}}return Dt.prototype._update.call(this),this},flagReset:function(){return this._flagInnerRadius=this._flagOuterRadius=this._flagSides=!1,Dt.prototype.flagReset.call(this),this},clone:function(t){var e=this.innerRadius,n=this.outerRadius,i=this.sides,r=new Re(0,0,e,n,i);return r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,this.matrix.manual&&r.matrix.copy(this.matrix),O.each(Dt.Properties,(function(t){r[t]=this[t]}),this),t&&t.add(r),r},toObject:function(){var t=Dt.prototype.toObject.call(this);return O.each(Re.Properties,(function(e){t[e]=this[e]}),this),t}}),Re.MakeObservable(Re.prototype);var Ce={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",alignments:{left:"start",center:"middle",right:"end"},createElement:function(t,e){var n=t,i=document.createElementNS(Ce.ns,n);return"svg"===n&&(e=O.defaults(e||{},{version:Ce.version})),e&&Object.keys(e).length>0&&Ce.setAttributes(i,e),i},setAttributes:function(t,e){for(var n=Object.keys(e),i=0;i<n.length;i++)/href/.test(n[i])?t.setAttributeNS(Ce.xlink,n[i],e[n[i]]):t.setAttribute(n[i],e[n[i]]);return this},removeAttributes:function(t,e){for(var n in e)t.removeAttribute(n);return this},toString:function(t,e){for(var n,i=t.length,r=i-1,o="",a=0;a<i;a++){var s,l,h,c,u,d,f,p,m,v,y,_,b,w,k=t[a],R=e?x(a-1,i):Math.max(a-1,0),C=e?x(a+1,i):Math.min(a+1,r),O=t[R],E=t[C],A=S(k.x),T=S(k.y);switch(k.command){case g.close:s=g.close;break;case g.arc:v=k.rx,y=k.ry,_=k.xAxisRotation,b=k.largeArcFlag,w=k.sweepFlag,s=g.arc+" "+v+" "+y+" "+_+" "+b+" "+w+" "+A+" "+T;break;case g.curve:d=O.controls&&O.controls.right||M.zero,f=k.controls&&k.controls.left||M.zero,O.relative?(l=S(d.x+O.x),h=S(d.y+O.y)):(l=S(d.x),h=S(d.y)),k.relative?(c=S(f.x+k.x),u=S(f.y+k.y)):(c=S(f.x),u=S(f.y)),s=(0===a?g.move:g.curve)+" "+l+" "+h+" "+c+" "+u+" "+A+" "+T;break;case g.move:n=k,s=g.move+" "+A+" "+T;break;default:s=k.command+" "+A+" "+T}a>=r&&e&&(k.command===g.curve&&(E=n,p=k.controls&&k.controls.right||k,m=E.controls&&E.controls.left||E,k.relative?(l=S(p.x+k.x),h=S(p.y+k.y)):(l=S(p.x),h=S(p.y)),E.relative?(c=S(m.x+E.x),u=S(m.y+E.y)):(c=S(m.x),u=S(m.y)),s+=" C "+l+" "+h+" "+c+" "+u+" "+(A=S(E.x))+" "+(T=S(E.y))),k.command!==g.close&&(s+=" Z")),o+=s+" "}return o},getClip:function(t){var e=t._renderer.clip;if(!e){for(var n=t;n.parent;)n=n.parent;e=t._renderer.clip=Ce.createElement("clipPath"),n.defs.appendChild(e)}return e},group:{appendChild:function(t){var e=t._renderer.elem;if(e){var n=e.nodeName;!n||/(radial|linear)gradient/i.test(n)||t._clip||this.elem.appendChild(e)}},removeChild:function(t){var e=t._renderer.elem;e&&e.parentNode==this.elem&&e.nodeName&&(t._clip||this.elem.removeChild(e))},orderChild:function(t){this.elem.appendChild(t._renderer.elem)},renderChild:function(t){Ce[t._renderer.type].render.call(t,this)},render:function(t){if(this._update(),0===this._opacity&&!this._flagOpacity)return this;this._renderer.elem||(this._renderer.elem=Ce.createElement("g",{id:this.id}),t.appendChild(this._renderer.elem));var e=this._matrix.manual||this._flagMatrix,n={domElement:t,elem:this._renderer.elem};e&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");for(var i=0;i<this.children.length;i++){var r=this.children[i];Ce[r._renderer.type].render.call(r,t)}return this._flagOpacity&&this._renderer.elem.setAttribute("opacity",this._opacity),this._flagClassName&&this._renderer.elem.setAttribute("class",this.classList.join(" ")),this._flagAdditions&&this.additions.forEach(Ce.group.appendChild,n),this._flagSubtractions&&this.subtractions.forEach(Ce.group.removeChild,n),this._flagOrder&&this.children.forEach(Ce.group.orderChild,n),this._flagMask&&(this._mask?this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")"):this._renderer.elem.removeAttribute("clip-path")),this.flagReset()}},path:{render:function(t){if(this._update(),0===this._opacity&&!this._flagOpacity)return this;var e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagVertices){var n=Ce.toString(this._renderer.vertices,this._closed);e.d=n}if(this._fill&&this._fill._renderer&&(this._fill._update(),Ce[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),Ce[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e["stroke-opacity"]=this._opacity,e["fill-opacity"]=this._opacity),this._flagClassName&&(e.class=this.classList.join(" ")),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this._flagCap&&(e["stroke-linecap"]=this._cap),this._flagJoin&&(e["stroke-linejoin"]=this._join),this._flagMiter&&(e["stroke-miterlimit"]=this._miter),this.dashes&&this.dashes.length>0&&(e["stroke-dasharray"]=this.dashes.join(" "),e["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?Ce.setAttributes(this._renderer.elem,e):(e.id=this.id,this._renderer.elem=Ce.createElement("path",e),t.appendChild(this._renderer.elem)),this._flagClip){var i=Ce.getClip(this),r=this._renderer.elem;this._clip?(r.removeAttribute("id"),i.setAttribute("id",this.id),i.appendChild(r)):(i.removeAttribute("id"),r.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(r))}return this.flagReset()}},text:{render:function(t){this._update();var e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagFamily&&(e["font-family"]=this._family),this._flagSize&&(e["font-size"]=this._size),this._flagLeading&&(e["line-height"]=this._leading),this._flagAlignment&&(e["text-anchor"]=Ce.alignments[this._alignment]||this._alignment),this._flagBaseline&&(e["alignment-baseline"]=e["dominant-baseline"]=this._baseline),this._flagStyle&&(e["font-style"]=this._style),this._flagWeight&&(e["font-weight"]=this._weight),this._flagDecoration&&(e["text-decoration"]=this._decoration),this._fill&&this._fill._renderer&&(this._fill._update(),Ce[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),Ce[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e.opacity=this._opacity),this._flagClassName&&(e.class=this.classList.join(" ")),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this.dashes&&this.dashes.length>0&&(e["stroke-dasharray"]=this.dashes.join(" "),e["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?Ce.setAttributes(this._renderer.elem,e):(e.id=this.id,this._renderer.elem=Ce.createElement("text",e),t.defs.appendChild(this._renderer.elem)),this._flagClip){var n=Ce.getClip(this),i=this._renderer.elem;this._clip?(i.removeAttribute("id"),n.setAttribute("id",this.id),n.appendChild(i)):(n.removeAttribute("id"),i.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(i))}return this._flagValue&&(this._renderer.elem.textContent=this._value),this.flagReset()}},"linear-gradient":{render:function(t,e){e||this._update();var n={};if(this._flagEndPoints&&(n.x1=this.left._x,n.y1=this.left._y,n.x2=this.right._x,n.y2=this.right._y),this._flagSpread&&(n.spreadMethod=this._spread),this._renderer.elem?Ce.setAttributes(this._renderer.elem,n):(n.id=this.id,n.gradientUnits="userSpaceOnUse",this._renderer.elem=Ce.createElement("linearGradient",n),t.defs.appendChild(this._renderer.elem)),this._flagStops){var i=this._renderer.elem.childNodes.length!==this.stops.length;if(i)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(var r=0;r<this.stops.length;r++){var o=this.stops[r],a={};o._flagOffset&&(a.offset=100*o._offset+"%"),o._flagColor&&(a["stop-color"]=o._color),o._flagOpacity&&(a["stop-opacity"]=o._opacity),o._renderer.elem?Ce.setAttributes(o._renderer.elem,a):o._renderer.elem=Ce.createElement("stop",a),i&&this._renderer.elem.appendChild(o._renderer.elem),o.flagReset()}}return this.flagReset()}},"radial-gradient":{render:function(t,e){e||this._update();var n={};if(this._flagCenter&&(n.cx=this.center._x,n.cy=this.center._y),this._flagFocal&&(n.fx=this.focal._x,n.fy=this.focal._y),this._flagRadius&&(n.r=this._radius),this._flagSpread&&(n.spreadMethod=this._spread),this._renderer.elem?Ce.setAttributes(this._renderer.elem,n):(n.id=this.id,n.gradientUnits="userSpaceOnUse",this._renderer.elem=Ce.createElement("radialGradient",n),t.defs.appendChild(this._renderer.elem)),this._flagStops){var i=this._renderer.elem.childNodes.length!==this.stops.length;if(i)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(var r=0;r<this.stops.length;r++){var o=this.stops[r],a={};o._flagOffset&&(a.offset=100*o._offset+"%"),o._flagColor&&(a["stop-color"]=o._color),o._flagOpacity&&(a["stop-opacity"]=o._opacity),o._renderer.elem?Ce.setAttributes(o._renderer.elem,a):o._renderer.elem=Ce.createElement("stop",a),i&&this._renderer.elem.appendChild(o._renderer.elem),o.flagReset()}}return this.flagReset()}},texture:{render:function(t,e){e||this._update();var n={},i={x:0,y:0},r=this.image;if(this._flagLoaded&&this.loaded)switch(r.nodeName.toLowerCase()){case"canvas":i.href=i["xlink:href"]=r.toDataURL("image/png");break;case"img":case"image":i.href=i["xlink:href"]=this.src}if((this._flagOffset||this._flagLoaded||this._flagScale)&&(n.x=this._offset.x,n.y=this._offset.y,r&&(n.x-=r.width/2,n.y-=r.height/2,this._scale instanceof M?(n.x*=this._scale.x,n.y*=this._scale.y):(n.x*=this._scale,n.y*=this._scale)),n.x>0&&(n.x*=-1),n.y>0&&(n.y*=-1)),(this._flagScale||this._flagLoaded||this._flagRepeat)&&(n.width=0,n.height=0,r)){switch(i.width=n.width=r.width,i.height=n.height=r.height,this._repeat){case"no-repeat":n.width+=1,n.height+=1}this._scale instanceof M?(n.width*=this._scale.x,n.height*=this._scale.y):(n.width*=this._scale,n.height*=this._scale)}return(this._flagScale||this._flagLoaded)&&(this._renderer.image?Ce.setAttributes(this._renderer.image,i):this._renderer.image=Ce.createElement("image",i)),this._renderer.elem?0!==Object.keys(n).length&&Ce.setAttributes(this._renderer.elem,n):(n.id=this.id,n.patternUnits="userSpaceOnUse",this._renderer.elem=Ce.createElement("pattern",n),t.defs.appendChild(this._renderer.elem)),this._renderer.elem&&this._renderer.image&&!this._renderer.appended&&(this._renderer.elem.appendChild(this._renderer.image),this._renderer.appended=!0),this.flagReset()}}},Oe=function(t){this.domElement=t.domElement||Ce.createElement("svg"),this.scene=new st,this.scene.parent=this,this.defs=Ce.createElement("defs"),this.domElement.appendChild(this.defs),this.domElement.defs=this.defs,this.domElement.style.overflow="hidden"};O.extend(Oe,{Utils:Ce}),O.extend(Oe.prototype,A,{constructor:Oe,setSize:function(t,e){return this.width=t,this.height=e,Ce.setAttributes(this.domElement,{width:t,height:e}),this.trigger(A.Types.resize,t,e)},render:function(){return Ce.group.render.call(this.scene,this.domElement),this}});var Ee=V.Multiply,Ae=[1,0,0,0,1,0,0,0,1],Me=new k(9),Te=bt.Utils,Ie={isHidden:/(undefined|none|transparent)/i,canvas:v.document?v.document.createElement("canvas"):{getContext:function(){}},alignments:{left:"start",middle:"center",right:"end"},matrix:new V,group:{removeChild:function(t,e){if(t.children)for(var n=0;n<t.children.length;n++)Ie.group.removeChild(t.children[n],e);else e.deleteTexture(t._renderer.texture),delete t._renderer.texture},render:function(t,e){this._update();var n,i=this.parent,r=i._matrix&&i._matrix.manual||i._flagMatrix,o=this._matrix.manual||this._flagMatrix;if((r||o)&&(this._renderer.matrix||(this._renderer.matrix=new k(9)),this._matrix.toTransformArray(!0,Me),Ee(Me,i._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof M||(this._renderer.scale=new M),this._scale instanceof M?(this._renderer.scale.x=this._scale.x,this._renderer.scale.y=this._scale.y):(this._renderer.scale.x=this._scale,this._renderer.scale.y=this._scale),/renderer/i.test(i._renderer.type)||(this._renderer.scale.x*=i._renderer.scale.x,this._renderer.scale.y*=i._renderer.scale.y),r&&(this._flagMatrix=!0)),this._mask&&(t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,0),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1),Ie[this._mask._renderer.type].render.call(this._mask,t,e,this),t.stencilFunc(t.EQUAL,1,255),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.colorMask(!0,!0,!0,!0)),this._flagOpacity=i._flagOpacity||this._flagOpacity,this._renderer.opacity=this._opacity*(i&&i._renderer?i._renderer.opacity:1),this._flagSubtractions)for(n=0;n<this.subtractions.length;n++)Ie.group.removeChild(this.subtractions[n],t);for(n=0;n<this.children.length;n++){var a=this.children[n];Ie[a._renderer.type].render.call(a,t,e)}return this._mask&&t.disable(t.STENCIL_TEST),this.flagReset()}},path:{updateCanvas:function(t){var e,n,i,r,o,a,s,l,h,c,u,d,f,p,m,v=t._renderer.vertices,y=this.canvas,_=this.ctx,b=t._renderer.scale,w=t._stroke,k=t._linewidth,S=t._fill,R=t._renderer.opacity||t._opacity,C=t._cap,O=t._join,E=t._miter,A=t._closed,T=t.dashes,I=v.length,P=I-1;y.width=Math.max(Math.ceil(t._renderer.rect.width*b.x),1),y.height=Math.max(Math.ceil(t._renderer.rect.height*b.y),1);var F,j=t._renderer.rect.centroid,z=j.x,L=j.y;_.clearRect(0,0,y.width,y.height),S&&("string"==typeof S?_.fillStyle=S:(Ie[S._renderer.type].render.call(S,_,t),_.fillStyle=S._renderer.effect)),w&&("string"==typeof w?_.strokeStyle=w:(Ie[w._renderer.type].render.call(w,_,t),_.strokeStyle=w._renderer.effect),k&&(_.lineWidth=k),E&&(_.miterLimit=E),O&&(_.lineJoin=O),!A&&C&&(_.lineCap=C)),"number"==typeof R&&(_.globalAlpha=R),T&&T.length>0&&(_.lineDashOffset=T.offset||0,_.setLineDash(T)),_.save(),_.scale(b.x,b.y),_.translate(z,L),_.beginPath();for(var D=0;D<v.length;D++){var B=v[D];switch(f=B.x,p=B.y,B.command){case g.close:_.closePath();break;case g.arc:var V=B.rx,W=B.ry,U=B.xAxisRotation,N=B.largeArcFlag,q=B.sweepFlag,H=(i=v[n=A?x(D-1,I):Math.max(D-1,0)]).x,G=i.y;Te.renderSvgArcCommand(_,H,G,V,W,N,q,U,f,p);break;case g.curve:n=A?x(D-1,I):Math.max(D-1,0),e=A?x(D+1,I):Math.min(D+1,P),i=v[n],r=v[e],h=i.controls&&i.controls.right||M.zero,c=B.controls&&B.controls.left||M.zero,i._relative?(s=h.x+i.x,l=h.y+i.y):(s=h.x,l=h.y),B._relative?(o=c.x+B.x,a=c.y+B.y):(o=c.x,a=c.y),_.bezierCurveTo(s,l,o,a,f,p),D>=P&&A&&(r=F,u=B.controls&&B.controls.right||M.zero,d=r.controls&&r.controls.left||M.zero,B._relative?(s=u.x+B.x,l=u.y+B.y):(s=u.x,l=u.y),r._relative?(o=d.x+r.x,a=d.y+r.y):(o=d.x,a=d.y),f=r.x,p=r.y,_.bezierCurveTo(s,l,o,a,f,p));break;case g.line:_.lineTo(f,p);break;case g.move:F=B,_.moveTo(f,p)}}A&&_.closePath(),Ie.isHidden.test(S)||((m=S._renderer&&S._renderer.offset)&&(_.save(),_.translate(-S._renderer.offset.x,-S._renderer.offset.y),_.scale(S._renderer.scale.x,S._renderer.scale.y)),_.fill(),m&&_.restore()),Ie.isHidden.test(w)||((m=w._renderer&&w._renderer.offset)&&(_.save(),_.translate(-w._renderer.offset.x,-w._renderer.offset.y),_.scale(w._renderer.scale.x,w._renderer.scale.y),_.lineWidth=k/w._renderer.scale.x),_.stroke(),m&&_.restore()),_.restore()},getBoundingClientRect:function(t,e,n){var i,r,o=1/0,a=-1/0,s=1/0,l=-1/0;t.forEach((function(t){var e,n,i,r,h,c,u=t.x,d=t.y,f=t.controls;s=Math.min(d,s),o=Math.min(u,o),a=Math.max(u,a),l=Math.max(d,l),t.controls&&(h=f.left,c=f.right,h&&c&&(e=t._relative?h.x+u:h.x,n=t._relative?h.y+d:h.y,i=t._relative?c.x+u:c.x,r=t._relative?c.y+d:c.y,e&&n&&i&&r&&(s=Math.min(n,r,s),o=Math.min(e,i,o),a=Math.max(e,i,a),l=Math.max(n,r,l))))})),"number"==typeof e&&(s-=e,o-=e,a+=e,l+=e),i=a-o,r=l-s,n.top=s,n.left=o,n.right=a,n.bottom=l,n.width=i,n.height=r,n.centroid||(n.centroid={}),n.centroid.x=-o,n.centroid.y=-s},render:function(t,e,n){if(!this._visible||!this._opacity)return this;this._update();var i=n||this.parent,r=i._matrix.manual||i._flagMatrix,o=this._matrix.manual||this._flagMatrix,a=this._renderer.parent!==i,s=this._flagVertices||this._flagFill||this._fill instanceof At&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof Tt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof Pt&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof At&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof Tt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof Pt&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||i._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((r||o||a)&&(this._renderer.matrix||(this._renderer.matrix=new k(9)),this._matrix.toTransformArray(!0,Me),Ee(Me,i._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof M||(this._renderer.scale=new M),this._scale instanceof M?(this._renderer.scale.x=this._scale.x*i._renderer.scale.x,this._renderer.scale.y=this._scale.y*i._renderer.scale.y):(this._renderer.scale.x=this._scale*i._renderer.scale.x,this._renderer.scale.y=this._scale*i._renderer.scale.y),a&&(this._renderer.parent=i)),s?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*i._renderer.opacity,Ie.path.getBoundingClientRect(this._renderer.vertices,this._linewidth,this._renderer.rect),Ie.updateTexture.call(Ie,t,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),!this._clip||n){t.bindTexture(t.TEXTURE_2D,this._renderer.texture);var l=this._renderer.rect;return t.uniformMatrix3fv(e.matrix,!1,this._renderer.matrix),t.uniform4f(e.rect,l.left,l.top,l.right,l.bottom),t.drawArrays(t.TRIANGLES,0,6),this.flagReset()}}},text:{updateCanvas:function(t){var e=this.canvas,n=this.ctx,i=t._renderer.scale,r=t._stroke,o=t._linewidth*i,a=t._fill,s=t._renderer.opacity||t._opacity,l=t.dashes,h=t._decoration;Te.alignments[t._alignment]||t._alignment,t._baseline,e.width=Math.max(Math.ceil(t._renderer.rect.width*i.x),1),e.height=Math.max(Math.ceil(t._renderer.rect.height*i.y),1);var c,u,d,f,p,g,m,v,y,_,b,w=t._renderer.rect.centroid,x=w.x,k=w.y,S=a._renderer&&a._renderer.offset&&r._renderer&&r._renderer.offset;if(n.clearRect(0,0,e.width,e.height),S||(n.font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" ")),n.textAlign="center",n.textBaseline="middle",a&&("string"==typeof a?n.fillStyle=a:(Ie[a._renderer.type].render.call(a,n,t),n.fillStyle=a._renderer.effect)),r&&("string"==typeof r?n.strokeStyle=r:(Ie[r._renderer.type].render.call(r,n,t),n.strokeStyle=r._renderer.effect),o&&(n.lineWidth=o)),"number"==typeof s&&(n.globalAlpha=s),l&&l.length>0&&(n.lineDashOffset=l.offset||0,n.setLineDash(l)),n.save(),n.scale(i.x,i.y),n.translate(x,k),Ie.isHidden.test(a)||(a._renderer&&a._renderer.offset?(g=a._renderer.scale.x,m=a._renderer.scale.y,n.save(),n.translate(-a._renderer.offset.x,-a._renderer.offset.y),n.scale(g,m),c=t._size/a._renderer.scale.y,u=t._leading/a._renderer.scale.y,n.font=[t._style,t._weight,c+"px/",u+"px",t._family].join(" "),d=a._renderer.offset.x/a._renderer.scale.x,f=a._renderer.offset.y/a._renderer.scale.y,n.fillText(t.value,d,f),n.restore()):n.fillText(t.value,0,0)),Ie.isHidden.test(r)||(r._renderer&&r._renderer.offset?(g=r._renderer.scale.x,m=r._renderer.scale.y,n.save(),n.translate(-r._renderer.offset.x,-r._renderer.offset.y),n.scale(g,m),c=t._size/r._renderer.scale.y,u=t._leading/r._renderer.scale.y,n.font=[t._style,t._weight,c+"px/",u+"px",t._family].join(" "),d=r._renderer.offset.x/r._renderer.scale.x,f=r._renderer.offset.y/r._renderer.scale.y,p=o/r._renderer.scale.x,n.lineWidth=p,n.strokeText(t.value,d,f),n.restore()):n.strokeText(t.value,0,0)),/(underline|strikethrough)/i.test(h)){var R=n.measureText(t.value);switch(h){case"underline":y=R.actualBoundingBoxAscent,b=R.actualBoundingBoxAscent;break;case"strikethrough":y=0,b=0}v=-R.width/2,_=R.width/2,n.lineWidth=Math.max(Math.floor(t._size/15),1),n.strokeStyle=n.fillStyle,n.beginPath(),n.moveTo(v,y),n.lineTo(_,b),n.stroke()}n.restore()},getBoundingClientRect:function(t,e){var n=Ie.ctx;n.font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" "),n.textAlign="center",n.textBaseline=t._baseline;var i=1.25*n.measureText(t._value).width,r=1.25*Math.max(t._size,t._leading);this._linewidth&&!Ie.isHidden.test(this._stroke)&&(i+=2*this._linewidth,r+=2*this._linewidth);var o=i/2,a=r/2;switch(Ie.alignments[t._alignment]||t._alignment){case Ie.alignments.left:e.left=0,e.right=i;break;case Ie.alignments.right:e.left=-i,e.right=0;break;default:e.left=-o,e.right=o}switch(t._baseline){case"bottom":e.top=-r,e.bottom=0;break;case"top":e.top=0,e.bottom=r;break;default:e.top=-a,e.bottom=a}e.width=i,e.height=r,e.centroid||(e.centroid={}),e.centroid.x=o,e.centroid.y=a},render:function(t,e,n){if(!this._visible||!this._opacity)return this;this._update();var i=n||this.parent,r=i._matrix.manual||i._flagMatrix,o=this._matrix.manual||this._flagMatrix,a=this._renderer.parent!==i,s=this._flagVertices||this._flagFill||this._fill instanceof At&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof Tt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof Pt&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof At&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof Tt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof Pt&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||i._flagOpacity||this._flagVisible||this._flagScale||this._flagValue||this._flagFamily||this._flagSize||this._flagLeading||this._flagAlignment||this._flagBaseline||this._flagStyle||this._flagWeight||this._flagDecoration||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((r||o||a)&&(this._renderer.matrix||(this._renderer.matrix=new k(9)),this._matrix.toTransformArray(!0,Me),Ee(Me,i._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof M||(this._renderer.scale=new M),this._scale instanceof M?(this._renderer.scale.x=this._scale.x*i._renderer.scale.x,this._renderer.scale.y=this._scale.y*i._renderer.scale.y):(this._renderer.scale.x=this._scale*i._renderer.scale.x,this._renderer.scale.y=this._scale*i._renderer.scale.y),a&&(this._renderer.parent=i)),s?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*i._renderer.opacity,Ie.text.getBoundingClientRect(this,this._renderer.rect),Ie.updateTexture.call(Ie,t,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),!this._clip||n){t.bindTexture(t.TEXTURE_2D,this._renderer.texture);var l=this._renderer.rect;return t.uniformMatrix3fv(e.matrix,!1,this._renderer.matrix),t.uniform4f(e.rect,l.left,l.top,l.right,l.bottom),t.drawArrays(t.TRIANGLES,0,6),this.flagReset()}}},"linear-gradient":{render:function(t,e){if(t.canvas.getContext("2d")){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops){this._renderer.effect=t.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y);for(var n=0;n<this.stops.length;n++){var i=this.stops[n];this._renderer.effect.addColorStop(i._offset,i._color)}}return this.flagReset()}}},"radial-gradient":{render:function(t,e){if(t.canvas.getContext("2d")){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops){this._renderer.effect=t.createRadialGradient(this.center._x,this.center._y,0,this.focal._x,this.focal._y,this._radius);for(var n=0;n<this.stops.length;n++){var i=this.stops[n];this._renderer.effect.addColorStop(i._offset,i._color)}}return this.flagReset()}}},texture:{render:function(t,e){if(t.canvas.getContext("2d")){this._update();var n=this.image;if((this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)this._renderer.effect=t.createPattern(n,this._repeat);else if(!this._renderer.effect)return this.flagReset();return(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof M||(this._renderer.offset=new M),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,n&&(this._renderer.offset.x+=n.width/2,this._renderer.offset.y+=n.height/2,this._scale instanceof M?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof M||(this._renderer.scale=new M),this._scale instanceof M?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}}},updateTexture:function(t,e){this[e._renderer.type].updateCanvas.call(Ie,e),e._renderer.texture||(e._renderer.texture=t.createTexture()),t.bindTexture(t.TEXTURE_2D,e._renderer.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.canvas.width<=0||this.canvas.height<=0||t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.canvas)},program:{create:function(t,e){var n,i;if(n=t.createProgram(),O.each(e,(function(e){t.attachShader(n,e)})),t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS))throw i=t.getProgramInfoLog(n),t.deleteProgram(n),new St("unable to link program: "+i);return n}},shaders:{create:function(t,e,n){var i,r;if(i=t.createShader(t[n]),t.shaderSource(i,e),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw r=t.getShaderInfoLog(i),t.deleteShader(i),new St("unable to compile shader "+i+": "+r);return i},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},vertex:["precision mediump float;","attribute vec2 a_position;","","uniform mat3 u_matrix;","uniform vec2 u_resolution;","uniform vec4 u_rect;","","varying vec2 v_textureCoords;","","void main() {","   vec2 rectCoords = (a_position * (u_rect.zw - u_rect.xy)) + u_rect.xy;","   vec2 projected = (u_matrix * vec3(rectCoords, 1.0)).xy;","   vec2 normal = projected / u_resolution;","   vec2 clipspace = (normal * 2.0) - 1.0;","","   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);","   v_textureCoords = a_position;","}"].join("\n"),fragment:["precision mediump float;","","uniform sampler2D u_image;","varying vec2 v_textureCoords;","","void main() {","  vec4 texel = texture2D(u_image, v_textureCoords);","  if (texel.a == 0.0) {","    discard;","  }","  gl_FragColor = texel;","}"].join("\n")},TextureRegistry:new Ct};Ie.ctx=Ie.canvas.getContext("2d");var Pe=function(t){var e,n,i;if(this.domElement=t.domElement||document.createElement("canvas"),void 0!==t.offscreenElement&&(Ie.canvas=t.offscreenElement,Ie.ctx=Ie.canvas.getContext("2d")),this.scene=new st,this.scene.parent=this,this._renderer={type:"renderer",matrix:new k(Ae),scale:1,opacity:1},this._flagMatrix=!0,t=O.defaults(t||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!0,overdraw:!1}),this.overdraw=t.overdraw,e=this.ctx=this.domElement.getContext("webgl",t)||this.domElement.getContext("experimental-webgl",t),!this.ctx)throw new St("unable to create a webgl context. Try using another renderer.");n=Ie.shaders.create(e,Ie.shaders.vertex,Ie.shaders.types.vertex),i=Ie.shaders.create(e,Ie.shaders.fragment,Ie.shaders.types.fragment),this.program=Ie.program.create(e,[n,i]),e.useProgram(this.program),this.program.position=e.getAttribLocation(this.program,"a_position"),this.program.matrix=e.getUniformLocation(this.program,"u_matrix"),this.program.rect=e.getUniformLocation(this.program,"u_rect");var r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(this.program.position,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.program.position),e.bufferData(e.ARRAY_BUFFER,new k([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enable(e.BLEND),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)};O.extend(Pe,{Utils:Ie}),O.extend(Pe.prototype,A,{constructor:Pe,setSize:function(t,e,n){this.width=t,this.height=e,this.ratio=void 0===n?et(this.ctx):n,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,O.isObject(this.domElement.style)&&O.extend(this.domElement.style,{width:t+"px",height:e+"px"}),this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio,this._flagMatrix=!0,this.ctx.viewport(0,0,t*this.ratio,e*this.ratio);var i=this.ctx.getUniformLocation(this.program,"u_resolution");return this.ctx.uniform2f(i,t*this.ratio,e*this.ratio),this.trigger(A.Types.resize,t,e,n)},render:function(){var t=this.ctx;return this.overdraw||t.clear(t.COLOR_BUFFER_BIT),Ie.group.render.call(this.scene,t,this.program),this._flagMatrix=!1,this}});var Fe=function(t){var e=O.defaults(t||{},{fullscreen:!1,fitted:!1,width:640,height:480,type:Fe.Types.svg,autostart:!1});if(O.each(e,(function(t,e){/fullscreen/i.test(e)||/autostart/i.test(e)||(this[e]=t)}),this),O.isElement(e.domElement)){var n=e.domElement.tagName.toLowerCase();/^(CanvasRenderer-canvas|WebGLRenderer-canvas|SVGRenderer-svg)$/.test(this.type+"-"+n)||(this.type=Fe.Types[n])}this.renderer=new Fe[this.type](this),this.setPlaying(e.autostart),this.frameCount=0,e.fullscreen?(this.fit=je.bind(this),this.fit.domElement=window,this.fit.attached=!0,O.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),O.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),kt.bind(this.fit.domElement,"resize",this.fit),this.fit()):e.fitted?(this.fit=ze.bind(this),O.extend(this.renderer.domElement.style,{display:"block"})):O.isElement(e.domElement)||(this.renderer.setSize(e.width,e.height,this.ratio),this.width=e.width,this.height=e.height),this.renderer.bind(A.Types.resize,Le.bind(this)),this.scene=this.renderer.scene,Fe.Instances.push(this),e.autostart&&De.init()};function je(){var t=document.body.getBoundingClientRect(),e=this.width=t.width,n=this.height=t.height;this.renderer.setSize(e,n,this.ratio)}function ze(){var t=this.renderer.domElement.parentElement;if(t){var e=t.getBoundingClientRect(),n=this.width=e.width,i=this.height=e.height;this.renderer.setSize(n,i,this.ratio)}else console.warn("Two.js: Attempting to fit to parent, but no parent found.")}function Le(t,e){this.width=t,this.height=e,this.trigger(A.Types.resize,t,e)}O.extend(Fe,U),O.extend(Fe.prototype,A,{constructor:Fe,appendTo:function(t){return t.appendChild(this.renderer.domElement),this.fit&&(this.fit.domElement!==window&&(this.fit.domElement=t,this.fit.attached=!1),this.update()),this},play:function(){return this.playing=!0,De.init(),this.trigger(A.Types.play)},pause:function(){return this.playing=!1,this.trigger(A.Types.pause)},setPlaying:function(t){this.playing=t},release:function(t){var e,n,i;if(O.isObject(t)){if("function"==typeof t.unbind&&t.unbind(),t.vertices)for("function"==typeof t.vertices.unbind&&t.vertices.unbind(),e=0;e<t.vertices.length;e++)"function"==typeof(n=t.vertices[e]).unbind&&n.unbind();if(t.children)for(e=0;e<t.children.length;e++)i=t.children[e],this.release(i);return t}},update:function(){var t=!!this._lastFrame,e=O.performance.now();t&&(this.timeDelta=parseFloat((e-this._lastFrame).toFixed(3))),this._lastFrame=e,this.fit&&!this.fit.attached&&(kt.bind(this.fit.domElement,"resize",this.fit),this.fit.attached=!0,this.fit());var n=this.width,i=this.height,r=this.renderer;return n===r.width&&i===r.height||r.setSize(n,i,this.ratio),this.trigger(A.Types.update,this.frameCount,this.timeDelta),this.render()},render:function(){return this.renderer.render(),this.trigger(A.Types.render,this.frameCount++)},add:function(t){var e=t;return e instanceof Array||(e=Array.prototype.slice.call(arguments)),this.scene.add(e),this},remove:function(t){var e=t;return e instanceof Array||(e=Array.prototype.slice.call(arguments)),this.scene.remove(e),this},clear:function(){return this.scene.remove(this.scene.children),this},makeLine:function(t,e,n,i){var r=new Qt(t,e,n,i);return this.scene.add(r),r},makeArrow:function(t,e,n,i,r){var o="number"==typeof r?r:10,a=Math.atan2(i-e,n-t),s=[new F(t,e,void 0,void 0,void 0,void 0,g.move),new F(n,i,void 0,void 0,void 0,void 0,g.line),new F(n-o*Math.cos(a-Math.PI/4),i-o*Math.sin(a-Math.PI/4),void 0,void 0,void 0,void 0,g.line),new F(n,i,void 0,void 0,void 0,void 0,g.move),new F(n-o*Math.cos(a+Math.PI/4),i-o*Math.sin(a+Math.PI/4),void 0,void 0,void 0,void 0,g.line)],l=new Dt(s,!1,!1,!0);return l.noFill(),l.cap="round",l.join="round",this.scene.add(l),l},makeRectangle:function(t,e,n,i){var r=new te(t,e,n,i);return this.scene.add(r),r},makeRoundedRectangle:function(t,e,n,i,r){var o=new ee(t,e,n,i,r);return this.scene.add(o),o},makeCircle:function(t,e,n,i){var r=new Zt(t,e,n,i);return this.scene.add(r),r},makeEllipse:function(t,e,n,i,r){var o=new Jt(t,e,n,i,r);return this.scene.add(o),o},makeStar:function(t,e,n,i,r){var o=new Re(t,e,n,i,r);return this.scene.add(o),o},makeCurve:function(t){var e=arguments.length,n=t;if(!Array.isArray(t)){n=[];for(var i=0;i<e;i+=2){var r=arguments[i];if("number"!=typeof r)break;var o=arguments[i+1];n.push(new F(r,o))}}var a=arguments[e-1],s=new Dt(n,!("boolean"==typeof a?a:void 0),!0),l=s.getBoundingClientRect();return s.center().translation.set(l.left+l.width/2,l.top+l.height/2),this.scene.add(s),s},makePolygon:function(t,e,n,i){var r=new we(t,e,n,i);return this.scene.add(r),r},makeArcSegment:function(t,e,n,i,r,o,a){var s=new ve(t,e,n,i,r,o,a);return this.scene.add(s),s},makePath:function(t){var e=arguments.length,n=t;if(!Array.isArray(t)){n=[];for(var i=0;i<e;i+=2){var r=arguments[i];if("number"!=typeof r)break;var o=arguments[i+1];n.push(new F(r,o))}}var a=arguments[e-1],s=new Dt(n,!("boolean"==typeof a?a:void 0)),l=s.getBoundingClientRect();return"number"==typeof l.top&&"number"==typeof l.left&&"number"==typeof l.right&&"number"==typeof l.bottom&&s.center().translation.set(l.left+l.width/2,l.top+l.height/2),this.scene.add(s),s},makeText:function(t,e,n,i){var r=new ne(t,e,n,i);return this.add(r),r},makeLinearGradient:function(t,e,n,i){var r=Array.prototype.slice.call(arguments,4),o=new At(t,e,n,i,r);return this.add(o),o},makeRadialGradient:function(t,e,n){var i=Array.prototype.slice.call(arguments,3),r=new Tt(t,e,n,i);return this.add(r),r},makeSprite:function(t,e,n,i,r,o,a){var s=new pe(t,e,n,i,r,o);return a&&s.play(),this.add(s),s},makeImageSequence:function(t,e,n,i,r){var o=new fe(t,e,n,i);return r&&o.play(),this.add(o),o},makeTexture:function(t,e){return new Pt(t,e)},makeGroup:function(t){var e=t;e instanceof Array||(e=Array.prototype.slice.call(arguments));var n=new st;return this.scene.add(n),n.add(e),n},interpret:function(t,e,n){var i=t.tagName.toLowerCase();if(n=void 0===n||n,!(i in ue))return null;var r=ue[i].call(this,t);return n?this.add(e&&r instanceof st?r.children:r):r.parent&&r.remove(),r},load:function(t,e){var n,i,r,o=new st,a=function(t){for(kt.temp.innerHTML=t,i=0;i<kt.temp.children.length;i++)if(n=kt.temp.children[i],/svg/i.test(n.nodeName))for(r=0;r<n.children.length;r++)o.add(this.interpret(n.children[r]));else o.add(this.interpret(n));if("function"==typeof e){var a=kt.temp.children.length<=1?kt.temp.children[0]:kt.temp.children;e(o,a)}}.bind(this);return/.*\.svg/gi.test(t)?(de(t,a),o):(a(t),o)}});var De=kt.getRequestAnimationFrame();function Be(){for(var t=0;t<Fe.Instances.length;t++){var e=Fe.Instances[t];e.playing&&e.update()}Fe.nextFrameID=De(Be)}De.init=function(){Be(),De.init=function(){}},O.extend(Fe,{Anchor:F,Collection:nt,Events:A,Group:st,Matrix:V,Path:Dt,Registry:Ct,Shape:it,Text:ne,Vector:M,Gradient:Et,ImageSequence:fe,LinearGradient:At,RadialGradient:Tt,Sprite:pe,Stop:Ot,Texture:Pt,ArcSegment:ve,Circle:Zt,Ellipse:Jt,Line:Qt,Polygon:we,Rectangle:te,RoundedRectangle:ee,Star:Re,CanvasRenderer:bt,SVGRenderer:Oe,WebGLRenderer:Pe,Commands:g,Utils:O.extend({Error:St,getRatio:et,defineGetterSetter:Rt,read:ue,xhr:de},O,xt,Q,R)});var Ve=Fe,We=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Ue=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Ne=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};String.prototype.startsWith=String.prototype.startsWith||function(t){return 0===this.indexOf(t)},String.prototype.padStart=String.prototype.padStart||function(t,e){for(var n=this;n.length<t;)n=e+n;return n};var qe={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function He(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e>0?t.toFixed(e).replace(/0+$/,"").replace(/\.$/,""):t.toString();return n||"0"}var Ge=function(){function t(e,n,i,r){We(this,t);var o=this;if(void 0===e);else if(Array.isArray(e))this.rgba=e;else if(void 0===i){var a=e&&""+e;a&&function(e){if(e.startsWith("hsl")){var n=e.match(/([\-\d\.e]+)/g).map(Number),i=Ne(n,4),r=i[0],a=i[1],s=i[2],l=i[3];void 0===l&&(l=1),r/=360,a/=100,s/=100,o.hsla=[r,a,s,l]}else if(e.startsWith("rgb")){var h=e.match(/([\-\d\.e]+)/g).map(Number),c=Ne(h,4),u=c[0],d=c[1],f=c[2],p=c[3];void 0===p&&(p=1),o.rgba=[u,d,f,p]}else e.startsWith("#")?o.rgba=t.hexToRgb(e):o.rgba=t.nameToRgb(e)||t.hexToRgb(e)}(a.toLowerCase())}else this.rgba=[e,n,i,void 0===r?1:r]}return Ue(t,[{key:"printRGB",value:function(t){var e=(t?this.rgba:this.rgba.slice(0,3)).map((function(t,e){return He(t,3===e?3:0)}));return t?"rgba("+e+")":"rgb("+e+")"}},{key:"printHSL",value:function(t){var e=[360,100,100,1],n=["","%","%",""],i=(t?this.hsla:this.hsla.slice(0,3)).map((function(t,i){return He(t*e[i],3===i?3:1)+n[i]}));return t?"hsla("+i+")":"hsl("+i+")"}},{key:"printHex",value:function(t){var e=this.hex;return t?e:e.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=t.hslToRgb(this._hsla)},set:function(t){3===t.length&&(t[3]=1),this._rgba=t,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=t.rgbToHsl(this._rgba)},set:function(t){3===t.length&&(t[3]=1),this._hsla=t,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){return"#"+this.rgba.map((function(t,e){return e<3?t.toString(16):Math.round(255*t).toString(16)})).map((function(t){return t.padStart(2,"0")})).join("")},set:function(e){this.rgba=t.hexToRgb(e)}}],[{key:"hexToRgb",value:function(t){var e=(t.startsWith("#")?t.slice(1):t).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!e.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+t);var n=e.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map((function(t){return parseInt(t,16)}));return n[3]=n[3]/255,n}},{key:"nameToRgb",value:function(e){var n=e.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),i=qe[n];return void 0===i?i:t.hexToRgb(i.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(t){var e=Ne(t,4),n=e[0],i=e[1],r=e[2],o=e[3];n/=255,i/=255,r/=255;var a=Math.max(n,i,r),s=Math.min(n,i,r),l=void 0,h=void 0,c=(a+s)/2;if(a===s)l=h=0;else{var u=a-s;switch(h=c>.5?u/(2-a-s):u/(a+s),a){case n:l=(i-r)/u+(i<r?6:0);break;case i:l=(r-n)/u+2;break;case r:l=(n-i)/u+4}l/=6}return[l,h,c,o]}},{key:"hslToRgb",value:function(t){var e=Ne(t,4),n=e[0],i=e[1],r=e[2],o=e[3],a=void 0,s=void 0,l=void 0;if(0===i)a=s=l=r;else{var h=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},c=r<.5?r*(1+i):r+i-r*i,u=2*r-c;a=h(u,c,n+1/3),s=h(u,c,n),l=h(u,c,n-1/3)}var d=[255*a,255*s,255*l].map(Math.round);return d[3]=o,d}}]),t}(),Ze=function(){function t(){We(this,t),this._events=[]}return Ue(t,[{key:"add",value:function(t,e,n){t.addEventListener(e,n,!1),this._events.push({target:t,type:e,handler:n})}},{key:"remove",value:function(e,n,i){this._events=this._events.filter((function(r){var o=!0;return e&&e!==r.target&&(o=!1),n&&n!==r.type&&(o=!1),i&&i!==r.handler&&(o=!1),o&&t._doRemove(r.target,r.type,r.handler),!o}))}},{key:"destroy",value:function(){this._events.forEach((function(e){return t._doRemove(e.target,e.type,e.handler)})),this._events=[]}}],[{key:"_doRemove",value:function(t,e,n){t.removeEventListener(e,n,!1)}}]),t}();function Ye(t,e,n){var i=!1;function r(t,e,n){return Math.max(e,Math.min(t,n))}function o(t,o,a){if(a&&(i=!0),i){t.preventDefault();var s=e.getBoundingClientRect(),l=s.width,h=s.height,c=o.clientX,u=o.clientY,d=r(c-s.left,0,l),f=r(u-s.top,0,h);n(d/l,f/h)}}function a(t,e){1===(void 0===t.buttons?t.which:t.buttons)?o(t,t,e):i=!1}function s(t,e){1===t.touches.length?o(t,t.touches[0],e):i=!1}t.add(e,"mousedown",(function(t){a(t,!0)})),t.add(e,"touchstart",(function(t){s(t,!0)})),t.add(window,"mousemove",a),t.add(e,"touchmove",s),t.add(window,"mouseup",(function(t){i=!1})),t.add(e,"touchend",(function(t){i=!1})),t.add(e,"touchcancel",(function(t){i=!1}))}var Ke="keydown",$e="mousedown",Xe="focusin";function Je(t,e){return(e||document).querySelector(t)}function Qe(t){t.preventDefault(),t.stopPropagation()}function tn(t,e,n,i,r){t.add(e,Ke,(function(t){n.indexOf(t.key)>=0&&(r&&Qe(t),i(t))}))}var en=document.createElement("style");en.textContent=".picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:stretch;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:'';display:block;width:100%;height:0;-webkit-box-ordinal-group:2;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_sl::before{content:'';display:block;padding-bottom:100%}.layout_default .picker_editor{-webkit-box-ordinal-group:2;order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{-webkit-box-ordinal-group:2;order:1;-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{-webkit-box-ordinal-group:2;order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px dodgerblue}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:whitesmoke;background-image:-webkit-gradient(linear, left bottom, left top, from(gainsboro), to(transparent));background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:-webkit-gradient(linear, left bottom, left top, from(transparent), to(gainsboro));background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:white}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid white;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:-webkit-gradient(linear, left top, right top, from(red), color-stop(yellow), color-stop(lime), color-stop(cyan), color-stop(blue), color-stop(magenta), to(red));background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:-webkit-gradient(linear, left top, left bottom, from(white), color-stop(50%, rgba(255,255,255,0))),-webkit-gradient(linear, left bottom, left top, from(black), color-stop(50%, rgba(0,0,0,0))),-webkit-gradient(linear, left top, right top, from(gray), to(rgba(128,128,128,0)));background-image:linear-gradient(180deg, white, rgba(255,255,255,0) 50%),linear-gradient(0deg, black, rgba(0,0,0,0) 50%),linear-gradient(90deg, gray, rgba(128,128,128,0))}.picker_alpha,.picker_sample{position:relative;background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\") left top/contain white;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:'';position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,0.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:\"\";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}",document.documentElement.firstElementChild.appendChild(en);var nn=function(){function t(e){We(this,t),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new Ze,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(e)}return Ue(t,[{key:"setOptions",value:function(t){var e=this;if(t){var n=this.settings;if(t instanceof HTMLElement)n.parent=t;else{n.parent&&t.parent&&n.parent!==t.parent&&(this._events.remove(n.parent),this._popupInited=!1),function(t,e,n){for(var i in t)e[i]=t[i]}(t,n),t.onChange&&(this.onChange=t.onChange),t.onDone&&(this.onDone=t.onDone),t.onOpen&&(this.onOpen=t.onOpen),t.onClose&&(this.onClose=t.onClose);var i=t.color||t.colour;i&&this._setColor(i)}var r=n.parent;if(r&&n.popup&&!this._popupInited){var o=function(t){return e.openHandler(t)};this._events.add(r,"click",o),tn(this._events,r,[" ","Spacebar","Enter"],o),this._popupInited=!0}else t.parent&&!n.popup&&this.show()}}},{key:"openHandler",value:function(t){if(this.show()){t&&t.preventDefault(),this.settings.parent.style.pointerEvents="none";var e=t&&t.type===Ke?this._domEdit:this.domElement;setTimeout((function(){return e.focus()}),100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(t){var e=t&&t.type,n=!1;if(t)if(e===$e||e===Xe){var i=(this.__containedEvent||0)+100;t.timeStamp>i&&(n=!0)}else Qe(t),n=!0;else n=!0;n&&this.hide()&&(this.settings.parent.style.pointerEvents="",e!==$e&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(t,e){this.closeHandler(),this.setOptions(t),e&&this.openHandler()}},{key:"setColor",value:function(t,e){this._setColor(t,{silent:e})}},{key:"_setColor",value:function(t,e){if("string"==typeof t&&(t=t.trim()),t){e=e||{};var n=void 0;try{n=new Ge(t)}catch(t){if(e.failSilently)return;throw t}if(!this.settings.alpha){var i=n.hsla;i[3]=1,n.hsla=i}this.colour=this.color=n,this._setHSLA(null,null,null,null,e)}}},{key:"setColour",value:function(t,e){this.setColor(t,e)}},{key:"show",value:function(){if(!this.settings.parent)return!1;if(this.domElement){var t=this._toggleDOM(!0);return this._setPosition(),t}var e,n,i=(e=this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>',(n=document.createElement("div")).innerHTML=e,n.firstElementChild);return this.domElement=i,this._domH=Je(".picker_hue",i),this._domSL=Je(".picker_sl",i),this._domA=Je(".picker_alpha",i),this._domEdit=Je(".picker_editor input",i),this._domSample=Je(".picker_sample",i),this._domOkay=Je(".picker_done button",i),this._domCancel=Je(".picker_cancel button",i),i.classList.add("layout_"+this.settings.layout),this.settings.alpha||i.classList.add("no_alpha"),this.settings.editor||i.classList.add("no_editor"),this.settings.cancelButton||i.classList.add("no_cancel"),this._ifPopup((function(){return i.classList.add("popup")})),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var t=this,e=this,n=this.domElement,i=this._events;function r(t,e,n){i.add(t,e,n)}r(n,"click",(function(t){return t.preventDefault()})),Ye(i,this._domH,(function(t,n){return e._setHSLA(t)})),Ye(i,this._domSL,(function(t,n){return e._setHSLA(null,t,1-n)})),this.settings.alpha&&Ye(i,this._domA,(function(t,n){return e._setHSLA(null,null,null,1-n)}));var o=this._domEdit;r(o,"input",(function(t){e._setColor(this.value,{fromEditor:!0,failSilently:!0})})),r(o,"focus",(function(t){var e=this;e.selectionStart===e.selectionEnd&&e.select()})),this._ifPopup((function(){var e=function(e){return t.closeHandler(e)};r(window,$e,e),r(window,Xe,e),tn(i,n,["Esc","Escape"],e);var o=function(e){t.__containedEvent=e.timeStamp};r(n,$e,o),r(n,Xe,o),r(t._domCancel,"click",e)}));var a=function(e){t._ifPopup((function(){return t.closeHandler(e)})),t.onDone&&t.onDone(t.colour)};r(this._domOkay,"click",a),tn(i,n,["Enter"],a)}},{key:"_setPosition",value:function(){var t=this.settings.parent,e=this.domElement;t!==e.parentNode&&t.appendChild(e),this._ifPopup((function(n){"static"===getComputedStyle(t).position&&(t.style.position="relative");var i=!0===n?"popup_right":"popup_"+n;["popup_top","popup_bottom","popup_left","popup_right"].forEach((function(t){t===i?e.classList.add(t):e.classList.remove(t)})),e.classList.add(i)}))}},{key:"_setHSLA",value:function(t,e,n,i,r){r=r||{};var o=this.colour,a=o.hsla;[t,e,n,i].forEach((function(t,e){(t||0===t)&&(a[e]=t)})),o.hsla=a,this._updateUI(r),this.onChange&&!r.silent&&this.onChange(o)}},{key:"_updateUI",value:function(t){if(this.domElement){t=t||{};var e=this.colour,n=e.hsla,i="hsl("+360*n[0]+", 100%, 50%)",r=e.hslString,o=e.hslaString,a=this._domH,s=this._domSL,l=this._domA,h=Je(".picker_selector",a),c=Je(".picker_selector",s),u=Je(".picker_selector",l);y(0,h,n[0]),this._domSL.style.backgroundColor=this._domH.style.color=i,y(0,c,n[1]),_(0,c,1-n[2]),s.style.color=r,_(0,u,1-n[3]);var d=r,f=d.replace("hsl","hsla").replace(")",", 0)"),p="linear-gradient("+[d,f]+")";if(this._domA.style.backgroundImage=p+", url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\")",!t.fromEditor){var g=this.settings.editorFormat,m=this.settings.alpha,v=void 0;switch(g){case"rgb":v=e.printRGB(m);break;case"hsl":v=e.printHSL(m);break;default:v=e.printHex(m)}this._domEdit.value=v}this._domSample.style.color=o}function y(t,e,n){e.style.left=100*n+"%"}function _(t,e,n){e.style.top=100*n+"%"}}},{key:"_ifPopup",value:function(t,e){this.settings.parent&&this.settings.popup?t&&t(this.settings.popup):e&&e()}},{key:"_toggleDOM",value:function(t){var e=this.domElement;if(!e)return!1;var n=t?"":"none",i=e.style.display!==n;return i&&(e.style.display=n),i}}],[{key:"StyleElement",get:function(){return en}}]),t}(),rn=function(){return(rn=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},on=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i};function an(t,e){return void 0===e&&(e=function(t){return!1}),t&&t.parent?(null==e?void 0:e(t.parent))?t.parent:an(t.parent,e):null}var sn=t.Builders.builders.webform.prototype.editComponent;function ln(t){var e,n;return(null===(n=null===(e=t.instance.options)||void 0===e?void 0:e.flags)||void 0===n?void 0:n.isInDataTable)&&!["hidden","columns","panel","table","tabs","well","fieldset"].includes(t.data.type)}function hn(){return[{key:"display",components:[{weight:442,type:"number",input:!0,key:"columnWeight",label:"Column weight in DataTable",placeholder:"0",defaultValue:0,tooltip:"Make columns appear in a different order in the table.",customConditional:function(t){return ln(t)}},{weight:1370,type:"checkbox",label:"Hide column in Data Table by default",tooltip:"Hide column in Data Table by default.",key:"hideColumnByDefault",input:!0,customConditional:function(t){return ln(t)}}]}]}t.Builders.builders.webform.prototype.editComponent=function(t,e,n,i,r,o){void 0===o&&(o={});var a=null==e?void 0:e.formioComponent,s=a&&("datatable"===a.type||!!an(a,(function(t){return"datatable"===t.type})));sn.call(this,t,e,n,i,r,rn({isInDataTable:s},o))},Object.values(t.Components.components).forEach((function(t){var e=t.editForm;t.editForm=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.apply(void 0,on([hn()],t))}}));var cn=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}([{type:"textfield",label:"Image Url",input:!0,key:"imageUrl",weight:20},{type:"select",input:!0,key:"imageType",label:"Image Type",tooltip:"Element used to display background image",weight:20,defaultValue:"image",dataSrc:"values",data:{values:[{label:"Image",value:"image"},{label:"SVG",value:"svg"}]}},{type:"textfield",label:"Width",input:!0,key:"width",customConditional:function(t){return!t.data.autoSize},weight:20},{type:"textfield",label:"Height",input:!0,key:"height",customConditional:function(t){return!t.data.autoSize},weight:20},{type:"checkbox",label:"Set Size Automatically",input:!0,key:"autoSize",tooltip:"Background image will fill the available width. Uncheck this if you want to specify width/height manually.",weight:20},{type:"textfield",label:"Default Zoom",input:!0,key:"defaultZoom",placeholder:"100",weight:20},{type:"textfield",label:"Default Stroke Color",description:"Start with # sign",input:!0,key:"defaultStroke",placeholder:"#333",weight:20},{type:"textfield",label:"Default Fill Color",description:"Start with # sign",input:!0,key:"defaultFill",placeholder:"#ccc",weight:20},{type:"number",label:"Default Line Width",input:!0,key:"defaultLineWidth",placeholder:"1",weight:20},{type:"number",label:"Default Circle Size",input:!0,key:"defaultCircleSize",placeholder:"10",weight:20},{key:"placeholder",ignore:!0}],hn()),un=[{key:"unique",ignore:!0}],dn=[{key:"multiple",ignore:!0}],fn=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},pn=t.Components.components.component.editForm;function gn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return pn.apply(void 0,fn([[{key:"display",components:cn},{key:"validation",components:un},{key:"data",components:dn}]],t))}function mn(t){var e=this;return{pencil:{state:{mode:"pencil"},eventStart:function(n){e.points=[n],e.prev=n,e.curve=e.two.makeCurve([new t.Vector(e.prev.x,e.prev.y),new t.Vector(n.x,n.y+1)],!0),e.curve.noFill().stroke=e.state.stroke,e.curve.linewidth=e.state.linewidth,e.curve.vertices.forEach((function(t){return t.addSelf(e.curve.translation)})),e.curve.translation.clear(),e.two.update(),e.layers.push(e.curve)},drag:function(n){e.points.push(n),e.curve.vertices.push(new t.Vector(n.x,n.y)),e.two.update(),e.prev=n},eventEnd:function(){var t=e.dataValue.slice();t.push(Object.assign({},e.state,{points:e.points})),e.dataValue=t,e.triggerChange()},draw:function(n){var i=e.two.makeCurve(n.points.map((function(e){return new t.Vector(e.x,e.y)})),!0);return i.noFill().stroke=n.stroke,i.linewidth=n.linewidth,i.vertices.forEach((function(t){return t.addSelf(i.translation)})),i.translation.clear(),i}},line:{state:{mode:"line"},eventStart:function(t){e.center=t,e.line=e.two.makeLine(t.x,t.y,t.x,t.y),e.line.fill=e.state.fill,e.line.stroke=e.state.stroke,e.line.linewidth=e.state.linewidth,e.two.update(),e.layers.push(e.line),e.layers.length},drag:function(t){e.line.vertices[1].x=t.x,e.line.vertices[1].y=t.y,e.two.update()},eventEnd:function(){var t=e.dataValue.slice(),n=e.line.vertices.map((function(t){return{x:t.x,y:t.y}}));t.push(Object.assign({},e.state,{vertices:n})),e.dataValue=t,e.triggerChange()},draw:function(t){var n=e.two.makeLine(t.vertices[0].x,t.vertices[0].y,t.vertices[1].x,t.vertices[1].y);return n.fill=t.fill,n.stroke=t.stroke,n.linewidth=t.linewidth,n}},circle:{state:{mode:"circle"},eventStart:function(t){e.center=t;var n=e.two.makeCircle(t.x,t.y,e.state.circleSize);n.fill=e.state.fill,n.stroke=e.state.stroke,n.linewidth=e.state.linewidth,e.two.update(),e.layers.push(n)},drag:function(){},eventEnd:function(){var t=e.dataValue.slice();t.push(Object.assign({},e.state,{center:e.center})),e.dataValue=t,e.triggerChange()},draw:function(t){var n=e.two.makeCircle(t.center.x,t.center.y,t.circleSize);return n.fill=t.fill,n.stroke=t.stroke,n.linewidth=t.linewidth,n}},rectangle:{cursor:{hover:"crosshair"},state:{mode:"rectangle"},eventStart:function(t){e.dragStartPoint=t},drag:function(t){e.dragEndPoint=t,e.rectangle&&e.rectangle.remove(),e.width=Math.abs(e.dragEndPoint.x-e.dragStartPoint.x),e.height=Math.abs(e.dragEndPoint.y-e.dragStartPoint.y),e.center={x:Math.min(e.dragStartPoint.x,e.dragEndPoint.x)+e.width/2,y:Math.min(e.dragStartPoint.y,e.dragEndPoint.y)+e.height/2},e.rectangle=e.two.makeRectangle(e.center.x,e.center.y,e.width,e.height),e.rectangle.fill=e.state.fill,e.rectangle.stroke=e.state.stroke,e.rectangle.linewidth=e.state.linewidth,e.two.update(),e.layers.push(e.rectangle)},eventEnd:function(){var t=e.dataValue.slice();delete e.rectangle;var n={center:e.center,width:e.width,height:e.height};t.push(Object.assign({},e.state,n)),e.dataValue=t,e.triggerChange()},draw:function(t){var n=e.two.makeRectangle(t.center.x,t.center.y,t.width,t.height);return n.fill=t.fill,n.stroke=t.stroke,n.linewidth=t.linewidth,n}},zoomIn:{cursor:{hover:"zoom-in"},state:{mode:"zoomIn"},eventStart:function(t){return e.zoom(t,e.zoomInfo.multiplier)}},zoomOut:{cursor:{hover:"zoom-out"},state:{mode:"zoomOut"},eventStart:function(t){return e.zoom(t,1/e.zoomInfo.multiplier)}},dragImage:{cursor:{hover:"grab",clicked:"grabbing"},state:{mode:"dragImage"},eventStart:function(t){return e.dragStartPoint=t},drag:function(t){e.dragLastPoint||(e.dragLastPoint=e.dragStartPoint);var n={x:Math.round(t.x-e.dragStartPoint.x),y:Math.round(t.y-e.dragStartPoint.y)};0===n.x&&0===n.y||(e.dragImage(n),e.dragLastPoint=t)}}}}var vn={modes:[{title:"Pencil",key:"pencil",icon:"fa fa-pencil"},{title:"Line",key:"line",icon:"fa fa-minus"},{title:"Circle",key:"circle",icon:"fa fa-circle",input:{type:"number",class:"formio-sketchpad-radius-input",attributes:{min:0}}},{title:"Rectangle",key:"rectangle",icon:"fa fa-square-o"},{title:"Zoom In",key:"zoomIn",icon:"fa fa-search-plus"},{title:"Zoom Out",key:"zoomOut",icon:"fa fa-search-minus"},{title:"Drag Zoomed Image",key:"dragImage",icon:"fa fa-hand-paper-o"}],styles:[{title:"Stroke Color",key:"stroke",icon:"fa fa-square-o"},{title:"Fill Color",key:"fill",icon:"fa fa-square"},{title:"Line Width",key:"width",icon:"fa fa-minus",input:{type:"number",class:"formio-sketchpad-linewidth-input",attributes:{min:0,max:250}}}],actions:[{title:"Undo",key:"undo",icon:"fa fa-undo"},{title:"Redo",key:"redo",icon:"fa fa-repeat"},{title:"Reset Zoom",key:"resetZoom",icon:"fa fa-search"},{title:"Clear All",key:"clearAll",icon:"fa fa-ban"}]},yn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),_n=function(){return(_n=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},bn=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},wn=t.Components.components.field,xn=function(e){function n(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=e.apply(this,t)||this;return r.dimensionsCorrection=1,r.imageType=r.component.imageType,r.modes=mn.call(r,Ve),r.state={mode:Object.keys(r.modes)[0],stroke:r.component.defaultStroke||n.defaultStroke,fill:r.component.defaultFill||n.defaultFill,linewidth:r.component.defaultLineWidth||n.defaultLineWidth,circleSize:r.component.defaultCircleSize||n.defaultCircleSize},r.dimensionsMultiplier=1,r.zoomInfo={viewBox:{},canvasViewBox:{},multiplier:1.5,totalMultiplier:1},r.deleted=[],r.layers=[],r}return yn(n,e),Object.defineProperty(n,"defaultFill",{get:function(){return"#ccc"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultStroke",{get:function(){return"#333"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultLineWidth",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultCircleSize",{get:function(){return 10},enumerable:!1,configurable:!0}),n.schema=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return wn.schema.apply(wn,bn([{type:"sketchpad",label:"Sketchpad",key:"sketchpad",input:!0,multiple:!0,modalEdit:!0,imageType:"image",autoSize:!0,defaultZoom:100,defaultStroke:n.defaultStroke,defaultFill:n.defaultFill,defaultLineWidth:n.defaultLineWidth,defaultCircleSize:n.defaultCircleSize}],t))},Object.defineProperty(n,"builderInfo",{get:function(){return{title:"Sketchpad",group:"premium",icon:"image",weight:110,documentation:"http://help.form.io/userguide/",schema:n.schema()}},enumerable:!1,configurable:!0}),n.prototype.render=function(){return e.prototype.render.call(this,this.renderTemplate(this.templateName,_n({},this.renderContext)))},n.prototype.loadComponentRefs=function(t){this.loadRefs(t,_n({canvas:"single",drawingContainer:"single",background:"single",backgroundImage:"single",totalMultiplier:"single",previewContainer:"single",previewDrawing:"single",previewBackground:"single"},this.buttonsRefs))},n.prototype.init=function(){var n=this,i=new t.Formio.Promise((function(t,e){n.backgroundReady={resolve:t,reject:e}}));return this.backgroundReady.promise=i,e.prototype.init.call(this)},n.prototype.attach=function(n){var i=this,r=new t.Formio.Promise((function(t,e){i.backgroundReady={resolve:t,reject:e}}));this.backgroundReady.promise=r;var o=e.prototype.attach.call(this,n);return this.loadComponentRefs(n),this.refs.canvas&&(this.createDrawingArea(),this.backgroundReady.promise.then((function(){return i.onBackgroundReady()})),this.disabled||this.shouldDisabled||this.readOnly||this.attachDrawEvents(),"image"===this.imageType&&this.refs.backgroundImage?this.loadBackgroundImage(this.refs.backgroundImage):this.addBackground(),this.attachToolbar()),o},Object.defineProperty(n.prototype,"buttonsRefs",{get:function(){var t={};return Object.values(vn).forEach((function(e){return e.forEach((function(e){t[e.key]="single",e.input&&(t[e.key+"-input"]="single")}))})),t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"renderContext",{get:function(){return{zoomInfo:{totalMultiplier:this.zoomInfo?Math.round(100*this.zoomInfo.totalMultiplier)/100:1},buttonGroups:this.buttonGroups,disabled:e.prototype.disabled}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"defaultSchema",{get:function(){return n.schema()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"templateName",{get:function(){return"sketchpad"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"emptyValue",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dataReady",{get:function(){return this.backgroundReady.promise},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"attachFunctions",{get:function(){var t=this,e=function(t,e,n){var i=new nn(t);return t.style.color=e,i.setColor(e,!0),i.onChange=function(e){t.style.color=e.rgbaString,n(e.rgbaString)},t},n=function(e,n,i){var r=t.refs[e];r&&(r.addEventListener("change",(function(t){return i(t.target.value)})),r.value=n)};return{stroke:function(n){return e(n,t.state.stroke,(function(e){return t.state.stroke=e}))},fill:function(n){return e(n,t.state.fill,(function(e){return t.state.fill=e}))},width:function(){return n("width-input",t.state.linewidth,(function(e){return t.state.linewidth=+e}))},circle:function(){return n("circle-input",t.state.circleSize,(function(e){return t.state.circleSize=+e}))}}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"buttonGroups",{get:function(){return Object.entries(vn).map((function(t){return t[1]}))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"componentLabel",{get:function(){return this.component.hideLabel?"":'<label class="control-label">'+this.component.label+"</label><br>"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"viewBoxFromSubmission",{get:function(){return this._viewBoxFromSubmission},set:function(t){this._viewBoxFromSubmission=t;var e=t.width,n=t.height,i=t.minX,r=t.minY;this.backgroundReady.isReady&&this.setCanvasViewBox(e,n,i,r)},enumerable:!1,configurable:!0}),n.prototype.loadBackgroundImage=function(t){var e=this;t.addEventListener("load",(function(){return e.addBackground()})),t.setAttribute("src",this.component.imageUrl)},n.prototype.createDrawingArea=function(){this.two=new Ve({type:Ve.Types.svg}).appendTo(this.refs.canvas),this.canvasSvg=this.two.renderer.domElement,this.addClass(this.canvasSvg,"formio-sketchpad-svg"),this.canvasSvg.setAttribute("preserveAspectRatio","xMidYMid meet")},n.prototype.getActualCoordinate=function(t){var e=t.x,n=t.y,i=this.zoomInfo.canvasViewBox.current.minX,r=this.zoomInfo.canvasViewBox.current.minY;return t.x=Math.round(e/this.zoomInfo.totalMultiplier/this.dimensionsMultiplier+i),t.y=Math.round(n/this.zoomInfo.totalMultiplier/this.dimensionsMultiplier+r),t},n.prototype.onBackgroundReady=function(){var e=this;this.backgroundReady.isReady=!0,this.addEventListener(window,"resize",t.Utils._.debounce((function(){return e.stretchDrawingArea()}),100)),this.resetZoom()},n.prototype.addBackground=function(){var e=this;this.refs.backgroundImage&&this.refs.backgroundImage.complete?this.setBackgroundImage():this.component.imageUrl&&"svg"===this.imageType&&t.Formio.makeStaticRequest(this.component.imageUrl,"GET",null,{noToken:!0,headers:{}}).then((function(t){e.setBackgroundImage(t)})).catch((function(t){console.warn(t),e.refs.background.innerHTML=e.t("Background image failed to load. Tagpad doesn't work without background image"),e.backgroundReady.reject()}))},n.prototype.parseSvg=function(t){var e=(new DOMParser).parseFromString(t,"image/svg+xml").getElementsByTagName("svg");return e&&e[0]?e[0]:null},n.prototype.prepareSvg=function(t){t.removeAttribute("width"),t.removeAttribute("height"),t.setAttribute("ref","backgroundImage")},n.prototype.setSvgImage=function(t){var e=this.parseSvg(t);if(e){var n=e.getAttribute("viewBox"),i=n?n.split(" ").map(parseFloat):this.mapDimensionsFromAttributes(e);this.setDimensions.apply(this,i),this.prepareSvg(e);var r=this.dimensions;this.assignZoomInfo(r),this.setViewBoxAttribute(e,r),t=(t=(new XMLSerializer).serializeToString(e)).replace("<svg:svg","<svg").replace("</svg:svg>","</svg>"),this.loadComponentRefs(this.element),this.refs.background.innerHTML=t}else console.warn("Sketchpad '"+this.component.key+"': Background SVG doesn't contain <svg> tag on it")},n.prototype.assignZoomInfo=function(e,n){void 0===n&&(n="viewBox"),this.zoomInfo[n].default={width:e.width,height:e.height,minX:e.minX,minY:e.minY},this.state.viewBox=this.zoomInfo[n].default,this.zoomInfo[n].current=t.Utils._.cloneDeep(this.zoomInfo[n].default)},n.prototype.buttonAttributes=function(t){return t&&t.input&&t.input.attributes?Object.entries(t.input.attributes).map((function(t){return t[0]+"='"+t[1]+"'"})).join(" "):""},n.prototype.attachDrawEvents=function(){var t=this;this.canvasSvg.addEventListener("mousedown",(function(e){e.preventDefault();var n=t.canvasSvg.getBoundingClientRect(),i="default";t.modes[t.state.mode].cursor&&(i=t.modes[t.state.mode].cursor.clicked||t.modes[t.state.mode].cursor.hover),t.canvasSvg.style.cursor=i,t.modes[t.state.mode].eventStart&&t.modes[t.state.mode].eventStart(t.getActualCoordinate({x:e.clientX-n.left,y:e.clientY-n.top}));var r=function(e){e.preventDefault();var n=t.canvasSvg.getBoundingClientRect();t.modes[t.state.mode].drag&&t.modes[t.state.mode].drag(t.getActualCoordinate({x:e.clientX-n.left,y:e.clientY-n.top}))},o=function(e){e.preventDefault(),t.canvasSvg.removeEventListener("mousemove",r),t.canvasSvg.removeEventListener("mouseup",o),document.removeEventListener("mouseup",o);var n="default";t.modes[t.state.mode].cursor&&(n=t.modes[t.state.mode].cursor.hover||n),t.canvasSvg.style.cursor=n;var i=t.canvasSvg.getBoundingClientRect();t.modes[t.state.mode].eventEnd&&t.modes[t.state.mode].eventEnd(t.getActualCoordinate({x:e.clientX-i.left,y:e.clientY-i.top}))};return t.canvasSvg.addEventListener("mousemove",r),t.canvasSvg.addEventListener("mouseup",o),document.addEventListener("mouseup",o),!1})),this.canvasSvg.addEventListener("touchstart",(function(e){e.preventDefault();var n=t.canvasSvg.getBoundingClientRect(),i=e.changedTouches[0],r="default";t.modes[t.state.mode].cursor&&(r=t.modes[t.state.mode].cursor.clicked||t.modes[t.state.mode].cursor.hover),t.canvasSvg.style.cursor=r,t.modes[t.state.mode].eventStart&&t.modes[t.state.mode].eventStart(t.getActualCoordinate({x:i.clientX-n.left,y:i.clientY-n.top}));var o=function(e){e.preventDefault();var n=t.canvasSvg.getBoundingClientRect(),i=e.changedTouches[0];t.modes[t.state.mode].drag&&t.modes[t.state.mode].drag(t.getActualCoordinate({x:i.clientX-n.left,y:i.clientY-n.top}))},a=function(e){e.preventDefault(),t.canvasSvg.removeEventListener("touchmove",o),t.canvasSvg.removeEventListener("touchend",a);var n=t.canvasSvg.getBoundingClientRect(),i=e.changedTouches[0],r="default";t.modes[t.state.mode].cursor&&(r=t.modes[t.state.mode].cursor.hover||r),t.canvasSvg.style.cursor=r,t.modes[t.state.mode].eventEnd&&t.modes[t.state.mode].eventEnd(t.getActualCoordinate({x:i.clientX-n.left,y:i.clientY-n.top}))};return t.canvasSvg.addEventListener("touchmove",o),t.canvasSvg.addEventListener("touchend",a),!1})),this.two.update()},n.prototype.attachToolbar=function(){this.attachModesButtons(),this.attachStylesButtons(),this.attachActionsButtons(),this.setActiveButton(this.state.mode)},n.prototype.attachModesButtons=function(){var t=this;vn.modes.forEach((function(e){var n=t.refs[e.key];if(n&&t.modes[e.key]){var i=t.modes[e.key];n.addEventListener("click",(function(e){return t.setState(i.state)})),t.callAttachFunction(n,e.key)}}))},n.prototype.attachStylesButtons=function(){var t=this;vn.styles.forEach((function(e){var n=t.refs[e.key];n&&t.callAttachFunction(n,e.key)}))},n.prototype.attachActionsButtons=function(){var t=this;vn.actions.forEach((function(e){var n=t.refs[e.key];n&&n.addEventListener("click",(function(){return t[e.key]()}))}))},n.prototype.callAttachFunction=function(t,e){this.attachFunctions[e]&&this.attachFunctions[e](t)},n.prototype.setState=function(e){Object.assign(this.state,e),this.setActiveButton(this.state.mode),this.canvasSvg.style.cursor=t.Utils._.get(this.modes[this.state.mode],"cursor.hover","default")},n.prototype.setActiveButton=function(t){var e=this;vn.modes.forEach((function(n){e.refs[n.key]&&e.removeClass(e.refs[n.key],"active"),e.refs[t]&&e.addClass(e.refs[t],"active")}))},n.prototype.setBackgroundImage=function(t){if("svg"===this.imageType)if(t&&t.startsWith("<?xml"))this.setSvgImage(t);else{this.imageType="image";var e=new Image;e.setAttribute("ref","backgroundImage"),this.refs.background.appendChild(e),this.loadBackgroundImage(e)}else this.setRasterImage();this.onBackgroundImageWasSetted()},n.prototype.setRasterImage=function(){var t=this.refs.backgroundImage.naturalWidth,e=this.refs.backgroundImage.naturalHeight;this.setDimensions(0,0,t,e),this.assignZoomInfo(this.dimensions)},n.prototype.setCanvasViewBox=function(t,e,n,i){var r,o;void 0===n&&(n=0),void 0===i&&(i=0),this.setDimensions(n,i,t,e),this.assignZoomInfo(this.dimensions,"canvasViewBox"),(null===(o=null===(r=this.zoomInfo)||void 0===r?void 0:r.viewBox)||void 0===o?void 0:o.default)?this.dimensionsCorrection=this.dimensions.width/this.zoomInfo.viewBox.default.width:console.warn("Default ViewBox is not defined"),this.setViewBoxAttribute(this.canvasSvg,this.zoomInfo.canvasViewBox.default),this.setEditorSize(this.dimensions.width,this.dimensions.height),this.stretchDrawingArea()},n.prototype.calculateCanvasViewBox=function(){var t=this.component.width,e=this.component.height;if(this.component.autoSize){var n=this.calculateAutoSize();t=n.width,e=n.height}return t&&e&&!this.component.autoSize&&(this.refs.drawingContainer.style.maxWidth=t+"px",this.refs.drawingContainer.style.maxHeight=e+"px"),"image"===this.imageType&&(t=this.refs.backgroundImage.naturalWidth,e=this.refs.backgroundImage.naturalHeight),{minX:0,minY:0,width:t,height:e}},n.prototype.onBackgroundImageWasSetted=function(){this.loadRefs(this.element,{backgroundImage:"single",component:"single"});var t=this.viewBoxFromSubmission||this.calculateCanvasViewBox(),e=t.width,n=t.height,i=t.minX,r=t.minY;this.setCanvasViewBox(e,n,i,r),this.draw(this.dataValue),this.backgroundReady.resolve()},n.prototype.calculateAutoSize=function(){var t,e=Math.round(null===(t=this.refs.drawingContainer)||void 0===t?void 0:t.offsetWidth),n=this.dimensions.width/this.dimensions.height,i=Math.round(e/n),r=Math.round(window.innerHeight-.2*window.innerHeight);return(r<i||0===e)&&(i=r,e=Math.round(i*n)),{width:e,height:i}},n.prototype.setOpenModalElement=function(){var t="\n      "+this.componentLabel+'\n      <div class="formio-sketchpad-modal-preview-container" ref="previewContainer">\n        <div ref="openModal">\n          <img\n            class="formio-sketchpad-modal-preview-background"\n            ref="previewBackground"\n            src="'+this.component.imageUrl+'"\n            width="100%"\n            alt="sketchpad preview background"\n          />\n        </div>\n      </div>\n    ';this.componentModal.setOpenModalElement(t)},n.prototype.getPreviewImage=function(){return this.canvasSvg&&this.two&&this.zoomInfo.viewBox.default?'<img class="formio-sketchpad-modal-preview-drawing" src="data:image/svg+xml;base64,'+this.getEncodedDrawing()+'"\n                ref="previewDrawing" width="100%" alt="sketchpad preview drawing"/>':""},n.prototype.getValueAsString=function(t,e){return t&&t.length?"[Complex Data]":""},n.prototype.getEncodedDrawing=function(){var t=this.getSvg(),e=(new XMLSerializer).serializeToString(t);return window.btoa(e)},n.prototype.getModalPreviewTemplate=function(){return"\n      "+this.componentLabel+"\n      <div class='formio-sketchpad-modal-preview-container' ref='previewContainer'>\n        <div ref=\"openModal\">\n          <img\n            ref=\"previewBackground\"\n            class='formio-sketchpad-modal-preview-background'\n            src="+this.component.imageUrl+'\n            width="100%"\n            alt="sketchpad preview background"\n          />\n          '+this.getPreviewImage()+"\n        </div>\n      </div>"},n.prototype.mapDimensionsFromAttributes=function(t){return[{attribute:"x",defaultValue:0},{attribute:"y",defaultValue:0},{attribute:"width",defaultValue:640},{attribute:"height",defaultValue:480}].map((function(e){return parseFloat(t.getAttribute(e.attribute))||e.defaultValue}))},n.prototype.setDimensions=function(t,e,n,i){this.dimensions={width:n,height:i,minX:t,minY:e}},n.prototype.stretchDrawingArea=function(){var t=this.calculateAutoSize(),e=t.width,n=t.height;if(e&&n){var i=this.zoomInfo,r=i.canvasViewBox,o=i.totalMultiplier,a=r.default.width,s=r.default.height;if(this.dimensionsMultiplier=e/a,this.dimensions.width=Math.round(a*this.dimensionsMultiplier),this.dimensions.height=Math.round(s*this.dimensionsMultiplier),e===this.editorSize.width&&n===this.editorSize.height)return;var l=o>1?this.dimensions.width:this.dimensions.width*o,h=o>1?this.dimensions.height:this.dimensions.height*o;this.setEditorSize(l,h)}},n.prototype.setEditorSize=function(t,e){this.two&&(this.editorSize={width:t,height:e},this.two.width=t,this.two.height=e,this.two.update()),this.refs.backgroundImage&&(this.refs.backgroundImage.setAttribute("width",t),this.refs.backgroundImage.setAttribute("height",e)),this.canvasSvg&&(this.canvasSvg.style.width=t,this.canvasSvg.style.height=e)},n.prototype.clear=function(){this.two&&this.two.clear()},n.prototype.clearAll=function(){this.layers=[],this.dataValue=[],this.two&&(this.clear(),this.two.update())},n.prototype.draw=function(t){var e=this;this.two&&(this.clear(),t&&t.length?(this.layers=t.map((function(t){return e.modes[t.mode].draw(t)})),this.two.update(),this.appendDrawingToPreview()):this.two.update())},n.prototype.appendDrawingToPreview=function(){var t,e,n,i,r,o,a,s;return r=this,o=void 0,s=function(){var r,o,a,s;return function(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(l){switch(l.label){case 0:return(null===(t=this.componentModal)||void 0===t?void 0:t.element)?(this.loadComponentRefs(this.componentModal.element),r="data:image/svg+xml;base64,"+this.getEncodedDrawing(),o=void 0,this.refs.previewDrawing?(null===(e=this.refs.previewDrawing)||void 0===e||e.setAttribute("src",r),(null===(n=this.refs.previewBackground)||void 0===n?void 0:n.height)>0?[4,this.combineIntoSingleImage(this.refs.previewBackground,this.refs.previewDrawing)]:[3,2]):[3,3]):[3,5];case 1:o=l.sent(),null===(i=this.refs.previewDrawing)||void 0===i||i.setAttribute("src",o),l.label=2;case 2:return[3,5];case 3:return(a=new Image).src=r,this.addClass(a,"formio-sketchpad-modal-preview-drawing"),a.setAttribute("ref","previewDrawing"),o=this.combineIntoSingleImage(this.refs.previewBackground,a),s=a,[4,o];case 4:s.src=l.sent(),this.refs.previewContainer&&(this.refs.previewContainer.appendChild(a),this.addEventListener(a,"click",this.componentModal.openModalListener)),l.label=5;case 5:return[2]}}))},new((a=void 0)||(a=Promise))((function(t,e){function n(t){try{l(s.next(t))}catch(t){e(t)}}function i(t){try{l(s.throw(t))}catch(t){e(t)}}function l(e){var r;e.done?t(e.value):(r=e.value,r instanceof a?r:new a((function(t){t(r)}))).then(n,i)}l((s=s.apply(r,o||[])).next())}))},n.prototype.combineIntoSingleImage=function(t,e){return new Promise((function(n){var i=document.createElement("canvas"),r=t.width,o=t.height;i.width=r,i.height=o;var a=i.getContext("2d");a.rect(0,0,i.width,i.height),t.crossOrigin="anonymous",e.crossOrigin="anonymous",e.width=r,e.height=o;var s=[t,e].length;t.onload=e.onload=function(){0==--s&&(a.drawImage(t,0,0,r,o),a.drawImage(e,0,0,r,o),n(i.toDataURL("image/png")))}}))},n.prototype.undo=function(){var t=this.dataValue.slice();t.length&&(this.deleted.push(t.pop()),this.dataValue=t,this.triggerChange(),this.draw(t))},n.prototype.redo=function(){if(this.deleted.length){var t=this.dataValue.slice();t.push(this.deleted.pop()),this.dataValue=t,this.triggerChange(),this.draw(t)}},n.prototype.setValue=function(t,n){var i;e.prototype.setValue.call(this,t,n);var r=null===(i=null==t?void 0:t[0])||void 0===i?void 0:i.viewBox;r&&(this.viewBoxFromSubmission=r),this.backgroundReady.isReady&&this.two&&this.draw(t)},n.prototype.getSvg=function(){var t=this.canvasSvg.cloneNode(!0);this.addClass(t,"formio-sketchpad-preview-svg"),t.removeAttribute("style");var e=this.zoomInfo.canvasViewBox.default;return this.setViewBoxAttribute(t,e),t},n.prototype.normalizeSvgOffset=function(t){void 0===t&&(t="viewBox");var e=this.zoomInfo[t];this.zoomInfo[t].current.minX=e.current.minX<e.default.minX?e.default.minX:e.current.minX,this.zoomInfo[t].current.minY=e.current.minY<e.default.minY?e.default.minY:e.current.minY;var n=e.default.width-e.current.width+e.default.minX,i=e.default.height-e.current.height+e.default.minY;this.zoomInfo[t].current.minX=e.current.minX>n?n:e.current.minX,this.zoomInfo[t].current.minY=e.current.minY>i?i:e.current.minY},n.prototype.setViewBoxAttribute=function(t,e){t.setAttribute("viewBox",e.minX+" "+e.minY+" "+e.width+" "+e.height)},n.prototype.updateSvgViewBox=function(t){void 0===t&&(t="viewBox");var e=this.zoomInfo[t].current;"svg"===this.imageType&&("viewBox"===t?this.setViewBoxAttribute(this.refs.backgroundImage,e):this.setViewBoxAttribute(this.canvasSvg,e))},n.prototype.drag=function(t,e){void 0===e&&(e="viewBox"),this.zoomInfo[e].current.minX=this.zoomInfo[e].current.minX-t.x,this.zoomInfo[e].current.minY=this.zoomInfo[e].current.minY-t.y,this.normalizeSvgOffset(e),this.updateSvgViewBox(e)},n.prototype.dragImage=function(t){var e=this.dimensionsCorrection?{x:t.x/this.dimensionsCorrection,y:t.y/this.dimensionsCorrection}:t;this.drag(e),this.drag(t,"canvasViewBox")},n.prototype.setTotalMultiplier=function(t){this.zoomInfo.totalMultiplier=t,this.refs.totalMultiplier.innerHTML=this.t(Math.round(100*t)/100)},n.prototype.zoomImage=function(t,e){void 0===e&&(e="viewBox"),this.zoomInfo[e].current.width=Math.round(this.zoomInfo[e].default.width/this.zoomInfo.totalMultiplier),this.zoomInfo[e].current.height=Math.round(this.zoomInfo[e].default.height/this.zoomInfo.totalMultiplier);var n=this.zoomInfo[e].current,i=n.width,r=n.height,o=this.zoomInfo[e].default,a=o.width,s=o.height;i>a&&r>s?this.zoomOut(e):this.zoomIn(t,e),this.updateSvgViewBox(e)},n.prototype.zoom=function(t,e){this.setTotalMultiplier(this.zoomInfo.totalMultiplier*e);var n=this.dimensionsCorrection?{x:t.x/this.dimensionsCorrection,y:t.y/this.dimensionsCorrection}:t;this.zoomImage(n),this.zoomImage(t,"canvasViewBox")},n.prototype.zoomOut=function(e){void 0===e&&(e="viewBox"),this.setEditorSize(this.dimensions.width*this.zoomInfo.totalMultiplier,this.dimensions.height*this.zoomInfo.totalMultiplier),this.zoomInfo[e].current=t.Utils._.cloneDeep(this.zoomInfo[e].default)},n.prototype.zoomIn=function(t,e){void 0===e&&(e="viewBox"),this.canvasSvg.width===this.dimensions.width&&this.canvasSvg.height===this.dimensions.height||this.setEditorSize(this.dimensions.width,this.dimensions.height),"svg"!==this.imageType?this.refs.backgroundImage&&this.setEditorSize(this.dimensions.width*this.zoomInfo.totalMultiplier,this.dimensions.height*this.zoomInfo.totalMultiplier):(this.zoomInfo[e].current.minX=t.x-this.zoomInfo[e].current.width/2,this.zoomInfo[e].current.minY=t.y-this.zoomInfo[e].current.height/2),this.normalizeSvgOffset(e)},n.prototype.resetZoom=function(){this.zoom({x:0,y:0},this.component.defaultZoom/100/this.zoomInfo.totalMultiplier)},n.editForm=gn,n}(wn),kn=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,i){return t[0]===e&&(n=i,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(e,n){var i=t(this.__entries__,e);~i?this.__entries__[i][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,i=t(n,e);~i&&n.splice(i,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,i=this.__entries__;n<i.length;n++){var r=i[n];t.call(e,r[1],r[0])}},e}()}(),Sn="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,Rn=void 0!==i.g&&i.g.Math===Math?i.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Cn="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(Rn):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)},On=["top","right","bottom","left","width","height","size","weight"],En="undefined"!=typeof MutationObserver,An=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,i=!1,r=0;function o(){n&&(n=!1,t()),i&&s()}function a(){Cn(o)}function s(){var t=Date.now();if(n){if(t-r<2)return;i=!0}else n=!0,i=!1,setTimeout(a,20);r=t}return s}(this.refresh.bind(this))}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){Sn&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),En?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){Sn&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;On.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),Mn=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},Tn=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||Rn},In=Ln(0,0,0,0);function Pn(t){return parseFloat(t)||0}function Fn(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+Pn(t["border-"+n+"-width"])}),0)}var jn="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof Tn(t).SVGGraphicsElement}:function(t){return t instanceof Tn(t).SVGElement&&"function"==typeof t.getBBox};function zn(t){return Sn?jn(t)?function(t){var e=t.getBBox();return Ln(0,0,e.width,e.height)}(t):function(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return In;var i=Tn(t).getComputedStyle(t),r=function(t){for(var e={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var r=i[n],o=t["padding-"+r];e[r]=Pn(o)}return e}(i),o=r.left+r.right,a=r.top+r.bottom,s=Pn(i.width),l=Pn(i.height);if("border-box"===i.boxSizing&&(Math.round(s+o)!==e&&(s-=Fn(i,"left","right")+o),Math.round(l+a)!==n&&(l-=Fn(i,"top","bottom")+a)),!function(t){return t===Tn(t).document.documentElement}(t)){var h=Math.round(s+o)-e,c=Math.round(l+a)-n;1!==Math.abs(h)&&(s-=h),1!==Math.abs(c)&&(l-=c)}return Ln(r.left,r.top,s,l)}(t):In}function Ln(t,e,n,i){return{x:t,y:e,width:n,height:i}}var Dn=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Ln(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=zn(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),Bn=function(t,e){var n,i,r,o,a,s,l,h=(i=(n=e).x,r=n.y,o=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(s.prototype),Mn(l,{x:i,y:r,width:o,height:a,top:r,right:i+o,bottom:a+r,left:i}),l);Mn(this,{target:t,contentRect:h})},Vn=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new kn,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Tn(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new Dn(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Tn(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new Bn(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),Wn="undefined"!=typeof WeakMap?new WeakMap:new kn,Un=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=An.getInstance(),i=new Vn(e,n,this);Wn.set(this,i)};["observe","unobserve","disconnect"].forEach((function(t){Un.prototype[t]=function(){var e;return(e=Wn.get(this))[t].apply(e,arguments)}}));var Nn=void 0!==Rn.ResizeObserver?Rn.ResizeObserver:Un,qn=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}([{type:"textfield",label:"Image Url",input:!0,key:"imageUrl",weight:20},{type:"textfield",label:"Width",input:!0,key:"canvasWidth",weight:20},{type:"textfield",label:"Height",input:!0,key:"canvasHeight",weight:20},{type:"textfield",label:"Dot Size",input:!0,key:"dotSize",placeholder:"10",weight:20},{type:"textfield",label:"Dot Stroke Size",input:!0,key:"dotStrokeSize",placeholder:"2",weight:20},{type:"textfield",label:"Dot Stroke Color",input:!0,key:"dotStrokeColor",placeholder:"#333",weight:20},{type:"textfield",label:"Dot Fill Color",input:!0,key:"dotFillColor",placeholder:"#ccc",weight:20},{type:"textfield",label:"Dot Custom Label",input:!0,key:"dotCustomLabel",placeholder:"x",tooltip:"Custom static label for dot.",weight:20}],hn()),Hn=[{key:"multiple",ignore:!0}],Gn=[{type:"textarea",input:!0,key:"template",label:"Dot Value Template",editor:"ace",as:"html",rows:10,weight:18,tooltip:"The HTML template for displaying dots' values in preview mode (View Tab, generated PDF)",description:'Four available variables. "dot" is the data of the dot, "index" is the index of the dot (indexes start from \'0\'), "components" is an array of components of the form associated with the dot and "instance" is an instance of the Tagpad.'}],Zn=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},Yn=t.Components.components.component.editForm;function Kn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Yn.apply(void 0,Zn([[{key:"display",components:qn},{key:"data",components:Hn},{key:"templates",label:"Templates",weight:5,components:Gn}]],t))}var $n=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Xn=function(){return(Xn=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Jn=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},Qn=t.Components.components.component,ti=t.Components.components.nestedarray,ei=function(e){function n(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var r=e.apply(this,n)||this;r.type="tagpad",r.dots=[];var o=new t.Formio.Promise((function(t,e){r.backgroundReady={resolve:t,reject:e}}));return r.backgroundReady.promise=o,r.dimensionsMultiplier=1,r.sizeFromSubmission=!1,r}return $n(n,e),n.schema=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ti.schema.apply(ti,Jn([{type:"tagpad",label:"Tagpad",key:"tagpad",input:!0,dotSize:10,dotStrokeSize:2,dotStrokeColor:"#333",dotFillColor:"#ccc",dotCustomLabel:"",components:[],tree:!0,template:n.defaultDotPreviewTemplate}],t))},Object.defineProperty(n,"builderInfo",{get:function(){return{title:"Tagpad",group:"premium",icon:"tag",weight:115,documentation:"",schema:n.schema()}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"defaultSchema",{get:function(){return n.schema()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"emptyValue",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"defaultValue",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"iterableRows",{get:function(){return this.editForms},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"buttons",{get:function(){var t=this,e={};return[{name:"removeDot",method:"removeSelectedDot"}].forEach((function(n){t.hasButton(n.name)&&(e[n.name]=n)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dataReady",{get:function(){return this.backgroundReady.promise},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"renderContext",{get:function(){return{selectedDot:this.selectedDot,hasDots:this.dots&&this.dots.length||this.dataValue.length,buttons:this.buttons,canvasMaxHeight:this.userDefiniedCanvasSize.height?this.userDefiniedCanvasSize.height+"px":"50%",canvasMaxWidth:this.userDefiniedCanvasSize.width?this.userDefiniedCanvasSize.width+"px":"50%"}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"userDefiniedCanvasSize",{get:function(){var t=parseInt(this.component.canvasWidth,10),e=parseInt(this.component.canvasHeight,10);return isNaN(t)||isNaN(e)?{width:void 0,height:void 0}:{width:t,height:e}},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultDotPreviewTemplate",{get:function(){return'<div class="dot-preview-label"> Dot {{index + 1}}: </div>\n    {% Object.keys(dot).forEach(function(key) { %}\n      <div style="margin-left: 15px;"><span class="dot-preview-field-label">{{key}}</span>:\n        <p class="dot-preview-value">\n          {{\n            instance.getComponent([index, key]) && \'getValueAsString\' in instance.getComponent([index, key])\n              ? instance.getComponent([index, key]).getValueAsString(dot[key])\n              : dot[key]\n          }}\n        </p>\n    </div>\n    {% }) %}'},enumerable:!1,configurable:!0}),n.prototype.init=function(){var t=this;if(this.builderMode)return this.editForms=[],e.prototype.init.call(this);this.components=this.components||[];var n=this.dataValue||this.emptyValue;this.editForms=n.map((function(e,n){return{isOpen:!1,data:e.dot?e.dot.data:e.data,components:t.createFormComponents(e,n)}}))},n.prototype.render=function(t){if(this.builderMode)return e.prototype.render.call(this);var n=this.renderContext;return e.prototype.render.call(this,t||this.renderTemplate("tagpad",Xn(Xn({},n),{components:this.renderComponents(this.formComponents)})))},n.prototype.attach=function(n){var i=this,r=new t.Formio.Promise((function(t,e){i.backgroundReady={resolve:t,reject:e}}));return this.backgroundReady.promise=r,this.builderMode||(this.loadRefs(n,{canvas:"single",background:"single",form:"single",canvasImage:"single",image:"single",removeDot:"single"}),this.formComponents&&this.attachComponents(this.refs.form,this.formComponents),this.refs.background&&this.hasBackgroundImage&&(this.createDrawingArea(),this.backgroundReady.promise.then((function(){i.resizeObserver=new Nn((function(){if(i.originalImageSize&&(!i.originalImageSize.width||!i.originalImageSize.height)){i.setOriginalImageSize();var t=i.originalImageSize,e=t.width,n=t.height;i.setDimensions(0,0,e,n),i.setViewBoxAttribute(i.canvasSvg,i.dimensions)}i.stretchDrawingArea()})),i.refs.background&&i.resizeObserver.observe(i.refs.background)})),this.disabled||this.shouldDisabled||this.readOnly||this.attachDrawEvents(),this.refs.image&&!this.imageWasLoaded?this.refs.image.addEventListener("load",(function(t){i.setOriginalImageSize(),i.imageWasLoaded=!0,i.addBackground()})):this.addBackground()),this.attachButtons(),this.dataValue.length>0&&0===this.dots.length?this.createDots():this.dots.length>0&&this.dots.forEach((function(t){return i.drawDot(t.dot,t.index)}))),e.prototype.attach.call(this,n)},n.prototype.beforeFocus=function(e){"beforeFocus"in this.parent&&this.parent.beforeFocus(this);var n=this.getRelativePath(e.path),i=t.Utils.getArrayFromComponentPath(n);t.Utils._.isNumber(i[0])&&this.selectDot(i[0])},n.prototype.getRelativePath=function(t){var e="."+this.key,n=this.isInputComponent?this.path:this.path.slice(0).replace(e,"");return t.replace(n,"")},n.prototype.setOriginalImageSize=function(){this.loadRefs(this.element,{background:"single",canvasContainer:"single"});var t=window.getComputedStyle(this.refs.background),e=parseInt(null==t?void 0:t.width,10),n=parseInt(null==t?void 0:t.height,10);e=isNaN(e)?0:e,n=isNaN(n)?0:n,this.originalImageSize={width:e,height:n}},n.prototype.attachDrawEvents=function(){var t=this;!this.options.readOnly&&this.canvasSvg&&(this.canvasSvg.addEventListener("mouseup",(function(e){return t.mouseEnd(e)})),this.canvasSvg.addEventListener("touchend",(function(e){return t.touchEnd(e)})),this.two.update())},n.prototype.attachButtons=function(){var e=this;t.Utils._.each(this.buttons,(function(t){var n=e.refs[""+t.name];n&&e.addEventListener(n,"click",(function(i){i.preventDefault(),n.setAttribute("disabled","disabled"),e.setLoading(n,!0),"function"==typeof e[t.method]&&e[t.method](),n.removeAttribute("disabled"),e.setLoading(n,!1)}))}))},n.prototype.redraw=function(){e.prototype.redraw.call(this);var t=[];this.dots.forEach((function(e){return t.push(e.shape.circle,e.shape.text)})),this.two&&this.two.add(t)},n.prototype.destroy=function(){this.canvasSvg&&(this.canvasSvg.removeEventListener("touchend",this.touchEnd),this.canvasSvg.removeEventListener("mouseup",this.mouseEnd)),e.prototype.destroy.call(this),this.emit("destroy"),this.off("destroy")},n.prototype.destroyDot=function(t){if(this.dots[t]){var e=this.dots[t];e.shape.circle._renderer.elem.removeEventListener("mouseup",this.dotClicked),e.shape.text._renderer.elem.removeEventListener("mouseup",this.dotClicked)}},n.prototype.destroyComponents=function(){if(this.builderMode||!this.formComponents)return e.prototype.destroyComponents.call(this);this.formComponents.slice().forEach((function(t){return t.destroy()}))},n.prototype.addBackground=function(){this.refs.image&&this.refs.image.complete&&!this.imageWasLoaded?this.imageWasLoaded=!0:this.refs.image&&this.refs.image.complete&&this.imageWasLoaded&&this.setBackgroundImage()},n.prototype.setBackgroundImage=function(t){if(this.sizeFromSubmission)this.setViewBoxAttribute(this.canvasSvg,this.dimensions);else{var e=this.originalImageSize,n=e.width,i=e.height;this.setDimensions(0,0,n,i),this.setViewBoxAttribute(this.canvasSvg,this.dimensions)}this.loadRefs(this.refs.background,{backgroundImage:"single"}),this.stretchDrawingArea(),this.backgroundReady.resolve()},n.prototype.mapDimensionsFromAttributes=function(t){return[{attribute:"x",defaultValue:0},{attribute:"y",defaultValue:0},{attribute:"width",defaultValue:640},{attribute:"height",defaultValue:480}].map((function(e){return parseFloat(t.getAttribute(e.attribute))||e.defaultValue}))},n.prototype.setDimensions=function(t,e,n,i){this.dimensions={width:n,height:i,minX:t,minY:e}},n.prototype.setViewBoxAttribute=function(t,e){t.setAttribute("viewBox",e.minX+" "+e.minY+" "+e.width+" "+e.height)},n.prototype.hasButton=function(t){switch(t){case"removeDot":return!this.options.readOnly;default:return!1}},Object.defineProperty(n.prototype,"iteratableRows",{get:function(){return this.editForms},enumerable:!1,configurable:!0}),n.prototype.componentContext=function(t){return this.iteratableRows[t.row]?this.iteratableRows[t.row].data:{}},n.prototype.createFormComponents=function(e,n){var i=this,r=[];return this.component.components.forEach((function(o){var a=t.Utils._.clone(i.options);a.row=""+n,a.name+="["+n+"]";var s=e.dot?e.dot.data:e.data,l=i.createComponent(o,a,s);r.push(l)})),r},n.prototype.redrawDots=function(){this.dots=[],this.two.clear(),this.two.render(),this.createDots()},n.prototype.createDots=function(){var t=this,e=this.dataValue;e&&e.length&&this.two&&(e.forEach((function(e,n){t.dots[n]||t.addDot(e)})),this.dots.splice(e.length),this.editForms.splice(e.length))},n.prototype.getComponent=function(e,n){e=Array.isArray(e)?e:[e];var i=null,r=e[0],o=e[1],a=e.slice(2);return t.Utils._.isNumber(r)&&o?(this.everyComponent((function(t){t.key===o&&(i=t)}),r),i&&(t.Utils._.isFunction(n)&&n(i,this.getComponents),a.length&&"getComponent"in i)?i.getComponent(a,n):i):i},n.prototype.rescaleImage=function(e){var n=this;if(void 0===e&&(e={}),e.fromSubmission&&this.dataValue.length)return t.Utils._.get(this.dataValue,"[0].coordinate.width",!1)?(this.setDimensions(0,0,this.dataValue[0].coordinate.width,this.dataValue[0].coordinate.height),void(this.sizeFromSubmission=!0)):void(this.hasBackgroundImage&&this.backgroundReady.promise.then((function(){n.dataValue=n.dataValue.map((function(t){return t.coordinate.width=n.dimensions.width,t.coordinate.height=n.dimensions.height,t}))})))},n.prototype.setValue=function(t,e){this.dataValue=t,this.rescaleImage(e),this.createDots(),this.rebuild()},n.prototype.mouseEnd=function(t){t.preventDefault();var e=this.canvasSvg.getBoundingClientRect(),n=this.getActualCoordinate({x:t.clientX-e.left,y:t.clientY-e.top});this.addDot({coordinate:n,data:{}}),this.selectDot(this.dots.length-1)},n.prototype.touchEnd=function(t){t.preventDefault();var e=this.canvasSvg.getBoundingClientRect(),n=t.changedTouches[0],i=this.getActualCoordinate({x:n.pageX-e.left,y:n.pageY-e.top});this.addDot({coordinate:i,data:{}}),this.selectDot(this.dots.length-1)},n.prototype.getActualCoordinate=function(t){return t.x=Math.round(t.x/this.dimensionsMultiplier)+this.dimensions.minX,t.y=Math.round(t.y/this.dimensionsMultiplier)+this.dimensions.minY,t.width=this.dimensions.width,t.height=this.dimensions.height,t},n.prototype.selectDot=function(e){if(this.selectedDot&&this.dots[this.selectedDot.index]&&(this.dots[this.selectedDot.index].shape.circle.dashes=[0]),!t.Utils._.isNumber(e)||!this.dots[e])return this.selectedDot=null,void this.redraw();var n=this.dots[e];this.selectedDot=n,this.dots[this.selectedDot.index].shape.circle.dashes=[1],this.formComponents=this.editForms[e].components,this.redraw(),this.triggerChange()},n.prototype.dotClicked=function(t,e){t.stopPropagation(),this.selectDot(e)},n.prototype.addDot=function(t){var e=this.dots.length,n=this.drawDot(t,e);this.dots.push({index:e,dot:t,shape:n}),this.dataValue[e]||this.dataValue.push(t),this.editForms.push({components:this.createFormComponents(this.dots[e],e),data:t})},n.prototype.drawDot=function(t,e){var n=this,i=t.coordinate,r=i.x,o=i.y,a=this.drawDotCircle(r,o,this.component.dotSize,e),s=this.drawDotLabel(r,o,this.component.dotCustomLabel||e+1);return this.two.add(a,s),this.two.update(),a._renderer.elem.addEventListener("mouseup",(function(t){return n.dotClicked(t,e)})),s._renderer.elem.addEventListener("mouseup",(function(t){return n.dotClicked(t,e)})),{circle:a,text:s}},n.prototype.drawDotCircle=function(t,e,n,i){var r=this.two.makeCircle(t,e,n);return r.fill=this.component.dotFillColor,r.stroke=this.component.dotStrokeColor,r.linewidth=this.component.dotStrokeSize,r.className+=" formio-tagpad-dot",this.selectedDot&&this.selectedDot.index===i&&(r.dashes=[1]),r},n.prototype.drawDotLabel=function(t,e,n){var i=new Ve.Text(n,t,e);return i.className+=" formio-tagpad-dot-index",i.styles={color:this.component.dotStrokeColor},i},n.prototype.createDrawingArea=function(){this.two=new Ve({type:Ve.Types.svg,width:"100%",height:"100%"}).appendTo(this.refs.canvas),this.canvasSvg=this.two.renderer.domElement,this.canvasSvg.setAttribute("preserveAspectRatio","xMidYMid meet")},n.prototype.stretchDrawingArea=function(){var t,e;this.loadRefs(this.element,{background:"single"});var n=null===(t=this.refs.background)||void 0===t?void 0:t.offsetWidth,i=null===(e=this.refs.background)||void 0===e?void 0:e.offsetHeight;if(n&&i){var r=n/this.dimensions.width;this.dimensionsMultiplier!==r&&(this.dimensionsMultiplier=n/this.dimensions.width,this.setEditorSize(n,i))}},n.prototype.setEditorSize=function(t,e){this.two.width=t,this.two.height=e,this.two.update(),this.refs.image&&(this.refs.image.setAttribute("width",t),this.refs.image.setAttribute("height",e))},Object.defineProperty(n.prototype,"hasBackgroundImage",{get:function(){return this.component.image||this.component.imageUrl},enumerable:!1,configurable:!0}),n.prototype.removeSelectedDot=function(){this.selectedDot&&this.dataValue[this.selectedDot.index]&&(this.destroyDot(this.selectedDot.index),this.destroyComponents(),this.dataValue.splice(this.selectedDot.index,1),this.dots=[],this.editForms=[],this.components=[],this.createDots(),this.selectDot(0))},n.prototype.focus=function(){return this.refs.canvas&&this.refs.canvas.focus()},n.prototype.checkData=function(t,e,n){var i=this;return t=t||this.rootValue,e=e||{},n=n||this.data,Qn.prototype.checkData.call(this,t,e,n),this.editForms.reduce((function(n,r,o){return i.checkDot(t,e,r.data,o)&&n}),!0)},n.prototype.checkValidity=function(t,e,n){return t=t||this.rootValue,n=n||this.data,this.checkCondition(n,t)?this.checkComponentValidity(t,e,n):(this.setCustomValidity(""),!0)},n.prototype.checkComponentValidity=function(t,n,i){var r=this;if(!e.prototype.checkComponentValidity.call(this,t,n,i))return!1;var o=!0;if(this.editForms.forEach((function(t,e){var i=r.checkDotValidity(t,n,r.dots[e]);o=o&&i})),!o)return!1;var a=this.invalid||this.invalidMessage(t,n);return this.setCustomValidity(a,n),!0},n.prototype.checkDot=function(t,n,i,r){var o=e.prototype.checkData.call(this,t,n,i,this.editForms[r].components);return this.setDotValidity(this.dots[r],o),o},n.prototype.checkDotValidity=function(t,e,n){var i=!0;if(!t)return!0;var r=e||t.dirty;return t.components.forEach((function(e){(r=r||!e.pristine)&&(e.setPristine(!r),t.dirty=!!r,i=i&&e.checkValidity(null,r,t.data))})),this.setDotValidity(n,i),!!i},n.prototype.addDotNumberToErrorMessages=function(t){this.editForms[t.index].components.forEach((function(e){e.errors.forEach((function(e){var n=" (see dot "+(t.index+1)+")";e.message.includes(n)||(e.message+=n,e.messages.forEach((function(t){return t.message+=n})))}))}))},n.prototype.setDotValidity=function(t,e){if(t){var n=e?this.component.dotStrokeColor:"#ff0000";t.shape.circle.stroke=n,t.shape.text.styles.color=n,this.two.update(),this.addDotNumberToErrorMessages(t)}},n.prototype.getDataAsString=function(){var t=this,e="",i=this.component.template||n.defaultDotPreviewTemplate;return this.iterableRows.forEach((function(n,r){var o=n.data,a=n.components,s=t.interpolate(i,{dot:o,index:r,components:a,instance:t});e+=s})),e},n.prototype.getValueAsString=function(n,i){var r=this;if(!n||!n.length)return"";if(i&&i.email){var o="";t.Utils.eachComponent(this.components,(function(t){o+="<th>"+t.label+"</th>"}));var a='\n        <table border="1" style="width:100%">\n          <thead>\n            <tr><th>Dots</th>'+o+"</tr>\n          </thead>\n          <tbody>\n      ";return n.map((function(e,n){var o=r.editForms[n].components,s="";t.Utils.eachComponent(o,(function(t){s+='<td style="text-align: center">',t.isInputComponent&&t.visible&&!t.skipInEmail&&(s+=t.getView(t.dataValue,i)),s+="</td>"})),a+='\n          <tr>\n            <td style="text-align: center">'+(n+1)+"</td>\n            "+s+"\n          </tr>\n        "})),a+="</tbody></table>"}return e.prototype.getValueAsString.call(this,n,i)},n.editForm=Kn,n}(ti),ni=[{type:"checkbox",input:!0,weight:105,key:"inlineEdit",label:"Inline Editing",tooltip:"Check this if you would like your changes within 'edit' mode to be committed directly to the submission object as that row is being changed"},{key:"defaultValue",ignore:!0},{key:"multiple",ignore:!0}],ii=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}([{key:"placeholder",ignore:!0},{key:"modalEdit",ignore:!0}],hn()),ri=[{type:"textarea",label:"Header Template",key:"templates.header",rows:5,editor:"ace",as:"handlebars",input:!0,placeholder:"/*** Lodash Template Code ***/",tooltip:"This is the <a href='https://lodash.com/docs/4.17.5#template'>Lodash Template</a> used to render the header of the Dynamic Wizard.",customConditional:function(){return!t.Utils.Evaluator.noeval}},{type:"textarea",label:"Row Template",key:"templates.row",rows:5,editor:"ace",as:"handlebars",input:!0,placeholder:"/*** Lodash Template Code ***/",description:'Three available variables. "row" is an object of one row\'s data, "components" is the array of components in the grid and "state" is current row\'s state (can be "draft" or "saved").',tooltip:"This is the <a href='https://lodash.com/docs/4.17.5#template'>Lodash Template</a> used to render each row of the Dynamic Wizard.",customConditional:function(){return!t.Utils.Evaluator.noeval}},{type:"textarea",label:"Footer Template",key:"templates.footer",rows:5,editor:"ace",as:"handlebars",input:!0,placeholder:"/*** Lodash Template Code ***/",description:'Two available variables. "value" is the array of row data and "components" is the array of components in the grid.',tooltip:"This is the <a href='https://lodash.com/docs/4.17.5#template'>Lodash Template</a> used to render the footer of the Dynamic Wizard.",customConditional:function(){return!t.Utils.Evaluator.noeval}},{type:"textfield",input:!0,key:"rowClass",label:"Row CSS Class",placeholder:"Row CSS Class",tooltip:"CSS class to add to the edit row wrapper."}],oi=[{ignore:!0,key:"unique"},{weight:110,key:"validate.minLength",label:"Minimum Length",placeholder:"Minimum Length",type:"number",tooltip:"The minimum length requirement this field must meet.",input:!0},{weight:120,key:"validate.maxLength",label:"Maximum Length",placeholder:"Maximum Length",type:"number",tooltip:"The maximum length requirement this field must meet.",input:!0},{type:"checkbox",input:!0,weight:105,key:"rowDrafts",label:"Enable Row Drafts",tooltip:"Allow save rows even if their data is invalid. Errors will occur when try to submit with invalid rows."}],ai=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},si=t.Components.components.component.editForm;function li(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return si.apply(void 0,ai([[{label:"Templates",key:"templates",weight:5,components:ri},{key:"display",components:ii},{key:"data",components:ni},{key:"validation",components:oi}]],t))}var hi=i(26213),ci=i(86131),ui={row:hi.Z,header:ci.Z},di=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),fi=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},pi=t.Components.components.editgrid,gi=t.Components.components.nested,mi={New:"new",Editing:"editing",Saved:"saved",Removed:"removed",Draft:"draft"},vi=function(e){function n(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=e.apply(this,t)||this;return i.type="dynamicWizard",i.isChangingMode=!0,i.isSavingInProgress=!1,i.editRows=[],i.changingRowIndex=null,i.step=0,i.buttonSettings={showPrevious:!0,showNext:!0,showSubmit:!0,showCancel:!i.options.readOnly},i.shouldUpdate=!0,i}return di(n,e),n.schema=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return pi.schema.apply(pi,fi([{type:"dynamicWizard",label:"Dynamic Wizard",key:"dynamicWizard",templates:{header:n.defaultHeaderTemplate,row:n.defaultRowTemplate,footer:""}}],t))},Object.defineProperty(n,"builderInfo",{get:function(){return{title:"Dynamic Wizard",group:"premium",icon:"tasks",ignoreForForm:!0,disableSiblings:!0,weight:20,schema:n.schema()}},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultHeaderTemplate",{get:function(){return'<div class="row" role="row">\n    <div class="col-sm-2">\n      Users\n    </div>\n  </div>'},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultRowTemplate",{get:function(){return'<div class="list-group-item">\n    <div class="list-group-subheader">\n      <div class="row" role="row">\n        <div class="col-sm-2">\n          User {{ rowIndex + 1 }}\n        </div>\n        {% if (!ctx.self.options.readOnly && !component.disabled) { %}\n        <div class="col-sm-2" role="gridcell">\n          <div class="btn-group pull-right">\n            <button class="btn btn-default btn-light btn-sm editCard" aria-label="{{ ctx.t(\'Edit row \' + (rowIndex + 1)) }}"><i class="{{ ctx.iconClass(\'edit\') }}"></i></button>\n            {% if (!instance.hasRemoveButtons || instance.hasRemoveButtons()) { %}\n            <button class="btn btn-danger btn-sm removeRow" aria-label="{{ ctx.t(\'Remove row \' + (rowIndex + 1)) }}"><i class="{{ ctx.iconClass(\'trash\') }}"></i></button>\n            {% } %}\n          </div>\n        </div>\n        {% } %}\n      </div>\n    </div>\n    {% ctx.util.eachComponent(ctx.components, function(component) { %}\n    {% if ((!component.hasOwnProperty(\'tableView\') || component.tableView) && isVisibleInRow(component)) { %}\n    <div class="row" role="row">\n      <div class="col-sm-2" role="gridcell">\n        {{ component.key }}\n      </div>\n    </div>\n    <div class="row" role="row">\n      <div class="col-sm-2" role="gridcell">\n        {{ ctx.getView(component, ctx.row[component.key]) }}\n      </div>\n    </div>\n    {% } %}\n    {% }) %}\n  </div>'},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dynamicWizardKey",{get:function(){return"dynamicWizard-"+this.key},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowRef",{get:function(){return this.dynamicWizardKey+"-row"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowElements",{get:function(){return this.refs[this.rowRef]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rowRefs",{get:function(){return this.refs["dynamicWizard-"+this.component.key+"-row"]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"agreeButtonRef",{get:function(){return this.dynamicWizardKey+"-agreeButton"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"denyButtonRef",{get:function(){return this.dynamicWizardKey+"-denyButton"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"agreeButtonElements",{get:function(){return this.refs[this.agreeButtonRef]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cancelRowRef",{get:function(){return this.dynamicWizardKey+"-cancelRow"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cancelRowElements",{get:function(){return this.refs[this.cancelRowRef]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inlineEditMode",{get:function(){return this.component.inlineEdit},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"saveEditMode",{get:function(){return!this.inlineEditMode},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rootWizard",{get:function(){var t;return this.findRootWizard(null===(t=this.parent)||void 0===t?void 0:t.parent)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasComponents",{get:function(){return this.component.components.length},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"buttons",{get:function(){var t=this,e={};return[{name:"cancel",method:"cancelRow"},{name:"previous",method:"prevPage"},{name:"next",method:"nextPage"}].forEach((function(n){t.hasButton(n.name)&&(e[n.name]=n)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"defaultSchema",{get:function(){return n.schema()},enumerable:!1,configurable:!0}),n.prototype.init=function(t,n){return void 0===n&&(n=this._visible),this.prevVisibility=n,this.prevBlocking=this.disabled,this.secondRender=!!t,this.shouldUpdate=!0,this.changingRowIndex=null,this.builderMode&&(this.editRows=[]),e.prototype.init.call(this)},n.prototype.render=function(n){var i,r,o;if(this.builderMode)return e.prototype.render.call(this);var a=this.dataValue||[],s=t.Utils.Evaluator.noeval?ui.header:t.Utils._.get(this.component,"templates.header"),l=this.editRows[this.changingRowIndex];0===this.step&&l&&!l.components[this.step]._visible&&this.nextPage();var h=!this.editRows.length&&0===this.step&&0===this.changingRowIndex;return(!this.secondRender&&this.shouldUpdate||h)&&!this.options.readOnly&&(this.secondRender=!0,this.rootWizard.editMode||0===this.root.page&&this.page===this.root.page&&this._parentVisible&&this._visible&&!this._disabled&&this.hasComponents&&(this.shouldUpdate=!1,this.isInitRowExists=!0,this.addRow(!0,h))),(null===(i=this.root)||void 0===i?void 0:i.editMode)&&this.rootWizard.editMode&&this.isInitRowExists&&(this.isInitRowExists=!1,this.cancelRow()),e.prototype.render.call(this,n||this.renderTemplate("dynamicWizard",{ref:{row:this.rowRef,agreeButton:this.agreeButtonRef,denyButton:this.denyButtonRef},header:this.renderString(s),footer:this.renderString(t.Utils._.get(this.component,"templates.footer"),{components:this.component.components,value:a}),rows:this.editRows.map(this.renderRow.bind(this)),currentComponent:-1===this.step?null:null===(o=null===(r=this.editRows[this.changingRowIndex])||void 0===r?void 0:r.components[this.step])||void 0===o?void 0:o.render(),errors:this.editRows.map((function(t){return t.error})),buttons:this.buttons,hasAddButton:this.hasAddButton(),hasRemoveButtons:this.hasRemoveButtons(),isChangingMode:this.isChangingMode,isDisabled:this._disabled,isBlocking:!this._visible||this._disabled||!this.hasComponents,dynamicWizardKey:this.dynamicWizardKey,readOnly:this.options.readOnly}))},n.prototype.attach=function(t){var n,i=this,r=e.prototype.attach.call(this,t);if(this.builderMode)return e.prototype.attach.call(this,t);if(this.visibilityCheck(),this.blockingCheck(),this.loadRefs(t,((n={})[this.agreeButtonRef]="multiple",n[this.denyButtonRef]="multiple",n[this.rowRef]="multiple",n[this.dynamicWizardKey+"-cancel"]="single",n[this.dynamicWizardKey+"-previous"]="single",n[this.dynamicWizardKey+"-next"]="single",n)),this.agreeButtonElements.forEach((function(t){i.addEventListener(t,"click",(function(){i.addRow(),-1===i.rootWizard.currentNextPage&&i.rootWizard.redraw()}))})),this.attachNav(),this.isChangingMode){var o=this.editRows[this.changingRowIndex];o&&this.attachComponents(this.rowElements[0],o.components,this.component.components,!0)}else this.rowElements.forEach((function(t,e){[{className:"removeCard",event:"click",action:function(){return i.removeRow(e)}},{className:"editCard",event:"click",action:function(){i.editRow(e)}}].forEach((function(e){var n=e.className,r=e.event,o=e.action,a=t.getElementsByClassName(n);Array.prototype.forEach.call(a,(function(t){i.addEventListener(t,r,o)}))}))}));return r},n.prototype.attachNav=function(){var e=this;t.Utils._.each(this.buttons,(function(t){var n=e.refs[e.dynamicWizardKey+"-"+t.name];e.addEventListener(n,"click",(function(n){if(n.preventDefault(),!e[t.method]()||"nextPage"!==t.method){e.redraw().then((function(){e.afterAttachNav(t.method)}));var i=e.editRows[e.changingRowIndex];i&&e.validateRow(i,!1)}}))}))},n.prototype.afterAttachNav=function(t){var e,n=this.editRows[this.changingRowIndex];switch(t){case"prevPage":case"nextPage":if(-1===this.step)this.agreeButtonElements[0].focus();else{var i=null===(e=n.components[this.step].refs)||void 0===e?void 0:e.input;i?i[0].focus():this.focusOnNewRowElement(n.components,this.step)}}},n.prototype.attachComponents=function(n,i,r,o){var a;if(void 0===r&&(r=this.component.components),this.builderMode)return e.prototype.attachComponents.call(this,n,i,r);if(o){if(i=i||this.component.components,!(n=this.hook("attachComponents",n,i,r,this)))return new t.Formio.Promise((function(){}));var s=0,l=[];return this.isChangingMode?!t.Utils._.isNil(this.step)&&n.children[0]&&!(null===(a=n.children[0])||void 0===a?void 0:a.getAttribute("data-noattach"))&&i[this.step]&&l.push(i[this.step].attach(n.children[0])):Array.prototype.slice.call(n.children).forEach((function(t){!t.getAttribute("data-noattach")&&i[s]&&(l.push(i[s].attach(t)),s++)})),t.Formio.Promise.all(l)}},n.prototype.visibilityCheck=function(){this.page===this.root.page&&(this._visible&&!this.prevVisibility&&(this.prevVisibility=!0,!this.disabled&&this.hasComponents&&this.addRow()),this.prevVisibility&&!this._visible&&(this.prevVisibility=!1))},n.prototype.blockingCheck=function(){this.page===this.root.page&&this.prevBlocking&&!this.disabled&&(this.prevBlocking=!1,this.isChangingMode=!1,this.rootWizard.redraw())},n.prototype.isOpen=function(t){return[mi.New,mi.Editing].includes(null==t?void 0:t.state)},n.prototype.resetValue=function(){gi.prototype.resetValue.call(this),this.emptyRows(),this.step=0,this.addRow(!0,!0)},n.prototype.addRow=function(e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!1),!this.options.readOnly){if(!this.hasAddButton()&&!this.isOpen(this.editRows[this.changingRowIndex]))return this.isChangingMode&&(this.isChangingMode=!1),this.rootWizard.element.classList.remove("dynamicWizard-changingMode"),void this.rootWizard.redraw();var i,r={},o=this.editRows.length;return(t.Utils._.isNil(this.changingRowIndex)||n)&&(this.changingRowIndex=this.editRows.length,i={components:this.createRowComponents(r,o),data:r,state:mi.New,backup:null,error:null},this.editRows.push(i),this.inlineEditMode&&(this.dataValue.push(r),this.triggerChange()),this.checkRow("checkData",null,{},i.data,i.components),this.component.modal&&this.addRowModal(o)),this.isChangingMode=!0,this.step=-1!==this.step?this.step:0,this.addChangingMode(e),i||this.editRows[this.changingRowIndex]}},n.prototype.cancelRow=function(){var e=this,n=t.Utils._.clone(this.changingRowIndex);if(!this.options.readOnly){var i=this.editRows[n];(null==i?void 0:i.state)===mi.New?this.isSavingInProgress?this.removeRow(n):(i.state=mi.Removed,this.clearErrors(n),this.destroyComponents(n),this.inlineEditMode&&this.splice(n),this.editRows.splice(n,1)):(null==i?void 0:i.state)===mi.Editing&&(i.state=i.prevState,this.inlineEditMode&&(this.dataValue[n]=i.backup),i.data=i.backup,i.backup=null,this.isSavingInProgress&&(this.setValues(i),this.rebuild(!0)),this.restoreRowContext(i),this.component.rowDrafts||this.clearErrors(n)),this.returnPrevPageState(),this.shouldUpdate=!0,this.emit("cancelRow"),this.checkValidity(null,!0),this.redraw().then((function(){e.afterCancelRow()})),this.component.rowDrafts&&this.checkValidity(this.data,!1)}},n.prototype.afterCancelRow=function(){this.agreeButtonElements[0].focus()},n.prototype.rebuild=function(t){return void 0===t&&(t=!1),this.destroy(),this.init(t,this.prevVisibility),this.visible=this.conditionallyVisible(null,null),this.redraw()},n.prototype.returnPrevPageState=function(){this.isChangingMode=!1,this.isSavingInProgress=!1,this.step=-1,this.changingRowIndex=null,this.removeChangingMode()},n.prototype.setValues=function(t){if(!this.options.readOnly&&this.saveEditMode){var e=this.dataValue||[];if((null==t?void 0:t.state)!==mi.New||this.isSavingInProgress)((null==t?void 0:t.state)===mi.Editing||this.isSavingInProgress)&&(e[this.changingRowIndex]=null==t?void 0:t.data);else{var n=e.length;e.push(null==t?void 0:t.data),this.changingRowIndex!==n&&(this.editRows.splice(this.changingRowIndex,1),this.editRows.splice(this.changingRowIndex,0,t))}}},n.prototype.saveRow=function(t){var e=this,n=this.editRows[this.changingRowIndex];return n&&(this.setValues(n),this.isSavingInProgress&&(this.isSavingInProgress=!1),n.state=this.component.rowDrafts&&!t?mi.Draft:mi.Saved,n.backup=null,this.updateValue(),this.triggerChange(),this.component.rowDrafts&&n.components.forEach((function(t){return t.setPristine(e.pristine)})),this.checkValidity(null,!0),this.redraw().then((function(){e.emit("saveRow"),e.afterSaveRow&&e.afterSaveRow()})),n.alerts&&(n.alerts=!1),this.isChangingMode=!1,this.changingRowIndex=null,this.shouldUpdate=!0,this.removeChangingMode()),!0},n.prototype.saveCurrentPageData=function(t){(null==t?void 0:t.state)!==mi.New&&(null==t?void 0:t.state)!==mi.Editing||(this.setValues(t),this.checkData(this.data),this.isSavingInProgress||(this.isSavingInProgress=!0))},n.prototype.isRowEditing=function(t){return(null==t?void 0:t.state)===mi.Editing||(null==t?void 0:t.state)===mi.New},n.prototype.switchToStep=function(e){var n=this.getRelativePath(e.path),i=t.Utils.getArrayFromComponentPath(n),r=t.Utils._.findIndex(this.components,(function(t){return t.key===e.component.key})),o=this.editRows[i[0]],a=this.isRowEditing(o);o?a?(this.step=t.Utils._.isFinite(r)?r:0,this.addChangingMode(),this.validateRow(o,!1)):this.editRow(i[0],r):this.addRow()},n.prototype.editRow=function(e,n){var i=this.editRows[e],r=this.isRowEditing(i);if(i&&!r){i.prevState=i.state,i.state=mi.Editing;var o=t.Utils._.cloneDeep(i.data);if(this.inlineEditMode?i.backup=o:(i.backup=i.data,i.data=o,this.restoreRowContext(i)),this.component.modal)return this.addRowModal(e);this.isChangingMode=!0,this.changingRowIndex=e,this.step=t.Utils._.isFinite(n)?n:0,this.addChangingMode(),this.validateRow(i,!1)}},n.prototype.removeRow=function(t){var e=this;this.options.readOnly||(this.baseRemoveRow(t),this.splice(t),this.editRows.splice(t,1),this.updateRowsComponents(t),this.updateValue(),this.triggerChange(),this.checkValidity(null,!0),this.checkData(),this.redraw().then((function(){e.afterRemoveRow()})),this.shouldUpdate=!0)},n.prototype.afterRemoveRow=function(){this.agreeButtonElements[0].focus()},n.prototype.renderRow=function(e,i){var r=this,o=this.dataValue||[],a=this.flattenComponents(i),s=t.Utils.Evaluator.noeval?ui.row:t.Utils._.get(this.component,"templates.row",n.defaultRowTemplate);return this.renderString(s,{row:o[i]||{},data:this.data,rowIndex:i,components:this.component.components,flattenedComponents:a,isVisibleInRow:function(t){return r.isComponentVisibleInRow(t,a)},getView:function(e,n){var i=a[e.key],r=i?i.getView(n||i.dataValue):"";return i&&i.widget&&"--- PROTECTED ---"!==r&&(r=t.Utils._.isArray(r)?r.map((function(t){return i.widget.getValueAsString(t)})):i.widget.getValueAsString(r)),r},state:this.editRows[i].state})},n.prototype.hasButton=function(t,e){void 0===e&&(e=this.getNextPage());var n=this.buttonSettings,i=n.previous,r=void 0===i?this.buttonSettings.showPrevious:i,o=n.cancel,a=void 0===o?this.buttonSettings.showCancel:o,s=n.next,l=void 0===s?this.buttonSettings.showNext:s;switch(t){case"previous":return r&&0!==this.step&&this.hasComponents;case"next":return l&&e&&this.hasComponents;case"cancel":return a&&this.hasComponents;default:return!0}},n.prototype.getNextPage=function(){var t;return this.step<(null===(t=this.component)||void 0===t?void 0:t.components.length)},n.prototype.prevPage=function(){var e,n,i=this.editRows[this.changingRowIndex];if(0!==this.step){var r=t.Utils._.clone(this.step);this.step=r-1,(null===(n=null===(e=null==i?void 0:i.components)||void 0===e?void 0:e[this.step])||void 0===n?void 0:n._visible)?this.saveCurrentPageData(i):this.prevPage()}else this.rootWizard.prevPage()},n.prototype.findRootWizard=function(t){var e,n,i,r=null===(e=null==t?void 0:t.parent)||void 0===e?void 0:e.parent;return(null===(n=null==t?void 0:t.parent)||void 0===n?void 0:n.subForm)&&(r=null==r?void 0:r.parent),r&&"wizard"===(null===(i=null==r?void 0:r._form)||void 0===i?void 0:i.display)?this.findRootWizard(r):t},n.prototype.nextPage=function(){var e,n,i,r,o=this.editRows[this.changingRowIndex],a=this.validateRow(o,!0);if(!this.component.rowDrafts&&!a)return!0;if(this.step===(null===(n=null===(e=this.component)||void 0===e?void 0:e.components)||void 0===n?void 0:n.length)-1)return this.step=-1,this.saveRow(a),-1===this.rootWizard.currentNextPage&&this.rootWizard.redraw(),!1;var s=t.Utils._.clone(this.step);this.step=s+1,(null===(r=null===(i=null==o?void 0:o.components)||void 0===i?void 0:i[this.step])||void 0===r?void 0:r._visible)?this.saveCurrentPageData(o):this.nextPage()},n.prototype.validateStep=function(t,e,n,i){var r=e,o=!(!t.serverErrors||!t.serverErrors.length);return this.component.rowDrafts||o||t.setPristine(!n),r&&t.checkValidity(null,n,i)},n.prototype.validateRow=function(t,e){var n=this,i=!0;if(!t)return i;var r=fi(this.errors);if(t.state===mi.Editing||e||t.state===mi.Draft&&!this.pristine&&!this.root.pristine){var o=t.components[this.step];o?i=this.validateStep(o,i,e,t.data):-1===this.step&&t.components.forEach((function(r){i=n.validateStep(r,i,e,t.data)}))}return this.component.validate&&this.component.validate.row&&("true"!==(i=this.evaluate(this.component.validate.row,{valid:i,row:t.data},"valid",!0)).toString()?(t.error=i,i=!1):t.error=null,null===i&&(i="Invalid row validation for "+this.key)),t.errors=i?null:this.errors.filter((function(t){return!r.includes(t)})),this.showRowErrorAlerts(t,!!i),!!i},n.prototype.findSourceRoot=function(t){return(null==t?void 0:t.parent)?this.findSourceRoot(null==t?void 0:t.root):t},n.prototype.changeState=function(t){var e=this.root?this.findSourceRoot(this.root):{};t&&!e.submissionInProcess?!this.prevVisibility&&this._visible?this.rebuild(this.secondRender):this.rebuild():this.redraw()},n.prototype.addChangingMode=function(t){var e=this;void 0===t&&(t=!1),this.rootWizard.element&&(this.rootWizard.element.classList.contains("dynamicWizard-changingMode")||this.rootWizard.element.classList.add("dynamicWizard-changingMode"),t||(this.redraw().then((function(){e.afterAddChangingMode()})),this.rootWizard.redraw()),this.triggerChange())},n.prototype.afterAddChangingMode=function(){var t,e,n=this.editRows[this.changingRowIndex];(null===(t=n.components[this.step].refs)||void 0===t?void 0:t.input)?null===(e=n.components[this.step].refs)||void 0===e||e.input[0].focus():this.focusOnNewRowElement(n.components,this.step)},n.prototype.removeChangingMode=function(){var t,e=this;(null===(t=this.rootWizard)||void 0===t?void 0:t.element)&&(this.rootWizard.element.classList.remove("dynamicWizard-changingMode"),this.redraw().then((function(){e.afterRemoveChangingMode&&e.afterRemoveChangingMode()})),this.rootWizard.redraw(),this.triggerChange())},n.editForm=li,n}(pi),yi=i(96486),_i={select:[{type:"equal",label:"Is equal to",filter:function(t,e){return yi.isEqual(t,e)}},{type:"notEqual",label:"Is not equal to",filter:function(t,e){return!yi.isEqual(t,e)}},{type:"contain",label:"Contains",filter:function(t,e){return yi.isArray(t)?e.every((function(e){return t.includes(e)})):yi.isEqual(t,e)}},{type:"notContain",label:"Does not contain",filter:function(t,e){return yi.isArray(t)?e.every((function(e){return!t.includes(e)})):!yi.isEqual(t,e)}}],checkbox:[{type:"equal",label:"Is equal to",filter:function(t,e){return yi.isEqual(t,e)}}]},bi=[{key:"multiple",ignore:!0}],wi=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}([{key:"placeholder",ignore:!0},{label:"Sortable",type:"checkbox",input:!0,key:"sortable",weight:442,defaultValue:!0},{label:"Filterable",type:"checkbox",input:!0,key:"filterable",weight:442,defaultValue:!0},{label:"Inline editing",type:"checkbox",input:!0,key:"inlineEditing",weight:442,defaultValue:!1},{type:"textfield",label:"Cell max width",input:!0,key:"cellMaxWidth",defaultValue:"",weight:442},{label:"Clip cells",type:"checkbox",input:!0,key:"clipCells",weight:442,defaultValue:!1},{type:"select",input:!0,key:"itemsPerPage",label:"Items per page",weight:442,defaultValue:10,dataSrc:"values",data:{values:[{label:"5",value:5},{label:"10",value:10},{label:"25",value:25},{label:"50",value:50},{label:"100",value:100},{label:"All",value:-1}]}},{label:"Show add button",type:"checkbox",input:!0,key:"showAddBtn",weight:442,defaultValue:!0},{label:"Show edit button",type:"checkbox",input:!0,key:"showEditBtn",weight:442,defaultValue:!0},{label:"Show delete button",type:"checkbox",input:!0,key:"showDeleteBtn",weight:442,defaultValue:!0},{label:"Show delete all button",type:"checkbox",input:!0,key:"showDeleteAllBtn",weight:442,defaultValue:!1},{type:"textfield",label:"Delete all confirmation message",input:!0,key:"deleteAllConfirmationMessage",defaultValue:"Are you sure you wish to delete all rows?",weight:442,conditional:{json:{"===":[{var:"data.showDeleteAllBtn"},!0]}}}],hn()),xi=[{ignore:!0,key:"unique"},{weight:110,key:"validate.minLength",label:"Minimum Length",placeholder:"Minimum Length",type:"textfield",tooltip:"The minimum length requirement this field must meet.",input:!0},{weight:120,key:"validate.maxLength",label:"Maximum Length",placeholder:"Maximum Length",type:"textfield",tooltip:"The maximum length requirement this field must meet.",input:!0}],ki=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},Si=t.Components.components.component.editForm;function Ri(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Si.apply(void 0,ki([[{key:"display",components:wi},{key:"data",components:bi},{key:"validation",components:xi}]],t))}var Ci,Oi,Ei=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ai=function(){return(Ai=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Mi=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},Ti=t.Components.components.editgrid,Ii="https://cdn.form.io",Pi={datasource:p,sketchpad:xn,tagpad:ei,dynamicWizard:vi,datatable:function(e){function n(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=e.apply(this,t)||this;i.editRows=[],i.savedRows=[],i.isModalOpened=!1,i.columns={},i.initComponents=[],i.type="datatable",i.tabIndex=0;var r=new Formio.Promise((function(t,e){i.dataTableReady={resolve:t,reject:e}}));return i.dataTableReady.promise=r,i}return Ei(n,e),n.schema=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ti.schema.apply(Ti,Mi([{type:"datatable",label:"Data Table",key:"dataTable"}],t))},Object.defineProperty(n,"builderInfo",{get:function(){return{title:"Data Table",group:"premium",icon:"table",weight:115,documentation:"",schema:n.schema()}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dataReady",{get:function(){return this.dataTableReady.promise},enumerable:!1,configurable:!0}),n.prototype.render=function(t){var n,i=this;return this.builderMode?e.prototype.render.call(this):e.prototype.render.call(this,t||this.renderTemplate("datatable",{ref:{row:this.rowRef,addRow:this.addRowRef,saveRow:this.saveRowRef,cancelRow:this.cancelRowRef},header:"<h4>"+("new"===(null===(n=this.editRows[0])||void 0===n?void 0:n.state)?"Add row":"Edit row")+"</h4>",rows:this.editRows.map(this.renderRow.bind(this)),openRows:this.editRows.map((function(t){return i.isOpen(t)})),errors:this.editRows.map((function(t){return t.error})),hasRemoveButtons:this.hasRemoveButtons()}))},n.prototype.attach=function(t){var n=this,i=new Formio.Promise((function(t,e){n.dataTableReady={resolve:t,reject:e}}));return this.dataTableReady.promise=i,this.builderMode?e.prototype.attach.call(this,t):e.prototype.attach.call(this,t).then((function(){if(n.attachModal(n.element),n.loadRefs(n.element,{tableContainer:"single"}),n.formioGrid&&n.refs.tableContainer)return n.formioGrid.setData(n.dataValue),n.formioGrid.init(),void n.formioGrid.attach(n.refs.tableContainer);n.loadFormioGrid().then((function(t){return n.FormioCore.Template.framework=Formio.Templates.framework,n.initFormioGrid(t).then((function(){n.dataTableReady.resolve()}))}))}))},n.prototype.loadFormioGrid=function(){var t=this;return Formio.requireLibrary("formioGridCSS","FormioGridCSS",[{type:"styles",src:Ii+"/grid/formio.grid.min.css"}],!1),Formio.requireLibrary("FormioCore","FormioCore","https://cdn.jsdelivr.net/npm/@formio/core/dist/formio.core.min.js",!0).then((function(e){return t.FormioCore=e,Formio.requireLibrary("FormioGrid","FormioGrid",Ii+"/grid/formio.grid.min.js",!0)}))},n.prototype.attachComponent=function(t){var e,n=t.key,i=t.element,r=t.value,o=t.onChange,a=t.row,s=(t.rowIndex,t.index),l=t.readOnly,h=this.columns[n];if(h){h=Ai(Ai({},h),{hideLabel:!0,hidden:!1});var c=Ai(Ai({},this.options),{onChange:function(t,e,n){n&&(null==o||o(e.value),e.instance.checkComponentValidity())},readOnly:l}),u=this.createComponent(h,c,((e={})[n]=r,e),!1,!0);return u.rowIndex=null!=s?s:u.rowIndex,u.data=null!=a?a:u.data,u.build(i),{component:u,resetValue:function(){u.resetValue()}}}return null},n.prototype.customFilters=function(t){return _i[null==t?void 0:t.type]},n.prototype.isSortable=function(t){return!["button","htmlelement","content"].includes(t.type)},n.prototype.isFilterable=function(t){return!["button","htmlelement","content"].includes(t.type)},Object.defineProperty(n.prototype,"maxLength",{get:function(){var t,e,n;return null!==(n=null===(e=null===(t=this.component)||void 0===t?void 0:t.validate)||void 0===e?void 0:e.maxLength)&&void 0!==n?n:1/0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"minLength",{get:function(){var t,e,n;return null!==(n=null===(e=null===(t=this.component)||void 0===t?void 0:t.validate)||void 0===e?void 0:e.minLength)&&void 0!==n?n:0},enumerable:!1,configurable:!0}),n.prototype.isAttachable=function(t){return this.component.inlineEditing||["button","htmlelement","content"].includes(t)},Object.defineProperty(n.prototype,"visibility",{get:function(){var t=this.dataValue,e=this.savedRows;return e.length?yi.reduce(e,(function(e,n){return yi.each(n.components,(function(i){var r,o,a,s=!0;(null===(r=i.component.logic)||void 0===r?void 0:r.length)&&i.hasCondition()?e.hasOwnProperty(i.key)&&(null===(a=null===(o=i.component)||void 0===o?void 0:o.conditional)||void 0===a?void 0:a.show)===e[i.key]?s=e[i.key]:"hidden"===i.type||i.component.hideColumnByDefault?s=!1:"function"==typeof i.checkConditions&&(s=i.checkConditions(t,{},n.data)):s=i.visible,e[i.key]=s})),e}),{}):yi.mapValues(this.columns,(function(t){var e;return null===(e=!t.hideColumnByDefault)||void 0===e||e}))},enumerable:!1,configurable:!0}),n.prototype.updateComponentsVisibility=function(){var t,e=this.formioGrid,n=this.visibility;(null===(t=null==e?void 0:e.component)||void 0===t?void 0:t.components.length)&&this.formioGrid.menu.emit("changeVisibility",this.formioGrid.component.components.map((function(t){var e;return Ai(Ai({},t),{show:t.key in n?n[t.key]:null===(e=!t.hideColumnByDefault)||void 0===e||e})})))},n.prototype.initFormioGrid=function(e){var n=this,i=[];t.Utils.eachComponent(this.component.components,(function(t){var e;return(t.tableView||["htmlelement","content"].includes(t.type))&&(i.push(Ai({type:"datavalue",sortable:n.isSortable(t),filterable:n.isFilterable(t),show:t.hidden?n.visibility[t.key]:null===(e=!t.hideColumnByDefault)||void 0===e||e,attach:n.isAttachable(t.type)?function(t){var e=t.key,i=t.element,r=t.value,o=t.onChange,a=t.row,s=t.rowIndex,l=t.index;o=null!=o?o:function(t){n.dataValue[l][e]=t},r=null!=r?r:n.dataValue[l][e],n.attachComponent({key:e,element:i,value:r,onChange:o,row:a,rowIndex:s,index:l,readOnly:n.options.readOnly||n.component.disabled})}:null},t)),n.columns[t.key]=t),["datagrid","editgrid","datamap","datatable","tree","container"].includes(t.type)}),!0),i.sort((function(t,e){var n,i;return(null!==(n=t.columnWeight)&&void 0!==n?n:0)-(null!==(i=e.columnWeight)&&void 0!==i?i:0)}));var r=this.component,o=r.sortable,a=r.filterable,s=r.disabled,l=r.cellMaxWidth,h=r.clipCells,c=r.itemsPerPage,u=r.showAddBtn,d=void 0===u||u,f=r.showEditBtn,p=void 0===f||f,g=r.showDeleteBtn,m=void 0===g||g,v=r.showDeleteAllBtn,y=this.options.readOnly;return this.initComponents=this.createRowComponents({},0),e.render(this.refs.tableContainer,{components:i,pagination:{itemsPerPage:c||10},cellMaxWidth:l,clipCells:h,showAddBtn:d&&this.maxLength>this.dataValue.length,showEditBtn:p,showDeleteBtn:m&&this.minLength<this.dataValue.length,showDeleteAllBtn:v},{sortable:o,filterable:a,readOnly:y||s,hooks:{attachFilter:this.attachComponent.bind(this),format:function(t,e){return n.format(t,e)},filter:function(t){return n.customFilters(n.columns[t])}}},this.dataValue).then((function(t){n.formioGrid=t,n.formioGrid.on("row:add",(function(){n.emit("row:add",n),n.onAddRow()})),n.formioGrid.on("row:edit",(function(t,e,i){n.emit("row:edit",t,e,i,n),n.onEditRow(t,e,i)})),n.formioGrid.on("row:delete",(function(t,e,i){window.confirm("Are you sure you wish to delete the row?")&&(n.emit("row:delete",t,e,i,n),n.dataValue.splice(i,1),n.savedRows.splice(i,1),n.setValue(n.dataValue))})),n.formioGrid.on("deleteAll",(function(){window.confirm(n.component.deleteAllConfirmationMessage)&&(n.emit("deleteAll",n),n.dataValue=n.defaultValue,n.setValue(n.dataValue))})),n.formioGrid.on("row:click",(function(t,e,i){n.emit("row:click",t,e,i,n)})),n.formioGrid.on("page",(function(t){n.emit("page",t,n)}))}))},n.prototype.createRowComponents=function(t,n){var i=e.prototype.createRowComponents.call(this,t,n);return this.disabled&&i.forEach((function(t){t.disabled=!0})),i},n.prototype.createComponent=function(t,n,i,r,o){var a=e.prototype.createComponent.call(this,t,n,i,r);if(o){var s=this.visibility;s.hasOwnProperty(t.key)&&a.visible!==s[t.key]&&(a.visible=s[t.key])}return a.inDataTable=!0,a},n.prototype.getComponents=function(t){var n;return this.savedRows=this.savedRows||[],this.builderMode?e.prototype.getComponents.call(this):yi.isNumber(t)?(null===(n=this.savedRows[t])||void 0===n?void 0:n.components)||[]:this.savedRows.reduce((function(t,e){return t.concat(e.components||[])}),[])},n.prototype.beforeFocus=function(t){var e=this.savedRows.findIndex((function(e){return e.components.find((function(e){return t===e}))}));yi.isNumber(e)&&!this.builderMode&&this.onEditRow(this.dataValue[e],e,e)},n.prototype.onAddRow=function(){if(!this.options.readOnly){var t={};this.editRows=[{components:this.createRowComponents(t,0),data:t,state:"new",index:this.dataValue.length}],this.openModal(),this.redraw()}},n.prototype.onEditRow=function(t,e,n){var i=Ai({},t);this.editRows=[{components:this.createRowComponents(i,n),data:i,state:"editing",index:n}],this.openModal(),this.redraw()},n.prototype.cancelRow=function(){this.closeModal()},n.prototype.saveRow=function(t,e){var n,i=this.editRows[t];if(!this.validateRow(i,!0)){var r=i.components.filter((function(t){return t.error})).map((function(t){return t.error})),o=this.renderTemplate("errorsList",{errors:r});return this.root.setAlert.call(this.editRows[0].components[0],"danger",o),!1}"editing"===i.state?(this.dataValue[i.index]=i.data,i.state="saved",this.savedRows[i.index]=i,this.editRows=[],this.setValue(this.dataValue)):(this.dataValue.unshift(i.data),i.state="saved",this.savedRows.unshift(i),this.editRows=[],this.setValue(this.dataValue)),this.closeModal(),this.checkData(this.root.data,!0,i.data,!1)?this.redraw():null===(n=this.root)||void 0===n||n.showErrors()},n.prototype.format=function(e,n){var i=this.columns[e];return i?(t.Utils.getComponent(this.initComponents,e,!0)||t.Components.create(i,this.options,n,!0)).getView(n):n},Object.defineProperty(n.prototype,"iteratableRows",{get:function(){return this.savedRows||[]},enumerable:!1,configurable:!0}),n.prototype.setValue=function(t,e){var n=this;void 0===e&&(e={}),t||(t=this.defaultValue),this.dataValue=t,this.savedRows=this.dataValue.map((function(t,e){return{components:n.createRowComponents(t,0),data:t,state:"saved",index:e}})),this.checkData(),this.formioGrid&&(this.formioGrid.component.showAddBtn=this.component.showAddBtn&&this.maxLength>this.dataValue.length,this.formioGrid.component.showDeleteBtn=this.component.showDeleteBtn&&this.minLength<this.dataValue.length,this.formioGrid.component.showDeleteAllBtn=this.component.showDeleteAllBtn,this.formioGrid.setData(this.dataValue),this.updateComponentsVisibility(),this.formioGrid.refreshGrid())},n.prototype.updateValue=function(t,n){void 0===n&&(n={}),e.prototype.updateValue.call(this,t,n)},n.prototype.destroy=function(){var t,n;e.prototype.destroy.call(this),this.emit("destroy"),null===(n=null===(t=this.formioGrid)||void 0===t?void 0:t.destroy)||void 0===n||n.call(t)},n.prototype.openModal=function(){var t,e;this.isModalOpened=!0,null===(t=this.refs.dataTableModalWrapper)||void 0===t||t.classList.add("formio-dialog-disabled-animation"),null===(e=this.refs.dataTableModalWrapper)||void 0===e||e.classList.remove("component-rendering-hidden")},n.prototype.closeModal=function(){var t,e;null===(t=this.refs.dataTableModalWrapper)||void 0===t||t.classList.remove("formio-dialog-disabled-animation"),null===(e=this.refs.dataTableModalWrapper)||void 0===e||e.classList.add("component-rendering-hidden"),this.isModalOpened=!1,this.editRows=[],this.checkValidity(this.root.data,!0,this.root.data)},n.prototype.attachModal=function(t){var e=this;this.loadRefs(t,{dataTableModalOverlay:"single",dataTableModalContents:"single",dataTableModalClose:"single",dataTableModalWrapper:"single"}),this.isModalOpened?this.openModal():this.closeModal(),this.addEventListener(this.refs.dataTableModalOverlay,"click",(function(){return e.closeModal()})),this.addEventListener(this.refs.dataTableModalClose,"click",(function(){return e.closeModal()}))},n.prototype.resetValue=function(){e.prototype.resetValue.call(this),this.closeModal()},n.editForm=Ri,n}(Ti)},Fi=i(57460),ji={storage:{csv:("CSV","csv",Ci=i.n(Fi)(),Oi=function(){return{title:"CSV",name:"csv",uploadFile:function(t,e){var n=this;return new Promise((function(i,r){var o=new FileReader;o.onloadend=function(){i({storage:"base64",name:e,contents:Ci.parse(o.result),size:t.size,type:t.type})},o.onerror=function(){r(n)},o.readAsText(t)}))},downloadFile:function(t){return Promise.resolve(t)}}},Oi.title="CSV",Oi)}},zi={form:i(62175).Z},Li={form:i(48352).Z},Di={form:i(35353).Z},Bi=i(82656),Vi=i(11970),Wi={form:Bi.Z,html:Vi.Z},Ui=i(1752),Ni=i(55066),qi={sketchpad:zi,tagpad:Li,codereader:Di,dynamicWizard:Wi,datatable:{form:Ui.Z,html:Ni.Z}},Hi={form:i(76005).Z},Gi={form:i(432).Z},Zi={form:i(10333).Z},Yi=i(43290),Ki=i(60469),$i={form:Yi.Z,html:Ki.Z},Xi=i(52209),Ji=i(80339),Qi={bootstrap:qi,bootstrap3:{tagpad:Hi,sketchpad:Gi,codereader:Zi,dynamicWizard:$i,datatable:{form:Xi.Z,html:Ji.Z}},semantic:{}},tr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),er={components:Pi,providers:ji,templates:Qi,displays:{wizard:function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return tr(n,e),n.prototype.emitWizardPageSelected=function(t){this.setChangingMode(),this.emit("wizardPageSelected",this.pages[t],t)},n.prototype.emitNextPage=function(){this.setChangingMode(),this.emit("nextPage",{page:this.page,submission:this.submission})},n.prototype.emitPrevPage=function(){this.setChangingMode(),this.emit("prevPage",{page:this.page,submission:this.submission})},n.prototype.focusOnComponent=function(t){var n=e.prototype.focusOnComponent.call(this,t),i=this.hasDynamicWizard();if(i){var r=this.getComponent(t);i.switchToStep(r)}else this.element&&this.element.classList.contains("dynamicWizard-changingMode")&&this.element.classList.remove("dynamicWizard-changingMode");return n},n.prototype.hasButton=function(e,n){void 0===n&&(n=this.getNextPage());var i=t.Utils._.get(this.currentPage,"component.buttonSettings",{}),r=i.previous,o=void 0===r?this.options.buttonSettings.showPrevious:r,a=i.cancel,s=void 0===a?this.options.buttonSettings.showCancel:a,l=i.submit,h=void 0===l?this.options.buttonSettings.showSubmit:l,c=i.next,u=void 0===c?this.options.buttonSettings.showNext:c,d=this.hasDynamicWizard(),f=!(null==d?void 0:d.isChangingMode)||!d.hasComponents,p=f||this.options.readOnly;switch(e){case"previous":return o&&this.getPreviousPage()>-1&&p;case"next":return u&&null!==n&&-1!==n&&p;case"cancel":return s&&!this.options.readOnly&&p;case"submit":return h&&!this.options.readOnly&&(null===n||this.page===this.pages.length-1)&&f;default:return!0}},n.prototype.setEditMode=function(t){if(!this.editMode&&t._id&&!this.options.readOnly){this.editMode=!0;var e=this.hasDynamicWizard();e&&(e.shouldUpdate=!1,e.isChangingMode=!1),this.redraw()}},n.prototype.setChangingMode=function(){if(!this.options.readOnly){var e=this.hasDynamicWizard();if(e&&!this.editMode&&e.hasComponents){if(e.shouldUpdate&&(e.addRow(),e.shouldUpdate=!1,e.secondRender=!0),this.element&&!this.element.classList.contains("dynamicWizard-changingMode")){if((null==e?void 0:e.editRows.length)===t.Utils._.get(null==e?void 0:e.component,"validate.maxLength")&&!e.isOpen(e.editRows[e.changingRowIndex]))return;this.element.classList.add("dynamicWizard-changingMode"),this.redraw()}}else this.element&&((null==e?void 0:e.isChangingMode)&&e.hasComponents&&(e.isChangingMode=!1,this.redraw()),this.element.classList.contains("dynamicWizard-changingMode")&&this.element.classList.remove("dynamicWizard-changingMode"))}},n.prototype.hasDynamicWizard=function(){var t;return null===(t=this.currentPage)||void 0===t?void 0:t.components.find((function(t){return"dynamicWizard"===t.component.type&&t._parentVisible&&t._visible&&!t._disabled}))},n.prototype.updatePages=function(){this.pages=this.allPages;var t=this.hasDynamicWizard();this.element&&this.element.classList.contains("dynamicWizard-changingMode")&&!t&&this.element.classList.remove("dynamicWizard-changingMode")},n}(t.Displays.displays.wizard)}}}(),r.default}()}));