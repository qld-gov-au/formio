/*! For license information please see premium.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("Formio")):"function"==typeof define&&define.amd?define(["Formio"],e):"object"==typeof exports?exports.premium=e(require("Formio")):t.premium=e(t.Formio)}(self,(function(t){return function(){var e={86131:function(t,e){e.Z=function(t){return'<div class="row">\n  <div class="col-sm-2">\n    Users\n  </div>\n</div>'}},26213:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<div class="list-group-item">\n  <div class="list-group-subheader">\n    <div class="row">\n      <div class="col-sm-2">\n        User '+(null==(e=rowIndex+1)?"":e)+"\n      </div>\n      ",t.self.options.readOnly||(n+='\n      <div class="col-sm-2">\n        <div class="btn-group pull-right">\n          <button class="btn btn-default btn-light btn-sm editCard"><i class="'+(null==(e=t.iconClass("edit"))?"":e)+'"></i></button>\n          <button class="btn btn-danger btn-sm removeCard"><i class="'+(null==(e=t.iconClass("trash"))?"":e)+'"></i></button>\n        </div>\n      </div>\n      '),n+="\n    </div>\n  </div>\n  ",t.util.eachComponent(t.components,(function(i){n+="\n  ",i.hasOwnProperty("tableView")&&!i.tableView||!t.isVisibleInRow(i)||(n+='\n  <div class="row">\n    <div class="col-sm-2">\n      '+(null==(e=i.key)?"":e)+'\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-sm-2">\n      '+(null==(e=t.getView(i,t.row[i.key]))?"":e)+"\n    </div>\n  </div>\n  "),n+="\n  "})),n+="\n</div>"}},35353:function(t,e){e.Z=function(t){var e;return""+'<div class="d-flex">\n  <button class="btn btn-secondary" ref="'+(null==(e=t.ref)?"":e)+'">\n    <i class="fa fa-barcode component-icon"></i> '+(null==(e=t.label)?"":e)+'\n  </button>\n  <div class="info-text">\n    '+(null==(e=t.dataValue?t.dataValue:"No code")?"":e)+"\n  </div>\n</div>\n"}},1752:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,t.builder?(n+='\n<div class="formio-builder-datatable-components">       \n  ',t.resourceComponents.forEach((function(i,r){n+="\n    <span>"+(null==(e=i.key)?"":e)+"</span>\n    ",t.resourceComponents.length>r+1&&(n+='\n    <span class="mx-1">|</span>\n    '),n+="\n  "})),n+=" \n</div>\n"):(n+='\n<div ref="tableContainer"></div>\n<div class="formio-component-modal-wrapper formio-component-modal-wrapper-'+(null==(e=t.component.type)?"":e)+'" ref="componentModalWrapper">\n  <div class="formio-dialog formio-dialog-theme-default component-rendering-hidden" ref="dataTableModalWrapper">\n    <div class="formio-dialog-overlay" ref="dataTableModalOverlay"></div>\n    <div class="formio-dialog-content" ref="dataTableModalContents">\n      <div ref="dataTableModalContents">\n        <ul class="editgrid-listgroup list-group\n            '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n            "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n            "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n            "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n            ">\n          ',t.header&&(n+='\n          <li class="list-group-item list-group-header">\n            '+(null==(e=t.header)?"":e)+"\n          </li>\n          "),n+="\n          ",t.rows.forEach((function(i,r){n+='\n          <li class="list-group-item" ref="'+(null==(e=t.ref.row)?"":e)+'">\n            '+(null==(e=i)?"":e)+"\n            ",t.openRows[r]&&!t.readOnly&&(n+='\n            <div class="editgrid-actions">\n              <button class="btn btn-primary" ref="'+(null==(e=t.ref.saveRow)?"":e)+'">'+(null==(e=t.t(t.component.saveRow||"Save",{_userInput:!0}))?"":e)+"</button>\n              ",t.component.removeRow&&(n+='\n              <button class="btn btn-danger" ref="'+(null==(e=t.ref.cancelRow)?"":e)+'">'+(null==(e=t.t(t.component.removeRow||"Cancel",{_userInput:!0}))?"":e)+"</button>\n              "),n+="\n            </div>\n            "),n+='\n            <div class="has-error">\n              <div class="editgrid-row-error">\n                '+(null==(e=t.errors[r])?"":e)+"\n              </div>\n            </div>\n          </li>\n          "})),n+="\n          ",t.footer&&(n+='\n          <li class="list-group-item list-group-footer">\n            '+(null==(e=t.footer)?"":e)+"\n          </li>\n          "),n+='\n        </ul>\n      </div>\n      <button class="formio-dialog-close float-right btn btn-secondary btn-sm" aria-label="close" ref="dataTableModalClose"></button>\n    </div>\n  </div>\n</div>\n'),n+="\n"}},55066:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<ul class="editgrid-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    ">\n  ',t.header&&(n+='\n  <li class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </li>\n  "),n+="\n  ",t.rows.forEach((function(i,r){n+='\n  <li class="list-group-item" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=i)?"":e)+"\n    ",t.openRows[r]&&!t.readOnly&&(n+='\n    <div class="editgrid-actions">\n      <button class="btn btn-primary" ref="'+(null==(e=t.ref.saveRow)?"":e)+'">'+(null==(e=t.t(t.component.saveRow||"Save",{_userInput:!0}))?"":e)+"</button>\n      ",t.component.removeRow&&(n+='\n      <button class="btn btn-danger" ref="'+(null==(e=t.ref.cancelRow)?"":e)+'">'+(null==(e=t.t(t.component.removeRow||"Cancel",{_userInput:!0}))?"":e)+"</button>\n      "),n+="\n    </div>\n    "),n+='\n    <div class="has-error">\n      <div class="editgrid-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </li>\n  "})),n+="\n  ",t.footer&&(n+='\n  <li class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </li>\n  "),n+="\n</ul>\n"}},82656:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<div class="dynamicWizard-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    "\n    role="grid"\n    aria-labelledby="l-'+(null==(e=t.instance.id)?"":e)+"-"+(null==(e=t.component.key)?"":e)+" \n    ",t.component.description&&(n+="d-"+(null==(e=t.instance.id)?"":e)+"-"+(null==(e=t.component.key)?"":e)),n+='"\n>\n  ',t.readOnly||!t.isChangingMode||t.isDisabled?(n+="\n  ",t.header&&(n+='\n  <div role="presentation" class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </div>\n  "),n+="\n  ",t.rows.forEach((function(i,r){n+='\n  <div role="presentation" class="list-group-card" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=i)?"":e)+'\n    <div class="has-error">\n      <div class="dynamicWizard-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </div>\n  "})),n+="\n  ",t.footer&&(n+='\n  <div class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </div>\n  "),n+="\n  "):n+='\n  <div class="list-group-field" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=t.currentComponent)?"":e)+"\n  </div>\n  ",n+="\n</div>\n",t.readOnly||t.isBlocking||(n+="\n",t.isChangingMode?(n+='\n<div class="list-inline" id="'+(null==(e=t.dynamicWizardKey)?"":e)+'-nav">\n  ',t.buttons.cancel&&(n+='\n  <div class="list-inline-item">\n    <button class="btn btn-secondary btn-wizard-nav-cancel"\n      aria-label="Cancel button. Click to reset entry"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-cancel"\n    >\n    '+(null==(e=t.t("cancel"))?"":e)+"\n    </button>\n  </div>\n  "),n+="\n  ",t.buttons.previous&&(n+='\n  <div class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-previous"\n      aria-label="Previous button. Click to go back to the previous component"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-previous"\n    >\n      '+(null==(e=t.t("previous"))?"":e)+"\n    </button>\n  </div>\n  "),n+="\n  ",t.buttons.next&&(n+='\n  <div class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-next" \n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-next"\n      aria-label="Next button. Click to go to the next component"\n    >\n      '+(null==(e=t.t("next"))?"":e)+"\n    </button>\n  </div>\n  "),n+="\n</div>\n"):(n+="\n",t.hasAddButton&&(n+='\n  <p>Would you like to add another?</p>\n  <button class="btn btn-primary"\n    ref="'+(null==(e=t.ref.agreeButton)?"":e)+'"\n    aria-label="Add Another Entry"\n  >\n    '+(null==(e=t.t("Add another"))?"":e)+"\n  </button>\n"),n+="\n"),n+="\n"),n+="\n",t.options.vpat&&(n+='\n<span class="sr-only" aria-live="assertive" ref="dWizardLiveRegion"></span>\n'),n}},11970:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<ul class="dynamicWizard-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    ">\n  ',t.readOnly||!t.isChangingMode||t.isDisabled?(n+="\n  ",t.header&&(n+='\n  <li class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </li>\n  "),n+="\n  ",t.rows.forEach((function(i,r){n+='\n  <li class="list-group-card" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=i)?"":e)+'\n    <div class="has-error">\n      <div class="dynamicWizard-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </li>\n  "})),n+="\n  ",t.footer&&(n+='\n  <li class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </li>\n  "),n+="\n  "):n+='\n  <li class="list-group-field" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=t.currentComponent)?"":e)+"\n  </li>\n  ",n+="\n</ul>\n",t.readOnly||t.isBlocking||(n+="\n",t.isChangingMode?(n+='\n<ul class="list-inline" id="'+(null==(e=t.dynamicWizardKey)?"":e)+'-nav">\n  ',t.buttons.cancel&&(n+='\n  <li class="list-inline-item">\n    <button class="btn btn-secondary btn-wizard-nav-cancel"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-cancel">'+(null==(e=t.t("cancel"))?"":e)+"</button>\n  </li>\n  "),n+="\n  ",t.buttons.previous&&(n+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-previous"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-previous">'+(null==(e=t.t("previous"))?"":e)+"</button>\n  </li>\n  "),n+="\n  ",t.buttons.next&&(n+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-next" ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-next">'+(null==(e=t.t("next"))?"":e)+"</button>\n  </li>\n  "),n+="\n</ul>\n"):(n+="\n",t.hasAddButton&&(n+='\n  <p>Would you like to add another?</p>\n  <button class="btn btn-primary" ref="'+(null==(e=t.ref.agreeButton)?"":e)+'">\n    '+(null==(e=t.t("Yes"))?"":e)+"\n  </button>\n"),n+="\n"),n+="\n"),n}},55452:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,t.isPDF?n+='\n  <p style="\n    '+(null==(e=t.styles)?"":e)+'\n    margin: 0;\n  ">\n    '+(null==(e=t.tag)?"":e)+"\n  </p>\n":n+='\n  <div class="formio-component-esignature">\n    '+(null==(e=t.t(t.component.label,{_userInput:!0})||t.t(t.eSignType,{_userInput:!0}))?"":e)+"\n  </div>\n",n}},45960:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<div ref="reviewPageContainer" class="panel formio-review-page panel-default card">\n  <div ref="header" class="panel-heading card-header">\n    <span class="mb-0 panel-title">\n      '+(null==(e=t.component.label)?"":e)+'\n    </span>\n  </div>\n  <div class="panel-body" ref="'+(null==(e=t.nestedKey)?"":e)+'" id="'+(null==(e=t.instance.id)?"":e)+"-"+(null==(e=t.component.key)?"":e)+'">\n    <ul>\n      ',t.reviewComponents.forEach((function(i,r){n+="\n        ",(t.options.building||i.visible)&&(n+=" \n          <li>\n            <strong>"+(null==(e=i.label)?"":e)+"</strong> :\n            ",t.options.building&&(n+=" \n              data."+(null==(e=i.path)?"":e)+"\n            "),n+="\n            ",t.options.building||(n+=" \n              "+(null==(e=i.data)?"":e)+"\n            "),n+="\n          </li>\n        "),n+="\n      "})),n+="\n    </ul>\n  </div>\n</div>\n"}},62175:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<div class="formio-sketchpad-body">\n  <div class="formio-sketchpad-header" ref="header">\n    <div class="btn-toolbar formio-sketchpad-toolbar" role="toolbar">\n      ',!t.disabled&&t.buttonGroups.forEach((function(i){n+='\n        <div class="btn-group formio-sketchpad-toolbar-group" role="group">\n          ',i.forEach((function(i){n+='\n            <div class="btn formio-sketchpad-toolbar-button formio-sketchpad-toolbar-button-'+(null==(e=i.key)?"":e)+'" ref="'+(null==(e=i.key)?"":e)+'" title="'+(null==(e=i.title)?"":e)+'">\n              <i class="'+(null==(e=i.icon)?"":e)+'"></i>\n              ',i.input&&(n+='\n                <input type="'+(null==(e=i.input.type)?"":e)+'" class="formio-sketchpad-toolbar-input '+(null==(e=i.input.class)?"":e)+'" ref="'+(null==(e=i.key)?"":e)+'-input"\n                '+(null==(e=t.self.buttonAttributes(i))?"":e)+"/>\n              "),n+="\n            </div>\n          "})),n+="\n        </div>\n      "})),n+='\n    </div>\n  </div>\n  <div class="formio-sketchpad-container" ref="drawingContainer">\n    <div class="formio-sketchpad-background" ref="background">\n      ',t.component.image||t.component.imageUrl||(n+="\n          Background image is not specified. Sketchpad doesn\\'t work without background image\n      "),n+="\n      ",t.component.imageUrl&&"svg"!==t.component.imageType&&(n+='\n        <img ref="backgroundImage" alt="'+(null==(e=t.t("sketchpad background"))?"":e)+'"/>\n      '),n+='\n    </div>\n    <div class="formio-sketchpad-canvas" ref="canvas"></div>\n  </div>\n  <div class="formio-sketchpad-footer" ref="footer">\n    <div class="formio-sketchpad-meta-info"><div><span ref="totalMultiplier">'+(null==(e=t.zoomInfo.totalMultiplier)?"":e)+"</span>x</div>\n  </div>\n</div></div>\n"}},48352:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<div class="formio-tagpad-container clearfix">\n  <div ref="canvasContainer" class="formio-tagpad-image-container" style="max-width: '+(null==(e=t.canvasMaxWidth)?"":e)+"; max-height: "+(null==(e=t.canvasMaxHeight)?"":e)+';">\n      <div ref="background" class="formio-tagpad-background">\n        ',t.component.image||t.component.imageUrl||(n+="\n            Background image is not specified. Tagpad doesn\\'t work without background image\n        "),n+="\n        ",t.component.imageUrl&&(n+="\n            <img src="+(null==(e=t.component.imageUrl)?"":e)+' ref="image" alt="" width="100%"/>\n        '),n+='\n      </div>\n      <div ref="canvas" class="formio-tagpad-canvas"></div>\n  </div>\n  <div ref="formContainer" class="formio-tagpad-form-container">\n      <div class="formio-tagpad-form">\n        ',t.selectedDot?(n+='\n          <p class="formio-tagpad-form-title">Dot: '+(null==(e=t.selectedDot.index+1)?"":e)+'</p>\n          <div  ref="form">'+(null==(e=t.components)?"":e)+"</div>\n          ",t.buttons.removeDot&&(n+='\n            <button class="btn btn-sm btn-danger formio-tagpad-remove-button" ref="removeDot">\n              <i class="fa fa-trash"></i>\n            </button>\n          '),n+="\n        "):!t.hasDots||t.disabled||t.component.disabled||t.self.shouldDisabled?(t.component.disabled||t.disabled||t.self.shouldDisabled)&&(n+='\n          <div class="formio-tagpad-all-data">'+(null==(e=t.self.getDataAsString())?"":e)+"</div>\n        "):n+='\n          <p class="formio-tagpad-form-title">No dot selected</p>\n        ',n+"\n      </div>\n  </div>\n</div>\n"}},10333:function(t,e){e.Z=function(t){var e;return""+'<div class="d-flex">\n  <button class="btn btn-secondary" ref="'+(null==(e=t.ref)?"":e)+'">\n    <i class="fa fa-barcode component-icon"></i> '+(null==(e=t.label)?"":e)+'\n  </button>\n  <div class="info-text">\n    '+(null==(e=t.dataValue?t.dataValue:"No code")?"":e)+"\n  </div>\n</div>\n"}},52209:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,t.builder?(n+='\n<div class="formio-builder-datatable-components">          \n  ',t.resourceComponents.forEach((function(i,r){n+="\n    <span>"+(null==(e=i.key)?"":e)+"</span>\n    ",t.resourceComponents.length>r+1&&(n+='\n    <span class="mx-1">|</span>\n    '),n+="\n  "})),n+=" \n</div>\n"):(n+='\n<div ref="tableContainer"></div>\n<div class="formio-component-modal-wrapper formio-component-modal-wrapper-'+(null==(e=t.component.type)?"":e)+'" ref="componentModalWrapper">\n  <div class="formio-dialog formio-dialog-theme-default component-rendering-hidden" ref="dataTableModalWrapper">\n    <div class="formio-dialog-overlay" ref="dataTableModalOverlay"></div>\n    <div class="formio-dialog-content" ref="dataTableModalContents">\n      <div ref="dataTableModalContents">\n        <ul class="editgrid-listgroup list-group\n            '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n            "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n            "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n            "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n            ">\n          ',t.header&&(n+='\n          <li class="list-group-item list-group-header">\n            '+(null==(e=t.header)?"":e)+"\n          </li>\n          "),n+="\n          ",t.rows.forEach((function(i,r){n+='\n          <li class="list-group-item" ref="'+(null==(e=t.ref.row)?"":e)+'">\n            '+(null==(e=i)?"":e)+"\n            ",t.openRows[r]&&!t.readOnly&&(n+='\n            <div class="editgrid-actions">\n              <button class="btn btn-primary" ref="'+(null==(e=t.ref.saveRow)?"":e)+'">'+(null==(e=t.t(t.component.saveRow||"Save",{_userInput:!0}))?"":e)+"</button>\n              ",t.component.removeRow&&(n+='\n              <button class="btn btn-danger" ref="'+(null==(e=t.ref.cancelRow)?"":e)+'">'+(null==(e=t.t(t.component.removeRow||"Cancel",{_userInput:!0}))?"":e)+"</button>\n              "),n+="\n            </div>\n            "),n+='\n            <div class="has-error">\n              <div class="editgrid-row-error help-block">\n                '+(null==(e=t.errors[r])?"":e)+"\n              </div>\n            </div>\n          </li>\n          "})),n+="\n          ",t.footer&&(n+='\n          <li class="list-group-item list-group-footer">\n            '+(null==(e=t.footer)?"":e)+"\n          </li>\n          "),n+='\n        </ul>\n      </div>\n      <button class="formio-dialog-close float-right btn btn-secondary btn-sm" aria-label="close" ref="dataTableModalClose"></button>\n    </div>\n  </div>\n</div>\n'),n+="\n"}},80339:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<ul class="editgrid-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    ">\n  ',t.header&&(n+='\n  <li class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </li>\n  "),n+="\n  ",t.rows.forEach((function(i,r){n+='\n  <li class="list-group-item" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=i)?"":e)+"\n    ",t.openRows[r]&&!t.readOnly&&(n+='\n    <div class="editgrid-actions">\n      <button class="btn btn-primary" ref="'+(null==(e=t.ref.saveRow)?"":e)+'">'+(null==(e=t.t(t.component.saveRow||"Save",{_userInput:!0}))?"":e)+"</button>\n      ",t.component.removeRow&&(n+='\n      <button class="btn btn-danger" ref="'+(null==(e=t.ref.cancelRow)?"":e)+'">'+(null==(e=t.t(t.component.removeRow||"Cancel",{_userInput:!0}))?"":e)+"</button>\n      "),n+="\n    </div>\n    "),n+='\n    <div class="has-error">\n      <div class="editgrid-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </li>\n  "})),n+="\n  ",t.footer&&(n+='\n  <li class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </li>\n  "),n+="\n</ul>\n"}},43290:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<ul class="dynamicWizard-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    ">\n  ',t.readOnly||!t.isChangingMode||t.isDisabled?(n+="\n  ",t.header&&(n+='\n  <li class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </li>\n  "),n+="\n  ",t.rows.forEach((function(i,r){n+='\n  <li class="list-group-card" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=i)?"":e)+'\n    <div class="has-error">\n      <div class="dynamicWizard-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </li>\n  "})),n+="\n  ",t.footer&&(n+='\n  <li class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </li>\n  "),n+="\n  "):n+='\n  <li class="list-group-field" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=t.currentComponent)?"":e)+"\n  </li>\n  ",n+="\n</ul>\n",t.readOnly||t.isBlocking||(n+="\n",t.isChangingMode?(n+='\n<ul class="list-inline" id="'+(null==(e=t.dynamicWizardKey)?"":e)+'-nav">\n  ',t.buttons.cancel&&(n+='\n  <li class="list-inline-item">\n    <button class="btn btn-secondary btn-wizard-nav-cancel"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-cancel">'+(null==(e=t.t("cancel"))?"":e)+"</button>\n  </li>\n  "),n+="\n  ",t.buttons.previous&&(n+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-previous"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-previous">'+(null==(e=t.t("previous"))?"":e)+"</button>\n  </li>\n  "),n+="\n  ",t.buttons.next&&(n+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-next" ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-next">'+(null==(e=t.t("next"))?"":e)+"</button>\n  </li>\n  "),n+="\n</ul>\n"):(n+="\n",t.hasAddButton&&(n+='\n  <p>Would you like to add another?</p>\n  <button class="btn btn-primary" ref="'+(null==(e=t.ref.agreeButton)?"":e)+'">\n    '+(null==(e=t.t("Yes"))?"":e)+"\n  </button>\n"),n+="\n"),n+="\n"),n}},60469:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<ul class="dynamicWizard-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    ">\n  ',t.readOnly||!t.isChangingMode||t.isDisabled?(n+="\n  ",t.header&&(n+='\n  <li class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </li>\n  "),n+="\n  ",t.rows.forEach((function(i,r){n+='\n  <li class="list-group-card" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=i)?"":e)+'\n    <div class="has-error">\n      <div class="dynamicWizard-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </li>\n  "})),n+="\n  ",t.footer&&(n+='\n  <li class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </li>\n  "),n+="\n  "):n+='\n  <li class="list-group-field" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=t.currentComponent)?"":e)+"\n  </li>\n  ",n+="\n</ul>\n",t.readOnly||t.isBlocking||(n+="\n",t.isChangingMode?(n+='\n<ul class="list-inline" id="'+(null==(e=t.dynamicWizardKey)?"":e)+'-nav">\n  ',t.buttons.cancel&&(n+='\n  <li class="list-inline-item">\n    <button class="btn btn-secondary btn-wizard-nav-cancel"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-cancel">'+(null==(e=t.t("cancel"))?"":e)+"</button>\n  </li>\n  "),n+="\n  ",t.buttons.previous&&(n+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-previous"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-previous">'+(null==(e=t.t("previous"))?"":e)+"</button>\n  </li>\n  "),n+="\n  ",t.buttons.next&&(n+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-next" ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-next">'+(null==(e=t.t("next"))?"":e)+"</button>\n  </li>\n  "),n+="\n</ul>\n"):(n+="\n",t.hasAddButton&&(n+='\n  <p>Would you like to add another?</p>\n  <button class="btn btn-primary" ref="'+(null==(e=t.ref.agreeButton)?"":e)+'">\n    '+(null==(e=t.t("Yes"))?"":e)+"\n  </button>\n"),n+="\n"),n+="\n"),n}},87041:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<div ref="reviewPageContainer" class="panel formio-review-page panel-default">\n  <div ref="header" class="panel-heading">\n    <h4 class="mb-0 panel-title">\n      '+(null==(e=t.component.label)?"":e)+'\n    </h4>\n  </div>\n  <div class="panel-body" ref="'+(null==(e=t.nestedKey)?"":e)+'" id="'+(null==(e=t.instance.id)?"":e)+"-"+(null==(e=t.component.key)?"":e)+'">\n    <ul>\n      ',t.component.reviewFields.forEach((function(i,r){n+="\n        ",(t.options.building||i.visible)&&(n+=" \n          <li>\n            <strong>"+(null==(e=i.label)?"":e)+"</strong> :\n            ",t.options.building&&(n+=" \n              data."+(null==(e=i.path)?"":e)+"\n            "),n+="\n            ",t.options.building||(n+=" \n              "+(null==(e=i.data)?"":e)+"\n            "),n+="\n          </li>\n        "),n+="\n      "})),n+="\n    </ul>\n  </div>\n</div>\n\n"}},432:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<div class="formio-sketchpad-body">\n  <div class="formio-sketchpad-header" ref="header">\n    <div class="btn-toolbar formio-sketchpad-toolbar" role="toolbar">\n      ',!t.disabled&&t.buttonGroups.forEach((function(i){n+='\n        <div class="btn-group formio-sketchpad-toolbar-group" role="group">\n          ',i.forEach((function(i){n+='\n            <div class="btn formio-sketchpad-toolbar-button formio-sketchpad-toolbar-button-'+(null==(e=i.key)?"":e)+'" ref="'+(null==(e=i.key)?"":e)+'" title="'+(null==(e=i.title)?"":e)+'">\n              <i class="'+(null==(e=i.icon)?"":e)+'"></i>\n              ',i.input&&(n+='\n                <input type="'+(null==(e=i.input.type)?"":e)+'" class="formio-sketchpad-toolbar-input '+(null==(e=i.input.class)?"":e)+'" ref="'+(null==(e=i.key)?"":e)+'-input"\n                '+(null==(e=t.self.buttonAttributes(i))?"":e)+"/>\n              "),n+="\n            </div>\n          "})),n+="\n        </div>\n      "})),n+='\n    </div>\n  </div>\n  <div class="formio-sketchpad-container" ref="drawingContainer">\n    <div class="formio-sketchpad-background" ref="background">\n      ',t.component.image||t.component.imageUrl||(n+="\n          Background image is not specified. Sketchpad doesn\\'t work without background image\n      "),n+="\n      ",t.component.imageUrl&&"svg"!==t.component.imageType&&(n+='\n        <img ref="backgroundImage" alt=""/>\n      '),n+='\n    </div>\n    <div class="formio-sketchpad-canvas" ref="canvas"></div>\n  </div>\n  <div class="formio-sketchpad-footer" ref="footer">\n    <div class="formio-sketchpad-meta-info"><div><span ref="totalMultiplier">'+(null==(e=t.zoomInfo.totalMultiplier)?"":e)+"</span>x</div>\n  </div>\n</div></div>\n"}},76005:function(t,e){e.Z=function(t){var e,n="";return Array.prototype.join,n+='<div class="formio-tagpad-container clearfix">\n  <div ref="canvasContainer" class="formio-tagpad-image-container" style="max-width: '+(null==(e=t.canvasMaxWidth)?"":e)+"; max-height: "+(null==(e=t.canvasMaxHeight)?"":e)+';">\n      <div ref="background" class="formio-tagpad-background">\n        ',t.component.image||t.component.imageUrl||(n+="\n            Background image is not specified. Tagpad doesn\\'t work without background image\n        "),n+="\n        ",t.component.imageUrl&&(n+="\n            <img src="+(null==(e=t.component.imageUrl)?"":e)+' ref="image" alt="" width="100%"/>\n        '),n+='\n      </div>\n      <div ref="canvas" class="formio-tagpad-canvas"></div>\n  </div>\n  <div ref="formContainer" class="formio-tagpad-form-container">\n      <div class="formio-tagpad-form">\n        ',t.selectedDot?(n+='\n          <p class="formio-tagpad-form-title">Dot: '+(null==(e=t.selectedDot.index+1)?"":e)+'</p>\n          <div  ref="form">'+(null==(e=t.components)?"":e)+"</div>\n          ",t.buttons.removeDot&&(n+='\n            <button class="btn btn-sm btn-danger formio-tagpad-remove-button" ref="removeDot">\n              <i class="fa fa-trash"></i>\n            </button>\n          '),n+="\n        "):!t.hasDots||t.disabled||t.component.disabled||t.self.shouldDisabled?(t.component.disabled||t.disabled||t.self.shouldDisabled)&&(n+='\n          <div class="formio-tagpad-all-data">'+(null==(e=t.self.getDataAsString())?"":e)+"</div>\n        "):n+='\n          <p class="formio-tagpad-form-title">No dot selected</p>\n        ',n+"\n      </div>\n  </div>\n</div>\n"}},96486:function(t,e,n){var i;t=n.nmd(t),function(){var r,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",l=32,c=128,u=1/0,h=9007199254740991,d=NaN,f=4294967295,p=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",l],["partialRight",64],["rearg",256]],g="[object Arguments]",m="[object Array]",v="[object Boolean]",y="[object Date]",b="[object Error]",_="[object Function]",w="[object GeneratorFunction]",x="[object Map]",k="[object Number]",C="[object Object]",S="[object Promise]",R="[object RegExp]",O="[object Set]",E="[object String]",A="[object Symbol]",T="[object WeakMap]",M="[object ArrayBuffer]",P="[object DataView]",F="[object Float32Array]",j="[object Float64Array]",I="[object Int8Array]",D="[object Int16Array]",L="[object Int32Array]",z="[object Uint8Array]",V="[object Uint8ClampedArray]",B="[object Uint16Array]",W="[object Uint32Array]",U=/\b__p \+= '';/g,N=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/&(?:amp|lt|gt|quot|#39);/g,G=/[&<>"']/g,Z=RegExp(H.source),K=RegExp(G.source),Y=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,$=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),it=/^\s+/,rt=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,at=/\{\n\/\* \[wrapped with (.+)\] \*/,st=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ct=/[()=,{}\[\]\/\s]/,ut=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,ft=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,mt=/^0o[0-7]+$/i,vt=/^(?:0|[1-9]\d*)$/,yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,_t=/['\n\r\u2028\u2029\\]/g,wt="\\ud800-\\udfff",xt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",kt="\\u2700-\\u27bf",Ct="a-z\\xdf-\\xf6\\xf8-\\xff",St="A-Z\\xc0-\\xd6\\xd8-\\xde",Rt="\\ufe0e\\ufe0f",Ot="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Et="["+wt+"]",At="["+Ot+"]",Tt="["+xt+"]",Mt="\\d+",Pt="["+kt+"]",Ft="["+Ct+"]",jt="[^"+wt+Ot+Mt+kt+Ct+St+"]",It="\\ud83c[\\udffb-\\udfff]",Dt="[^"+wt+"]",Lt="(?:\\ud83c[\\udde6-\\uddff]){2}",zt="[\\ud800-\\udbff][\\udc00-\\udfff]",Vt="["+St+"]",Bt="\\u200d",Wt="(?:"+Ft+"|"+jt+")",Ut="(?:"+Vt+"|"+jt+")",Nt="(?:['’](?:d|ll|m|re|s|t|ve))?",qt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ht="(?:"+Tt+"|"+It+")?",Gt="["+Rt+"]?",Zt=Gt+Ht+"(?:"+Bt+"(?:"+[Dt,Lt,zt].join("|")+")"+Gt+Ht+")*",Kt="(?:"+[Pt,Lt,zt].join("|")+")"+Zt,Yt="(?:"+[Dt+Tt+"?",Tt,Lt,zt,Et].join("|")+")",Xt=RegExp("['’]","g"),$t=RegExp(Tt,"g"),Jt=RegExp(It+"(?="+It+")|"+Yt+Zt,"g"),Qt=RegExp([Vt+"?"+Ft+"+"+Nt+"(?="+[At,Vt,"$"].join("|")+")",Ut+"+"+qt+"(?="+[At,Vt+Wt,"$"].join("|")+")",Vt+"?"+Wt+"+"+Nt,Vt+"+"+qt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Mt,Kt].join("|"),"g"),te=RegExp("["+Bt+wt+xt+Rt+"]"),ee=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ie=-1,re={};re[F]=re[j]=re[I]=re[D]=re[L]=re[z]=re[V]=re[B]=re[W]=!0,re[g]=re[m]=re[M]=re[v]=re[P]=re[y]=re[b]=re[_]=re[x]=re[k]=re[C]=re[R]=re[O]=re[E]=re[T]=!1;var oe={};oe[g]=oe[m]=oe[M]=oe[P]=oe[v]=oe[y]=oe[F]=oe[j]=oe[I]=oe[D]=oe[L]=oe[x]=oe[k]=oe[C]=oe[R]=oe[O]=oe[E]=oe[A]=oe[z]=oe[V]=oe[B]=oe[W]=!0,oe[b]=oe[_]=oe[T]=!1;var ae={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},se=parseFloat,le=parseInt,ce="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ue="object"==typeof self&&self&&self.Object===Object&&self,he=ce||ue||Function("return this")(),de=e&&!e.nodeType&&e,fe=de&&t&&!t.nodeType&&t,pe=fe&&fe.exports===de,ge=pe&&ce.process,me=function(){try{return fe&&fe.require&&fe.require("util").types||ge&&ge.binding&&ge.binding("util")}catch(t){}}(),ve=me&&me.isArrayBuffer,ye=me&&me.isDate,be=me&&me.isMap,_e=me&&me.isRegExp,we=me&&me.isSet,xe=me&&me.isTypedArray;function ke(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ce(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var a=t[r];e(i,a,n(a),t)}return i}function Se(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function Re(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Oe(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function Ee(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}function Ae(t,e){return!(null==t||!t.length)&&Ve(t,e,0)>-1}function Te(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function Me(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function Pe(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function Fe(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function je(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function Ie(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var De=Ne("length");function Le(t,e,n){var i;return n(t,(function(t,n,r){if(e(t,n,r))return i=n,!1})),i}function ze(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function Ve(t,e,n){return e==e?function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):ze(t,We,n)}function Be(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function We(t){return t!=t}function Ue(t,e){var n=null==t?0:t.length;return n?Ge(t,e)/n:d}function Ne(t){return function(e){return null==e?r:e[t]}}function qe(t){return function(e){return null==t?r:t[e]}}function He(t,e,n,i,r){return r(t,(function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)})),n}function Ge(t,e){for(var n,i=-1,o=t.length;++i<o;){var a=e(t[i]);a!==r&&(n=n===r?a:n+a)}return n}function Ze(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function Ke(t){return t?t.slice(0,fn(t)+1).replace(it,""):t}function Ye(t){return function(e){return t(e)}}function Xe(t,e){return Me(e,(function(e){return t[e]}))}function $e(t,e){return t.has(e)}function Je(t,e){for(var n=-1,i=t.length;++n<i&&Ve(e,t[n],0)>-1;);return n}function Qe(t,e){for(var n=t.length;n--&&Ve(e,t[n],0)>-1;);return n}function tn(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}var en=qe({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),nn=qe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function rn(t){return"\\"+ae[t]}function on(t){return te.test(t)}function an(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function sn(t,e){return function(n){return t(e(n))}}function ln(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n];a!==e&&a!==s||(t[n]=s,o[r++]=n)}return o}function cn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function un(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function hn(t){return on(t)?function(t){for(var e=Jt.lastIndex=0;Jt.test(t);)++e;return e}(t):De(t)}function dn(t){return on(t)?function(t){return t.match(Jt)||[]}(t):function(t){return t.split("")}(t)}function fn(t){for(var e=t.length;e--&&rt.test(t.charAt(e)););return e}var pn=qe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),gn=function t(e){var n,i=(e=null==e?he:gn.defaults(he.Object(),e,gn.pick(he,ne))).Array,rt=e.Date,wt=e.Error,xt=e.Function,kt=e.Math,Ct=e.Object,St=e.RegExp,Rt=e.String,Ot=e.TypeError,Et=i.prototype,At=xt.prototype,Tt=Ct.prototype,Mt=e["__core-js_shared__"],Pt=At.toString,Ft=Tt.hasOwnProperty,jt=0,It=(n=/[^.]+$/.exec(Mt&&Mt.keys&&Mt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Dt=Tt.toString,Lt=Pt.call(Ct),zt=he._,Vt=St("^"+Pt.call(Ft).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bt=pe?e.Buffer:r,Wt=e.Symbol,Ut=e.Uint8Array,Nt=Bt?Bt.allocUnsafe:r,qt=sn(Ct.getPrototypeOf,Ct),Ht=Ct.create,Gt=Tt.propertyIsEnumerable,Zt=Et.splice,Kt=Wt?Wt.isConcatSpreadable:r,Yt=Wt?Wt.iterator:r,Jt=Wt?Wt.toStringTag:r,te=function(){try{var t=co(Ct,"defineProperty");return t({},"",{}),t}catch(t){}}(),ae=e.clearTimeout!==he.clearTimeout&&e.clearTimeout,ce=rt&&rt.now!==he.Date.now&&rt.now,ue=e.setTimeout!==he.setTimeout&&e.setTimeout,de=kt.ceil,fe=kt.floor,ge=Ct.getOwnPropertySymbols,me=Bt?Bt.isBuffer:r,De=e.isFinite,qe=Et.join,mn=sn(Ct.keys,Ct),vn=kt.max,yn=kt.min,bn=rt.now,_n=e.parseInt,wn=kt.random,xn=Et.reverse,kn=co(e,"DataView"),Cn=co(e,"Map"),Sn=co(e,"Promise"),Rn=co(e,"Set"),On=co(e,"WeakMap"),En=co(Ct,"create"),An=On&&new On,Tn={},Mn=Vo(kn),Pn=Vo(Cn),Fn=Vo(Sn),jn=Vo(Rn),In=Vo(On),Dn=Wt?Wt.prototype:r,Ln=Dn?Dn.valueOf:r,zn=Dn?Dn.toString:r;function Vn(t){if(ns(t)&&!Ha(t)&&!(t instanceof Nn)){if(t instanceof Un)return t;if(Ft.call(t,"__wrapped__"))return Bo(t)}return new Un(t)}var Bn=function(){function t(){}return function(e){if(!es(e))return{};if(Ht)return Ht(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function Wn(){}function Un(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function Nn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Zn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Gn;++e<n;)this.add(t[e])}function Kn(t){var e=this.__data__=new Hn(t);this.size=e.size}function Yn(t,e){var n=Ha(t),i=!n&&qa(t),r=!n&&!i&&Ya(t),o=!n&&!i&&!r&&us(t),a=n||i||r||o,s=a?Ze(t.length,Rt):[],l=s.length;for(var c in t)!e&&!Ft.call(t,c)||a&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||vo(c,l))||s.push(c);return s}function Xn(t){var e=t.length;return e?t[Gi(0,e-1)]:r}function $n(t,e){return jo(Or(t),ai(e,0,t.length))}function Jn(t){return jo(Or(t))}function Qn(t,e,n){(n!==r&&!Wa(t[e],n)||n===r&&!(e in t))&&ri(t,e,n)}function ti(t,e,n){var i=t[e];Ft.call(t,e)&&Wa(i,n)&&(n!==r||e in t)||ri(t,e,n)}function ei(t,e){for(var n=t.length;n--;)if(Wa(t[n][0],e))return n;return-1}function ni(t,e,n,i){return hi(t,(function(t,r,o){e(i,t,n(t),o)})),i}function ii(t,e){return t&&Er(e,Ps(e),t)}function ri(t,e,n){"__proto__"==e&&te?te(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function oi(t,e){for(var n=-1,o=e.length,a=i(o),s=null==t;++n<o;)a[n]=s?r:Os(t,e[n]);return a}function ai(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function si(t,e,n,i,o,a){var s,l=1&e,c=2&e,u=4&e;if(n&&(s=o?n(t,i,o,a):n(t)),s!==r)return s;if(!es(t))return t;var h=Ha(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Ft.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!l)return Or(t,s)}else{var d=fo(t),f=d==_||d==w;if(Ya(t))return wr(t,l);if(d==C||d==g||f&&!o){if(s=c||f?{}:go(t),!l)return c?function(t,e){return Er(t,ho(t),e)}(t,function(t,e){return t&&Er(e,Fs(e),t)}(s,t)):function(t,e){return Er(t,uo(t),e)}(t,ii(s,t))}else{if(!oe[d])return o?t:{};s=function(t,e,n){var i,r=t.constructor;switch(e){case M:return xr(t);case v:case y:return new r(+t);case P:return function(t,e){var n=e?xr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case F:case j:case I:case D:case L:case z:case V:case B:case W:return kr(t,n);case x:return new r;case k:case E:return new r(t);case R:return function(t){var e=new t.constructor(t.source,dt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case O:return new r;case A:return i=t,Ln?Ct(Ln.call(i)):{}}}(t,d,l)}}a||(a=new Kn);var p=a.get(t);if(p)return p;a.set(t,s),ss(t)?t.forEach((function(i){s.add(si(i,e,n,i,t,a))})):is(t)&&t.forEach((function(i,r){s.set(r,si(i,e,n,r,t,a))}));var m=h?r:(u?c?no:eo:c?Fs:Ps)(t);return Se(m||t,(function(i,r){m&&(i=t[r=i]),ti(s,r,si(i,e,n,r,t,a))})),s}function li(t,e,n){var i=n.length;if(null==t)return!i;for(t=Ct(t);i--;){var o=n[i],a=e[o],s=t[o];if(s===r&&!(o in t)||!a(s))return!1}return!0}function ci(t,e,n){if("function"!=typeof t)throw new Ot(o);return To((function(){t.apply(r,n)}),e)}function ui(t,e,n,i){var r=-1,o=Ae,a=!0,s=t.length,l=[],c=e.length;if(!s)return l;n&&(e=Me(e,Ye(n))),i?(o=Te,a=!1):e.length>=200&&(o=$e,a=!1,e=new Zn(e));t:for(;++r<s;){var u=t[r],h=null==n?u:n(u);if(u=i||0!==u?u:0,a&&h==h){for(var d=c;d--;)if(e[d]===h)continue t;l.push(u)}else o(e,h,i)||l.push(u)}return l}Vn.templateSettings={escape:Y,evaluate:X,interpolate:$,variable:"",imports:{_:Vn}},Vn.prototype=Wn.prototype,Vn.prototype.constructor=Vn,Un.prototype=Bn(Wn.prototype),Un.prototype.constructor=Un,Nn.prototype=Bn(Wn.prototype),Nn.prototype.constructor=Nn,qn.prototype.clear=function(){this.__data__=En?En(null):{},this.size=0},qn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},qn.prototype.get=function(t){var e=this.__data__;if(En){var n=e[t];return n===a?r:n}return Ft.call(e,t)?e[t]:r},qn.prototype.has=function(t){var e=this.__data__;return En?e[t]!==r:Ft.call(e,t)},qn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=En&&e===r?a:e,this},Hn.prototype.clear=function(){this.__data__=[],this.size=0},Hn.prototype.delete=function(t){var e=this.__data__,n=ei(e,t);return!(n<0||(n==e.length-1?e.pop():Zt.call(e,n,1),--this.size,0))},Hn.prototype.get=function(t){var e=this.__data__,n=ei(e,t);return n<0?r:e[n][1]},Hn.prototype.has=function(t){return ei(this.__data__,t)>-1},Hn.prototype.set=function(t,e){var n=this.__data__,i=ei(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new qn,map:new(Cn||Hn),string:new qn}},Gn.prototype.delete=function(t){var e=so(this,t).delete(t);return this.size-=e?1:0,e},Gn.prototype.get=function(t){return so(this,t).get(t)},Gn.prototype.has=function(t){return so(this,t).has(t)},Gn.prototype.set=function(t,e){var n=so(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},Zn.prototype.add=Zn.prototype.push=function(t){return this.__data__.set(t,a),this},Zn.prototype.has=function(t){return this.__data__.has(t)},Kn.prototype.clear=function(){this.__data__=new Hn,this.size=0},Kn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Kn.prototype.get=function(t){return this.__data__.get(t)},Kn.prototype.has=function(t){return this.__data__.has(t)},Kn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Hn){var i=n.__data__;if(!Cn||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Gn(i)}return n.set(t,e),this.size=n.size,this};var hi=Mr(bi),di=Mr(_i,!0);function fi(t,e){var n=!0;return hi(t,(function(t,i,r){return n=!!e(t,i,r)})),n}function pi(t,e,n){for(var i=-1,o=t.length;++i<o;){var a=t[i],s=e(a);if(null!=s&&(l===r?s==s&&!cs(s):n(s,l)))var l=s,c=a}return c}function gi(t,e){var n=[];return hi(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function mi(t,e,n,i,r){var o=-1,a=t.length;for(n||(n=mo),r||(r=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?mi(s,e-1,n,i,r):Pe(r,s):i||(r[r.length]=s)}return r}var vi=Pr(),yi=Pr(!0);function bi(t,e){return t&&vi(t,e,Ps)}function _i(t,e){return t&&yi(t,e,Ps)}function wi(t,e){return Ee(e,(function(e){return Ja(t[e])}))}function xi(t,e){for(var n=0,i=(e=vr(e,t)).length;null!=t&&n<i;)t=t[zo(e[n++])];return n&&n==i?t:r}function ki(t,e,n){var i=e(t);return Ha(t)?i:Pe(i,n(t))}function Ci(t){return null==t?t===r?"[object Undefined]":"[object Null]":Jt&&Jt in Ct(t)?function(t){var e=Ft.call(t,Jt),n=t[Jt];try{t[Jt]=r;var i=!0}catch(t){}var o=Dt.call(t);return i&&(e?t[Jt]=n:delete t[Jt]),o}(t):function(t){return Dt.call(t)}(t)}function Si(t,e){return t>e}function Ri(t,e){return null!=t&&Ft.call(t,e)}function Oi(t,e){return null!=t&&e in Ct(t)}function Ei(t,e,n){for(var o=n?Te:Ae,a=t[0].length,s=t.length,l=s,c=i(s),u=1/0,h=[];l--;){var d=t[l];l&&e&&(d=Me(d,Ye(e))),u=yn(d.length,u),c[l]=!n&&(e||a>=120&&d.length>=120)?new Zn(l&&d):r}d=t[0];var f=-1,p=c[0];t:for(;++f<a&&h.length<u;){var g=d[f],m=e?e(g):g;if(g=n||0!==g?g:0,!(p?$e(p,m):o(h,m,n))){for(l=s;--l;){var v=c[l];if(!(v?$e(v,m):o(t[l],m,n)))continue t}p&&p.push(m),h.push(g)}}return h}function Ai(t,e,n){var i=null==(t=Ro(t,e=vr(e,t)))?t:t[zo($o(e))];return null==i?r:ke(i,t,n)}function Ti(t){return ns(t)&&Ci(t)==g}function Mi(t,e,n,i,o){return t===e||(null==t||null==e||!ns(t)&&!ns(e)?t!=t&&e!=e:function(t,e,n,i,o,a){var s=Ha(t),l=Ha(e),c=s?m:fo(t),u=l?m:fo(e),h=(c=c==g?C:c)==C,d=(u=u==g?C:u)==C,f=c==u;if(f&&Ya(t)){if(!Ya(e))return!1;s=!0,h=!1}if(f&&!h)return a||(a=new Kn),s||us(t)?Qr(t,e,n,i,o,a):function(t,e,n,i,r,o,a){switch(n){case P:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case M:return!(t.byteLength!=e.byteLength||!o(new Ut(t),new Ut(e)));case v:case y:case k:return Wa(+t,+e);case b:return t.name==e.name&&t.message==e.message;case R:case E:return t==e+"";case x:var s=an;case O:var l=1&i;if(s||(s=cn),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;i|=2,a.set(t,e);var u=Qr(s(t),s(e),i,r,o,a);return a.delete(t),u;case A:if(Ln)return Ln.call(t)==Ln.call(e)}return!1}(t,e,c,n,i,o,a);if(!(1&n)){var p=h&&Ft.call(t,"__wrapped__"),_=d&&Ft.call(e,"__wrapped__");if(p||_){var w=p?t.value():t,S=_?e.value():e;return a||(a=new Kn),o(w,S,n,i,a)}}return!!f&&(a||(a=new Kn),function(t,e,n,i,o,a){var s=1&n,l=eo(t),c=l.length;if(c!=eo(e).length&&!s)return!1;for(var u=c;u--;){var h=l[u];if(!(s?h in e:Ft.call(e,h)))return!1}var d=a.get(t),f=a.get(e);if(d&&f)return d==e&&f==t;var p=!0;a.set(t,e),a.set(e,t);for(var g=s;++u<c;){var m=t[h=l[u]],v=e[h];if(i)var y=s?i(v,m,h,e,t,a):i(m,v,h,t,e,a);if(!(y===r?m===v||o(m,v,n,i,a):y)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var b=t.constructor,_=e.constructor;b==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(p=!1)}return a.delete(t),a.delete(e),p}(t,e,n,i,o,a))}(t,e,n,i,Mi,o))}function Pi(t,e,n,i){var o=n.length,a=o,s=!i;if(null==t)return!a;for(t=Ct(t);o--;){var l=n[o];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<a;){var c=(l=n[o])[0],u=t[c],h=l[1];if(s&&l[2]){if(u===r&&!(c in t))return!1}else{var d=new Kn;if(i)var f=i(u,h,c,t,e,d);if(!(f===r?Mi(h,u,3,i,d):f))return!1}}return!0}function Fi(t){return!(!es(t)||(e=t,It&&It in e))&&(Ja(t)?Vt:gt).test(Vo(t));var e}function ji(t){return"function"==typeof t?t:null==t?rl:"object"==typeof t?Ha(t)?Vi(t[0],t[1]):zi(t):fl(t)}function Ii(t){if(!xo(t))return mn(t);var e=[];for(var n in Ct(t))Ft.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Di(t,e){return t<e}function Li(t,e){var n=-1,r=Za(t)?i(t.length):[];return hi(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function zi(t){var e=lo(t);return 1==e.length&&e[0][2]?Co(e[0][0],e[0][1]):function(n){return n===t||Pi(n,t,e)}}function Vi(t,e){return bo(t)&&ko(e)?Co(zo(t),e):function(n){var i=Os(n,t);return i===r&&i===e?Es(n,t):Mi(e,i,3)}}function Bi(t,e,n,i,o){t!==e&&vi(e,(function(a,s){if(o||(o=new Kn),es(a))!function(t,e,n,i,o,a,s){var l=Eo(t,n),c=Eo(e,n),u=s.get(c);if(u)Qn(t,n,u);else{var h=a?a(l,c,n+"",t,e,s):r,d=h===r;if(d){var f=Ha(c),p=!f&&Ya(c),g=!f&&!p&&us(c);h=c,f||p||g?Ha(l)?h=l:Ka(l)?h=Or(l):p?(d=!1,h=wr(c,!0)):g?(d=!1,h=kr(c,!0)):h=[]:os(c)||qa(c)?(h=l,qa(l)?h=ys(l):es(l)&&!Ja(l)||(h=go(c))):d=!1}d&&(s.set(c,h),o(h,c,i,a,s),s.delete(c)),Qn(t,n,h)}}(t,e,s,n,Bi,i,o);else{var l=i?i(Eo(t,s),a,s+"",t,e,o):r;l===r&&(l=a),Qn(t,s,l)}}),Fs)}function Wi(t,e){var n=t.length;if(n)return vo(e+=e<0?n:0,n)?t[e]:r}function Ui(t,e,n){e=e.length?Me(e,(function(t){return Ha(t)?function(e){return xi(e,1===t.length?t[0]:t)}:t})):[rl];var i=-1;e=Me(e,Ye(ao()));var r=Li(t,(function(t,n,r){var o=Me(e,(function(e){return e(t)}));return{criteria:o,index:++i,value:t}}));return function(t,e){var i=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,a=r.length,s=n.length;++i<a;){var l=Cr(r[i],o[i]);if(l)return i>=s?l:l*("desc"==n[i]?-1:1)}return t.index-e.index}(t,e,n)}));i--;)t[i]=t[i].value;return t}(r)}function Ni(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var a=e[i],s=xi(t,a);n(s,a)&&$i(o,vr(a,t),s)}return o}function qi(t,e,n,i){var r=i?Be:Ve,o=-1,a=e.length,s=t;for(t===e&&(e=Or(e)),n&&(s=Me(t,Ye(n)));++o<a;)for(var l=0,c=e[o],u=n?n(c):c;(l=r(s,u,l,i))>-1;)s!==t&&Zt.call(s,l,1),Zt.call(t,l,1);return t}function Hi(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;vo(r)?Zt.call(t,r,1):cr(t,r)}}return t}function Gi(t,e){return t+fe(wn()*(e-t+1))}function Zi(t,e){var n="";if(!t||e<1||e>h)return n;do{e%2&&(n+=t),(e=fe(e/2))&&(t+=t)}while(e);return n}function Ki(t,e){return Mo(So(t,e,rl),t+"")}function Yi(t){return Xn(Ws(t))}function Xi(t,e){var n=Ws(t);return jo(n,ai(e,0,n.length))}function $i(t,e,n,i){if(!es(t))return t;for(var o=-1,a=(e=vr(e,t)).length,s=a-1,l=t;null!=l&&++o<a;){var c=zo(e[o]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=s){var h=l[c];(u=i?i(h,c,l):r)===r&&(u=es(h)?h:vo(e[o+1])?[]:{})}ti(l,c,u),l=l[c]}return t}var Ji=An?function(t,e){return An.set(t,e),t}:rl,Qi=te?function(t,e){return te(t,"toString",{configurable:!0,enumerable:!1,value:el(e),writable:!0})}:rl;function tr(t){return jo(Ws(t))}function er(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=i(o);++r<o;)a[r]=t[r+e];return a}function nr(t,e){var n;return hi(t,(function(t,i,r){return!(n=e(t,i,r))})),!!n}function ir(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;i<r;){var o=i+r>>>1,a=t[o];null!==a&&!cs(a)&&(n?a<=e:a<e)?i=o+1:r=o}return r}return rr(t,e,rl,n)}function rr(t,e,n,i){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!=e,l=null===e,c=cs(e),u=e===r;o<a;){var h=fe((o+a)/2),d=n(t[h]),f=d!==r,p=null===d,g=d==d,m=cs(d);if(s)var v=i||g;else v=u?g&&(i||f):l?g&&f&&(i||!p):c?g&&f&&!p&&(i||!m):!p&&!m&&(i?d<=e:d<e);v?o=h+1:a=h}return yn(a,4294967294)}function or(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n],s=e?e(a):a;if(!n||!Wa(s,l)){var l=s;o[r++]=0===a?0:a}}return o}function ar(t){return"number"==typeof t?t:cs(t)?d:+t}function sr(t){if("string"==typeof t)return t;if(Ha(t))return Me(t,sr)+"";if(cs(t))return zn?zn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function lr(t,e,n){var i=-1,r=Ae,o=t.length,a=!0,s=[],l=s;if(n)a=!1,r=Te;else if(o>=200){var c=e?null:Zr(t);if(c)return cn(c);a=!1,r=$e,l=new Zn}else l=e?[]:s;t:for(;++i<o;){var u=t[i],h=e?e(u):u;if(u=n||0!==u?u:0,a&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),s.push(u)}else r(l,h,n)||(l!==s&&l.push(h),s.push(u))}return s}function cr(t,e){return null==(t=Ro(t,e=vr(e,t)))||delete t[zo($o(e))]}function ur(t,e,n,i){return $i(t,e,n(xi(t,e)),i)}function hr(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?er(t,i?0:o,i?o+1:r):er(t,i?o+1:0,i?r:o)}function dr(t,e){var n=t;return n instanceof Nn&&(n=n.value()),Fe(e,(function(t,e){return e.func.apply(e.thisArg,Pe([t],e.args))}),n)}function fr(t,e,n){var r=t.length;if(r<2)return r?lr(t[0]):[];for(var o=-1,a=i(r);++o<r;)for(var s=t[o],l=-1;++l<r;)l!=o&&(a[o]=ui(a[o]||s,t[l],e,n));return lr(mi(a,1),e,n)}function pr(t,e,n){for(var i=-1,o=t.length,a=e.length,s={};++i<o;){var l=i<a?e[i]:r;n(s,t[i],l)}return s}function gr(t){return Ka(t)?t:[]}function mr(t){return"function"==typeof t?t:rl}function vr(t,e){return Ha(t)?t:bo(t,e)?[t]:Lo(bs(t))}var yr=Ki;function br(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:er(t,e,n)}var _r=ae||function(t){return he.clearTimeout(t)};function wr(t,e){if(e)return t.slice();var n=t.length,i=Nt?Nt(n):new t.constructor(n);return t.copy(i),i}function xr(t){var e=new t.constructor(t.byteLength);return new Ut(e).set(new Ut(t)),e}function kr(t,e){var n=e?xr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Cr(t,e){if(t!==e){var n=t!==r,i=null===t,o=t==t,a=cs(t),s=e!==r,l=null===e,c=e==e,u=cs(e);if(!l&&!u&&!a&&t>e||a&&s&&c&&!l&&!u||i&&s&&c||!n&&c||!o)return 1;if(!i&&!a&&!u&&t<e||u&&n&&o&&!i&&!a||l&&n&&o||!s&&o||!c)return-1}return 0}function Sr(t,e,n,r){for(var o=-1,a=t.length,s=n.length,l=-1,c=e.length,u=vn(a-s,0),h=i(c+u),d=!r;++l<c;)h[l]=e[l];for(;++o<s;)(d||o<a)&&(h[n[o]]=t[o]);for(;u--;)h[l++]=t[o++];return h}function Rr(t,e,n,r){for(var o=-1,a=t.length,s=-1,l=n.length,c=-1,u=e.length,h=vn(a-l,0),d=i(h+u),f=!r;++o<h;)d[o]=t[o];for(var p=o;++c<u;)d[p+c]=e[c];for(;++s<l;)(f||o<a)&&(d[p+n[s]]=t[o++]);return d}function Or(t,e){var n=-1,r=t.length;for(e||(e=i(r));++n<r;)e[n]=t[n];return e}function Er(t,e,n,i){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var l=e[a],c=i?i(n[l],t[l],l,n,t):r;c===r&&(c=t[l]),o?ri(n,l,c):ti(n,l,c)}return n}function Ar(t,e){return function(n,i){var r=Ha(n)?Ce:ni,o=e?e():{};return r(n,t,ao(i,2),o)}}function Tr(t){return Ki((function(e,n){var i=-1,o=n.length,a=o>1?n[o-1]:r,s=o>2?n[2]:r;for(a=t.length>3&&"function"==typeof a?(o--,a):r,s&&yo(n[0],n[1],s)&&(a=o<3?r:a,o=1),e=Ct(e);++i<o;){var l=n[i];l&&t(e,l,i,a)}return e}))}function Mr(t,e){return function(n,i){if(null==n)return n;if(!Za(n))return t(n,i);for(var r=n.length,o=e?r:-1,a=Ct(n);(e?o--:++o<r)&&!1!==i(a[o],o,a););return n}}function Pr(t){return function(e,n,i){for(var r=-1,o=Ct(e),a=i(e),s=a.length;s--;){var l=a[t?s:++r];if(!1===n(o[l],l,o))break}return e}}function Fr(t){return function(e){var n=on(e=bs(e))?dn(e):r,i=n?n[0]:e.charAt(0),o=n?br(n,1).join(""):e.slice(1);return i[t]()+o}}function jr(t){return function(e){return Fe(Js(qs(e).replace(Xt,"")),t,"")}}function Ir(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Bn(t.prototype),i=t.apply(n,e);return es(i)?i:n}}function Dr(t){return function(e,n,i){var o=Ct(e);if(!Za(e)){var a=ao(n,3);e=Ps(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,i);return s>-1?o[a?e[s]:s]:r}}function Lr(t){return to((function(e){var n=e.length,i=n,a=Un.prototype.thru;for(t&&e.reverse();i--;){var s=e[i];if("function"!=typeof s)throw new Ot(o);if(a&&!l&&"wrapper"==ro(s))var l=new Un([],!0)}for(i=l?i:n;++i<n;){var c=ro(s=e[i]),u="wrapper"==c?io(s):r;l=u&&_o(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[ro(u[0])].apply(l,u[3]):1==s.length&&_o(s)?l[c]():l.thru(s)}return function(){var t=arguments,i=t[0];if(l&&1==t.length&&Ha(i))return l.plant(i).value();for(var r=0,o=n?e[r].apply(this,t):i;++r<n;)o=e[r].call(this,o);return o}}))}function zr(t,e,n,o,a,s,l,u,h,d){var f=e&c,p=1&e,g=2&e,m=24&e,v=512&e,y=g?r:Ir(t);return function r(){for(var c=arguments.length,b=i(c),_=c;_--;)b[_]=arguments[_];if(m)var w=oo(r),x=tn(b,w);if(o&&(b=Sr(b,o,a,m)),s&&(b=Rr(b,s,l,m)),c-=x,m&&c<d){var k=ln(b,w);return Hr(t,e,zr,r.placeholder,n,b,k,u,h,d-c)}var C=p?n:this,S=g?C[t]:t;return c=b.length,u?b=Oo(b,u):v&&c>1&&b.reverse(),f&&h<c&&(b.length=h),this&&this!==he&&this instanceof r&&(S=y||Ir(S)),S.apply(C,b)}}function Vr(t,e){return function(n,i){return function(t,e,n,i){return bi(t,(function(t,r,o){e(i,n(t),r,o)})),i}(n,t,e(i),{})}}function Br(t,e){return function(n,i){var o;if(n===r&&i===r)return e;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=sr(n),i=sr(i)):(n=ar(n),i=ar(i)),o=t(n,i)}return o}}function Wr(t){return to((function(e){return e=Me(e,Ye(ao())),Ki((function(n){var i=this;return t(e,(function(t){return ke(t,i,n)}))}))}))}function Ur(t,e){var n=(e=e===r?" ":sr(e)).length;if(n<2)return n?Zi(e,t):e;var i=Zi(e,de(t/hn(e)));return on(e)?br(dn(i),0,t).join(""):i.slice(0,t)}function Nr(t){return function(e,n,o){return o&&"number"!=typeof o&&yo(e,n,o)&&(n=o=r),e=ps(e),n===r?(n=e,e=0):n=ps(n),function(t,e,n,r){for(var o=-1,a=vn(de((e-t)/(n||1)),0),s=i(a);a--;)s[r?a:++o]=t,t+=n;return s}(e,n,o=o===r?e<n?1:-1:ps(o),t)}}function qr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=vs(e),n=vs(n)),t(e,n)}}function Hr(t,e,n,i,o,a,s,c,u,h){var d=8&e;e|=d?l:64,4&(e&=~(d?64:l))||(e&=-4);var f=[t,e,o,d?a:r,d?s:r,d?r:a,d?r:s,c,u,h],p=n.apply(r,f);return _o(t)&&Ao(p,f),p.placeholder=i,Po(p,t,e)}function Gr(t){var e=kt[t];return function(t,n){if(t=vs(t),(n=null==n?0:yn(gs(n),292))&&De(t)){var i=(bs(t)+"e").split("e");return+((i=(bs(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var Zr=Rn&&1/cn(new Rn([,-0]))[1]==u?function(t){return new Rn(t)}:cl;function Kr(t){return function(e){var n=fo(e);return n==x?an(e):n==O?un(e):function(t,e){return Me(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Yr(t,e,n,a,u,h,d,f){var p=2&e;if(!p&&"function"!=typeof t)throw new Ot(o);var g=a?a.length:0;if(g||(e&=-97,a=u=r),d=d===r?d:vn(gs(d),0),f=f===r?f:gs(f),g-=u?u.length:0,64&e){var m=a,v=u;a=u=r}var y=p?r:io(t),b=[t,e,n,a,u,m,v,h,d,f];if(y&&function(t,e){var n=t[1],i=e[1],r=n|i,o=r<131,a=i==c&&8==n||i==c&&256==n&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&i&&(t[2]=e[2],r|=1&n?0:4);var l=e[3];if(l){var u=t[3];t[3]=u?Sr(u,l,e[4]):l,t[4]=u?ln(t[3],s):e[4]}(l=e[5])&&(u=t[5],t[5]=u?Rr(u,l,e[6]):l,t[6]=u?ln(t[5],s):e[6]),(l=e[7])&&(t[7]=l),i&c&&(t[8]=null==t[8]?e[8]:yn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(b,y),t=b[0],e=b[1],n=b[2],a=b[3],u=b[4],!(f=b[9]=b[9]===r?p?0:t.length:vn(b[9]-g,0))&&24&e&&(e&=-25),e&&1!=e)_=8==e||16==e?function(t,e,n){var o=Ir(t);return function a(){for(var s=arguments.length,l=i(s),c=s,u=oo(a);c--;)l[c]=arguments[c];var h=s<3&&l[0]!==u&&l[s-1]!==u?[]:ln(l,u);return(s-=h.length)<n?Hr(t,e,zr,a.placeholder,r,l,h,r,r,n-s):ke(this&&this!==he&&this instanceof a?o:t,this,l)}}(t,e,f):e!=l&&33!=e||u.length?zr.apply(r,b):function(t,e,n,r){var o=1&e,a=Ir(t);return function e(){for(var s=-1,l=arguments.length,c=-1,u=r.length,h=i(u+l),d=this&&this!==he&&this instanceof e?a:t;++c<u;)h[c]=r[c];for(;l--;)h[c++]=arguments[++s];return ke(d,o?n:this,h)}}(t,e,n,a);else var _=function(t,e,n){var i=1&e,r=Ir(t);return function e(){return(this&&this!==he&&this instanceof e?r:t).apply(i?n:this,arguments)}}(t,e,n);return Po((y?Ji:Ao)(_,b),t,e)}function Xr(t,e,n,i){return t===r||Wa(t,Tt[n])&&!Ft.call(i,n)?e:t}function $r(t,e,n,i,o,a){return es(t)&&es(e)&&(a.set(e,t),Bi(t,e,r,$r,a),a.delete(e)),t}function Jr(t){return os(t)?r:t}function Qr(t,e,n,i,o,a){var s=1&n,l=t.length,c=e.length;if(l!=c&&!(s&&c>l))return!1;var u=a.get(t),h=a.get(e);if(u&&h)return u==e&&h==t;var d=-1,f=!0,p=2&n?new Zn:r;for(a.set(t,e),a.set(e,t);++d<l;){var g=t[d],m=e[d];if(i)var v=s?i(m,g,d,e,t,a):i(g,m,d,t,e,a);if(v!==r){if(v)continue;f=!1;break}if(p){if(!Ie(e,(function(t,e){if(!$e(p,e)&&(g===t||o(g,t,n,i,a)))return p.push(e)}))){f=!1;break}}else if(g!==m&&!o(g,m,n,i,a)){f=!1;break}}return a.delete(t),a.delete(e),f}function to(t){return Mo(So(t,r,Go),t+"")}function eo(t){return ki(t,Ps,uo)}function no(t){return ki(t,Fs,ho)}var io=An?function(t){return An.get(t)}:cl;function ro(t){for(var e=t.name+"",n=Tn[e],i=Ft.call(Tn,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function oo(t){return(Ft.call(Vn,"placeholder")?Vn:t).placeholder}function ao(){var t=Vn.iteratee||ol;return t=t===ol?ji:t,arguments.length?t(arguments[0],arguments[1]):t}function so(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function lo(t){for(var e=Ps(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,ko(r)]}return e}function co(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return Fi(n)?n:r}var uo=ge?function(t){return null==t?[]:(t=Ct(t),Ee(ge(t),(function(e){return Gt.call(t,e)})))}:ml,ho=ge?function(t){for(var e=[];t;)Pe(e,uo(t)),t=qt(t);return e}:ml,fo=Ci;function po(t,e,n){for(var i=-1,r=(e=vr(e,t)).length,o=!1;++i<r;){var a=zo(e[i]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&ts(r)&&vo(a,r)&&(Ha(t)||qa(t))}function go(t){return"function"!=typeof t.constructor||xo(t)?{}:Bn(qt(t))}function mo(t){return Ha(t)||qa(t)||!!(Kt&&t&&t[Kt])}function vo(t,e){var n=typeof t;return!!(e=null==e?h:e)&&("number"==n||"symbol"!=n&&vt.test(t))&&t>-1&&t%1==0&&t<e}function yo(t,e,n){if(!es(n))return!1;var i=typeof e;return!!("number"==i?Za(n)&&vo(e,n.length):"string"==i&&e in n)&&Wa(n[e],t)}function bo(t,e){if(Ha(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!cs(t))||Q.test(t)||!J.test(t)||null!=e&&t in Ct(e)}function _o(t){var e=ro(t),n=Vn[e];if("function"!=typeof n||!(e in Nn.prototype))return!1;if(t===n)return!0;var i=io(n);return!!i&&t===i[0]}(kn&&fo(new kn(new ArrayBuffer(1)))!=P||Cn&&fo(new Cn)!=x||Sn&&fo(Sn.resolve())!=S||Rn&&fo(new Rn)!=O||On&&fo(new On)!=T)&&(fo=function(t){var e=Ci(t),n=e==C?t.constructor:r,i=n?Vo(n):"";if(i)switch(i){case Mn:return P;case Pn:return x;case Fn:return S;case jn:return O;case In:return T}return e});var wo=Mt?Ja:vl;function xo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Tt)}function ko(t){return t==t&&!es(t)}function Co(t,e){return function(n){return null!=n&&n[t]===e&&(e!==r||t in Ct(n))}}function So(t,e,n){return e=vn(e===r?t.length-1:e,0),function(){for(var r=arguments,o=-1,a=vn(r.length-e,0),s=i(a);++o<a;)s[o]=r[e+o];o=-1;for(var l=i(e+1);++o<e;)l[o]=r[o];return l[e]=n(s),ke(t,this,l)}}function Ro(t,e){return e.length<2?t:xi(t,er(e,0,-1))}function Oo(t,e){for(var n=t.length,i=yn(e.length,n),o=Or(t);i--;){var a=e[i];t[i]=vo(a,n)?o[a]:r}return t}function Eo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Ao=Fo(Ji),To=ue||function(t,e){return he.setTimeout(t,e)},Mo=Fo(Qi);function Po(t,e,n){var i=e+"";return Mo(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return Se(p,(function(n){var i="_."+n[0];e&n[1]&&!Ae(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match(at);return e?e[1].split(st):[]}(i),n)))}function Fo(t){var e=0,n=0;return function(){var i=bn(),o=16-(i-n);if(n=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(r,arguments)}}function jo(t,e){var n=-1,i=t.length,o=i-1;for(e=e===r?i:e;++n<e;){var a=Gi(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var Io,Do,Lo=(Io=Ia((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,i,r){e.push(i?r.replace(ut,"$1"):n||t)})),e}),(function(t){return 500===Do.size&&Do.clear(),t})),Do=Io.cache,Io);function zo(t){if("string"==typeof t||cs(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Vo(t){if(null!=t){try{return Pt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Bo(t){if(t instanceof Nn)return t.clone();var e=new Un(t.__wrapped__,t.__chain__);return e.__actions__=Or(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Wo=Ki((function(t,e){return Ka(t)?ui(t,mi(e,1,Ka,!0)):[]})),Uo=Ki((function(t,e){var n=$o(e);return Ka(n)&&(n=r),Ka(t)?ui(t,mi(e,1,Ka,!0),ao(n,2)):[]})),No=Ki((function(t,e){var n=$o(e);return Ka(n)&&(n=r),Ka(t)?ui(t,mi(e,1,Ka,!0),r,n):[]}));function qo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:gs(n);return r<0&&(r=vn(i+r,0)),ze(t,ao(e,3),r)}function Ho(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return n!==r&&(o=gs(n),o=n<0?vn(i+o,0):yn(o,i-1)),ze(t,ao(e,3),o,!0)}function Go(t){return null!=t&&t.length?mi(t,1):[]}function Zo(t){return t&&t.length?t[0]:r}var Ko=Ki((function(t){var e=Me(t,gr);return e.length&&e[0]===t[0]?Ei(e):[]})),Yo=Ki((function(t){var e=$o(t),n=Me(t,gr);return e===$o(n)?e=r:n.pop(),n.length&&n[0]===t[0]?Ei(n,ao(e,2)):[]})),Xo=Ki((function(t){var e=$o(t),n=Me(t,gr);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?Ei(n,r,e):[]}));function $o(t){var e=null==t?0:t.length;return e?t[e-1]:r}var Jo=Ki(Qo);function Qo(t,e){return t&&t.length&&e&&e.length?qi(t,e):t}var ta=to((function(t,e){var n=null==t?0:t.length,i=oi(t,e);return Hi(t,Me(e,(function(t){return vo(t,n)?+t:t})).sort(Cr)),i}));function ea(t){return null==t?t:xn.call(t)}var na=Ki((function(t){return lr(mi(t,1,Ka,!0))})),ia=Ki((function(t){var e=$o(t);return Ka(e)&&(e=r),lr(mi(t,1,Ka,!0),ao(e,2))})),ra=Ki((function(t){var e=$o(t);return e="function"==typeof e?e:r,lr(mi(t,1,Ka,!0),r,e)}));function oa(t){if(!t||!t.length)return[];var e=0;return t=Ee(t,(function(t){if(Ka(t))return e=vn(t.length,e),!0})),Ze(e,(function(e){return Me(t,Ne(e))}))}function aa(t,e){if(!t||!t.length)return[];var n=oa(t);return null==e?n:Me(n,(function(t){return ke(e,r,t)}))}var sa=Ki((function(t,e){return Ka(t)?ui(t,e):[]})),la=Ki((function(t){return fr(Ee(t,Ka))})),ca=Ki((function(t){var e=$o(t);return Ka(e)&&(e=r),fr(Ee(t,Ka),ao(e,2))})),ua=Ki((function(t){var e=$o(t);return e="function"==typeof e?e:r,fr(Ee(t,Ka),r,e)})),ha=Ki(oa),da=Ki((function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,aa(t,n)}));function fa(t){var e=Vn(t);return e.__chain__=!0,e}function pa(t,e){return e(t)}var ga=to((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return oi(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Nn&&vo(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:pa,args:[o],thisArg:r}),new Un(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(r),t}))):this.thru(o)})),ma=Ar((function(t,e,n){Ft.call(t,n)?++t[n]:ri(t,n,1)})),va=Dr(qo),ya=Dr(Ho);function ba(t,e){return(Ha(t)?Se:hi)(t,ao(e,3))}function _a(t,e){return(Ha(t)?Re:di)(t,ao(e,3))}var wa=Ar((function(t,e,n){Ft.call(t,n)?t[n].push(e):ri(t,n,[e])})),xa=Ki((function(t,e,n){var r=-1,o="function"==typeof e,a=Za(t)?i(t.length):[];return hi(t,(function(t){a[++r]=o?ke(e,t,n):Ai(t,e,n)})),a})),ka=Ar((function(t,e,n){ri(t,n,e)}));function Ca(t,e){return(Ha(t)?Me:Li)(t,ao(e,3))}var Sa=Ar((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Ra=Ki((function(t,e){if(null==t)return[];var n=e.length;return n>1&&yo(t,e[0],e[1])?e=[]:n>2&&yo(e[0],e[1],e[2])&&(e=[e[0]]),Ui(t,mi(e,1),[])})),Oa=ce||function(){return he.Date.now()};function Ea(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,Yr(t,c,r,r,r,r,e)}function Aa(t,e){var n;if("function"!=typeof e)throw new Ot(o);return t=gs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var Ta=Ki((function(t,e,n){var i=1;if(n.length){var r=ln(n,oo(Ta));i|=l}return Yr(t,i,e,n,r)})),Ma=Ki((function(t,e,n){var i=3;if(n.length){var r=ln(n,oo(Ma));i|=l}return Yr(e,i,t,n,r)}));function Pa(t,e,n){var i,a,s,l,c,u,h=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw new Ot(o);function g(e){var n=i,o=a;return i=a=r,h=e,l=t.apply(o,n)}function m(t){return h=t,c=To(y,e),d?g(t):l}function v(t){var n=t-u;return u===r||n>=e||n<0||f&&t-h>=s}function y(){var t=Oa();if(v(t))return b(t);c=To(y,function(t){var n=e-(t-u);return f?yn(n,s-(t-h)):n}(t))}function b(t){return c=r,p&&i?g(t):(i=a=r,l)}function _(){var t=Oa(),n=v(t);if(i=arguments,a=this,u=t,n){if(c===r)return m(u);if(f)return _r(c),c=To(y,e),g(u)}return c===r&&(c=To(y,e)),l}return e=vs(e)||0,es(n)&&(d=!!n.leading,s=(f="maxWait"in n)?vn(vs(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p),_.cancel=function(){c!==r&&_r(c),h=0,i=u=a=c=r},_.flush=function(){return c===r?l:b(Oa())},_}var Fa=Ki((function(t,e){return ci(t,1,e)})),ja=Ki((function(t,e,n){return ci(t,vs(e)||0,n)}));function Ia(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Ot(o);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(Ia.Cache||Gn),n}function Da(t){if("function"!=typeof t)throw new Ot(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ia.Cache=Gn;var La=yr((function(t,e){var n=(e=1==e.length&&Ha(e[0])?Me(e[0],Ye(ao())):Me(mi(e,1),Ye(ao()))).length;return Ki((function(i){for(var r=-1,o=yn(i.length,n);++r<o;)i[r]=e[r].call(this,i[r]);return ke(t,this,i)}))})),za=Ki((function(t,e){var n=ln(e,oo(za));return Yr(t,l,r,e,n)})),Va=Ki((function(t,e){var n=ln(e,oo(Va));return Yr(t,64,r,e,n)})),Ba=to((function(t,e){return Yr(t,256,r,r,r,e)}));function Wa(t,e){return t===e||t!=t&&e!=e}var Ua=qr(Si),Na=qr((function(t,e){return t>=e})),qa=Ti(function(){return arguments}())?Ti:function(t){return ns(t)&&Ft.call(t,"callee")&&!Gt.call(t,"callee")},Ha=i.isArray,Ga=ve?Ye(ve):function(t){return ns(t)&&Ci(t)==M};function Za(t){return null!=t&&ts(t.length)&&!Ja(t)}function Ka(t){return ns(t)&&Za(t)}var Ya=me||vl,Xa=ye?Ye(ye):function(t){return ns(t)&&Ci(t)==y};function $a(t){if(!ns(t))return!1;var e=Ci(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!os(t)}function Ja(t){if(!es(t))return!1;var e=Ci(t);return e==_||e==w||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Qa(t){return"number"==typeof t&&t==gs(t)}function ts(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function es(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ns(t){return null!=t&&"object"==typeof t}var is=be?Ye(be):function(t){return ns(t)&&fo(t)==x};function rs(t){return"number"==typeof t||ns(t)&&Ci(t)==k}function os(t){if(!ns(t)||Ci(t)!=C)return!1;var e=qt(t);if(null===e)return!0;var n=Ft.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Pt.call(n)==Lt}var as=_e?Ye(_e):function(t){return ns(t)&&Ci(t)==R},ss=we?Ye(we):function(t){return ns(t)&&fo(t)==O};function ls(t){return"string"==typeof t||!Ha(t)&&ns(t)&&Ci(t)==E}function cs(t){return"symbol"==typeof t||ns(t)&&Ci(t)==A}var us=xe?Ye(xe):function(t){return ns(t)&&ts(t.length)&&!!re[Ci(t)]},hs=qr(Di),ds=qr((function(t,e){return t<=e}));function fs(t){if(!t)return[];if(Za(t))return ls(t)?dn(t):Or(t);if(Yt&&t[Yt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Yt]());var e=fo(t);return(e==x?an:e==O?cn:Ws)(t)}function ps(t){return t?(t=vs(t))===u||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function gs(t){var e=ps(t),n=e%1;return e==e?n?e-n:e:0}function ms(t){return t?ai(gs(t),0,f):0}function vs(t){if("number"==typeof t)return t;if(cs(t))return d;if(es(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=es(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ke(t);var n=pt.test(t);return n||mt.test(t)?le(t.slice(2),n?2:8):ft.test(t)?d:+t}function ys(t){return Er(t,Fs(t))}function bs(t){return null==t?"":sr(t)}var _s=Tr((function(t,e){if(xo(e)||Za(e))Er(e,Ps(e),t);else for(var n in e)Ft.call(e,n)&&ti(t,n,e[n])})),ws=Tr((function(t,e){Er(e,Fs(e),t)})),xs=Tr((function(t,e,n,i){Er(e,Fs(e),t,i)})),ks=Tr((function(t,e,n,i){Er(e,Ps(e),t,i)})),Cs=to(oi),Ss=Ki((function(t,e){t=Ct(t);var n=-1,i=e.length,o=i>2?e[2]:r;for(o&&yo(e[0],e[1],o)&&(i=1);++n<i;)for(var a=e[n],s=Fs(a),l=-1,c=s.length;++l<c;){var u=s[l],h=t[u];(h===r||Wa(h,Tt[u])&&!Ft.call(t,u))&&(t[u]=a[u])}return t})),Rs=Ki((function(t){return t.push(r,$r),ke(Is,r,t)}));function Os(t,e,n){var i=null==t?r:xi(t,e);return i===r?n:i}function Es(t,e){return null!=t&&po(t,e,Oi)}var As=Vr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Dt.call(e)),t[e]=n}),el(rl)),Ts=Vr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Dt.call(e)),Ft.call(t,e)?t[e].push(n):t[e]=[n]}),ao),Ms=Ki(Ai);function Ps(t){return Za(t)?Yn(t):Ii(t)}function Fs(t){return Za(t)?Yn(t,!0):function(t){if(!es(t))return function(t){var e=[];if(null!=t)for(var n in Ct(t))e.push(n);return e}(t);var e=xo(t),n=[];for(var i in t)("constructor"!=i||!e&&Ft.call(t,i))&&n.push(i);return n}(t)}var js=Tr((function(t,e,n){Bi(t,e,n)})),Is=Tr((function(t,e,n,i){Bi(t,e,n,i)})),Ds=to((function(t,e){var n={};if(null==t)return n;var i=!1;e=Me(e,(function(e){return e=vr(e,t),i||(i=e.length>1),e})),Er(t,no(t),n),i&&(n=si(n,7,Jr));for(var r=e.length;r--;)cr(n,e[r]);return n})),Ls=to((function(t,e){return null==t?{}:function(t,e){return Ni(t,e,(function(e,n){return Es(t,n)}))}(t,e)}));function zs(t,e){if(null==t)return{};var n=Me(no(t),(function(t){return[t]}));return e=ao(e),Ni(t,n,(function(t,n){return e(t,n[0])}))}var Vs=Kr(Ps),Bs=Kr(Fs);function Ws(t){return null==t?[]:Xe(t,Ps(t))}var Us=jr((function(t,e,n){return e=e.toLowerCase(),t+(n?Ns(e):e)}));function Ns(t){return $s(bs(t).toLowerCase())}function qs(t){return(t=bs(t))&&t.replace(yt,en).replace($t,"")}var Hs=jr((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Gs=jr((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Zs=Fr("toLowerCase"),Ks=jr((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Ys=jr((function(t,e,n){return t+(n?" ":"")+$s(e)})),Xs=jr((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),$s=Fr("toUpperCase");function Js(t,e,n){return t=bs(t),(e=n?r:e)===r?function(t){return ee.test(t)}(t)?function(t){return t.match(Qt)||[]}(t):function(t){return t.match(lt)||[]}(t):t.match(e)||[]}var Qs=Ki((function(t,e){try{return ke(t,r,e)}catch(t){return $a(t)?t:new wt(t)}})),tl=to((function(t,e){return Se(e,(function(e){e=zo(e),ri(t,e,Ta(t[e],t))})),t}));function el(t){return function(){return t}}var nl=Lr(),il=Lr(!0);function rl(t){return t}function ol(t){return ji("function"==typeof t?t:si(t,1))}var al=Ki((function(t,e){return function(n){return Ai(n,t,e)}})),sl=Ki((function(t,e){return function(n){return Ai(t,n,e)}}));function ll(t,e,n){var i=Ps(e),r=wi(e,i);null!=n||es(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=wi(e,Ps(e)));var o=!(es(n)&&"chain"in n&&!n.chain),a=Ja(t);return Se(r,(function(n){var i=e[n];t[n]=i,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),r=n.__actions__=Or(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,Pe([this.value()],arguments))})})),t}function cl(){}var ul=Wr(Me),hl=Wr(Oe),dl=Wr(Ie);function fl(t){return bo(t)?Ne(zo(t)):function(t){return function(e){return xi(e,t)}}(t)}var pl=Nr(),gl=Nr(!0);function ml(){return[]}function vl(){return!1}var yl,bl=Br((function(t,e){return t+e}),0),_l=Gr("ceil"),wl=Br((function(t,e){return t/e}),1),xl=Gr("floor"),kl=Br((function(t,e){return t*e}),1),Cl=Gr("round"),Sl=Br((function(t,e){return t-e}),0);return Vn.after=function(t,e){if("function"!=typeof e)throw new Ot(o);return t=gs(t),function(){if(--t<1)return e.apply(this,arguments)}},Vn.ary=Ea,Vn.assign=_s,Vn.assignIn=ws,Vn.assignInWith=xs,Vn.assignWith=ks,Vn.at=Cs,Vn.before=Aa,Vn.bind=Ta,Vn.bindAll=tl,Vn.bindKey=Ma,Vn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ha(t)?t:[t]},Vn.chain=fa,Vn.chunk=function(t,e,n){e=(n?yo(t,e,n):e===r)?1:vn(gs(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var a=0,s=0,l=i(de(o/e));a<o;)l[s++]=er(t,a,a+=e);return l},Vn.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r},Vn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=i(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Pe(Ha(n)?Or(n):[n],mi(e,1))},Vn.cond=function(t){var e=null==t?0:t.length,n=ao();return t=e?Me(t,(function(t){if("function"!=typeof t[1])throw new Ot(o);return[n(t[0]),t[1]]})):[],Ki((function(n){for(var i=-1;++i<e;){var r=t[i];if(ke(r[0],this,n))return ke(r[1],this,n)}}))},Vn.conforms=function(t){return function(t){var e=Ps(t);return function(n){return li(n,t,e)}}(si(t,1))},Vn.constant=el,Vn.countBy=ma,Vn.create=function(t,e){var n=Bn(t);return null==e?n:ii(n,e)},Vn.curry=function t(e,n,i){var o=Yr(e,8,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},Vn.curryRight=function t(e,n,i){var o=Yr(e,16,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},Vn.debounce=Pa,Vn.defaults=Ss,Vn.defaultsDeep=Rs,Vn.defer=Fa,Vn.delay=ja,Vn.difference=Wo,Vn.differenceBy=Uo,Vn.differenceWith=No,Vn.drop=function(t,e,n){var i=null==t?0:t.length;return i?er(t,(e=n||e===r?1:gs(e))<0?0:e,i):[]},Vn.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?er(t,0,(e=i-(e=n||e===r?1:gs(e)))<0?0:e):[]},Vn.dropRightWhile=function(t,e){return t&&t.length?hr(t,ao(e,3),!0,!0):[]},Vn.dropWhile=function(t,e){return t&&t.length?hr(t,ao(e,3),!0):[]},Vn.fill=function(t,e,n,i){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&yo(t,e,n)&&(n=0,i=o),function(t,e,n,i){var o=t.length;for((n=gs(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:gs(i))<0&&(i+=o),i=n>i?0:ms(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},Vn.filter=function(t,e){return(Ha(t)?Ee:gi)(t,ao(e,3))},Vn.flatMap=function(t,e){return mi(Ca(t,e),1)},Vn.flatMapDeep=function(t,e){return mi(Ca(t,e),u)},Vn.flatMapDepth=function(t,e,n){return n=n===r?1:gs(n),mi(Ca(t,e),n)},Vn.flatten=Go,Vn.flattenDeep=function(t){return null!=t&&t.length?mi(t,u):[]},Vn.flattenDepth=function(t,e){return null!=t&&t.length?mi(t,e=e===r?1:gs(e)):[]},Vn.flip=function(t){return Yr(t,512)},Vn.flow=nl,Vn.flowRight=il,Vn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},Vn.functions=function(t){return null==t?[]:wi(t,Ps(t))},Vn.functionsIn=function(t){return null==t?[]:wi(t,Fs(t))},Vn.groupBy=wa,Vn.initial=function(t){return null!=t&&t.length?er(t,0,-1):[]},Vn.intersection=Ko,Vn.intersectionBy=Yo,Vn.intersectionWith=Xo,Vn.invert=As,Vn.invertBy=Ts,Vn.invokeMap=xa,Vn.iteratee=ol,Vn.keyBy=ka,Vn.keys=Ps,Vn.keysIn=Fs,Vn.map=Ca,Vn.mapKeys=function(t,e){var n={};return e=ao(e,3),bi(t,(function(t,i,r){ri(n,e(t,i,r),t)})),n},Vn.mapValues=function(t,e){var n={};return e=ao(e,3),bi(t,(function(t,i,r){ri(n,i,e(t,i,r))})),n},Vn.matches=function(t){return zi(si(t,1))},Vn.matchesProperty=function(t,e){return Vi(t,si(e,1))},Vn.memoize=Ia,Vn.merge=js,Vn.mergeWith=Is,Vn.method=al,Vn.methodOf=sl,Vn.mixin=ll,Vn.negate=Da,Vn.nthArg=function(t){return t=gs(t),Ki((function(e){return Wi(e,t)}))},Vn.omit=Ds,Vn.omitBy=function(t,e){return zs(t,Da(ao(e)))},Vn.once=function(t){return Aa(2,t)},Vn.orderBy=function(t,e,n,i){return null==t?[]:(Ha(e)||(e=null==e?[]:[e]),Ha(n=i?r:n)||(n=null==n?[]:[n]),Ui(t,e,n))},Vn.over=ul,Vn.overArgs=La,Vn.overEvery=hl,Vn.overSome=dl,Vn.partial=za,Vn.partialRight=Va,Vn.partition=Sa,Vn.pick=Ls,Vn.pickBy=zs,Vn.property=fl,Vn.propertyOf=function(t){return function(e){return null==t?r:xi(t,e)}},Vn.pull=Jo,Vn.pullAll=Qo,Vn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?qi(t,e,ao(n,2)):t},Vn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?qi(t,e,r,n):t},Vn.pullAt=ta,Vn.range=pl,Vn.rangeRight=gl,Vn.rearg=Ba,Vn.reject=function(t,e){return(Ha(t)?Ee:gi)(t,Da(ao(e,3)))},Vn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=ao(e,3);++i<o;){var a=t[i];e(a,i,t)&&(n.push(a),r.push(i))}return Hi(t,r),n},Vn.rest=function(t,e){if("function"!=typeof t)throw new Ot(o);return Ki(t,e=e===r?e:gs(e))},Vn.reverse=ea,Vn.sampleSize=function(t,e,n){return e=(n?yo(t,e,n):e===r)?1:gs(e),(Ha(t)?$n:Xi)(t,e)},Vn.set=function(t,e,n){return null==t?t:$i(t,e,n)},Vn.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:$i(t,e,n,i)},Vn.shuffle=function(t){return(Ha(t)?Jn:tr)(t)},Vn.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&yo(t,e,n)?(e=0,n=i):(e=null==e?0:gs(e),n=n===r?i:gs(n)),er(t,e,n)):[]},Vn.sortBy=Ra,Vn.sortedUniq=function(t){return t&&t.length?or(t):[]},Vn.sortedUniqBy=function(t,e){return t&&t.length?or(t,ao(e,2)):[]},Vn.split=function(t,e,n){return n&&"number"!=typeof n&&yo(t,e,n)&&(e=n=r),(n=n===r?f:n>>>0)?(t=bs(t))&&("string"==typeof e||null!=e&&!as(e))&&!(e=sr(e))&&on(t)?br(dn(t),0,n):t.split(e,n):[]},Vn.spread=function(t,e){if("function"!=typeof t)throw new Ot(o);return e=null==e?0:vn(gs(e),0),Ki((function(n){var i=n[e],r=br(n,0,e);return i&&Pe(r,i),ke(t,this,r)}))},Vn.tail=function(t){var e=null==t?0:t.length;return e?er(t,1,e):[]},Vn.take=function(t,e,n){return t&&t.length?er(t,0,(e=n||e===r?1:gs(e))<0?0:e):[]},Vn.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?er(t,(e=i-(e=n||e===r?1:gs(e)))<0?0:e,i):[]},Vn.takeRightWhile=function(t,e){return t&&t.length?hr(t,ao(e,3),!1,!0):[]},Vn.takeWhile=function(t,e){return t&&t.length?hr(t,ao(e,3)):[]},Vn.tap=function(t,e){return e(t),t},Vn.throttle=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new Ot(o);return es(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Pa(t,e,{leading:i,maxWait:e,trailing:r})},Vn.thru=pa,Vn.toArray=fs,Vn.toPairs=Vs,Vn.toPairsIn=Bs,Vn.toPath=function(t){return Ha(t)?Me(t,zo):cs(t)?[t]:Or(Lo(bs(t)))},Vn.toPlainObject=ys,Vn.transform=function(t,e,n){var i=Ha(t),r=i||Ya(t)||us(t);if(e=ao(e,4),null==n){var o=t&&t.constructor;n=r?i?new o:[]:es(t)&&Ja(o)?Bn(qt(t)):{}}return(r?Se:bi)(t,(function(t,i,r){return e(n,t,i,r)})),n},Vn.unary=function(t){return Ea(t,1)},Vn.union=na,Vn.unionBy=ia,Vn.unionWith=ra,Vn.uniq=function(t){return t&&t.length?lr(t):[]},Vn.uniqBy=function(t,e){return t&&t.length?lr(t,ao(e,2)):[]},Vn.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?lr(t,r,e):[]},Vn.unset=function(t,e){return null==t||cr(t,e)},Vn.unzip=oa,Vn.unzipWith=aa,Vn.update=function(t,e,n){return null==t?t:ur(t,e,mr(n))},Vn.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:ur(t,e,mr(n),i)},Vn.values=Ws,Vn.valuesIn=function(t){return null==t?[]:Xe(t,Fs(t))},Vn.without=sa,Vn.words=Js,Vn.wrap=function(t,e){return za(mr(e),t)},Vn.xor=la,Vn.xorBy=ca,Vn.xorWith=ua,Vn.zip=ha,Vn.zipObject=function(t,e){return pr(t||[],e||[],ti)},Vn.zipObjectDeep=function(t,e){return pr(t||[],e||[],$i)},Vn.zipWith=da,Vn.entries=Vs,Vn.entriesIn=Bs,Vn.extend=ws,Vn.extendWith=xs,ll(Vn,Vn),Vn.add=bl,Vn.attempt=Qs,Vn.camelCase=Us,Vn.capitalize=Ns,Vn.ceil=_l,Vn.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=vs(n))==n?n:0),e!==r&&(e=(e=vs(e))==e?e:0),ai(vs(t),e,n)},Vn.clone=function(t){return si(t,4)},Vn.cloneDeep=function(t){return si(t,5)},Vn.cloneDeepWith=function(t,e){return si(t,5,e="function"==typeof e?e:r)},Vn.cloneWith=function(t,e){return si(t,4,e="function"==typeof e?e:r)},Vn.conformsTo=function(t,e){return null==e||li(t,e,Ps(e))},Vn.deburr=qs,Vn.defaultTo=function(t,e){return null==t||t!=t?e:t},Vn.divide=wl,Vn.endsWith=function(t,e,n){t=bs(t),e=sr(e);var i=t.length,o=n=n===r?i:ai(gs(n),0,i);return(n-=e.length)>=0&&t.slice(n,o)==e},Vn.eq=Wa,Vn.escape=function(t){return(t=bs(t))&&K.test(t)?t.replace(G,nn):t},Vn.escapeRegExp=function(t){return(t=bs(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Vn.every=function(t,e,n){var i=Ha(t)?Oe:fi;return n&&yo(t,e,n)&&(e=r),i(t,ao(e,3))},Vn.find=va,Vn.findIndex=qo,Vn.findKey=function(t,e){return Le(t,ao(e,3),bi)},Vn.findLast=ya,Vn.findLastIndex=Ho,Vn.findLastKey=function(t,e){return Le(t,ao(e,3),_i)},Vn.floor=xl,Vn.forEach=ba,Vn.forEachRight=_a,Vn.forIn=function(t,e){return null==t?t:vi(t,ao(e,3),Fs)},Vn.forInRight=function(t,e){return null==t?t:yi(t,ao(e,3),Fs)},Vn.forOwn=function(t,e){return t&&bi(t,ao(e,3))},Vn.forOwnRight=function(t,e){return t&&_i(t,ao(e,3))},Vn.get=Os,Vn.gt=Ua,Vn.gte=Na,Vn.has=function(t,e){return null!=t&&po(t,e,Ri)},Vn.hasIn=Es,Vn.head=Zo,Vn.identity=rl,Vn.includes=function(t,e,n,i){t=Za(t)?t:Ws(t),n=n&&!i?gs(n):0;var r=t.length;return n<0&&(n=vn(r+n,0)),ls(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&Ve(t,e,n)>-1},Vn.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:gs(n);return r<0&&(r=vn(i+r,0)),Ve(t,e,r)},Vn.inRange=function(t,e,n){return e=ps(e),n===r?(n=e,e=0):n=ps(n),function(t,e,n){return t>=yn(e,n)&&t<vn(e,n)}(t=vs(t),e,n)},Vn.invoke=Ms,Vn.isArguments=qa,Vn.isArray=Ha,Vn.isArrayBuffer=Ga,Vn.isArrayLike=Za,Vn.isArrayLikeObject=Ka,Vn.isBoolean=function(t){return!0===t||!1===t||ns(t)&&Ci(t)==v},Vn.isBuffer=Ya,Vn.isDate=Xa,Vn.isElement=function(t){return ns(t)&&1===t.nodeType&&!os(t)},Vn.isEmpty=function(t){if(null==t)return!0;if(Za(t)&&(Ha(t)||"string"==typeof t||"function"==typeof t.splice||Ya(t)||us(t)||qa(t)))return!t.length;var e=fo(t);if(e==x||e==O)return!t.size;if(xo(t))return!Ii(t).length;for(var n in t)if(Ft.call(t,n))return!1;return!0},Vn.isEqual=function(t,e){return Mi(t,e)},Vn.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?Mi(t,e,r,n):!!i},Vn.isError=$a,Vn.isFinite=function(t){return"number"==typeof t&&De(t)},Vn.isFunction=Ja,Vn.isInteger=Qa,Vn.isLength=ts,Vn.isMap=is,Vn.isMatch=function(t,e){return t===e||Pi(t,e,lo(e))},Vn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,Pi(t,e,lo(e),n)},Vn.isNaN=function(t){return rs(t)&&t!=+t},Vn.isNative=function(t){if(wo(t))throw new wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Fi(t)},Vn.isNil=function(t){return null==t},Vn.isNull=function(t){return null===t},Vn.isNumber=rs,Vn.isObject=es,Vn.isObjectLike=ns,Vn.isPlainObject=os,Vn.isRegExp=as,Vn.isSafeInteger=function(t){return Qa(t)&&t>=-9007199254740991&&t<=h},Vn.isSet=ss,Vn.isString=ls,Vn.isSymbol=cs,Vn.isTypedArray=us,Vn.isUndefined=function(t){return t===r},Vn.isWeakMap=function(t){return ns(t)&&fo(t)==T},Vn.isWeakSet=function(t){return ns(t)&&"[object WeakSet]"==Ci(t)},Vn.join=function(t,e){return null==t?"":qe.call(t,e)},Vn.kebabCase=Hs,Vn.last=$o,Vn.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=gs(n))<0?vn(i+o,0):yn(o,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,o):ze(t,We,o,!0)},Vn.lowerCase=Gs,Vn.lowerFirst=Zs,Vn.lt=hs,Vn.lte=ds,Vn.max=function(t){return t&&t.length?pi(t,rl,Si):r},Vn.maxBy=function(t,e){return t&&t.length?pi(t,ao(e,2),Si):r},Vn.mean=function(t){return Ue(t,rl)},Vn.meanBy=function(t,e){return Ue(t,ao(e,2))},Vn.min=function(t){return t&&t.length?pi(t,rl,Di):r},Vn.minBy=function(t,e){return t&&t.length?pi(t,ao(e,2),Di):r},Vn.stubArray=ml,Vn.stubFalse=vl,Vn.stubObject=function(){return{}},Vn.stubString=function(){return""},Vn.stubTrue=function(){return!0},Vn.multiply=kl,Vn.nth=function(t,e){return t&&t.length?Wi(t,gs(e)):r},Vn.noConflict=function(){return he._===this&&(he._=zt),this},Vn.noop=cl,Vn.now=Oa,Vn.pad=function(t,e,n){t=bs(t);var i=(e=gs(e))?hn(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return Ur(fe(r),n)+t+Ur(de(r),n)},Vn.padEnd=function(t,e,n){t=bs(t);var i=(e=gs(e))?hn(t):0;return e&&i<e?t+Ur(e-i,n):t},Vn.padStart=function(t,e,n){t=bs(t);var i=(e=gs(e))?hn(t):0;return e&&i<e?Ur(e-i,n)+t:t},Vn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),_n(bs(t).replace(it,""),e||0)},Vn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&yo(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=ps(t),e===r?(e=t,t=0):e=ps(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=wn();return yn(t+o*(e-t+se("1e-"+((o+"").length-1))),e)}return Gi(t,e)},Vn.reduce=function(t,e,n){var i=Ha(t)?Fe:He,r=arguments.length<3;return i(t,ao(e,4),n,r,hi)},Vn.reduceRight=function(t,e,n){var i=Ha(t)?je:He,r=arguments.length<3;return i(t,ao(e,4),n,r,di)},Vn.repeat=function(t,e,n){return e=(n?yo(t,e,n):e===r)?1:gs(e),Zi(bs(t),e)},Vn.replace=function(){var t=arguments,e=bs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Vn.result=function(t,e,n){var i=-1,o=(e=vr(e,t)).length;for(o||(o=1,t=r);++i<o;){var a=null==t?r:t[zo(e[i])];a===r&&(i=o,a=n),t=Ja(a)?a.call(t):a}return t},Vn.round=Cl,Vn.runInContext=t,Vn.sample=function(t){return(Ha(t)?Xn:Yi)(t)},Vn.size=function(t){if(null==t)return 0;if(Za(t))return ls(t)?hn(t):t.length;var e=fo(t);return e==x||e==O?t.size:Ii(t).length},Vn.snakeCase=Ks,Vn.some=function(t,e,n){var i=Ha(t)?Ie:nr;return n&&yo(t,e,n)&&(e=r),i(t,ao(e,3))},Vn.sortedIndex=function(t,e){return ir(t,e)},Vn.sortedIndexBy=function(t,e,n){return rr(t,e,ao(n,2))},Vn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=ir(t,e);if(i<n&&Wa(t[i],e))return i}return-1},Vn.sortedLastIndex=function(t,e){return ir(t,e,!0)},Vn.sortedLastIndexBy=function(t,e,n){return rr(t,e,ao(n,2),!0)},Vn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ir(t,e,!0)-1;if(Wa(t[n],e))return n}return-1},Vn.startCase=Ys,Vn.startsWith=function(t,e,n){return t=bs(t),n=null==n?0:ai(gs(n),0,t.length),e=sr(e),t.slice(n,n+e.length)==e},Vn.subtract=Sl,Vn.sum=function(t){return t&&t.length?Ge(t,rl):0},Vn.sumBy=function(t,e){return t&&t.length?Ge(t,ao(e,2)):0},Vn.template=function(t,e,n){var i=Vn.templateSettings;n&&yo(t,e,n)&&(e=r),t=bs(t),e=xs({},e,i,Xr);var o,a,s=xs({},e.imports,i.imports,Xr),l=Ps(s),c=Xe(s,l),u=0,h=e.interpolate||bt,d="__p += '",f=St((e.escape||bt).source+"|"+h.source+"|"+(h===$?ht:bt).source+"|"+(e.evaluate||bt).source+"|$","g"),p="//# sourceURL="+(Ft.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ie+"]")+"\n";t.replace(f,(function(e,n,i,r,s,l){return i||(i=r),d+=t.slice(u,l).replace(_t,rn),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=l+e.length,e})),d+="';\n";var g=Ft.call(e,"variable")&&e.variable;if(g){if(ct.test(g))throw new wt("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(U,""):d).replace(N,"$1").replace(q,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Qs((function(){return xt(l,p+"return "+d).apply(r,c)}));if(m.source=d,$a(m))throw m;return m},Vn.times=function(t,e){if((t=gs(t))<1||t>h)return[];var n=f,i=yn(t,f);e=ao(e),t-=f;for(var r=Ze(i,e);++n<t;)e(n);return r},Vn.toFinite=ps,Vn.toInteger=gs,Vn.toLength=ms,Vn.toLower=function(t){return bs(t).toLowerCase()},Vn.toNumber=vs,Vn.toSafeInteger=function(t){return t?ai(gs(t),-9007199254740991,h):0===t?t:0},Vn.toString=bs,Vn.toUpper=function(t){return bs(t).toUpperCase()},Vn.trim=function(t,e,n){if((t=bs(t))&&(n||e===r))return Ke(t);if(!t||!(e=sr(e)))return t;var i=dn(t),o=dn(e);return br(i,Je(i,o),Qe(i,o)+1).join("")},Vn.trimEnd=function(t,e,n){if((t=bs(t))&&(n||e===r))return t.slice(0,fn(t)+1);if(!t||!(e=sr(e)))return t;var i=dn(t);return br(i,0,Qe(i,dn(e))+1).join("")},Vn.trimStart=function(t,e,n){if((t=bs(t))&&(n||e===r))return t.replace(it,"");if(!t||!(e=sr(e)))return t;var i=dn(t);return br(i,Je(i,dn(e))).join("")},Vn.truncate=function(t,e){var n=30,i="...";if(es(e)){var o="separator"in e?e.separator:o;n="length"in e?gs(e.length):n,i="omission"in e?sr(e.omission):i}var a=(t=bs(t)).length;if(on(t)){var s=dn(t);a=s.length}if(n>=a)return t;var l=n-hn(i);if(l<1)return i;var c=s?br(s,0,l).join(""):t.slice(0,l);if(o===r)return c+i;if(s&&(l+=c.length-l),as(o)){if(t.slice(l).search(o)){var u,h=c;for(o.global||(o=St(o.source,bs(dt.exec(o))+"g")),o.lastIndex=0;u=o.exec(h);)var d=u.index;c=c.slice(0,d===r?l:d)}}else if(t.indexOf(sr(o),l)!=l){var f=c.lastIndexOf(o);f>-1&&(c=c.slice(0,f))}return c+i},Vn.unescape=function(t){return(t=bs(t))&&Z.test(t)?t.replace(H,pn):t},Vn.uniqueId=function(t){var e=++jt;return bs(t)+e},Vn.upperCase=Xs,Vn.upperFirst=$s,Vn.each=ba,Vn.eachRight=_a,Vn.first=Zo,ll(Vn,(yl={},bi(Vn,(function(t,e){Ft.call(Vn.prototype,e)||(yl[e]=t)})),yl),{chain:!1}),Vn.VERSION="4.17.21",Se(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Vn[t].placeholder=Vn})),Se(["drop","take"],(function(t,e){Nn.prototype[t]=function(n){n=n===r?1:vn(gs(n),0);var i=this.__filtered__&&!e?new Nn(this):this.clone();return i.__filtered__?i.__takeCount__=yn(n,i.__takeCount__):i.__views__.push({size:yn(n,f),type:t+(i.__dir__<0?"Right":"")}),i},Nn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Se(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=1==n||3==n;Nn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ao(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),Se(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Nn.prototype[t]=function(){return this[n](1).value()[0]}})),Se(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Nn.prototype[t]=function(){return this.__filtered__?new Nn(this):this[n](1)}})),Nn.prototype.compact=function(){return this.filter(rl)},Nn.prototype.find=function(t){return this.filter(t).head()},Nn.prototype.findLast=function(t){return this.reverse().find(t)},Nn.prototype.invokeMap=Ki((function(t,e){return"function"==typeof t?new Nn(this):this.map((function(n){return Ai(n,t,e)}))})),Nn.prototype.reject=function(t){return this.filter(Da(ao(t)))},Nn.prototype.slice=function(t,e){t=gs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Nn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=gs(e))<0?n.dropRight(-e):n.take(e-t)),n)},Nn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Nn.prototype.toArray=function(){return this.take(f)},bi(Nn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=Vn[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);o&&(Vn.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,l=e instanceof Nn,c=s[0],u=l||Ha(e),h=function(t){var e=o.apply(Vn,Pe([t],s));return i&&d?e[0]:e};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var d=this.__chain__,f=!!this.__actions__.length,p=a&&!d,g=l&&!f;if(!a&&u){e=g?e:new Nn(this);var m=t.apply(e,s);return m.__actions__.push({func:pa,args:[h],thisArg:r}),new Un(m,d)}return p&&g?t.apply(this,s):(m=this.thru(h),p?i?m.value()[0]:m.value():m)})})),Se(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Et[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);Vn.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(Ha(r)?r:[],t)}return this[n]((function(n){return e.apply(Ha(n)?n:[],t)}))}})),bi(Nn.prototype,(function(t,e){var n=Vn[e];if(n){var i=n.name+"";Ft.call(Tn,i)||(Tn[i]=[]),Tn[i].push({name:e,func:n})}})),Tn[zr(r,2).name]=[{name:"wrapper",func:r}],Nn.prototype.clone=function(){var t=new Nn(this.__wrapped__);return t.__actions__=Or(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Or(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Or(this.__views__),t},Nn.prototype.reverse=function(){if(this.__filtered__){var t=new Nn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Nn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ha(t),i=e<0,r=n?t.length:0,o=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=yn(e,t+a);break;case"takeRight":t=vn(t,e-a)}}return{start:t,end:e}}(0,r,this.__views__),a=o.start,s=o.end,l=s-a,c=i?s:a-1,u=this.__iteratees__,h=u.length,d=0,f=yn(l,this.__takeCount__);if(!n||!i&&r==l&&f==l)return dr(t,this.__actions__);var p=[];t:for(;l--&&d<f;){for(var g=-1,m=t[c+=e];++g<h;){var v=u[g],y=v.iteratee,b=v.type,_=y(m);if(2==b)m=_;else if(!_){if(1==b)continue t;break t}}p[d++]=m}return p},Vn.prototype.at=ga,Vn.prototype.chain=function(){return fa(this)},Vn.prototype.commit=function(){return new Un(this.value(),this.__chain__)},Vn.prototype.next=function(){this.__values__===r&&(this.__values__=fs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},Vn.prototype.plant=function(t){for(var e,n=this;n instanceof Wn;){var i=Bo(n);i.__index__=0,i.__values__=r,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e},Vn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Nn){var e=t;return this.__actions__.length&&(e=new Nn(this)),(e=e.reverse()).__actions__.push({func:pa,args:[ea],thisArg:r}),new Un(e,this.__chain__)}return this.thru(ea)},Vn.prototype.toJSON=Vn.prototype.valueOf=Vn.prototype.value=function(){return dr(this.__wrapped__,this.__actions__)},Vn.prototype.first=Vn.prototype.head,Yt&&(Vn.prototype[Yt]=function(){return this}),Vn}();he._=gn,(i=function(){return gn}.call(e,n,e,t))===r||(t.exports=i)}.call(this)},57460:function(t,e){var n,i;n=function t(){"use strict";var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},n=!e.document&&!!e.postMessage,i=n&&/blob:/i.test((e.location||{}).protocol),r={},o=0,a={parse:function(n,i){var s=(i=i||{}).dynamicTyping||!1;if(w(s)&&(i.dynamicTypingFunction=s,s={}),i.dynamicTyping=s,i.transform=!!w(i.transform)&&i.transform,i.worker&&a.WORKERS_SUPPORTED){var l=function(){if(!a.WORKERS_SUPPORTED)return!1;var n,i,s=(n=e.URL||e.webkitURL||null,i=t.toString(),a.BLOB_URL||(a.BLOB_URL=n.createObjectURL(new Blob(["(",i,")();"],{type:"text/javascript"})))),l=new e.Worker(s);return l.onmessage=m,l.id=o++,r[l.id]=l}();return l.userStep=i.step,l.userChunk=i.chunk,l.userComplete=i.complete,l.userError=i.error,i.step=w(i.step),i.chunk=w(i.chunk),i.complete=w(i.complete),i.error=w(i.error),delete i.worker,void l.postMessage({input:n,config:i,workerId:l.id})}var f=null;return a.NODE_STREAM_INPUT,"string"==typeof n?f=i.download?new c(i):new h(i):!0===n.readable&&w(n.read)&&w(n.on)?f=new d(i):(e.File&&n instanceof File||n instanceof Object)&&(f=new u(i)),f.stream(n)},unparse:function(t,e){var n=!1,i=!0,r=",",o="\r\n",s='"',l=s+s,c=!1,u=null,h=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||a.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(r=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(n=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(c=e.skipEmptyLines),"string"==typeof e.newline&&(o=e.newline),"string"==typeof e.quoteChar&&(s=e.quoteChar),"boolean"==typeof e.header&&(i=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");u=e.columns}void 0!==e.escapeChar&&(l=e.escapeChar+s),("boolean"==typeof e.escapeFormulae||e.escapeFormulae instanceof RegExp)&&(h=e.escapeFormulae instanceof RegExp?e.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var d=new RegExp(p(s),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return f(null,t,c);if("object"==typeof t[0])return f(u||Object.keys(t[0]),t,c)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||u),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==typeof t.data[0]?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),f(t.fields||[],t.data||[],c);throw new Error("Unable to serialize unrecognized input");function f(t,e,n){var a="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var s=Array.isArray(t)&&0<t.length,l=!Array.isArray(e[0]);if(s&&i){for(var c=0;c<t.length;c++)0<c&&(a+=r),a+=g(t[c],c);0<e.length&&(a+=o)}for(var u=0;u<e.length;u++){var h=s?t.length:e[u].length,d=!1,f=s?0===Object.keys(e[u]).length:0===e[u].length;if(n&&!s&&(d="greedy"===n?""===e[u].join("").trim():1===e[u].length&&0===e[u][0].length),"greedy"===n&&s){for(var p=[],m=0;m<h;m++){var v=l?t[m]:m;p.push(e[u][v])}d=""===p.join("").trim()}if(!d){for(var y=0;y<h;y++){0<y&&!f&&(a+=r);var b=s&&l?t[y]:y;a+=g(e[u][b],y)}u<e.length-1&&(!n||0<h&&!f)&&(a+=o)}}return a}function g(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);var i=!1;h&&"string"==typeof t&&h.test(t)&&(t="'"+t,i=!0);var o=t.toString().replace(d,l);return(i=i||!0===n||"function"==typeof n&&n(t,e)||Array.isArray(n)&&n[e]||function(t,e){for(var n=0;n<e.length;n++)if(-1<t.indexOf(e[n]))return!0;return!1}(o,a.BAD_DELIMITERS)||-1<o.indexOf(r)||" "===o.charAt(0)||" "===o.charAt(o.length-1))?s+o+s:o}}};if(a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\ufeff",a.BAD_DELIMITERS=["\r","\n",'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!n&&!!e.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=g,a.ParserHandle=f,a.NetworkStreamer=c,a.FileStreamer=u,a.StringStreamer=h,a.ReadableStreamStreamer=d,e.jQuery){var s=e.jQuery;s.fn.parse=function(t){var n=t.config||{},i=[];return this.each((function(t){if("INPUT"!==s(this).prop("tagName").toUpperCase()||"file"!==s(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0===this.files.length)return!0;for(var r=0;r<this.files.length;r++)i.push({file:this.files[r],inputElem:this,instanceConfig:s.extend({},n)})})),r(),this;function r(){if(0!==i.length){var e,n,r,l=i[0];if(w(t.before)){var c=t.before(l.file,l.inputElem);if("object"==typeof c){if("abort"===c.action)return"AbortError",e=l.file,n=l.inputElem,r=c.reason,void(w(t.error)&&t.error({name:"AbortError"},e,n,r));if("skip"===c.action)return void o();"object"==typeof c.config&&(l.instanceConfig=s.extend(l.instanceConfig,c.config))}else if("skip"===c)return void o()}var u=l.instanceConfig.complete;l.instanceConfig.complete=function(t){w(u)&&u(t,l.file,l.inputElem),o()},a.parse(l.file,l.instanceConfig)}else w(t.complete)&&t.complete()}function o(){i.splice(0,1),r()}}}function l(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=b(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new f(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,n){if(this.isFirstChunk&&w(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(t);void 0!==r&&(t=r)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+t;this._partialLine="";var s=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=s.meta.cursor;this._finished||(this._partialLine=o.substring(l-this._baseIndex),this._baseIndex=l),s&&s.data&&(this._rowCount+=s.data.length);var c=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(i)e.postMessage({results:s,workerId:a.WORKER_ID,finished:c});else if(w(this._config.chunk)&&!n){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);s=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),this._completed||!c||!w(this._config.complete)||s&&s.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),c||s&&s.meta.paused||this._nextChunk(),s}this._halted=!0},this._sendError=function(t){w(this._config.error)?this._config.error(t):i&&this._config.error&&e.postMessage({workerId:a.WORKER_ID,error:t,finished:!1})}}function c(t){var e;(t=t||{}).chunkSize||(t.chunkSize=a.RemoteChunkSize),l.call(this,t),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),n||(e.onload=_(this._chunkLoaded,this),e.onerror=_(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var i in t)e.setRequestHeader(i,t[i])}if(this._config.chunkSize){var r=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+r)}try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}n&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substring(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){var n=e.statusText||t;this._sendError(new Error(n))}}function u(t){var e,n;(t=t||{}).chunkSize||(t.chunkSize=a.LocalChunkSize),l.call(this,t);var i="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,i?((e=new FileReader).onload=_(this._chunkLoaded,this),e.onerror=_(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var r=Math.min(this._start+this._config.chunkSize,this._input.size);t=n.call(t,this._start,r)}var o=e.readAsText(t,this._config.encoding);i||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function h(t){var e;l.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,n=this._config.chunkSize;return n?(t=e.substring(0,n),e=e.substring(n)):(t=e,e=""),this._finished=!e,this.parseChunk(t)}}}function d(t){l.call(this,t=t||{});var e=[],n=!0,i=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){i&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):n=!0},this._streamData=_((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=_((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=_((function(){this._streamCleanUp(),i=!0,this._streamData("")}),this),this._streamCleanUp=_((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function f(t){var e,n,i,r=Math.pow(2,53),o=-r,s=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,l=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,c=this,u=0,h=0,d=!1,f=!1,m=[],v={data:[],errors:[],meta:{}};if(w(t.step)){var y=t.step;t.step=function(e){if(v=e,k())x();else{if(x(),0===v.data.length)return;u+=e.data.length,t.preview&&u>t.preview?n.abort():(v.data=v.data[0],y(v,c))}}}function _(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function x(){return v&&i&&(S("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),i=!1),t.skipEmptyLines&&(v.data=v.data.filter((function(t){return!_(t)}))),k()&&function(){if(v)if(Array.isArray(v.data[0])){for(var e=0;k()&&e<v.data.length;e++)v.data[e].forEach(n);v.data.splice(0,1)}else v.data.forEach(n);function n(e,n){w(t.transformHeader)&&(e=t.transformHeader(e,n)),m.push(e)}}(),function(){if(!v||!t.header&&!t.dynamicTyping&&!t.transform)return v;function e(e,n){var i,r=t.header?{}:[];for(i=0;i<e.length;i++){var o=i,a=e[i];t.header&&(o=i>=m.length?"__parsed_extra":m[i]),t.transform&&(a=t.transform(a,o)),a=C(o,a),"__parsed_extra"===o?(r[o]=r[o]||[],r[o].push(a)):r[o]=a}return t.header&&(i>m.length?S("FieldMismatch","TooManyFields","Too many fields: expected "+m.length+" fields but parsed "+i,h+n):i<m.length&&S("FieldMismatch","TooFewFields","Too few fields: expected "+m.length+" fields but parsed "+i,h+n)),r}var n=1;return!v.data.length||Array.isArray(v.data[0])?(v.data=v.data.map(e),n=v.data.length):v.data=e(v.data,0),t.header&&v.meta&&(v.meta.fields=m),h+=n,v}()}function k(){return t.header&&0===m.length}function C(e,n){return i=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[i]&&(t.dynamicTyping[i]=t.dynamicTypingFunction(i)),!0===(t.dynamicTyping[i]||t.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(t){if(s.test(t)){var e=parseFloat(t);if(o<e&&e<r)return!0}return!1}(n)?parseFloat(n):l.test(n)?new Date(n):""===n?null:n):n;var i}function S(t,e,n,i){var r={type:t,code:e,message:n};void 0!==i&&(r.row=i),v.errors.push(r)}this.parse=function(r,o,s){var l=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substring(0,1048576);var n=new RegExp(p(e)+"([^]*?)"+p(e),"gm"),i=(t=t.replace(n,"")).split("\r"),r=t.split("\n"),o=1<r.length&&r[0].length<i[0].length;if(1===i.length||o)return"\n";for(var a=0,s=0;s<i.length;s++)"\n"===i[s][0]&&a++;return a>=i.length/2?"\r\n":"\r"}(r,l)),i=!1,t.delimiter)w(t.delimiter)&&(t.delimiter=t.delimiter(r),v.meta.delimiter=t.delimiter);else{var c=function(e,n,i,r,o){var s,l,c,u;o=o||[",","\t","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var h=0;h<o.length;h++){var d=o[h],f=0,p=0,m=0;c=void 0;for(var v=new g({comments:r,delimiter:d,newline:n,preview:10}).parse(e),y=0;y<v.data.length;y++)if(i&&_(v.data[y]))m++;else{var b=v.data[y].length;p+=b,void 0!==c?0<b&&(f+=Math.abs(b-c),c=b):c=b}0<v.data.length&&(p/=v.data.length-m),(void 0===l||f<=l)&&(void 0===u||u<p)&&1.99<p&&(l=f,s=d,u=p)}return{successful:!!(t.delimiter=s),bestDelimiter:s}}(r,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);c.successful?t.delimiter=c.bestDelimiter:(i=!0,t.delimiter=a.DefaultDelimiter),v.meta.delimiter=t.delimiter}var u=b(t);return t.preview&&t.header&&u.preview++,e=r,n=new g(u),v=n.parse(e,o,s),x(),d?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,n.abort(),e=w(t.chunk)?"":e.substring(n.getCharIndex())},this.resume=function(){c.streamer._halted?(d=!1,c.streamer.parseChunk(e,!0)):setTimeout(c.resume,3)},this.aborted=function(){return f},this.abort=function(){f=!0,n.abort(),v.meta.aborted=!0,w(t.complete)&&t.complete(v),e=""}}function p(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(t){var e,n=(t=t||{}).delimiter,i=t.newline,r=t.comments,o=t.step,s=t.preview,l=t.fastMode,c=e=void 0===t.quoteChar||null===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(c=t.escapeChar),("string"!=typeof n||-1<a.BAD_DELIMITERS.indexOf(n))&&(n=","),r===n)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<a.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==i&&"\r"!==i&&"\r\n"!==i&&(i="\n");var u=0,h=!1;this.parse=function(t,a,d){if("string"!=typeof t)throw new Error("Input must be a string");var f=t.length,g=n.length,m=i.length,v=r.length,y=w(o),b=[],_=[],x=[],k=u=0;if(!t)return D();if(l||!1!==l&&-1===t.indexOf(e)){for(var C=t.split(i),S=0;S<C.length;S++){if(x=C[S],u+=x.length,S!==C.length-1)u+=i.length;else if(d)return D();if(!r||x.substring(0,v)!==r){if(y){if(b=[],P(x.split(n)),L(),h)return D()}else P(x.split(n));if(s&&s<=S)return b=b.slice(0,s),D(!0)}}return D()}for(var R=t.indexOf(n,u),O=t.indexOf(i,u),E=new RegExp(p(c)+p(e),"g"),A=t.indexOf(e,u);;)if(t[u]!==e)if(r&&0===x.length&&t.substring(u,u+v)===r){if(-1===O)return D();u=O+m,O=t.indexOf(i,u),R=t.indexOf(n,u)}else if(-1!==R&&(R<O||-1===O))x.push(t.substring(u,R)),u=R+g,R=t.indexOf(n,u);else{if(-1===O)break;if(x.push(t.substring(u,O)),I(O+m),y&&(L(),h))return D();if(s&&b.length>=s)return D(!0)}else for(A=u,u++;;){if(-1===(A=t.indexOf(e,A+1)))return d||_.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:u}),j();if(A===f-1)return j(t.substring(u,A).replace(E,e));if(e!==c||t[A+1]!==c){if(e===c||0===A||t[A-1]!==c){-1!==R&&R<A+1&&(R=t.indexOf(n,A+1)),-1!==O&&O<A+1&&(O=t.indexOf(i,A+1));var T=F(-1===O?R:Math.min(R,O));if(t.substr(A+1+T,g)===n){x.push(t.substring(u,A).replace(E,e)),t[u=A+1+T+g]!==e&&(A=t.indexOf(e,u)),R=t.indexOf(n,u),O=t.indexOf(i,u);break}var M=F(O);if(t.substring(A+1+M,A+1+M+m)===i){if(x.push(t.substring(u,A).replace(E,e)),I(A+1+M+m),R=t.indexOf(n,u),A=t.indexOf(e,u),y&&(L(),h))return D();if(s&&b.length>=s)return D(!0);break}_.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:b.length,index:u}),A++}}else A++}return j();function P(t){b.push(t),k=u}function F(e){var n=0;if(-1!==e){var i=t.substring(A+1,e);i&&""===i.trim()&&(n=i.length)}return n}function j(e){return d||(void 0===e&&(e=t.substring(u)),x.push(e),u=f,P(x),y&&L()),D()}function I(e){u=e,P(x),x=[],O=t.indexOf(i,u)}function D(t){return{data:b,errors:_,meta:{delimiter:n,linebreak:i,aborted:h,truncated:!!t,cursor:k+(a||0)}}}function L(){o(D()),b=[],_=[]}},this.abort=function(){h=!0},this.getCharIndex=function(){return u}}function m(t){var e=t.data,n=r[e.workerId],i=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){i=!0,v(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(w(n.userStep)){for(var a=0;a<e.results.data.length&&(n.userStep({data:e.results.data[a],errors:e.results.errors,meta:e.results.meta},o),!i);a++);delete e.results}else w(n.userChunk)&&(n.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!i&&v(e.workerId,e.results)}function v(t,e){var n=r[t];w(n.userComplete)&&n.userComplete(e),n.terminate(),delete r[t]}function y(){throw new Error("Not implemented.")}function b(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var n in t)e[n]=b(t[n]);return e}function _(t,e){return function(){t.apply(e,arguments)}}function w(t){return"function"==typeof t}return i&&(e.onmessage=function(t){var n=t.data;if(void 0===a.WORKER_ID&&n&&(a.WORKER_ID=n.workerId),"string"==typeof n.input)e.postMessage({workerId:a.WORKER_ID,results:a.parse(n.input,n.config),finished:!0});else if(e.File&&n.input instanceof File||n.input instanceof Object){var i=a.parse(n.input,n.config);i&&e.postMessage({workerId:a.WORKER_ID,results:i,finished:!0})}}),(c.prototype=Object.create(l.prototype)).constructor=c,(u.prototype=Object.create(l.prototype)).constructor=u,(h.prototype=Object.create(h.prototype)).constructor=h,(d.prototype=Object.create(l.prototype)).constructor=d,a},void 0===(i=n.apply(e,[]))||(t.exports=i)},86910:function(e){"use strict";e.exports=t}},n={};function i(t){var r=n[t];if(void 0!==r)return r.exports;var o=n[t]={id:t,loaded:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,{a:e}),e},i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t};var r={};return function(){"use strict";i.d(r,{default:function(){return Io}});var t={};i.r(t),i.d(t,{baseEditFetchComponents:function(){return m},getConditionOperatorOptions:function(){return x},getConditionOperators:function(){return S},getConditionValueComponentRequiredProperties:function(){return C},modifyConditionValueComponent:function(){return k},simpleConditionalComponents:function(){return R},transformSimpleCondition:function(){return w},transformSimpleConditions:function(){return b}});var e,n,o=i(86910),a=i(96486),s=i.n(a),l=function(){function t(t){void 0===t&&(t={}),this.options=a.merge({},this.defaultOptions,t)}return Object.defineProperty(t,"key",{get:function(){return"fetch"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"displayName",{get:function(){return"Fetch"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"availableToSourceOptions",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultOptions",{get:function(){return{}},enumerable:!1,configurable:!0}),t.prototype.getData=function(t){return new o.Formio.Promise((function(t,e){t()}))},t}(),c=(e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},e(t,n)},function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),u=function(t){function e(e){var n=t.call(this,e)||this;return n.dataPromiseResolve=function(){return null},n}return c(e,t),Object.defineProperty(e,"key",{get:function(){return"indexeddb"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"displayName",{get:function(){return"IndexedDB"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"availableToSourceOptions",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.getData=function(t){var e=this,n=new Formio.Promise((function(t){e.dataPromiseResolve=t}));if(window&&window.indexedDB&&this.options.indexeddb&&this.options.indexeddb.database&&this.options.indexeddb.table){var i=window.indexedDB.open(this.options.indexeddb.database);i.onupgradeneeded=function(t){if(e.options.customOptions){var n=t.target.result;n.createObjectStore(e.options.indexeddb.table,{keyPath:"myKey",autoIncrement:!0}).transaction.oncomplete=function(){var t=n.transaction(e.options.indexeddb.table,"readwrite");e.options.customOptions.forEach((function(n){t.objectStore(e.options.indexeddb.table).put(n)}))}}},i.onerror=function(){console.log(i.errorCode),null===window||void 0===window||window.alert(i.errorCode)},i.onsuccess=function(t){var n=t.target.result.transaction(e.options.indexeddb.table,"readwrite").objectStore(e.options.indexeddb.table);new Formio.Promise((function(t){var e=[];n.getAll().onsuccess=function(n){n.target.result.forEach((function(t){e.push(t)})),t(e)}})).then((function(t){return e.dataPromiseResolve(t)}))}}else this.dataPromiseResolve();return n},e}(l),h=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),Object.defineProperty(e,"key",{get:function(){return"url"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"displayName",{get:function(){return"URL"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"availableToSourceOptions",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.serialize=function(t){var e=this;return t&&a.isPlainObject(t)?a.chain(t).map((function(t,n){return a.isArray(t)?a.chain(t).map((function(t){return e.getParam(n,t)})).join("&").value():e.getParam(n,t)})).join("&").value():""},e.prototype.updatedComparedValue=function(t){return a.isString(t)?t.split("").map((function(t){return["(",")"].includes(t)?"\\"+t:t})).join(""):t},e.prototype.getParam=function(t,e){var n={key:"",value:""};if(a.isPlainObject(e)&&e.hasOwnProperty("value")&&e.hasOwnProperty("comparedValue")){var i=e.value,r=e.comparedValue;switch(t){case"equal":default:n={key:i,value:r};break;case"notEqual":n={key:i+"__ne",value:r};break;case"startsWith":n={key:i+"__regex",value:"/^"+this.updatedComparedValue(r)+"/i"};break;case"contain":n={key:i+"__regex",value:"/"+this.updatedComparedValue(r)+"/i"};break;case"notContain":n={key:i+"__regex",value:"/^((?!"+this.updatedComparedValue(r)+").)*$/i"};break;case"endsWith":n={key:i+"__regex",value:"/"+this.updatedComparedValue(r)+"$/i"};break;case"matches":n={key:i+"__regex",value:r};break;case"gt":n={key:i+"__gt",value:r};break;case"gte":n={key:i+"__gte",value:r};break;case"lt":n={key:i+"__lt",value:r};break;case"lte":n={key:i+"__lte",value:r};break;case"exists":n={key:i+"__exists",value:r}}}else switch(t){case"sort":var o=e.value;n={key:"sort",value:(e.asc?"":"-")+o};break;case"limit":n={key:"limit",value:e};break;case"skip":n={key:"skip",value:e};break;default:n={key:t,value:e}}return encodeURIComponent(n.key)+"="+encodeURIComponent(n.value)},e.prototype.getRequestHeaders=function(){var t=new o.Formio.Headers;if(!a.isEmpty(this.options.headers))try{a.each(this.options.headers,(function(e){e.key&&t.set(e.key,e.value)}))}catch(t){console.warn(t.message)}return t},e.prototype.getRequestUrl=function(t){void 0===t&&(t={});var e=this.options.url;if(!e)return console.warn("URL is not defined in URL Fetch Provider."),"";var n=this.serialize(t),i=a.split(e,"?"),r=i[0],o=i[1];return r+"?"+n+(n&&o?"&":"")+(o||"")},e.prototype.makeRequest=function(t){var e=this.options,n=e.method,i=e.body,r=e.addFormioToken,a=e.ignoreCache,s=this.getRequestUrl(t);return s?o.Formio.makeStaticRequest(s,n,i,{headers:this.getRequestHeaders(),noToken:!r,ignoreCache:a}):o.Formio.Promise.resolve()},e.prototype.getData=function(t){return t=t||{},this.makeRequest(t)},e}(l),f=((n={})[l.key]=l,n[d.key]=d,n[u.key]=u,n);o.Providers.addProviders("fetch",f);var p=f,g=function(){return g=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},g.apply(this,arguments)},m=function(t){void 0===t&&(t=[]);var e=[{type:"select",input:!0,weight:0,tooltip:"The source to get the data. You can fetch from a URL or use javascript to get the value.",key:"dataSrc",defaultValue:"url",label:"Data Source Type",dataSrc:"values",data:{values:a.chain(p).filter((function(t){return t.availableToSourceOptions})).map((function(t){return{label:t.displayName,value:t.key}})).value()}},{type:"checkbox",input:!0,weight:9,key:"indexeddb.fromExisting",label:"Choose from existing databases?",defaultValue:!1,tooltip:"Check it if you want to select an existing database.",conditional:{json:{in:[{var:"data.dataSrc"},["indexeddb"]]}}},{type:"textfield",weight:10,input:!0,key:"indexeddb.database",label:"Database name",forceOverride:!0,tooltip:"The name of the indexeddb database.",conditional:{json:{and:[{in:[{var:"data.dataSrc"},["indexeddb"]]},{"!==":[{var:"data.indexeddb.fromExisting"},!0]}]}}},{type:"textfield",input:!0,key:"indexeddb.table",label:"Table name",forceOverride:!0,weight:16,tooltip:"The name of table in the indexeddb database.",conditional:{json:{and:[{in:[{var:"data.dataSrc"},["indexeddb"]]},{"!==":[{var:"data.indexeddb.fromExisting"},!0]}]}}},{type:"select",input:!0,key:"indexeddb.database",label:"Existing Database name",weight:10,tooltip:"The name of the existing indexeddb database.",dataSrc:"custom",valueProperty:"value",skipMerge:!0,data:{custom:function(t){if(!window||!window.indexedDB)return console.log("Your environment does not support indexedDB"),null===window||void 0===window||window.alert("Your environment does not support indexedDB"),[];var e=window.indexedDB.databases().then((function(t){return t.map((function(t){var e=t.name;return{value:e,label:e}}))}));return e}},conditional:{json:{"===":[{var:"data.indexeddb.fromExisting"},!0]}}},{type:"select",input:!0,key:"indexeddb.table",label:"Existing Table name",refreshOn:"indexeddb.database",clearOnRefresh:!0,weight:16,tooltip:"The name of an existing table in the indexeddb database.",dataSrc:"custom",valueProperty:"value",skipMerge:!0,data:{custom:function(t){if(!window||!window.indexedDB)return console.log("Your environment does not support indexedDB"),null===window||void 0===window||window.alert("Your environment does not support indexedDB"),[];var e=t.data.indexeddb.database;return e?new Promise((function(t){var n=window.indexedDB.open(e);n.onsuccess=function(e){var n=e.target.result.objectStoreNames;if(n.length){var i=Array.from(n).map((function(t){return{value:t,label:t}}));t(i)}else t([])},n.onerror=function(){return t([])}})):[]}},conditional:{json:{"===":[{var:"data.indexeddb.fromExisting"},!0]}}},{type:"textfield",input:!0,key:"fetch.url",weight:10,label:"Data Source URL",placeholder:"Data Source URL",tooltip:"A URL that returns data. You can interpolate form data using curly bracket notation.",clearOnHide:!0,validate:{required:!0},conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"select",input:!0,label:"Method",key:"fetch.method",clearOnHide:!0,tooltip:"The HTTP Request method to use when making the request.",defaultValue:"get",weight:11,template:"<span>{{ item.label }}</span>",dataSrc:"values",data:{values:[{label:"Get",value:"get"},{label:"Post",value:"post"}]},conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"datagrid",input:!0,label:"Request Headers",key:"fetch.headers",tooltip:"Set any headers that should be sent along with the request to the url. This is useful for authentication.",weight:12,components:[{label:"Key",key:"key",input:!0,type:"textfield"},{label:"Value",key:"value",input:!0,type:"textfield"}],clearOnHide:!0,conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"panel",title:"Transform data",theme:"default",collapsible:!0,collapsed:!0,key:"specifyMapFunction",weight:1e3,tooltip:"Write custom code to transform DataSource data.",components:[{type:"htmlelement",tag:"div",content:'<p>The following variables are available in all scripts.</p><table class="table table-bordered table-condensed table-striped"><tr><th>form</th><td>The complete form JSON object</td></tr><tr><th>submission</th><td>The complete submission object.</td></tr><tr><th>data</th><td>The complete submission data object.</td></tr><tr><th>responseData</th><td>The data object form response.</td></tr><tr><th>row</th><td>Contextual "row" data, used within DataGrid, EditGrid, and Container components</td></tr><tr><th>component</th><td>The current component JSON</td></tr><tr><th>instance</th><td>The current component instance.</td></tr><tr><th>value</th><td>The current value of the component.</td></tr><tr><th>moment</th><td>The moment.js library for date manipulation.</td></tr><tr><th>_</th><td>An instance of <a href="https://lodash.com/docs/" target="_blank" rel="noopener noreferrer">Lodash</a>.</td></tr><tr><th>utils</th><td>An instance of the <a href="http://formio.github.io/formio.js/docs/identifiers.html#utils" target="_blank" rel="noopener noreferrer">FormioUtils</a> object.</td></tr><tr><th>util</th><td>An alias for "utils".</td></tr></table><br/>'},{type:"textarea",key:"fetch.mapFunction",rows:5,editor:"ace",hideLabel:!0,input:!0,placeholder:"value = responseData.map(i => i.title);"},{type:"htmlelement",tag:"div",content:"<p>Enter custom javascript code.</p><p><h4>Example:</h4><pre>value = responseData.map(i => i.title);</pre></p>"}]},{type:"checkbox",input:!0,key:"fetch.forwardHeaders",label:"Forward Headers",tooltip:"Check this if you would like to forward the headers passed to the server to the fetch endpoint.",clearOnHide:!0,conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"checkbox",input:!0,weight:26,key:"fetch.authenticate",label:"Form.io Authentication",tooltip:"Check this if you would like to pass Form.io Authentication headers with the request.",clearOnHide:!0,conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"panel",title:"POST Body Specification",theme:"default",collapsible:!0,collapsed:!0,key:"specifyPostBodyPanel",weight:1e3,tooltip:"Write custom code to specify POST Body.",conditional:{json:{and:[{"===":[{var:"data.dataSrc"},"url"]},{"===":[{var:"data.fetch.method"},"post"]}]}},components:[{type:"htmlelement",tag:"div",content:'<p>The following variables are available in all scripts.</p><table class="table table-bordered table-condensed table-striped"><tr><th>form</th><td>The complete form JSON object</td></tr><tr><th>submission</th><td>The complete submission object.</td></tr><tr><th>data</th><td>The complete submission data object.</td></tr><tr><th>row</th><td>Contextual "row" data, used within DataGrid, EditGrid, and Container components</td></tr><tr><th>component</th><td>The current component JSON</td></tr><tr><th>instance</th><td>The current component instance.</td></tr><tr><th>value</th><td>The current value of the component.</td></tr><tr><th>moment</th><td>The moment.js library for date manipulation.</td></tr><tr><th>_</th><td>An instance of <a href="https://lodash.com/docs/" target="_blank" rel="noopener noreferrer">Lodash</a>.</td></tr><tr><th>utils</th><td>An instance of the <a href="http://formio.github.io/formio.js/docs/identifiers.html#utils" target="_blank" rel="noopener noreferrer">FormioUtils</a> object.</td></tr><tr><th>util</th><td>An alias for "utils".</td></tr></table><br/>'},{type:"textarea",key:"fetch.specifyPostBody",rows:5,editor:"ace",hideLabel:!0,input:!0,placeholder:"body = {\n  data: {\n    b: data.a,\n    submit: true,\n  },\n}"},{type:"htmlelement",tag:"div",content:"<p>Enter custom javascript code.</p><p><h4>Example:</h4><pre>body = {\n  data: {\n    b: data.a,\n    submit: true,\n  },\n};</pre></p>"}]},{type:"checkbox",input:!0,weight:1001,key:"allowCaching",label:"Enable to Store Request Result in the Cache",defaultValue:!0,tooltip:"When checked, the requests and its results will be stored in the cache and if the Select will try to make the request to the same URL with the same paremetrs, the cached data will be returned. It allows to increase performance, but if the remote source's data is changing quite often and you always need to keep it up-to-date, uncheck this option.",conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}}];return a.each(t,(function(t){var n=a.find(e,(function(e){return e.key===t.key}));n?a.assign(n,t):e.push(t)})),a.filter(e,(function(t){return!t.ignore}))};function v(t){void 0===t&&(t={});var e=t.when,n=t.conditions,i=void 0===n?[]:n;return e||a.some(i,(function(t){return y(t)}))}function y(t){void 0===t&&(t={});var e=!!t.when,n=e?t.eq:t.value,i=(e?t.when:t.component)||"";return a.isBoolean(function(t){try{return JSON.parse(t)}catch(e){return t}}(n))&&i.split(".").length>1&&(e||"isEqual"===t.operator)}function b(t,e){void 0===e&&(e=[]);var n,i=t.conditional,r=t.logic,s=void 0===r?[]:r;v(i)&&w(i,n=o.Utils.flattenComponents(e,!0)),a.each(s,(function(t){var i=t.trigger,r=void 0===i?{}:i;"simple"===r.type&&v(r.simple)&&(n||(n=o.Utils.flattenComponents(e,!0)),w(r.simple,n))}))}function _(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),y&&!a.isEmpty(e)){for(var n,i=!!t.when,r=i?t.when:t.component,o=a.split(r,"."),s=[];!n&&o.length;)(n=e[""+o.join(".")])||s.unshift(o.pop());if(n&&"selectboxes"===n.type&&s.length){var l=o.join("."),c=s.join(".");i?(t.when=l,t.eq=c):(console.warn("Condition based on selectboxes has wrong format. Resave the form in the form builder to fix it."),t.component=l,t.value=c)}}}function w(t,e){void 0===t&&(t={}),void 0===e&&(e={});var n=t.conditions,i=void 0===n?[]:n;if(i.length)a.each(i,(function(t){_(t,e)}));else{_(t,e);var r=t.show,o=void 0===r||r,s=t.when,l=void 0===s?"":s,c=t.eq,u={show:o,conjunction:"all",conditions:[{component:l,operator:"isEqual",value:void 0===c?"":c}]};a.each(["when","eq"],(function(e){return a.unset(t,e)})),a.each(u,(function(e,n){return a.set(t,n,e)}))}}function x(t){return void 0===t&&(t=[]),a.chain(t).map((function(t){var e=o.Utils.ConditionOperators[t];return e?{label:e.displayedName,value:e.operatorKey}:null})).filter((function(t){return!!t})).value()}function k(t){var e,n=t.instance,i=t.utils,r=t.row.component,s=i.getComponent(n.options.editForm.components,r)||{},l=((null===(e=o.Formio.Components.components[s.type||"base"])||void 0===e?void 0:e.conditionOperatorsSettings)||{}).valueComponent,c=(void 0===l?function(){return{type:"textfield"}}:l)(s);return a.each(["logic","prefix","suffix","action","defaultValue","conditional","hideLabel","multiple","calculateValue","validate","hidden","customConditional","disabled","description","tooltip","inputMask"],(function(t){return a.unset(c,t)})),g(g({},c),C())}function C(){return{label:"Value:",key:"value",placeholder:"Enter Compared Value",input:!0,validateOn:"change",typeChangeEnabled:!0,logic:[{name:"check if row component is defined",trigger:{type:"javascript",javascript:"result = true || row.component;"},actions:[{name:"change value component",type:"mergeComponentSchema",schemaDefinition:function(t){return k(t)}}]},{name:"clear value on empty operator",trigger:{type:"javascript",javascript:"result = !row.operator && row[component.key];"},actions:[{name:"clear value",type:"customAction",customAction:"instance.resetValue()"}]}],customConditional:"\n      const singleOperators = _.chain(utils.ConditionOperators)\n        .map(operator => {\n          return !operator.requireValue\n          ? operator.operatorKey\n          : null;\n        })\n        .filter(operatorKey => !!operatorKey)\n        .value();\n      show = !_.includes(singleOperators, row.operator);\n    "}}function S(t){var e,n,i,r=t.utils,a=t.row,s=t.instance,l=r.getComponent(s.options.editForm.components,a.component),c=null!==(e=null==l?void 0:l.type)&&void 0!==e?e:"base",u=o.Formio.Components.components[c],h=null!==(n=null==u?void 0:u.conditionOperatorsSettings)&&void 0!==n?n:{},d=null==l?void 0:l.dataType,f=h.operators,p=void 0===f?[]:f,g=h.dataTypeOperators;return x(function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}(p,null!==(i=(void 0===g?{}:g)[d])&&void 0!==i?i:[]))}function R(t){return[g({label:"Show or Hide this field",widget:"choicesjs",tableView:!0,dataType:"boolean",data:{values:[{label:"Show This Field",value:!0},{label:"Hide This Field",value:!1}]},key:(t?"":"conditional.")+"show",type:"select",input:!0},t?{type:"hidden",defaultValue:!0}:{}),{label:"When",widget:"choicesjs",tableView:!0,data:{values:[{label:"When all conditions are met",value:"all"},{label:"When any condition is met",value:"any"}]},key:(t?"":"conditional.")+"conjunction",type:"select",input:!0},{label:"Conditions",addAnotherPosition:"bottom",key:(t?"":"conditional.")+"conditions",type:"editgrid",initEmpty:!0,addAnother:"Add Condition",templates:{header:"<div class=\"row\">\n      {% util.eachComponent(components, function(component) { %}\n        {% if (displayValue(component)) { %}\n          <div class=\"col-sm-{{_.includes(['component'], component.key) ? '4' : '3'}}\">{{ t(component.label) }}</div>\n        {% } %}\n      {% }) %}\n    </div>",row:'<div class="row">\n      {% util.eachComponent(components, function(component) { %}\n        {% if (displayValue(component)) { %}\n          <div class="formio-builder-condition-text col-sm-{{_.includes([\'component\'], component.key) ? \'4\' : \'3\'}}">\n            {{ isVisibleInRow(component) ? getView(component, row[component.key]) : \'\'}}\n          </div>\n        {% } %}\n      {% }) %}\n      {% if (!instance.options.readOnly && !instance.disabled) { %}\n        <div class="col-sm-2">\n          <div class="btn-group pull-right">\n            <button class="btn btn-default btn-light btn-sm editRow"><i class="{{ iconClass(\'edit\') }}"></i></button>\n            {% if (!instance.hasRemoveButtons || instance.hasRemoveButtons()) { %}\n              <button class="btn btn-danger btn-sm removeRow"><i class="{{ iconClass(\'trash\') }}"></i></button>\n            {% } %}\n          </div>\n        </div>\n      {% } %}\n    </div>'},input:!0,components:[{label:"When:",widget:"choicesjs",tableView:!0,dataSrc:"custom",valueProperty:"value",placeholder:"Select Form Component",lazyLoad:!1,data:{custom:function(t){return function(t){var e=[],n=["form","datasource","button","reviewpage","password","datamap"],i=["address"];return o.Utils.eachComponent(t.instance.options.editForm.components,(function(r,o){var s=a.includes(r.type,i),l=!r.tree||s;return r.key!==t.data.key&&l&&!a.includes(n,r.type)&&e.push({label:(r.label||r.key)+" ("+o+")",value:o}),s})),e}(t)}},key:"component",type:"select",input:!0},{label:"Is:",widget:"choicesjs",tableView:!0,dataSrc:"custom",lazyLoad:!1,placeholder:"Select Comparison Operator",refreshOn:(t?"logic.trigger.simple.":"conditional.")+"conditions.component",clearOnRefresh:!0,valueProperty:"value",data:{custom:function(t){var e,n,i=t.utils,r=t.row,a=t.instance,s=i.getComponent(a.options.editForm.components,r.component),l=s?s.type:"base";return x((null===(n=null===(e=o.Formio.Components.components[l])||void 0===e?void 0:e.conditionOperatorsSettings)||void 0===n?void 0:n.operators)||[])}},key:"operator",type:"select",input:!0},g({type:"textfield",inputFormat:"plain"},C())]}]}var O=[{key:"logic",components:[{key:"triggerPanel",components:[{key:"trigger",components:[{key:"simple",components:function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}([{key:"when",ignore:!0},{key:"eq",ignore:!0}],R(!0))}]}]}]}],E=[{key:"simple-conditional",components:function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}([{key:"conditional.when",ignore:!0},{key:"conditional.eq",ignore:!0}],R(!1))}],A=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},T=o.Components.components.component.editForm;function M(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return T.apply(void 0,A([[{key:"conditional",components:E},{key:"logic",components:O}]],t))}var P=t,F=o.Components.components.component;F.prototype.afterComponentAssign=function(){var t,e,n,i,r;this.builderMode&&P.transformSimpleConditions(this.component,(null===(e=null===(t=this.root)||void 0===t?void 0:t._form)||void 0===e?void 0:e.components)||(null===(r=null===(i=null===(n=this.options)||void 0===n?void 0:n.root)||void 0===i?void 0:i._form)||void 0===r?void 0:r.components))},o.Components.baseEditForm=M,F.editForm=M;var j=F,I=[{weight:0,type:"textfield",input:!0,key:"label",label:"Label",placeholder:"Field Label",tooltip:"The label for this field.",validate:{required:!0}},{key:"multiple",ignore:!0},{key:"defaultValue",ignore:!0},{key:"dbIndex",ignore:!0},{key:"allowCalculateOverride",ignore:!0},{key:"customDefaultValuePanel",ignore:!0},{key:"calculateValuePanel",ignore:!0}],D=P.baseEditFetchComponents(),L=[{type:"checkbox",input:!0,key:"trigger.init",label:"Trigger on form init",tooltip:"When enabled the request will be made when the form is initialized.",weight:15},{type:"checkbox",input:!0,key:"trigger.server",label:"Trigger on server",tooltip:"When enabled the request will be made on the server during validation.",description:"Async requests on the server can slow down processing since the server must wait for a response before proceeding. Do not add too many server side requests or performance will suffer.",weight:15},{type:"select",input:!0,key:"refreshOn",label:"Trigger on Data change",weight:10,tooltip:"Refresh data when another field changes.",dataSrc:"custom",valueProperty:"value",data:{custom:function(t){var e=[];return e.push({label:"Any Change",value:"data"}),t.utils.eachComponent(t.instance.options.editForm.components,(function(n,i){n.key!==t.data.key&&e.push({label:n.label||n.key,value:i})})),e}}},{type:"select",input:!0,key:"refreshOnBlur",label:"Trigger on blur of Component",weight:10,tooltip:"Refresh data when another field was blured.",dataSrc:"custom",valueProperty:"value",data:{custom:function(t){var e=[];return e.push({label:"Any Change",value:"data"}),t.utils.eachComponent(t.instance.options.editForm.components,(function(n,i){n.key!==t.data.key&&e.push({label:n.label||n.key,value:i})})),e}}},{type:"textfield",label:"Trigger on Event",key:"refreshOnEvent",input:!0,weight:110,tooltip:"Refresh data when this event is fired."},{type:"textfield",label:"Triggered Event",key:"event",input:!0,weight:120,tooltip:"The event to fire when triggered.",description:"When in a datagrid or editgrid, { { rowIndex } } is available for interpolation to target a specific row."}],z=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},V=o.Components.components.component.editForm;function B(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return V.apply(void 0,z([[{key:"data",components:I},{label:"Trigger",key:"trigger",weight:10,components:L},{label:"Fetch",key:"fetch",weight:20,components:D},{key:"display",ignore:!0},{key:"validation",ignore:!0},{key:"layout",ignore:!0},{key:"addons",ignore:!0}]],t))}var W,U=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),N=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},q=o.Components.components.component,H=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return U(e,t),Object.defineProperty(e,"builderInfo",{get:function(){return{title:"Data Source",icon:"cloud",group:"premium",documentation:"/userguide/forms/premium-components#data-source",weight:30,schema:e.schema()}},enumerable:!1,configurable:!0}),e.savedValueTypes=function(t){return"server"===(t=t||{}).persistent?[o.Utils.componentValueTypes.any]:[]},Object.defineProperty(e.prototype,"requestHeaders",{get:function(){var t,e=this,n=!1,i=a.map((null===(t=this.component.fetch)||void 0===t?void 0:t.headers)||[],(function(t){return t.value=e.interpolate(t.value),"Content-type"===t.key&&(n=!0),t}));return"POST"!==this.reqMethod||n||i.push({key:"Content-type",value:"application/json"}),i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reqMethod",{get:function(){return o.Utils._.get(this.component,"fetch.method","get").toUpperCase()},enumerable:!1,configurable:!0}),e.schema=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return q.schema.apply(q,N([{label:"Data Source",key:"dataSource",type:"datasource",persistent:"client-only"}],t))},e.prototype.allowRefresh=function(t){return this.options.pdf||!this.options.readOnly&&!(null==t?void 0:t.fromSubmission)&&!this.builderMode&&!this.options.inFormBuilder&&!this.options.preview},e.prototype.init=function(){return o.Utils._.get(this.component,"trigger.init",!1)&&this.refresh(),t.prototype.init.call(this)},e.prototype.render=function(){return this.builderMode?t.prototype.render.call(this,this.component.label||"Data Source"):t.prototype.render.call(this," ")},e.prototype.attach=function(e){return this.attachRefreshOnBlur(),this.attachRefreshOnEvent(),t.prototype.attach.call(this,e)},e.prototype.attachRefreshOnBlur=function(){var t=this;this.component.refreshOnBlur&&this.on("blur",(function(e){t.checkRefreshOn([{instance:e,value:e.dataValue}],{fromBlur:!0})}))},e.prototype.attachRefreshOnEvent=function(){var t=this;this.component.refreshOnEvent&&this.on(this.component.refreshOnEvent,(function(){return t.refresh()}))},e.prototype.dettachRefreshOnBlur=function(){this.component.refreshOnBlur&&this.off("blur")},e.prototype.dettachRefreshOnEvent=function(){this.component.refreshOnEvent&&this.off(this.component.refreshOnEvent)},e.prototype.refresh=function(t,e,n){if(this.allowRefresh(n))switch(this.component.dataSrc){case"url":this.getDataFromUrl(n);break;case"indexeddb":if(!window||!window.indexedDB)return console.log("Your environment does not support indexedDB"),void(null===window||void 0===window||window.alert("Your environment does not support indexedDB"));this.getDataFromIndexedDb(n),this.getDataFromIndexedDb(n)}},e.prototype.getDataFromUrl=function(t){var e,n=this,i=o.Providers.getProvider("fetch",this.component.dataSrc),r=Promise.resolve();if(i){var a=null;!!o.Utils._.get(this.component,"fetch.specifyPostBody","")&&"POST"===this.reqMethod&&(a=this.specifyBody()),r=new i({headers:this.requestHeaders,url:this.interpolate(this.component.fetch.url),addFormioToken:this.component.fetch&&this.component.fetch.authenticate,ignoreCache:!this.component.allowCaching,method:this.reqMethod,body:a}).getData()}Promise.all([r,(null===(e=this.root)||void 0===e?void 0:e.formReady)?this.root.formReady:Promise.resolve()]).then((function(e){setTimeout((function(){n.assign(e[0],t)}))})).catch((function(t){n.emit("requestError",t),console.warn(t)}))},e.prototype.getDataFromIndexedDb=function(t){var e=this,n=o.Providers.getProvider("fetch",this.component.dataSrc);if(n){var i=this.component;new n({indexeddb:i.indexeddb,customOptions:i.customOptions}).getData().then((function(n){return e.assign(n,t)}))}},e.prototype.assign=function(t,e){t=this.mapData(t),o.Utils._.isEqual(this.dataValue,t)||(this.dataValue=t,this.triggerChange(e&&e.fromSubmission?{dataSourceInitialLoading:!0}:null)),this.component.event&&this.emitEvents()},e.prototype.emitEvents=function(){this.emit(this.interpolate(this.component.event),this.data),this.events.emit(this.interpolate(this.component.event),this.data),this.emit("customEvent",{type:this.interpolate(this.component.event),component:this.component,data:this.data})},e.prototype.validateMultiple=function(){return!1},e.prototype.specifyBody=function(){var t=null;try{t=this.evaluate(this.component.fetch.specifyPostBody,{value:this.dataValue,row:this.data,data:this.rootValue,component:this.component},"body")}catch(e){t=null}return t},e.prototype.mapData=function(t){var e=o.Utils._.get(this.component,"fetch.mapFunction");if(!e)return t;var n=null;try{n=this.evaluate(e,{responseData:t,value:this.dataValue,row:this.data,data:this.rootValue,component:this.component},"value")}catch(t){n=null}return n},e.prototype.destroy=function(){return this.dettachRefreshOnBlur(),this.dettachRefreshOnEvent(),t.prototype.destroy.call(this)},e.editForm=B,e}(q),G=H,Z={move:"M",line:"L",curve:"C",arc:"A",close:"Z"};"undefined"!=typeof window?W=window:void 0!==i.g?W=i.g:"undefined"!=typeof self&&(W=self);var K,Y=W,X=function(t){return{translateX:t.e,translateY:t.f,scaleX:Math.sqrt(t.a*t.a+t.b*t.b),scaleY:Math.sqrt(t.c*t.c+t.d*t.d),rotation:180*Math.atan2(t.b,t.a)/Math.PI}},$=function(t){K=t},J=function(t,e){e=e&&e.identity()||new K;for(var n=t,i=[];n&&n._matrix;)i.push(n._matrix),n=n.parent;i.reverse();for(var r=0;r<i.length;r++){var o=i[r].elements;e.multiply(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9])}return e},Q=function(t,e,n){return n*(e-t)+t},tt=function(t,e){for(;t<0;)t+=e;return t%e},et=Y.Float32Array||Array,nt=function(t){return Math.floor(1e6*t)/1e6},it=Object.freeze({__proto__:null,decomposeMatrix:X,getComputedMatrix:J,setMatrix:$,lerp:Q,mod:tt,NumArray:et,toFixed:nt}),rt=Array.prototype.slice,ot={isNaN:function(t){return"number"==typeof t&&t!==+t},isElement:function(t){return!(!t||1!==t.nodeType)},isObject:function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},extend:function(t){for(var e=rt.call(arguments,1),n=0;n<e.length;n++){var i=e[n];for(var r in i)t[r]=i[r]}return t},defaults:function(t){for(var e=rt.call(arguments,1),n=0;n<e.length;n++){var i=e[n];for(var r in i)void 0===t[r]&&(t[r]=i[r])}return t},each:function(t,e,n){for(var i=n||this,r=!function(t){if(null==t)return!1;var e=t.length;return"number"==typeof e&&e>=0&&e<4294967296}(t)&&Object.keys(t),o=(r||t).length,a=0;a<o;a++){var s=r?r[a]:a;e.call(i,t[s],s,t)}return t},performance:Y.performance&&Y.performance.now?Y.performance:Date},at=function(t,e,n){var i;switch(n.length){case 0:i=function(i){e[i].call(t,n[0])};break;case 1:i=function(i){e[i].call(t,n[0],n[1])};break;case 2:i=function(i){e[i].call(t,n[0],n[1],n[2])};break;case 3:i=function(i){e[i].call(t,n[0],n[1],n[2],n[3])};break;default:i=function(i){e[i].apply(t,n)}}for(var r=0;r<e.length;r++)i(r)},st={on:function(t,e){return this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push(e),this},off:function(t,e){if(!this._events)return this;if(!t&&!e)return this._events={},this;for(var n=t?[t]:Object.keys(this._events),i=0,r=n.length;i<r;i++){t=n[i];var o=this._events[t];if(o){var a=[];if(e)for(var s=0,l=o.length;s<l;s++){var c=o[s];c=c.handler?c.handler:c,e&&e!==c&&a.push(c)}this._events[t]=a}}return this},trigger:function(t){if(!this._events)return this;var e=Array.prototype.slice.call(arguments,1),n=this._events[t];return n&&at(this,n,e),this},listen:function(t,e,n){var i=this;if(t){var r=function(){n.apply(i,arguments)};r.obj=t,r.name=e,r.handler=n,t.on(e,r)}return this},ignore:function(t,e,n){return t.off(e,n),this},Types:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert",order:"order",load:"load"}};st.bind=st.on,st.unbind=st.off;var lt=function(t,e){this.x=t||0,this.y=e||0};ot.extend(lt,{zero:new lt,add:function(t,e){return new lt(t.x+e.x,t.y+e.y)},sub:function(t,e){return new lt(t.x-e.x,t.y-e.y)},subtract:function(t,e){return lt.sub(t,e)},ratioBetween:function(t,e){return(t.x*e.x+t.y*e.y)/(t.length()*e.length())},angleBetween:function(t,e){var n,i;return arguments.length>=4?(n=arguments[0]-arguments[2],i=arguments[1]-arguments[3],Math.atan2(i,n)):(n=t.x-e.x,i=t.y-e.y,Math.atan2(i,n))},distanceBetween:function(t,e){return Math.sqrt(lt.distanceBetweenSquared(t,e))},distanceBetweenSquared:function(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},MakeObservable:function(t){t.bind=t.on=function(){return this._bound||(this._x=this.x,this._y=this.y,Object.defineProperty(this,"x",ut),Object.defineProperty(this,"y",ht),ot.extend(this,ct),this._bound=!0),st.bind.apply(this,arguments),this}}}),ot.extend(lt.prototype,st,{constructor:lt,set:function(t,e){return this.x=t,this.y=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this},clear:function(){return this.x=0,this.y=0,this},clone:function(){return new lt(this.x,this.y)},add:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x+=t,this.y+=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=e)),this},addSelf:function(t){return this.add.apply(this,arguments)},sub:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x-=t,this.y-=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-=e)),this},subtract:function(){return this.sub.apply(this,arguments)},subSelf:function(t){return this.sub.apply(this,arguments)},subtractSelf:function(t){return this.sub.apply(this,arguments)},multiply:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x*=t,this.y*=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=e)),this},multiplySelf:function(t){return this.multiply.apply(this,arguments)},multiplyScalar:function(t){return this.multiply(t)},divide:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x/=t,this.y/=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/=e),ot.isNaN(this.x)&&(this.x=0),ot.isNaN(this.y)&&(this.y=0)),this},divideSelf:function(t){return this.divide.apply(this,arguments)},divideScalar:function(t){return this.divide(t)},negate:function(){return this.multiply(-1)},dot:function(t){return this.x*t.x+this.y*t.y},length:function(){return Math.sqrt(this.lengthSquared())},lengthSquared:function(){return this.x*this.x+this.y*this.y},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},setLength:function(t){return this.normalize().multiplyScalar(t)},equals:function(t,e){return e=void 0===e?1e-4:e,this.distanceTo(t)<e},lerp:function(t,e){var n=(t.x-this.x)*e+this.x,i=(t.y-this.y)*e+this.y;return this.set(n,i)},isZero:function(t){return t=void 0===t?1e-4:t,this.length()<t},toString:function(){return this.x+", "+this.y},toObject:function(){return{x:this.x,y:this.y}},rotate:function(t){var e=Math.cos(t),n=Math.sin(t);return this.x=this.x*e-this.y*n,this.y=this.x*n+this.y*e,this}});var ct={constructor:lt,set:function(t,e){return this._x=t,this._y=e,this.trigger(st.Types.change)},copy:function(t){return this._x=t.x,this._y=t.y,this.trigger(st.Types.change)},clear:function(){return this._x=0,this._y=0,this.trigger(st.Types.change)},clone:function(){return new lt(this._x,this._y)},add:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x+=t,this._y+=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x+=t.x,this._y+=t.y):(this._x+=t,this._y+=e),this.trigger(st.Types.change))},sub:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x-=t,this._y-=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x-=t.x,this._y-=t.y):(this._x-=t,this._y-=e),this.trigger(st.Types.change))},multiply:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x*=t,this._y*=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x*=t.x,this._y*=t.y):(this._x*=t,this._y*=e),this.trigger(st.Types.change))},divide:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x/=t,this._y/=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x/=t.x,this._y/=t.y):(this._x/=t,this._y/=e),ot.isNaN(this._x)&&(this._x=0),ot.isNaN(this._y)&&(this._y=0),this.trigger(st.Types.change))},dot:function(t){return this._x*t.x+this._y*t.y},lengthSquared:function(){return this._x*this._x+this._y*this._y},distanceToSquared:function(t){var e=this._x-t.x,n=this._y-t.y;return e*e+n*n},lerp:function(t,e){var n=(t.x-this._x)*e+this._x,i=(t.y-this._y)*e+this._y;return this.set(n,i)},toString:function(){return this._x+", "+this._y},toObject:function(){return{x:this._x,y:this._y}},rotate:function(t){var e=Math.cos(t),n=Math.sin(t);return this._x=this._x*e-this._y*n,this._y=this._x*n+this._y*e,this}},ut={enumerable:!0,get:function(){return this._x},set:function(t){this._x=t,this.trigger(st.Types.change,"x")}},ht={enumerable:!0,get:function(){return this._y},set:function(t){this._y=t,this.trigger(st.Types.change,"y")}};lt.MakeObservable(lt.prototype);var dt=function(t,e,n,i,r,o,a){lt.call(this,t,e),this._broadcast=function(){this.trigger(st.Types.change)}.bind(this),this._command=a||Z.move,this._relative=!0;var s="number"==typeof n,l="number"==typeof i,c="number"==typeof r,u="number"==typeof o;(s||l||c||u)&&dt.AppendCurveProperties(this),s&&(this.controls.left.x=n),l&&(this.controls.left.y=i),c&&(this.controls.right.x=r),u&&(this.controls.right.y=o)};ot.extend(dt,{AppendCurveProperties:function(t){t.relative=!0,t.controls={},t.controls.left=new lt(0,0),t.controls.right=new lt(0,0)},MakeObservable:function(t){Object.defineProperty(t,"command",{enumerable:!0,get:function(){return this._command},set:function(t){this._command=t,this._command!==Z.curve||ot.isObject(this.controls)||dt.AppendCurveProperties(this),this.trigger(st.Types.change)}}),Object.defineProperty(t,"relative",{enumerable:!0,get:function(){return this._relative},set:function(t){this._relative!=t&&(this._relative=!!t,this.trigger(st.Types.change))}}),ot.extend(t,lt.prototype,ft),t.bind=t.on=function(){var t=this._bound;lt.prototype.bind.apply(this,arguments),t||ot.extend(this,ft)}}});var ft={constructor:dt,listen:function(){return ot.isObject(this.controls)||dt.AppendCurveProperties(this),this.controls.left.bind(st.Types.change,this._broadcast),this.controls.right.bind(st.Types.change,this._broadcast),this},ignore:function(){return this.controls.left.unbind(st.Types.change,this._broadcast),this.controls.right.unbind(st.Types.change,this._broadcast),this},copy:function(t){return this.x=t.x,this.y=t.y,"string"==typeof t.command&&(this.command=t.command),ot.isObject(t.controls)&&(ot.isObject(this.controls)||dt.AppendCurveProperties(this),this.controls.left.copy(t.controls.left),this.controls.right.copy(t.controls.right)),"boolean"==typeof t.relative&&(this.relative=t.relative),this.command===Z.arc&&(this.rx=t.rx,this.ry=t.ry,this.xAxisRotation=t.xAxisRotation,this.largeArcFlag=t.largeArcFlag,this.sweepFlag=t.sweepFlag),this},clone:function(){var t=this.controls,e=new dt(this.x,this.y,t&&t.left.x,t&&t.left.y,t&&t.right.x,t&&t.right.y,this.command);return e.relative=this._relative,e},toObject:function(){var t={x:this.x,y:this.y};return this._command&&(t.command=this._command),this._relative&&(t.relative=this._relative),this.controls&&(t.controls={left:this.controls.left.toObject(),right:this.controls.right.toObject()}),t},toString:function(){return this.controls?[this._x,this._y,this.controls.left.x,this.controls.left.y,this.controls.right.x,this.controls.right.y,this._command,this._relative?1:0].join(", "):[this._x,this._y].join(", ")}};dt.MakeObservable(dt.prototype);var pt=Math.cos,gt=Math.sin,mt=Math.tan,vt=[],yt=function(t,e,n,i,r,o){this.elements=new et(9);var a=t;Array.isArray(a)||(a=Array.prototype.slice.call(arguments)),this.identity(),a.length>0&&this.set(a)};$(yt),ot.extend(yt,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(t,e,n){if(e.length<=3){var i=t,r=e[0]||0,o=e[1]||0,a=e[2]||0;return{x:i[0]*r+i[1]*o+i[2]*a,y:i[3]*r+i[4]*o+i[5]*a,z:i[6]*r+i[7]*o+i[8]*a}}var s=t[0],l=t[1],c=t[2],u=t[3],h=t[4],d=t[5],f=t[6],p=t[7],g=t[8],m=e[0],v=e[1],y=e[2],b=e[3],_=e[4],w=e[5],x=e[6],k=e[7],C=e[8];return(n=n||new et(9))[0]=s*m+l*b+c*x,n[1]=s*v+l*_+c*k,n[2]=s*y+l*w+c*C,n[3]=u*m+h*b+d*x,n[4]=u*v+h*_+d*k,n[5]=u*y+h*w+d*C,n[6]=f*m+p*b+g*x,n[7]=f*v+p*_+g*k,n[8]=f*y+p*w+g*C,n}}),ot.extend(yt.prototype,st,{constructor:yt,manual:!1,set:function(t,e,n,i,r,o,a,s,l){var c;return void 0===e&&(t=(c=t)[0],e=c[1],n=c[2],i=c[3],r=c[4],o=c[5],a=c[6],s=c[7],l=c[8]),this.elements[0]=t,this.elements[1]=e,this.elements[2]=n,this.elements[3]=i,this.elements[4]=r,this.elements[5]=o,this.elements[6]=a,this.elements[7]=s,this.elements[8]=l,this.trigger(st.Types.change)},copy:function(t){return this.elements[0]=t.elements[0],this.elements[1]=t.elements[1],this.elements[2]=t.elements[2],this.elements[3]=t.elements[3],this.elements[4]=t.elements[4],this.elements[5]=t.elements[5],this.elements[6]=t.elements[6],this.elements[7]=t.elements[7],this.elements[8]=t.elements[8],this.manual=t.manual,this.trigger(st.Types.change)},identity:function(){return this.elements[0]=yt.Identity[0],this.elements[1]=yt.Identity[1],this.elements[2]=yt.Identity[2],this.elements[3]=yt.Identity[3],this.elements[4]=yt.Identity[4],this.elements[5]=yt.Identity[5],this.elements[6]=yt.Identity[6],this.elements[7]=yt.Identity[7],this.elements[8]=yt.Identity[8],this.trigger(st.Types.change)},multiply:function(t,e,n,i,r,o,a,s,l){if(void 0===e)return this.elements[0]*=t,this.elements[1]*=t,this.elements[2]*=t,this.elements[3]*=t,this.elements[4]*=t,this.elements[5]*=t,this.elements[6]*=t,this.elements[7]*=t,this.elements[8]*=t,this.trigger(st.Types.change);if(void 0===i)return t=t||0,e=e||0,n=n||0,{x:(r=this.elements)[0]*t+r[1]*e+r[2]*n,y:r[3]*t+r[4]*e+r[5]*n,z:r[6]*t+r[7]*e+r[8]*n};var c=this.elements,u=[t,e,n,i,r,o,a,s,l],h=c[0],d=c[1],f=c[2],p=c[3],g=c[4],m=c[5],v=c[6],y=c[7],b=c[8],_=u[0],w=u[1],x=u[2],k=u[3],C=u[4],S=u[5],R=u[6],O=u[7],E=u[8];return this.elements[0]=h*_+d*k+f*R,this.elements[1]=h*w+d*C+f*O,this.elements[2]=h*x+d*S+f*E,this.elements[3]=p*_+g*k+m*R,this.elements[4]=p*w+g*C+m*O,this.elements[5]=p*x+g*S+m*E,this.elements[6]=v*_+y*k+b*R,this.elements[7]=v*w+y*C+b*O,this.elements[8]=v*x+y*S+b*E,this.trigger(st.Types.change)},inverse:function(t){var e=this.elements;t=t||new yt;var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=u*a-s*c,d=-u*o+s*l,f=c*o-a*l,p=n*h+i*d+r*f;return p?(p=1/p,t.elements[0]=h*p,t.elements[1]=(-u*i+r*c)*p,t.elements[2]=(s*i-r*a)*p,t.elements[3]=d*p,t.elements[4]=(u*n-r*l)*p,t.elements[5]=(-s*n+r*o)*p,t.elements[6]=f*p,t.elements[7]=(-c*n+i*l)*p,t.elements[8]=(a*n-i*o)*p,t):null},scale:function(t,e){var n=arguments.length;return n<=1&&(e=t),this.multiply(t,0,0,0,e,0,0,0,1)},rotate:function(t){var e=pt(t),n=gt(t);return this.multiply(e,-n,0,n,e,0,0,0,1)},translate:function(t,e){return this.multiply(1,0,t,0,1,e,0,0,1)},skewX:function(t){var e=mt(t);return this.multiply(1,e,0,0,1,0,0,0,1)},skewY:function(t){var e=mt(t);return this.multiply(1,0,0,e,1,0,0,0,1)},toString:function(t){return vt.length=0,this.toTransformArray(t,vt),vt.map(nt).join(" ")},toTransformArray:function(t,e){var n=this.elements,i=!!e,r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],c=n[5];if(t){var u=n[6],h=n[7],d=n[8];return i?(e[0]=r,e[1]=s,e[2]=u,e[3]=o,e[4]=l,e[5]=h,e[6]=a,e[7]=c,void(e[8]=d)):[r,s,u,o,l,h,a,c,d]}return i?(e[0]=r,e[1]=s,e[2]=o,e[3]=l,e[4]=a,void(e[5]=c)):[r,s,o,l,a,c]},toArray:function(t,e){var n=this.elements,i=!!e,r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],c=n[5];if(t){var u=n[6],h=n[7],d=n[8];return i?(e[0]=r,e[1]=o,e[2]=a,e[3]=s,e[4]=l,e[5]=c,e[6]=u,e[7]=h,void(e[8]=d)):[r,o,a,s,l,c,u,h,d]}return i?(e[0]=r,e[1]=o,e[2]=a,e[3]=s,e[4]=l,void(e[5]=c)):[r,o,a,s,l,c]},toObject:function(){return{elements:this.toArray(!0),manual:!!this.manual}},clone:function(){return(new yt).copy(this)}});var bt=0,_t={nextFrameID:null,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.7.1",PublishDate:"2021-01-13T01:57:28.198Z",Identifier:"two-",Resolution:12,AutoCalculateImportedMatrices:!0,Instances:[],uniqueId:function(){return bt++}},wt=Math.PI/2,xt={CollinearityEpsilon:Math.pow(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:Number.EPSILON},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]},kt=function(t,e,n,i,r){var o=1-t;return o*o*o*e+3*o*o*t*n+3*o*t*t*i+t*t*t*r},Ct=function(t,e,n,i,r,o,a,s,l){var c=(l=l||xt.RecursionLimit)+1;if(Math.abs(t-a)<.001&&Math.abs(e-s)<.001)return[new dt(a,s)];for(var u=[],h=0;h<c;h++){var d=h/c,f=kt(d,t,n,r,a),p=kt(d,e,i,o,s);u.push(new dt(f,p))}return u},St=function(t,e,n,i,r,o,a,s,l){if(t===n&&e===i&&r===a&&o===s){var c=a-t,u=s-e;return Math.sqrt(c*c+u*u)}var h=9*(n-r)+3*(a-t),d=6*(t+r)-12*n,f=3*(n-t),p=9*(i-o)+3*(s-e),g=6*(e+o)-12*i,m=3*(i-e);return Ot((function(t){var e=(h*t+d)*t+f,n=(p*t+g)*t+m;return Math.sqrt(e*e+n*n)}),0,1,l||xt.RecursionLimit)},Rt=function(t,e,n,i,r,o,a,s){for(var l,c,u,h,d,f,p,g,m=[],v=[[],[]],y=0;y<2;++y)if(0==y?(c=6*t-12*n+6*r,l=-3*t+9*n-9*r+3*a,u=3*n-3*t):(c=6*e-12*i+6*o,l=-3*e+9*i-9*o+3*s,u=3*i-3*e),Math.abs(l)<1e-12){if(Math.abs(c)<1e-12)continue;0<(h=-u/c)&&h<1&&m.push(h)}else p=c*c-4*u*l,g=Math.sqrt(p),p<0||(0<(d=(-c+g)/(2*l))&&d<1&&m.push(d),0<(f=(-c-g)/(2*l))&&f<1&&m.push(f));for(var b,_=m.length,w=_;_--;)b=1-(h=m[_]),v[0][_]=b*b*b*t+3*b*b*h*n+3*b*h*h*r+h*h*h*a,v[1][_]=b*b*b*e+3*b*b*h*i+3*b*h*h*o+h*h*h*s;return v[0][w]=t,v[1][w]=e,v[0][w+1]=a,v[1][w+1]=s,v[0].length=v[1].length=w+2,{min:{x:Math.min.apply(0,v[0]),y:Math.min.apply(0,v[1])},max:{x:Math.max.apply(0,v[0]),y:Math.max.apply(0,v[1])}}},Ot=function(t,e,n,i){for(var r=xt.abscissas[i-2],o=xt.weights[i-2],a=.5*(n-e),s=a+e,l=0,c=i+1>>1,u=1&i?o[l++]*t(s):0;l<c;){var h=a*r[l];u+=o[l++]*(t(s+h)+t(s-h))}return a*u},Et=function(t,e){for(var n=t.length,i=n-1,r=0;r<n;r++){var o=t[r];ot.isObject(o.controls)||dt.AppendCurveProperties(o);var a=e?tt(r-1,n):Math.max(r-1,0),s=e?tt(r+1,n):Math.min(r+1,i),l=t[a],c=o,u=t[s];At(l,c,u),c.command=0===r?Z.move:Z.curve}},At=function(t,e,n){var i=lt.angleBetween(t,e),r=lt.angleBetween(n,e),o=lt.distanceBetween(t,e),a=lt.distanceBetween(n,e),s=(i+r)/2;return o<1e-4||a<1e-4?("boolean"!=typeof e.relative||e.relative||(e.controls.left.copy(e),e.controls.right.copy(e)),e):(o*=.33,a*=.33,r<i?s+=wt:s-=wt,e.controls.left.x=Math.cos(s)*o,e.controls.left.y=Math.sin(s)*o,s-=Math.PI,e.controls.right.x=Math.cos(s)*a,e.controls.right.y=Math.sin(s)*a,"boolean"!=typeof e.relative||e.relative||(e.controls.left.x+=e.x,e.controls.left.y+=e.y,e.controls.right.x+=e.x,e.controls.right.y+=e.y),e)},Tt=function(t,e,n){return new lt(2*t.x-(e.x+t.x)-(n?t.x:0),2*t.y-(e.y+t.y)-(n?t.y:0))},Mt=Object.freeze({__proto__:null,Curve:xt,getComponentOnCubicBezier:kt,subdivide:Ct,getCurveLength:St,getCurveBoundingBox:Rt,integrate:Ot,getCurveFromPoints:Et,getControlPoints:At,getReflection:Tt,getAnchorsFromArcData:function(t,e,n,i,r,o,a){(new yt).translate(t.x,t.y).rotate(e);for(var s=_t.Resolution,l=0;l<s;l++){var c=(l+1)/s;a&&(c=1-c);var u=c*o+r,h=n*Math.cos(u),d=i*Math.sin(u),f=new dt(h,d);dt.AppendCurveProperties(f),f.command=Z.line}}}),Pt=Y.devicePixelRatio||1,Ft=function(t){return Pt/function(t){return t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1}(t)},jt=function(){Array.call(this),arguments.length>1?Array.prototype.push.apply(this,arguments):arguments[0]&&Array.isArray(arguments[0])&&Array.prototype.push.apply(this,arguments[0])};(jt.prototype=new Array).constructor=jt,ot.extend(jt.prototype,st,{pop:function(){var t=Array.prototype.pop.apply(this,arguments);return this.trigger(st.Types.remove,[t]),t},shift:function(){var t=Array.prototype.shift.apply(this,arguments);return this.trigger(st.Types.remove,[t]),t},push:function(){var t=Array.prototype.push.apply(this,arguments);return this.trigger(st.Types.insert,arguments),t},unshift:function(){var t=Array.prototype.unshift.apply(this,arguments);return this.trigger(st.Types.insert,arguments),t},splice:function(){var t,e=Array.prototype.splice.apply(this,arguments);return this.trigger(st.Types.remove,e),arguments.length>2&&(t=this.slice(arguments[0],arguments[0]+arguments.length-2),this.trigger(st.Types.insert,t),this.trigger(st.Types.order)),e},sort:function(){return Array.prototype.sort.apply(this,arguments),this.trigger(st.Types.order),this},reverse:function(){return Array.prototype.reverse.apply(this,arguments),this.trigger(st.Types.order),this}});var It=function(){this._renderer={},this._renderer.flagMatrix=It.FlagMatrix.bind(this),this.isShape=!0,this.id=_t.Identifier+_t.uniqueId(),this.classList=[],this.matrix=new yt,this.translation=new lt,this.rotation=0,this.scale=1};ot.extend(It,{FlagMatrix:function(){this._flagMatrix=!0},MakeObservable:function(t){var e={enumerable:!1,get:function(){return this._translation},set:function(t){this._translation&&this._translation.unbind(st.Types.change,this._renderer.flagMatrix),this._translation=t,this._translation.bind(st.Types.change,this._renderer.flagMatrix),It.FlagMatrix.call(this)}};Object.defineProperty(t,"translation",e),Object.defineProperty(t,"position",e),Object.defineProperty(t,"rotation",{enumerable:!0,get:function(){return this._rotation},set:function(t){this._rotation=t,this._flagMatrix=!0}}),Object.defineProperty(t,"scale",{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof lt&&this._scale.unbind(st.Types.change,this._renderer.flagMatrix),this._scale=t,this._scale instanceof lt&&this._scale.bind(st.Types.change,this._renderer.flagMatrix),this._flagMatrix=!0,this._flagScale=!0}}),Object.defineProperty(t,"matrix",{enumerable:!0,get:function(){return this._matrix},set:function(t){this._matrix=t,this._flagMatrix=!0}}),Object.defineProperty(t,"className",{enumerable:!0,get:function(){return this._className},set:function(t){if(this._flagClassName=this._className!==t,this._flagClassName){for(var e=this._className.split(/\s+?/),n=t.split(/\s+?/),i=0;i<e.length;i++){var r=e[i],o=Array.prototype.indexOf.call(this.classList,r);o>=0&&this.classList.splice(o,1)}this.classList=this.classList.concat(n)}this._className=t}})}}),ot.extend(It.prototype,st,{_flagMatrix:!0,_flagScale:!1,_flagClassName:!1,_translation:null,_rotation:0,_scale:1,_className:"",constructor:It,addTo:function(t){return t.add(this),this},clone:function(t){var e=new It;return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},_update:function(t){return!this._matrix.manual&&this._flagMatrix&&(this._matrix.identity().translate(this.translation.x,this.translation.y),this._scale instanceof lt?this._matrix.scale(this._scale.x,this._scale.y):this._matrix.scale(this._scale),this._matrix.rotate(this.rotation)),t&&this.parent&&this.parent._update&&this.parent._update(),this},flagReset:function(){return this._flagMatrix=this._flagScale=this._flagClassName=!1,this}}),It.MakeObservable(It.prototype);var Dt=function(){jt.apply(this,arguments),Object.defineProperty(this,"_events",{value:{},enumerable:!1}),this.ids={},this.on(st.Types.insert,this.attach),this.on(st.Types.remove,this.detach),Dt.prototype.attach.apply(this,arguments)};Dt.prototype=new jt,ot.extend(Dt.prototype,{constructor:Dt,attach:function(t){for(var e=0;e<t.length;e++)this.ids[t[e].id]=t[e];return this},detach:function(t){for(var e=0;e<t.length;e++)delete this.ids[t[e].id];return this}});var Lt=Math.min,zt=Math.max,Vt=function(t){It.call(this,!0),this._renderer.type="group",this.additions=[],this.subtractions=[],this.children=Array.isArray(t)?t:Array.prototype.slice.call(arguments)};function Bt(t,e){var n,i=t.parent;function r(){e.subtractions.length>0&&(n=Array.prototype.indexOf.call(e.subtractions,t))>=0&&e.subtractions.splice(n,1),e.additions.length>0&&(n=Array.prototype.indexOf.call(e.additions,t))>=0&&e.additions.splice(n,1),t.parent=e,e.additions.push(t),e._flagAdditions=!0}function o(){(n=Array.prototype.indexOf.call(i.additions,t))>=0&&i.additions.splice(n,1),(n=Array.prototype.indexOf.call(i.subtractions,t))<0&&(i.subtractions.push(t),i._flagSubtractions=!0)}i!==e?(i&&i.children.ids[t.id]&&(n=Array.prototype.indexOf.call(i.children,t),i.children.splice(n,1),o()),e?r():(o(),i._flagAdditions&&0===i.additions.length&&(i._flagAdditions=!1),i._flagSubtractions&&0===i.subtractions.length&&(i._flagSubtractions=!1),delete t.parent)):r()}ot.extend(Vt,{Children:Dt,InsertChildren:function(t){for(var e=0;e<t.length;e++)Bt.call(this,t[e],this)},RemoveChildren:function(t){for(var e=0;e<t.length;e++)Bt.call(this,t[e])},OrderChildren:function(t){this._flagOrder=!0},Properties:["fill","stroke","linewidth","visible","cap","join","miter","closed","curved","automatic"],MakeObservable:function(t){var e=Vt.Properties;Object.defineProperty(t,"opacity",{enumerable:!0,get:function(){return this._opacity},set:function(t){this._flagOpacity=this._opacity!==t,this._opacity=t}}),Object.defineProperty(t,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(t){this._flagBeginning=this._beginning!==t,this._beginning=t}}),Object.defineProperty(t,"ending",{enumerable:!0,get:function(){return this._ending},set:function(t){this._flagEnding=this._ending!==t,this._ending=t}}),Object.defineProperty(t,"length",{enumerable:!0,get:function(){if(this._flagLength||this._length<=0){if(this._length=0,!this.children)return this._length;for(var t=0;t<this.children.length;t++){var e=this.children[t];this._length+=e.length}}return this._length}}),It.MakeObservable(t),Vt.MakeGetterSetters(t,e),Object.defineProperty(t,"children",{enumerable:!0,get:function(){return this._children},set:function(t){var e=Vt.InsertChildren.bind(this),n=Vt.RemoveChildren.bind(this),i=Vt.OrderChildren.bind(this);this._children&&this._children.unbind(),this._children=new Dt(t),this._children.bind(st.Types.insert,e),this._children.bind(st.Types.remove,n),this._children.bind(st.Types.order,i)}}),Object.defineProperty(t,"mask",{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,t.clip||(t.clip=!0)}})},MakeGetterSetters:function(t,e){Array.isArray(e)||(e=[e]),ot.each(e,(function(e){Vt.MakeGetterSetter(t,e)}))},MakeGetterSetter:function(t,e){var n="_"+e;Object.defineProperty(t,e,{enumerable:!0,get:function(){return this[n]},set:function(t){this[n]=t;for(var i=0;i<this.children.length;i++)this.children[i][e]=t}})}}),ot.extend(Vt.prototype,It.prototype,{_flagAdditions:!1,_flagSubtractions:!1,_flagOrder:!1,_flagOpacity:!0,_flagBeginning:!1,_flagEnding:!1,_flagLength:!1,_flagMask:!1,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_length:0,_mask:null,constructor:Vt,clone:function(t){var e=new Vt,n=this.children.map((function(t){return t.clone()}));return e.add(n),e.opacity=this.opacity,this.mask&&(e.mask=this.mask),e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.className=this.className,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},toObject:function(){var t={children:[],translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale instanceof lt?this.scale.toObject():this.scale,opacity:this.opacity,className:this.className,mask:this.mask?this.mask.toObject():null};return this.matrix.manual&&(t.matrix=this.matrix.toObject()),ot.each(this.children,(function(e,n){t.children[n]=e.toObject()}),this),t},corner:function(){var t=this.getBoundingClientRect(!0),e={x:t.left,y:t.top};return this.children.forEach((function(t){t.translation.sub(e)})),this},center:function(){var t=this.getBoundingClientRect(!0);return t.centroid={x:t.left+t.width/2-this.translation.x,y:t.top+t.height/2-this.translation.y},this.children.forEach((function(e){e.isShape&&e.translation.sub(t.centroid)})),this},getById:function(t){var e=null;return function n(i){if(i.id===t)return i;if(i.children)for(var r=0;r<i.children.length;r++)if(e=n(i.children[r]))return e;return null}(this)},getByClassName:function(t){var e=[];return function n(i){if(Array.prototype.indexOf.call(i.classList,t)>=0&&e.push(i),i.children)for(var r=0;r<i.children.length;r++)n(i.children[r]);return e}(this)},getByType:function(t){var e=[];return function n(i){if(i instanceof t&&e.push(i),i.children)for(var r=0;r<i.children.length;r++)n(i.children[r]);return e}(this)},add:function(t){t=t instanceof Array?t.slice():Array.prototype.slice.call(arguments);for(var e=0;e<t.length;e++){var n=t[e];if(n&&n.id){var i=Array.prototype.indexOf.call(this.children,n);i>=0&&this.children.splice(i,1),this.children.push(n)}}return this},remove:function(t){var e=arguments.length,n=this.parent;if(e<=0&&n)return n.remove(this),this;t=t instanceof Array?t.slice():Array.prototype.slice.call(arguments);for(var i=0;i<t.length;i++)t[i]&&this.children.ids[t[i].id]&&this.children.splice(Array.prototype.indexOf.call(this.children,t[i]),1);return this},getBoundingClientRect:function(t){var e;this._update(!0);for(var n=1/0,i=-1/0,r=1/0,o=-1/0,a=/texture|gradient/i,s=0;s<this.children.length;s++){var l=this.children[s];l.visible&&!a.test(l._renderer.type)&&"number"==typeof(e=l.getBoundingClientRect(t)).top&&"number"==typeof e.left&&"number"==typeof e.right&&"number"==typeof e.bottom&&(r=Lt(e.top,r),n=Lt(e.left,n),i=zt(e.right,i),o=zt(e.bottom,o))}return{top:r,left:n,right:i,bottom:o,width:i-n,height:o-r}},noFill:function(){return this.children.forEach((function(t){t.noFill()})),this},noStroke:function(){return this.children.forEach((function(t){t.noStroke()})),this},subdivide:function(){var t=arguments;return this.children.forEach((function(e){e.subdivide.apply(e,t)})),this},_update:function(){if(this._flagBeginning||this._flagEnding)for(var t=Math.min(this._beginning,this._ending),e=Math.max(this._beginning,this._ending),n=this.length,i=0,r=t*n,o=e*n,a=0;a<this.children.length;a++){var s=this.children[a],l=s.length;r>i+l?(s.beginning=1,s.ending=1):o<i?(s.beginning=0,s.ending=0):r>i&&r<i+l?(s.beginning=(r-i)/l,s.ending=1):o>i&&o<i+l?(s.beginning=0,s.ending=(o-i)/l):(s.beginning=0,s.ending=1),i+=l}return It.prototype._update.apply(this,arguments)},flagReset:function(){return this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1),this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1),this._flagOrder=this._flagMask=this._flagOpacity=this._flagBeginning=this._flagEnding=!1,It.prototype.flagReset.call(this),this}}),Vt.MakeObservable(Vt.prototype);var Wt=[],Ut=2*Math.PI,Nt=Math.max,qt=Math.min,Ht=Math.abs,Gt=Math.sin,Zt=Math.cos,Kt=Math.acos,Yt=Math.sqrt,Xt=function(t){return 1==t[0]&&0==t[3]&&0==t[1]&&1==t[4]&&0==t[2]&&0==t[5]},$t={isHidden:/(undefined|none|transparent)/i,alignments:{left:"start",middle:"center",right:"end"},shim:function(t,e){return t.tagName=t.nodeName=e||"canvas",t.nodeType=1,t.getAttribute=function(t){return this[t]},t.setAttribute=function(t,e){return this[t]=e,this},t},group:{renderChild:function(t){$t[t._renderer.type].render.call(t,this.ctx,!0,this.clip)},render:function(t){this._update();var e=this._matrix.elements,n=this.parent;this._renderer.opacity=this._opacity*(n&&n._renderer?n._renderer.opacity:1);var i=this._mask,r=Xt(e),o=!r||!!i;if(this._renderer.context||(this._renderer.context={}),this._renderer.context.ctx=t,o&&(t.save(),r||t.transform(e[0],e[3],e[1],e[4],e[2],e[5])),i&&$t[i._renderer.type].render.call(i,t,!0),this.opacity>0&&0!==this.scale)for(var a=0;a<this.children.length;a++){var s=this.children[a];$t[s._renderer.type].render.call(s,t)}return o&&t.restore(),this.flagReset()}},path:{render:function(t,e,n){var i,r,o,a,s,l,c,u,h,d,f,p,g,m,v,y,b,_,w,x,k,C,S,R,O,E,A,T,M,P,F,j,I;if(this._update(),i=this._matrix.elements,r=this._stroke,o=this._linewidth,a=this._fill,s=this._opacity*this.parent._renderer.opacity,l=this._visible,c=this._cap,u=this._join,h=this._miter,d=this._closed,g=(p=(f=this._renderer.vertices).length)-1,F=Xt(i),I=this.dashes,P=this._clip,!e&&(!l||P))return this;F||(t.save(),t.transform(i[0],i[3],i[1],i[4],i[2],i[5])),a&&("string"==typeof a?t.fillStyle=a:($t[a._renderer.type].render.call(a,t),t.fillStyle=a._renderer.effect)),r&&("string"==typeof r?t.strokeStyle=r:($t[r._renderer.type].render.call(r,t),t.strokeStyle=r._renderer.effect),o&&(t.lineWidth=o),h&&(t.miterLimit=h),u&&(t.lineJoin=u),!d&&c&&(t.lineCap=c)),"number"==typeof s&&(t.globalAlpha=s),I&&I.length>0&&(t.lineDashOffset=I.offset||0,t.setLineDash(I)),t.beginPath();for(var D=0;D<f.length;D++)switch(T=(b=f[D]).x,M=b.y,b.command){case Z.close:t.closePath();break;case Z.arc:var L=b.rx,z=b.ry,V=b.xAxisRotation,B=b.largeArcFlag,W=b.sweepFlag,U=(y=f[v=d?tt(D-1,p):Nt(D-1,0)]).x,N=y.y;$t.renderSvgArcCommand(t,U,N,L,z,B,W,V,T,M);break;case Z.curve:v=d?tt(D-1,p):Math.max(D-1,0),m=d?tt(D+1,p):Math.min(D+1,g),y=f[v],_=f[m],R=y.controls&&y.controls.right||lt.zero,O=b.controls&&b.controls.left||lt.zero,y._relative?(C=R.x+y.x,S=R.y+y.y):(C=R.x,S=R.y),b._relative?(x=O.x+b.x,k=O.y+b.y):(x=O.x,k=O.y),t.bezierCurveTo(C,S,x,k,T,M),D>=g&&d&&(_=w,E=b.controls&&b.controls.right||lt.zero,A=_.controls&&_.controls.left||lt.zero,b._relative?(C=E.x+b.x,S=E.y+b.y):(C=E.x,S=E.y),_._relative?(x=A.x+_.x,k=A.y+_.y):(x=A.x,k=A.y),T=_.x,M=_.y,t.bezierCurveTo(C,S,x,k,T,M));break;case Z.line:t.lineTo(T,M);break;case Z.move:w=b,t.moveTo(T,M)}return d&&t.closePath(),P||n||($t.isHidden.test(a)||((j=a._renderer&&a._renderer.offset)&&(t.save(),t.translate(-a._renderer.offset.x,-a._renderer.offset.y),t.scale(a._renderer.scale.x,a._renderer.scale.y)),t.fill(),j&&t.restore()),$t.isHidden.test(r)||((j=r._renderer&&r._renderer.offset)&&(t.save(),t.translate(-r._renderer.offset.x,-r._renderer.offset.y),t.scale(r._renderer.scale.x,r._renderer.scale.y),t.lineWidth=o/r._renderer.scale.x),t.stroke(),j&&t.restore())),F||t.restore(),P&&!n&&t.clip(),I&&I.length>0&&t.setLineDash(Wt),this.flagReset()}},text:{render:function(t,e,n){this._update();var i,r,o,a,s,l,c,u,h,d,f,p=this._matrix.elements,g=this._stroke,m=this._linewidth,v=this._fill,y=this._decoration,b=this._opacity*this.parent._renderer.opacity,_=this._visible,w=Xt(p),x=v._renderer&&v._renderer.offset&&g._renderer&&g._renderer.offset,k=this.dashes,C=$t.alignments[this._alignment]||this._alignment,S=this._baseline,R=this._clip;if(!e&&(!_||R))return this;if(w||(t.save(),t.transform(p[0],p[3],p[1],p[4],p[2],p[5])),x||(t.font=[this._style,this._weight,this._size+"px/"+this._leading+"px",this._family].join(" ")),t.textAlign=C,t.textBaseline=S,v&&("string"==typeof v?t.fillStyle=v:($t[v._renderer.type].render.call(v,t),t.fillStyle=v._renderer.effect)),g&&("string"==typeof g?t.strokeStyle=g:($t[g._renderer.type].render.call(g,t),t.strokeStyle=g._renderer.effect),m&&(t.lineWidth=m)),"number"==typeof b&&(t.globalAlpha=b),k&&k.length>0&&(t.lineDashOffset=k.offset||0,t.setLineDash(k)),R||n||($t.isHidden.test(v)||(v._renderer&&v._renderer.offset?(l=v._renderer.scale.x,c=v._renderer.scale.y,t.save(),t.translate(-v._renderer.offset.x,-v._renderer.offset.y),t.scale(l,c),i=this._size/v._renderer.scale.y,r=this._leading/v._renderer.scale.y,t.font=[this._style,this._weight,i+"px/",r+"px",this._family].join(" "),o=v._renderer.offset.x/v._renderer.scale.x,a=v._renderer.offset.y/v._renderer.scale.y,t.fillText(this.value,o,a),t.restore()):t.fillText(this.value,0,0)),$t.isHidden.test(g)||(g._renderer&&g._renderer.offset?(l=g._renderer.scale.x,c=g._renderer.scale.y,t.save(),t.translate(-g._renderer.offset.x,-g._renderer.offset.y),t.scale(l,c),i=this._size/g._renderer.scale.y,r=this._leading/g._renderer.scale.y,t.font=[this._style,this._weight,i+"px/",r+"px",this._family].join(" "),o=g._renderer.offset.x/g._renderer.scale.x,a=g._renderer.offset.y/g._renderer.scale.y,s=m/g._renderer.scale.x,t.lineWidth=s,t.strokeText(this.value,o,a),t.restore()):t.strokeText(this.value,0,0))),/(underline|strikethrough)/i.test(y)){var O=t.measureText(this.value),E=1;switch(y){case"underline":h=O.actualBoundingBoxAscent,f=O.actualBoundingBoxAscent;break;case"strikethrough":h=0,f=0,E=.5}switch(S){case"top":h+=this._size*E,f+=this._size*E;break;case"baseline":case"bottom":h-=this._size*E,f-=this._size*E}switch(C){case"left":case"start":u=0,d=O.width;break;case"right":case"end":u=-O.width,d=0;break;default:u=-O.width/2,d=O.width/2}t.lineWidth=Math.max(Math.floor(this._size/15),1),t.strokeStyle=t.fillStyle,t.beginPath(),t.moveTo(u,h),t.lineTo(d,f),t.stroke()}return w||t.restore(),R&&!n&&t.clip(),k&&k.length>0&&t.setLineDash(Wt),this.flagReset()}},"linear-gradient":{render:function(t){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops){this._renderer.effect=t.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y);for(var e=0;e<this.stops.length;e++){var n=this.stops[e];this._renderer.effect.addColorStop(n._offset,n._color)}}return this.flagReset()}},"radial-gradient":{render:function(t){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops){this._renderer.effect=t.createRadialGradient(this.center._x,this.center._y,0,this.focal._x,this.focal._y,this._radius);for(var e=0;e<this.stops.length;e++){var n=this.stops[e];this._renderer.effect.addColorStop(n._offset,n._color)}}return this.flagReset()}},texture:{render:function(t){this._update();var e=this.image;return(!this._renderer.effect||(this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)&&(this._renderer.effect=t.createPattern(this.image,this._repeat)),(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof lt||(this._renderer.offset=new lt),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,e&&(this._renderer.offset.x+=e.width/2,this._renderer.offset.y+=e.height/2,this._scale instanceof lt?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof lt||(this._renderer.scale=new lt),this._scale instanceof lt?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}},renderSvgArcCommand:function(t,e,n,i,r,o,a,s,l,c){s=s*Math.PI/180,i=Ht(i),r=Ht(r);var u=(e-l)/2,h=(n-c)/2,d=Zt(s)*u+Gt(s)*h,f=-Gt(s)*u+Zt(s)*h,p=i*i,g=r*r,m=d*d,v=f*f,y=m/p+v/g;if(y>1){var b=Yt(y);p=(i*=b)*i,g=(r*=b)*r}var _=p*v+g*m,w=Yt(Nt(0,(p*g-_)/_));o===a&&(w=-w);var x=w*i*f/r,k=-w*r*d/i,C=Zt(s)*x-Gt(s)*k+(e+l)/2,S=Gt(s)*x+Zt(s)*k+(n+c)/2,R=Qt(1,0,(d-x)/i,(f-k)/r);!function(t,e,n,i,r,o,a,s,l){var c=xt.Tolerance.epsilon,u=a-o,h=Math.abs(u)<c;(u=tt(u,Ut))<c&&(u=h?0:Ut),!0!==s||h||(u===Ut?u=-Ut:u-=Ut);for(var d=0;d<_t.Resolution;d++){var f=o+d/(_t.Resolution-1)*u,p=e+i*Math.cos(f),g=n+r*Math.sin(f);if(0!==l){var m=Math.cos(l),v=Math.sin(l),y=p-e,b=g-n;p=y*m-b*v+e,g=y*v+b*m+n}t.lineTo(p,g)}}(t,C,S,i,r,R,R+Qt((d-x)/i,(f-k)/r,(-d-x)/i,(-f-k)/r)%Ut,0===a,s)}},Jt=function(t){var e=!1!==t.smoothing;this.domElement=t.domElement||document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.overdraw=t.overdraw||!1,void 0!==this.ctx.imageSmoothingEnabled&&(this.ctx.imageSmoothingEnabled=e),this.scene=new Vt,this.scene.parent=this};function Qt(t,e,n,i){var r=t*n+e*i,o=Yt(t*t+e*e)*Yt(n*n+i*i),a=Kt(Nt(-1,qt(1,r/o)));return t*i-e*n<0&&(a=-a),a}ot.extend(Jt,{Utils:$t}),ot.extend(Jt.prototype,st,{constructor:Jt,setSize:function(t,e,n){return this.width=t,this.height=e,this.ratio=void 0===n?Ft(this.ctx):n,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,this.domElement.style&&ot.extend(this.domElement.style,{width:t+"px",height:e+"px"}),this.trigger(st.Types.resize,t,e,n)},render:function(){var t=1===this.ratio;return t||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio)),this.overdraw||this.ctx.clearRect(0,0,this.width,this.height),$t.group.render.call(this.scene,this.ctx),t||this.ctx.restore(),this}});var te={Image:null,isHeadless:!1,shim:function(t,e){return Jt.Utils.shim(t),void 0!==e&&(te.Image=e),te.isHeadless=!0,t}},ee={temp:Y.document?Y.document.createElement("div"):{},hasEventListeners:"function"==typeof Y.addEventListener,bind:function(t,e,n,i){return this.hasEventListeners?t.addEventListener(e,n,!!i):t.attachEvent("on"+e,n),ee},unbind:function(t,e,n,i){return ee.hasEventListeners?t.removeEventListeners(e,n,!!i):t.detachEvent("on"+e,n),ee},getRequestAnimationFrame:function(){var t,e=0,n=["ms","moz","webkit","o"],i=Y.requestAnimationFrame;if(!i){for(var r=0;r<n.length;r++)i=Y[n[r]+"RequestAnimationFrame"]||i,t=Y[n[r]+"CancelAnimationFrame"]||Y[n[r]+"CancelRequestAnimationFrame"]||t;i=i||function(t,n){var i=(new Date).getTime(),r=Math.max(0,16-(i-e)),o=Y.setTimeout((function(){t(i+r)}),r);return e=i+r,o}}return i}},ne=function(t){this.name="Two.js",this.message=t};(ne.prototype=new Error).constructor=ne;var ie=function(t){var e="_"+t,n="_flag"+t.charAt(0).toUpperCase()+t.slice(1);Object.defineProperty(this,t,{enumerable:!0,get:function(){return this[e]},set:function(t){this[e]=t,this[n]=!0}})},re=function(){this.map={}};ot.extend(re.prototype,{constructor:re,add:function(t,e){return this.map[t]=e,this},remove:function(t){return delete this.map[t],this},get:function(t){return this.map[t]},contains:function(t){return t in this.map}});var oe=function(t,e,n){this._renderer={},this._renderer.type="stop",this.offset="number"==typeof t?t:oe.Index<=0?0:1,this.opacity="number"==typeof n?n:1,this.color="string"==typeof e?e:oe.Index<=0?"#fff":"#000",oe.Index=(oe.Index+1)%2};ot.extend(oe,{Index:0,Properties:["offset","opacity","color"],MakeObservable:function(t){ot.each(oe.Properties,(function(t){var e="_"+t,n="_flag"+t.charAt(0).toUpperCase()+t.slice(1);Object.defineProperty(this,t,{enumerable:!0,get:function(){return this[e]},set:function(t){this[e]=t,this[n]=!0,this.parent&&(this.parent._flagStops=!0)}})}),t)}}),ot.extend(oe.prototype,st,{constructor:oe,clone:function(){var t=new oe;return ot.each(oe.Properties,(function(e){t[e]=this[e]}),this),t},toObject:function(){var t={};return ot.each(oe.Properties,(function(e){t[e]=this[e]}),this),t},flagReset:function(){return this._flagOffset=this._flagColor=this._flagOpacity=!1,this}}),oe.MakeObservable(oe.prototype),oe.prototype.constructor=oe;var ae=function(t){this._renderer={},this._renderer.type="gradient",this.id=_t.Identifier+_t.uniqueId(),this.classList=[],this._renderer.flagStops=ae.FlagStops.bind(this),this._renderer.bindStops=ae.BindStops.bind(this),this._renderer.unbindStops=ae.UnbindStops.bind(this),this.spread="pad",this.stops=t};ot.extend(ae,{Stop:oe,Properties:["spread"],MakeObservable:function(t){ot.each(ae.Properties,ie,t),Object.defineProperty(t,"stops",{enumerable:!0,get:function(){return this._stops},set:function(t){this._renderer.flagStops;var e=this._renderer.bindStops,n=this._renderer.unbindStops;this._stops&&this._stops.unbind(st.Types.insert,e).unbind(st.Types.remove,n),this._stops=new jt((t||[]).slice(0)),this._stops.bind(st.Types.insert,e).bind(st.Types.remove,n),e(this._stops)}})},FlagStops:function(){this._flagStops=!0},BindStops:function(t){for(var e=t.length;e--;)t[e].bind(st.Types.change,this._renderer.flagStops),t[e].parent=this;this._renderer.flagStops()},UnbindStops:function(t){for(var e=t.length;e--;)t[e].unbind(st.Types.change,this._renderer.flagStops),delete t[e].parent;this._renderer.flagStops()}}),ot.extend(ae.prototype,st,{_flagStops:!1,_flagSpread:!1,clone:function(t){var e=this.stops.map((function(t){return t.clone()})),n=new ae(e);return ot.each(ae.Properties,(function(t){n[t]=this[t]}),this),t&&t.add(n),n},toObject:function(){var t={stops:this.stops.map((function(t){return t.toObject()}))};return ot.each(ae.Properties,(function(e){t[e]=this[e]}),this),t},_update:function(){return(this._flagSpread||this._flagStops)&&this.trigger(st.Types.change),this},flagReset:function(){return this._flagSpread=this._flagStops=!1,this}}),ae.MakeObservable(ae.prototype);var se=function(t,e,n,i,r){ae.call(this,r),this._renderer.type="linear-gradient";var o=se.FlagEndPoints.bind(this);this.left=(new lt).bind(st.Types.change,o),this.right=(new lt).bind(st.Types.change,o),"number"==typeof t&&(this.left.x=t),"number"==typeof e&&(this.left.y=e),"number"==typeof n&&(this.right.x=n),"number"==typeof i&&(this.right.y=i)};ot.extend(se,{Stop:oe,MakeObservable:function(t){ae.MakeObservable(t)},FlagEndPoints:function(){this._flagEndPoints=!0}}),ot.extend(se.prototype,ae.prototype,{_flagEndPoints:!1,constructor:se,clone:function(t){var e=this.stops.map((function(t){return t.clone()})),n=new se(this.left._x,this.left._y,this.right._x,this.right._y,e);return ot.each(ae.Properties,(function(t){n[t]=this[t]}),this),t&&t.add(n),n},toObject:function(){var t=ae.prototype.toObject.call(this);return t.left=this.left.toObject(),t.right=this.right.toObject(),t},_update:function(){return(this._flagEndPoints||this._flagSpread||this._flagStops)&&this.trigger(st.Types.change),this},flagReset:function(){return this._flagEndPoints=!1,ae.prototype.flagReset.call(this),this}}),se.MakeObservable(se.prototype);var le,ce=function(t,e,n,i,r,o){ae.call(this,i),this._renderer.type="radial-gradient",this.center=(new lt).bind(st.Types.change,function(){this._flagCenter=!0}.bind(this)),this.radius="number"==typeof n?n:20,this.focal=(new lt).bind(st.Types.change,function(){this._flagFocal=!0}.bind(this)),"number"==typeof t&&(this.center.x=t),"number"==typeof e&&(this.center.y=e),this.focal.copy(this.center),"number"==typeof r&&(this.focal.x=r),"number"==typeof o&&(this.focal.y=o)};ot.extend(ce,{Stop:oe,Properties:["radius"],MakeObservable:function(t){ae.MakeObservable(t),ot.each(ce.Properties,ie,t)}}),ot.extend(ce.prototype,ae.prototype,{_flagRadius:!1,_flagCenter:!1,_flagFocal:!1,constructor:ce,clone:function(t){var e=this.stops.map((function(t){return t.clone()})),n=new ce(this.center._x,this.center._y,this._radius,e,this.focal._x,this.focal._y);return ot.each(ae.Properties.concat(ce.Properties),(function(t){n[t]=this[t]}),this),t&&t.add(n),n},toObject:function(){var t=ae.prototype.toObject.call(this);return ot.each(ce.Properties,(function(e){t[e]=this[e]}),this),t.center=this.center.toObject(),t.focal=this.focal.toObject(),t},_update:function(){return(this._flagRadius||this._flatCenter||this._flagFocal||this._flagSpread||this._flagStops)&&this.trigger(st.Types.change),this},flagReset:function(){return this._flagRadius=this._flagCenter=this._flagFocal=!1,ae.prototype.flagReset.call(this),this}}),ce.MakeObservable(ce.prototype);var ue={video:/\.(mp4|webm|ogg)$/i,image:/\.(jpe?g|png|gif|tiff|webp)$/i,effect:/texture|gradient/i};Y.document&&(le=document.createElement("a"));var he=function(t,e){if(this._renderer={},this._renderer.type="texture",this._renderer.flagOffset=he.FlagOffset.bind(this),this._renderer.flagScale=he.FlagScale.bind(this),this.id=_t.Identifier+_t.uniqueId(),this.classList=[],this.loaded=!1,this.repeat="no-repeat",this.offset=new lt,"function"==typeof e){var n=function(){this.unbind(st.Types.load,n),"function"==typeof e&&e()}.bind(this);this.bind(st.Types.load,n)}if("string"==typeof t)this.src=t;else if("object"==typeof t){var i=Object.prototype.toString.call(t);"[object HTMLImageElement]"!==i&&"[object HTMLCanvasElement]"!==i&&"[object HTMLVideoElement]"!==i&&"[object Image]"!==i||(this.image=t)}this._update()};ot.extend(he,{Properties:["src","loaded","repeat"],RegularExpressions:ue,ImageRegistry:new re,getAbsoluteURL:function(t){return le?(le.href=t,le.href):t},loadHeadlessBuffer:function(t,e){t.image.onload=e,t.image.src=t.src},getTag:function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||"img"},getImage:function(t){var e,n=he.getAbsoluteURL(t);return he.ImageRegistry.contains(n)?he.ImageRegistry.get(n):(te.Image?(e=new te.Image,Jt.Utils.shim(e,"img")):Y.document?e=ue.video.test(n)?document.createElement("video"):document.createElement("img"):console.warn("Two.js: no prototypical image defined for Two.Texture"),e.crossOrigin="anonymous",e)},Register:{canvas:function(t,e){t._src="#"+t.id,he.ImageRegistry.add(t.src,t.image),"function"==typeof e&&e()},img:function(t,e){var n=t.image,i=function(t){!te.isHeadless&&n.removeEventListener&&"function"==typeof n.removeEventListener&&(n.removeEventListener("load",i,!1),n.removeEventListener("error",r,!1)),"function"==typeof e&&e()},r=function(e){throw te.isHeadless||"function"!=typeof n.removeEventListener||(n.removeEventListener("load",i,!1),n.removeEventListener("error",r,!1)),new ne("unable to load "+t.src)};"number"==typeof n.width&&n.width>0&&"number"==typeof n.height&&n.height>0?i():te.isHeadless||"function"!=typeof n.addEventListener||(n.addEventListener("load",i,!1),n.addEventListener("error",r,!1)),t._src=he.getAbsoluteURL(t._src),!te.isHeadless&&n&&n.getAttribute("two-src")||(te.isHeadless||n.setAttribute("two-src",t.src),he.ImageRegistry.add(t.src,n),te.isHeadless?he.loadHeadlessBuffer(t,i):t.image.src=t.src)},video:function(t,e){if(te.isHeadless)throw new ne("video textures are not implemented in headless environments.");var n=function(r){t.image.removeEventListener("canplaythrough",n,!1),t.image.removeEventListener("error",i,!1),t.image.width=t.image.videoWidth,t.image.height=t.image.videoHeight,"function"==typeof e&&e()},i=function(e){throw t.image.removeEventListener("canplaythrough",n,!1),t.image.removeEventListener("error",i,!1),new ne("unable to load "+t.src)};t._src=he.getAbsoluteURL(t._src),t.image.getAttribute("two-src")||(t.image.setAttribute("two-src",t.src),he.ImageRegistry.add(t.src,t.image)),t.image.readyState>=4?n():(t.image.addEventListener("canplaythrough",n,!1),t.image.addEventListener("error",i,!1),t.image.src=t.src,t.image.load())}},load:function(t,e){t.src;var n=t.image,i=he.getTag(n);t._flagImage&&(/canvas/i.test(i)?he.Register.canvas(t,e):(t._src=!te.isHeadless&&n.getAttribute("two-src")||n.src,he.Register[i](t,e))),t._flagSrc&&(n||(n=he.getImage(t.src),t.image=n),i=he.getTag(n),he.Register[i](t,e))},FlagOffset:function(){this._flagOffset=!0},FlagScale:function(){this._flagScale=!0},MakeObservable:function(t){ot.each(he.Properties,ie,t),Object.defineProperty(t,"image",{enumerable:!0,get:function(){return this._image},set:function(t){var e;e="canvas"===he.getTag(t)?"#"+t.id:t.src,he.ImageRegistry.contains(e)?this._image=he.ImageRegistry.get(t.src):this._image=t,this._flagImage=!0}}),Object.defineProperty(t,"offset",{enumerable:!0,get:function(){return this._offset},set:function(t){this._offset&&this._offset.unbind(st.Types.change,this._renderer.flagOffset),this._offset=t,this._offset.bind(st.Types.change,this._renderer.flagOffset),this._flagOffset=!0}}),Object.defineProperty(t,"scale",{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof lt&&this._scale.unbind(st.Types.change,this._renderer.flagScale),this._scale=t,this._scale instanceof lt&&this._scale.bind(st.Types.change,this._renderer.flagScale),this._flagScale=!0}})}}),ot.extend(he.prototype,st,It.prototype,{_flagSrc:!1,_flagImage:!1,_flagVideo:!1,_flagLoaded:!1,_flagRepeat:!1,_flagOffset:!1,_flagScale:!1,_src:"",_image:null,_loaded:!1,_repeat:"no-repeat",_scale:1,_offset:null,constructor:he,clone:function(){var t=new he(this.src);return t.repeat=this.repeat,t.offset.copy(this.origin),t.scale=this.scale,t},toObject:function(){return{src:this.src,repeat:this.repeat,origin:this.origin.toObject(),scale:"number"==typeof this.scale?this.scale:this.scale.toObject()}},_update:function(){return(this._flagSrc||this._flagImage)&&(this.trigger(st.Types.change),(this._flagSrc||this._flagImage)&&(this.loaded=!1,he.load(this,function(){this.loaded=!0,this.trigger(st.Types.change).trigger(st.Types.load)}.bind(this)))),this._image&&this._image.readyState>=4&&(this._flagVideo=!0),this},flagReset:function(){return this._flagSrc=this._flagImage=this._flagLoaded=this._flagVideo=this._flagScale=this._flagOffset=!1,this}}),he.MakeObservable(he.prototype);var de=Math.min,fe=Math.max,pe=Math.ceil,ge=Math.floor,me=function(t,e,n,i){It.call(this),this._renderer.type="path",this._renderer.flagVertices=me.FlagVertices.bind(this),this._renderer.bindVertices=me.BindVertices.bind(this),this._renderer.unbindVertices=me.UnbindVertices.bind(this),this._renderer.flagFill=me.FlagFill.bind(this),this._renderer.flagStroke=me.FlagStroke.bind(this),this._renderer.vertices=[],this._renderer.collection=[],this._closed=!!e,this._curved=!!n,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.linewidth=1,this.opacity=1,this.className="",this.visible=!0,this.cap="butt",this.join="miter",this.miter=4,this.vertices=t,this.automatic=!i,this.dashes=[],this.dashes.offset=0};function ve(t,e){if(0===e||1===e)return!0;for(var n=t._length*e,i=0,r=0;r<t._lengths.length;r++){var o=t._lengths[r];if(i>=n)return n-i>=0;i+=o}return!1}function ye(t,e){var n=t._length;if(e<=0)return 0;if(e>=n)return t._lengths.length-1;for(var i=0,r=0;i<t._lengths.length;i++){if(r+t._lengths[i]>=e)return e-=r,Math.max(i-1,0)+e/t._lengths[i];r+=t._lengths[i]}return-1}function be(t,e,n){var i,r,o,a,s,l,c,u,h=e.controls&&e.controls.right,d=t.controls&&t.controls.left;return i=e.x,s=e.y,r=(h||e).x,l=(h||e).y,o=(d||t).x,c=(d||t).y,a=t.x,u=t.y,h&&e._relative&&(r+=e.x,l+=e.y),d&&t._relative&&(o+=t.x,c+=t.y),St(i,s,r,l,o,c,a,u,n)}function _e(t,e,n){var i,r,o,a,s,l,c,u,h=e.controls&&e.controls.right,d=t.controls&&t.controls.left;return i=e.x,s=e.y,r=(h||e).x,l=(h||e).y,o=(d||t).x,c=(d||t).y,a=t.x,u=t.y,h&&e._relative&&(r+=e.x,l+=e.y),d&&t._relative&&(o+=t.x,c+=t.y),Ct(i,s,r,l,o,c,a,u,n)}ot.extend(me,{Properties:["fill","stroke","linewidth","opacity","visible","cap","join","miter","closed","curved","automatic","beginning","ending"],Utils:{getCurveLength:be},FlagVertices:function(){this._flagVertices=!0,this._flagLength=!0,this.parent&&(this.parent._flagLength=!0)},BindVertices:function(t){for(var e=t.length;e--;)t[e].bind(st.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()},UnbindVertices:function(t){for(var e=t.length;e--;)t[e].unbind(st.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()},FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(t){It.MakeObservable(t),ot.each(me.Properties.slice(2,8),ie,t),Object.defineProperty(t,"fill",{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof ae||this._fill instanceof se||this._fill instanceof ce||this._fill instanceof he)&&this._fill.unbind(st.Types.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof ae||this._fill instanceof se||this._fill instanceof ce||this._fill instanceof he)&&this._fill.bind(st.Types.change,this._renderer.flagFill)}}),Object.defineProperty(t,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof ae||this._stroke instanceof se||this._stroke instanceof ce||this._stroke instanceof he)&&this._stroke.unbind(st.Types.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof ae||this._stroke instanceof se||this._stroke instanceof ce||this._stroke instanceof he)&&this._stroke.bind(st.Types.change,this._renderer.flagStroke)}}),Object.defineProperty(t,"length",{get:function(){return this._flagLength&&this._updateLength(),this._length}}),Object.defineProperty(t,"closed",{enumerable:!0,get:function(){return this._closed},set:function(t){this._closed=!!t,this._flagVertices=!0}}),Object.defineProperty(t,"curved",{enumerable:!0,get:function(){return this._curved},set:function(t){this._curved=!!t,this._flagVertices=!0}}),Object.defineProperty(t,"automatic",{enumerable:!0,get:function(){return this._automatic},set:function(t){if(t!==this._automatic){this._automatic=!!t;var e=this._automatic?"ignore":"listen";ot.each(this.vertices,(function(t){t[e]()}))}}}),Object.defineProperty(t,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(t){this._beginning=t,this._flagVertices=!0}}),Object.defineProperty(t,"ending",{enumerable:!0,get:function(){return this._ending},set:function(t){this._ending=t,this._flagVertices=!0}}),Object.defineProperty(t,"vertices",{enumerable:!0,get:function(){return this._collection},set:function(t){this._renderer.flagVertices;var e=this._renderer.bindVertices,n=this._renderer.unbindVertices;this._collection&&this._collection.unbind(st.Types.insert,e).unbind(st.Types.remove,n),this._collection=t instanceof jt?t:new jt(t||[]),this._collection.bind(st.Types.insert,e).bind(st.Types.remove,n),e(this._collection)}}),Object.defineProperty(t,"clip",{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}}),Object.defineProperty(t,"dashes",{enumerable:!0,get:function(){return this._dashes},set:function(t){"number"!=typeof t.offset&&(t.offset=this._dashes.offset||0),this._dashes=t}})}}),ot.extend(me.prototype,It.prototype,{_flagVertices:!0,_flagLength:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagCap:!0,_flagJoin:!0,_flagMiter:!0,_flagClip:!1,_length:0,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_clip:!1,_dashes:[],constructor:me,clone:function(t){for(var e=new me,n=0;n<this.vertices.length;n++)e.vertices.push(this.vertices[n].clone());for(var i=0;i<me.Properties.length;i++){var r=me.Properties[i];e[r]=this[r]}return e.className=this.className,e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},toObject:function(){var t={vertices:this.vertices.map((function(t){return t.toObject()}))};return ot.each(me.Properties,(function(e){t[e]=this[e]}),this),t.className=this.className,t.translation=this.translation.toObject(),t.rotation=this.rotation,t.scale=this.scale instanceof lt?this.scale.toObject():this.scale,this.matrix.manual&&(t.matrix=this.matrix.toObject()),t},noFill:function(){return this.fill="transparent",this},noStroke:function(){return this.stroke=void 0,this},corner:function(){var t=this.getBoundingClientRect(!0);return t.centroid={x:t.left+t.width/2,y:t.top+t.height/2},ot.each(this.vertices,(function(e){e.subSelf(t.centroid),e.x+=t.width/2,e.y+=t.height/2})),this},center:function(){var t=this.getBoundingClientRect(!0);return t.centroid={x:t.left+t.width/2-this.translation.x,y:t.top+t.height/2-this.translation.y},ot.each(this.vertices,(function(e){e.subSelf(t.centroid)})),this},remove:function(){return this.parent?(this.parent.remove(this),this):this},getBoundingClientRect:function(t){var e,n,i,r,o,a,s,l,c=1/0,u=-1/0,h=1/0,d=-1/0;if(this._update(!0),e=t?this._matrix:J(this),n=this.linewidth/2,(i=this._renderer.vertices.length)<=0)return{width:0,height:0};for(r=0;r<i;r++)if(l=this._renderer.vertices[r],(o=this._renderer.vertices[(r+i-1)%i]).controls&&l.controls){a=o.relative?e.multiply(o.controls.right.x+o.x,o.controls.right.y+o.y,1):e.multiply(o.controls.right.x,o.controls.right.y,1),o=e.multiply(o.x,o.y,1),s=l.relative?e.multiply(l.controls.left.x+l.x,l.controls.left.y+l.y,1):e.multiply(l.controls.left.x,l.controls.left.y,1),l=e.multiply(l.x,l.y,1);var f=Rt(o.x,o.y,a.x,a.y,s.x,s.y,l.x,l.y);h=de(f.min.y-n,h),c=de(f.min.x-n,c),u=fe(f.max.x+n,u),d=fe(f.max.y+n,d)}else r<=1&&(o=e.multiply(o.x,o.y,1),h=de(o.y-n,h),c=de(o.x-n,c),u=fe(o.x+n,u),d=fe(o.y+n,d)),l=e.multiply(l.x,l.y,1),h=de(l.y-n,h),c=de(l.x-n,c),u=fe(l.x+n,u),d=fe(l.y+n,d);return{top:h,left:c,right:u,bottom:d,width:u-c,height:d-h}},getPointAt:function(t,e){for(var n,i,r,o,a,s,l,c,u,h,d,f,p,g,m,v=this.length*Math.min(Math.max(t,0),1),y=this.vertices.length,b=y-1,_=null,w=null,x=0,k=this._lengths.length,C=0;x<k;x++){if(C+this._lengths[x]>=v){this._closed?(n=tt(x,y),i=tt(x-1,y),0===x&&(n=i,i=x)):(n=x,i=Math.min(Math.max(x-1,0),b)),_=this.vertices[n],w=this.vertices[i],v-=C,t=0!==this._lengths[x]?v/this._lengths[x]:0;break}C+=this._lengths[x]}if(null===_||null===w)return null;if(!_)return w;if(!w)return _;m=w.controls&&w.controls.right,g=_.controls&&_.controls.left,a=w.x,h=w.y,s=(m||w).x,d=(m||w).y,l=(g||_).x,f=(g||_).y,c=_.x,p=_.y,m&&w.relative&&(s+=w.x,d+=w.y),g&&_.relative&&(l+=_.x,f+=_.y),o=kt(t,a,s,l,c),u=kt(t,h,d,f,p);var S=Q(a,s,t),R=Q(h,d,t),O=Q(s,l,t),E=Q(d,f,t),A=Q(l,c,t),T=Q(f,p,t),M=Q(S,O,t),P=Q(R,E,t),F=Q(O,A,t),j=Q(E,T,t);return ot.isObject(e)?(e.x=o,e.y=u,ot.isObject(e.controls)||dt.AppendCurveProperties(e),e.controls.left.x=M,e.controls.left.y=P,e.controls.right.x=F,e.controls.right.y=j,("boolean"===(e.relative,!1)||e.relative)&&(e.controls.left.x-=o,e.controls.left.y-=u,e.controls.right.x-=o,e.controls.right.y-=u),e.t=t,e):((r=new dt(o,u,M-o,P-u,F-o,j-u,this._curved?Z.curve:Z.line)).t=t,r)},plot:function(){if(this.curved)return Et(this._collection,this.closed),this;for(var t=0;t<this._collection.length;t++)this._collection[t].command=0===t?Z.move:Z.line;return this},subdivide:function(t){this._update();var e=this.vertices.length-1,n=this.vertices[e],i=this._closed||this.vertices[e]._command===Z.close,r=[];return ot.each(this.vertices,(function(o,a){if(a<=0&&!i)n=o;else{if(o.command===Z.move)return r.push(new dt(n.x,n.y)),a>0&&(r[r.length-1].command=Z.line),void(n=o);var s=_e(o,n,t);r=r.concat(s),ot.each(s,(function(t,e){e<=0&&n.command===Z.move?t.command=Z.move:t.command=Z.line})),a>=e&&(this._closed&&this._automatic?(s=_e(o,n=o,t),r=r.concat(s),ot.each(s,(function(t,e){e<=0&&n.command===Z.move?t.command=Z.move:t.command=Z.line}))):i&&r.push(new dt(o.x,o.y)),r[r.length-1].command=i?Z.close:Z.line),n=o}}),this),this._automatic=!1,this._curved=!1,this.vertices=r,this},_updateLength:function(t,e){e||this._update();var n=this.vertices.length-1,i=this.vertices[n],r=0;return void 0===this._lengths&&(this._lengths=[]),ot.each(this.vertices,(function(e,n){if(n<=0||e.command===Z.move)return i=e,void(this._lengths[n]=0);this._lengths[n]=be(e,i,t),r+=this._lengths[n],i=e}),this),this._length=r,this._flagLength=!1,this},_update:function(){if(this._flagVertices){this._automatic&&this.plot(),this._flagLength&&this._updateLength(void 0,!0);var t,e,n,i,r,o=this._collection.length,a=this._closed,s=Math.min(this._beginning,this._ending),l=Math.max(this._beginning,this._ending),c=ye(this,s*this._length),u=ye(this,l*this._length),h=pe(c),d=ge(u);this._renderer.vertices.length=0;for(var f=0;f<o;f++)this._renderer.collection.length<=f&&this._renderer.collection.push(new dt),f>d&&!e?((r=this._renderer.collection[f]).copy(this._collection[f]),this.getPointAt(l,r),r.command=this._renderer.collection[f].command,this._renderer.vertices.push(r),e=r,(n=this._collection[f-1])&&n.controls&&(r.controls.right.clear(),this._renderer.collection[f-1].controls.right.clear().lerp(n.controls.right,r.t))):f>=h&&f<=d&&(r=this._renderer.collection[f].copy(this._collection[f]),this._renderer.vertices.push(r),f===d&&ve(this,l)?(e=r,!a&&e.controls&&e.controls.right.clear()):f===h&&ve(this,s)&&((t=r).command=Z.move,!a&&t.controls&&t.controls.left.clear()));h>0&&!t&&(f=h-1,(r=this._renderer.collection[f]).copy(this._collection[f]),this.getPointAt(s,r),r.command=Z.move,this._renderer.vertices.unshift(r),t=r,(i=this._collection[f+1])&&i.controls&&(r.controls.left.clear(),this._renderer.collection[f+1].controls.left.copy(i.controls.left).lerp(lt.zero,r.t)))}return It.prototype._update.apply(this,arguments),this},flagReset:function(){return this._flagVertices=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClip=!1,It.prototype.flagReset.call(this),this}}),me.MakeObservable(me.prototype);var we=2*Math.PI,xe=Math.PI/2,ke=Math.cos,Ce=Math.sin,Se=function(t,e,n,i){for(var r=i?Math.max(i,2):4,o=[],a=0;a<r;a++)o.push(new dt);me.call(this,o,!0,!0,!0),this.radius=n,this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)};ot.extend(Se,{Properties:["radius"],MakeObservable:function(t){me.MakeObservable(t),ot.each(Se.Properties,ie,t)}}),ot.extend(Se.prototype,me.prototype,{_flagRadius:!1,_radius:0,constructor:Se,_update:function(){if(this._flagRadius)for(var t=4/3*Math.tan(Math.PI/(2*this.vertices.length)),e=this._radius,n=e*t,i=0,r=this.vertices.length;i<r;i++){var o=i/r*we,a=e*ke(o),s=e*Ce(o),l=n*ke(o-xe),c=n*Ce(o-xe),u=n*ke(o+xe),h=n*Ce(o+xe),d=this.vertices[i];d.command=Z.curve,d.set(a,s),d.controls.left.set(l,c),d.controls.right.set(u,h)}return me.prototype._update.call(this),this},flagReset:function(){return this._flagRadius=!1,me.prototype.flagReset.call(this),this},clone:function(t){var e=new Se(0,0,this.radius,this.vertices.length);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,this.matrix.manual&&e.matrix.copy(this.matrix),ot.each(me.Properties,(function(t){e[t]=this[t]}),this),t&&t.add(e),e},toObject:function(){var t=me.prototype.toObject.call(this);return ot.each(Se.Properties,(function(e){t[e]=this[e]}),this),t}}),Se.MakeObservable(Se.prototype);var Re=2*Math.PI,Oe=Math.PI/2,Ee=Math.cos,Ae=Math.sin,Te=function(t,e,n,i,r){"number"!=typeof i&&(i=n);for(var o=r?Math.max(r,2):4,a=[],s=0;s<o;s++)a.push(new dt);me.call(this,a,!0,!0,!0),this.width=2*n,this.height=2*i,this._update(),this.translation.set(t,e)};ot.extend(Te,{Properties:["width","height"],MakeObservable:function(t){me.MakeObservable(t),ot.each(Te.Properties,ie,t)}}),ot.extend(Te.prototype,me.prototype,{_flagWidth:!1,_flagHeight:!1,_width:0,_height:0,constructor:Te,_update:function(){if(this._flagWidth||this._flagHeight)for(var t=4/3*Math.tan(Math.PI/(2*this.vertices.length)),e=this._width/2,n=this._height/2,i=0,r=this.vertices.length;i<r;i++){var o=i/r*Re,a=e*Ee(o),s=n*Ae(o),l=e*t*Ee(o-Oe),c=n*t*Ae(o-Oe),u=e*t*Ee(o+Oe),h=n*t*Ae(o+Oe),d=this.vertices[i];d.command=Z.curve,d.set(a,s),d.controls.left.set(l,c),d.controls.right.set(u,h)}return me.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,me.prototype.flagReset.call(this),this},clone:function(t){var e=this.width/2,n=this.height/2,i=this.vertices.length,r=new Te(0,0,e,n,i);return r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,this.matrix.manual&&r.matrix.copy(this.matrix),ot.each(me.Properties,(function(t){r[t]=this[t]}),this),t&&t.add(r),r},toObject:function(){var t=me.prototype.toObject.call(this);return ot.each(Te.Properties,(function(e){t[e]=this[e]}),this),t}}),Te.MakeObservable(Te.prototype);var Me=function(t,e,n,i){me.call(this,[new dt(t,e),new dt(n,i)]),this.vertices[0].command=Z.move,this.vertices[1].command=Z.line,this.automatic=!1};ot.extend(Me.prototype,me.prototype),Me.prototype.constructor=Me,me.MakeObservable(Me.prototype);var Pe=function(t,e,n,i){me.call(this,[new dt,new dt,new dt,new dt],!0,!1,!0),this.width=n,this.height=i,this.origin=new lt,this.translation.set(t,e),this._update()};ot.extend(Pe,{Properties:["width","height"],MakeObservable:function(t){me.MakeObservable(t),ot.each(Pe.Properties,ie,t),Object.defineProperty(t,"origin",{enumerable:!0,get:function(){return this._origin},set:function(t){this._origin&&this._origin.unbind(st.Types.change,this._renderer.flagVertices),this._origin=t,this._origin.bind(st.Types.change,this._renderer.flagVertices),this._renderer.flagVertices()}})}}),ot.extend(Pe.prototype,me.prototype,{_flagWidth:0,_flagHeight:0,_width:0,_height:0,_origin:null,constructor:Pe,_update:function(){if(this._flagWidth||this._flagHeight){var t=this._width/2,e=this._height/2;this.vertices[0].set(-t,-e).add(this._origin).command=Z.move,this.vertices[1].set(t,-e).add(this._origin).command=Z.line,this.vertices[2].set(t,e).add(this._origin).command=Z.line,this.vertices[3].set(-t,e).add(this._origin).command=Z.line,this.vertices[4]&&(this.vertices[4].set(-t,-e).add(this._origin).command=Z.line)}return me.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,me.prototype.flagReset.call(this),this},clone:function(t){var e=new Pe(0,0,this.width,this.height);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,this.matrix.manual&&e.matrix.copy(this.matrix),ot.each(me.Properties,(function(t){e[t]=this[t]}),this),t&&t.add(e),e},toObject:function(){var t=me.prototype.toObject.call(this);return t.width=this.width,t.height=this.height,t.origin=this.origin.toObject(),t}}),Pe.MakeObservable(Pe.prototype);var Fe=function(t,e,n,i,r){void 0===r&&(r=Math.floor(Math.min(n,i)/12));for(var o=[],a=0;a<10;a++)o.push(new dt(0,0,0,0,0,0,0===a?Z.move:Z.curve));me.call(this,o),this.closed=!0,this.automatic=!1,this._renderer.flagRadius=Fe.FlagRadius.bind(this),this.width=n,this.height=i,this.radius=r,this._update(),this.translation.set(t,e)};ot.extend(Fe,{Properties:["width","height"],FlagRadius:function(){this._flagRadius=!0},MakeObservable:function(t){me.MakeObservable(t),ot.each(Fe.Properties,ie,t),Object.defineProperty(t,"radius",{enumerable:!0,get:function(){return this._radius},set:function(t){this._radius instanceof lt&&this._radius.unbind(st.Types.change,this._renderer.flagRadius),this._radius=t,this._radius instanceof lt&&this._radius.bind(st.Types.change,this._renderer.flagRadius),this._flagRadius=!0}})}}),ot.extend(Fe.prototype,me.prototype,{_flagWidth:!1,_flagHeight:!1,_flagRadius:!1,_width:0,_height:0,_radius:0,constructor:Fe,_update:function(){if(this._flagWidth||this._flagHeight||this._flagRadius){var t,e,n,i=this._width,r=this._height;this._radius instanceof lt?(t=this._radius.x,e=this._radius.y):(t=this._radius,e=this._radius);var o=i/2,a=r/2;(n=this.vertices[0]).x=-(o-t),n.y=-a,(n=this.vertices[1]).x=o-t,n.y=-a,n.controls.left.clear(),n.controls.right.x=t,n.controls.right.y=0,(n=this.vertices[2]).x=o,n.y=-(a-e),n.controls.right.clear(),n.controls.left.clear(),(n=this.vertices[3]).x=o,n.y=a-e,n.controls.left.clear(),n.controls.right.x=0,n.controls.right.y=e,(n=this.vertices[4]).x=o-t,n.y=a,n.controls.right.clear(),n.controls.left.clear(),(n=this.vertices[5]).x=-(o-t),n.y=a,n.controls.left.clear(),n.controls.right.x=-t,n.controls.right.y=0,(n=this.vertices[6]).x=-o,n.y=a-e,n.controls.left.clear(),n.controls.right.clear(),(n=this.vertices[7]).x=-o,n.y=-(a-e),n.controls.left.clear(),n.controls.right.x=0,n.controls.right.y=-e,(n=this.vertices[8]).x=-(o-t),n.y=-a,n.controls.left.clear(),n.controls.right.clear(),(n=this.vertices[9]).copy(this.vertices[8])}return me.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagRadius=!1,me.prototype.flagReset.call(this),this},clone:function(t){var e=this.width,n=this.height,i=this.radius,r=new Fe(0,0,e,n,i);return r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,this.matrix.manual&&r.matrix.copy(this.matrix),ot.each(me.Properties,(function(t){r[t]=this[t]}),this),t&&t.add(r),r},toObject:function(){var t=me.prototype.toObject.call(this);return ot.each(Fe.Properties,(function(e){t[e]=this[e]}),this),t.radius="number"==typeof this.radius?this.radius:this.radius.toObject(),t}}),Fe.MakeObservable(Fe.prototype);var je=function(t,e,n,i){if(It.call(this),this._renderer.type="text",this._renderer.flagFill=je.FlagFill.bind(this),this._renderer.flagStroke=je.FlagStroke.bind(this),this.value=t,"number"==typeof e&&(this.translation.x=e),"number"==typeof n&&(this.translation.y=n),this.dashes=[],this.dashes.offset=0,!ot.isObject(i))return this;ot.each(je.Properties,(function(t){t in i&&(this[t]=i[t])}),this)};ot.extend(je,{Ratio:.6,Properties:["value","family","size","leading","alignment","linewidth","style","weight","decoration","baseline","opacity","visible","className","fill","stroke"],FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(t){It.MakeObservable(t),ot.each(je.Properties.slice(0,12),ie,t),Object.defineProperty(t,"fill",{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof ae||this._fill instanceof se||this._fill instanceof ce||this._fill instanceof he)&&this._fill.unbind(st.Types.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof ae||this._fill instanceof se||this._fill instanceof ce||this._fill instanceof he)&&this._fill.bind(st.Types.change,this._renderer.flagFill)}}),Object.defineProperty(t,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof ae||this._stroke instanceof se||this._stroke instanceof ce||this._stroke instanceof he)&&this._stroke.unbind(st.Types.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof ae||this._stroke instanceof se||this._stroke instanceof ce||this._stroke instanceof he)&&this._stroke.bind(st.Types.change,this._renderer.flagStroke)}}),Object.defineProperty(t,"clip",{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}}),Object.defineProperty(t,"dashes",{enumerable:!0,get:function(){return this._dashes},set:function(t){"number"!=typeof t.offset&&(t.offset=this._dashes.offset||0),this._dashes=t}})}}),ot.extend(je.prototype,It.prototype,{_flagValue:!0,_flagFamily:!0,_flagSize:!0,_flagLeading:!0,_flagAlignment:!0,_flagBaseline:!0,_flagStyle:!0,_flagWeight:!0,_flagDecoration:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagClassName:!0,_flagVisible:!0,_flagClip:!1,_value:"",_family:"sans-serif",_size:13,_leading:17,_alignment:"center",_baseline:"middle",_style:"normal",_weight:500,_decoration:"none",_fill:"#000",_stroke:"transparent",_linewidth:1,_opacity:1,_className:"",_visible:!0,_clip:!1,_dashes:[],constructor:je,remove:function(){return this.parent?(this.parent.remove(this),this):this},clone:function(t){var e=new je(this.value);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,ot.each(je.Properties,(function(t){e[t]=this[t]}),this),this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},toObject:function(){var t={translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};return this.matrix.manual&&(t.matrix=this.matrix.toObject()),ot.each(je.Properties,(function(e){t[e]=this[e]}),this),t},noFill:function(){return this.fill="transparent",this},noStroke:function(){return this.stroke=void 0,this.linewidth=void 0,this},getBoundingClientRect:function(t){var e,n,i,r,o,a;this._update(!0),e=t?this._matrix:J(this);var s=this.leading,l=this.value.length*this.size*je.Ratio;switch(this.alignment){case"left":i=0,r=l;break;case"right":i=-l,r=0;break;default:i=-l/2,r=l/2}switch(this.baseline){case"top":o=0,a=s;break;case"bottom":o=-s,a=0;break;default:o=-s/2,a=s/2}return{top:o=(n=e.multiply(i,o,1)).y,left:i=n.x,right:r=(n=e.multiply(r,a,1)).x,bottom:a=n.y,width:r-i,height:a-o}},flagReset:function(){return this._flagValue=this._flagFamily=this._flagSize=this._flagLeading=this._flagAlignment=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagClip=this._flagDecoration=this._flagClassName=this._flagBaseline=this._flagWeight=this._flagStyle=!1,It.prototype.flagReset.call(this),this}}),je.MakeObservable(je.prototype);var Ie={start:"left",middle:"center",end:"right"},De=function(t,e){var n,i,r,o;e||(e={}),n=t.split(";");for(var a=0;a<n.length;a++)r=(i=n[a].split(":"))[0],o=i[1],void 0!==r&&void 0!==o&&(e[r]=o.replace(/\s/,""));return e},Le=function(t){for(var e={},n=ze(t),i=Math.max(n.length,t.style.length),r=0;r<i;r++){var o=t.style[r],a=n[r];o&&(e[o]=t.style[o]),a&&(e[a]=t.getAttribute(a))}return e},ze=function(t){for(var e=t.getAttributeNames(),n=["id","class","transform","xmlns","viewBox"],i=0;i<n.length;i++){var r=n[i],o=Array.prototype.indexOf.call(e,r);o>=0&&e.splice(o,1)}return e},Ve=function(t,e){var n=e.split(/\s/),i=parseFloat(n[0]),r=parseFloat(n[1]),o=parseFloat(n[2]),a=parseFloat(n[3]),s=Math.min(this.width/o,this.height/a);return t.translation.x-=i*s,t.translation.y-=r*s,t.scale=s,t},Be=function(t,e,n){var i,r,o,a,s={},l={},c={};if(Y.getComputedStyle){var u=Y.getComputedStyle(t);for(i=u.length;i--;)void 0!==(o=u[r=u[i]])&&(s[r]=o)}for(i=0;i<t.attributes.length;i++)a=t.attributes[i],/style/i.test(a.nodeName)?De(a.value,c):l[a.nodeName]=a.value;for(r in void 0!==s.opacity&&(s["stroke-opacity"]=s.opacity,s["fill-opacity"]=s.opacity,delete s.opacity),n&&ot.defaults(s,n),ot.extend(s,c,l),s.visible=!(void 0===s.display&&/none/i.test(s.display))||void 0===s.visibility&&/hidden/i.test(s.visibility),s)switch(o=s[r],r){case"transform":if(/none/i.test(o))break;if(null===(p=t.transform&&t.transform.baseVal&&t.transform.baseVal.length>0?t.transform.baseVal[0].matrix:t.getCTM?t.getCTM():null))break;if(_t.AutoCalculateImportedMatrices){var h=X(p);e.translation.set(h.translateX,h.translateY),e.rotation=Math.PI*(h.rotation/180),e.scale=new lt(h.scaleX,h.scaleY);var d=parseFloat((s.x+"").replace("px")),f=parseFloat((s.y+"").replace("px"));d&&(e.translation.x=d),f&&(e.translation.y=f)}else{var p=t.getCTM();e._matrix.manual=!0,e._matrix.set(p.a,p.b,p.c,p.d,p.e,p.f)}break;case"viewBox":Ve.call(this,e,o);break;case"visible":if(e instanceof Vt){e._visible=o;break}e.visible=o;break;case"stroke-linecap":if(e instanceof Vt){e._cap=o;break}e.cap=o;break;case"stroke-linejoin":if(e instanceof Vt){e._join=o;break}e.join=o;break;case"stroke-miterlimit":if(e instanceof Vt){e._miter=o;break}e.miter=o;break;case"stroke-width":if(e instanceof Vt){e._linewidth=parseFloat(o);break}e.linewidth=parseFloat(o);break;case"opacity":case"stroke-opacity":case"fill-opacity":if(e instanceof Vt){e._opacity=parseFloat(o);break}e.opacity=parseFloat(o);break;case"fill":case"stroke":if(e instanceof Vt&&(r="_"+r),/url\(#.*\)/i.test(o)){var g=Ue(this);e[r]=g.getById(o.replace(/url\(#(.*)\)/i,"$1"))}else e[r]=/none/i.test(o)?"transparent":o;break;case"id":e.id=o,t.id=o+"-"+_t.Identifier+"applied";break;case"class":case"className":e.classList=o.split(" ");break;case"x":case"y":if(e instanceof ae||e instanceof se||e instanceof ce)break;if(o.match("[a-z%]$")&&!o.endsWith("px")){var m=new ne("only pixel values are supported with the "+r+" attribute.");console.warn(m.name,m.message)}e.translation[r]=parseFloat(o);break;case"font-family":e instanceof je&&(e.family=o);break;case"font-size":e instanceof je&&(e.size=o);break;case"font-weight":e instanceof je&&(e.weight=o);break;case"font-style":e instanceof je&&(e.style=o);break;case"text-decoration":e instanceof je&&(e.decoration=o);break;case"line-height":e instanceof je&&(e.leading=o)}return s},We=function(t,e){for(var n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];r.id&&"#text"!==r.localName&&e.add(r.id,r)}},Ue=function(t){for(;t.parent;)t=t.parent;return t.scene},Ne={svg:function(t){for(var e=Ne.defs.current=new re,n=t.getElementsByTagName("defs"),i=0;i<n.length;i++)We(n[i],e);var r=Ne.g.call(this,t);return t.getAttribute("viewBox"),r.defs=e,delete Ne.defs.current,r},defs:function(t){return null},use:function(t,e){var n=t.getAttribute("href")||t.getAttribute("xlink:href");if(!n){var i=new ne("encountered <use /> with no href.");return console.warn(i.name,i.message),null}var r=n.slice(1);if(!Ne.defs.current.contains(r))return i=new ne("unable to find element for reference "+n+"."),console.warn(i.name,i.message),null;for(var o=Ne.defs.current.get(r).cloneNode(!0),a=["x","y","width","height","href","xlink:href"],s=0;s<t.attributes.length;s++){var l=t.attributes[s],c=a.includes(l.nodeName),u=!o.hasAttribute(l.nodeName);(c||u)&&o.setAttribute(l.nodeName,l.value)}var h=o.localName;return Ne[h].call(this,o,e)},g:function(t,e){var n,i=new Vt;Be.call(this,t,i,e),this.add(i),n=Le.call(this,t);for(var r=0,o=t.childNodes.length;r<o;r++){var a=t.childNodes[r],s=a.nodeName;if(!s)return;var l=s.replace(/svg:/gi,"").toLowerCase();if(l in Ne){var c=Ne[l].call(i,a,n);c&&!c.parent&&i.add(c)}}return i},polygon:function(t,e){var n=t.getAttribute("points"),i=[];n.replace(/(-?[\d.?]+)[,|\s](-?[\d.?]+)/g,(function(t,e,n){i.push(new dt(parseFloat(e),parseFloat(n)))}));var r=new me(i,!0).noStroke();return r.fill="black",Be.call(this,t,r,e),r},polyline:function(t,e){var n=Ne.polygon.call(this,t,e);return n.closed=!1,n},path:function(t,e){var n=t.getAttribute("d"),i=[],r=!1,o=!1;if(n){var a,s,l=new dt,c=n.match(/[a-df-z][^a-df-z]*/gi),u=c.length-1;ot.each(c.slice(0),(function(t,e){var n,i,r,o,a,s,l,u;t=function(t){var e=t.match(/[\+\-]?[\d\.]*e[\-\+]?\d*/gi);if(e&&e.length>0)for(var n=0;n<e.length;n++){var i=e[n],r=i.split(/e/i),o=parseFloat(r[0]),a=Math.pow(10,parseFloat(r[1]));a<0?o/=a:o*=a,t=t.replace(i,o)}return t}(t);var h,d=t[0],f=d.toLowerCase(),p=t.slice(1).trim().split(/[\s,]+|(?=\s?[+-])/),g=[],m=!1;for(a=0;a<p.length;a++)if((n=p[a]).indexOf(".")!==n.lastIndexOf(".")){for(r=(i=n.split("."))[0]+"."+i[1],p.splice(a,1,r),o=2;o<i.length;o++)p.splice(a+o-1,0,"0."+i[o]);m=!0}switch(m&&(t=d+p.join(",")),e<=0&&(c=[]),f){case"h":case"v":p.length>1&&(h=1);break;case"m":case"l":case"t":p.length>2&&(h=2);break;case"s":case"q":p.length>4&&(h=4);break;case"c":p.length>6&&(h=6);break;case"a":p.length>7&&(h=7)}if(h){for(a=0,l=p.length,u=0;a<l;a+=h){if(s=d,u>0)switch(d){case"m":s="l";break;case"M":s="L"}g.push(s+p.slice(a,a+h).join(" ")),u++}c=Array.prototype.concat.apply(c,g)}else c.push(t)})),ot.each(c,(function(t,e){var n,c,h,d,f,p,g,m,v,y,b,_,w=t[0],x=w.toLowerCase();switch(s=(s=(s=t.slice(1).trim()).replace(/(-?\d+(?:\.\d*)?)[eE]([+-]?\d+)/g,(function(t,e,n){return parseFloat(e)*Math.pow(10,n)}))).split(/[\s,]+|(?=\s?[+-])/),o=w===x,x){case"z":if(e>=u)r=!0;else{c=l.x,h=l.y,n=new dt(c,h,void 0,void 0,void 0,void 0,Z.close);for(var k=i.length-1;k>=0;k--){var C=i[k];if(/m/i.test(C.command)){l=C;break}}}break;case"m":case"l":a=void 0,c=parseFloat(s[0]),h=parseFloat(s[1]),n=new dt(c,h,void 0,void 0,void 0,void 0,/m/i.test(x)?Z.move:Z.line),o&&n.addSelf(l),l=n;break;case"h":case"v":var S=/h/i.test(x)?"x":"y",R=/x/i.test(S)?"y":"x";(n=new dt(void 0,void 0,void 0,void 0,void 0,void 0,Z.line))[S]=parseFloat(s[0]),n[R]=l[R],o&&(n[S]+=l[S]),l=n;break;case"c":case"s":d=l.x,f=l.y,a||(a=new lt),/c/i.test(x)?(p=parseFloat(s[0]),g=parseFloat(s[1]),m=parseFloat(s[2]),v=parseFloat(s[3]),y=parseFloat(s[4]),b=parseFloat(s[5])):(p=(_=Tt(l,a,o)).x,g=_.y,m=parseFloat(s[0]),v=parseFloat(s[1]),y=parseFloat(s[2]),b=parseFloat(s[3])),o&&(p+=d,g+=f,m+=d,v+=f,y+=d,b+=f),ot.isObject(l.controls)||dt.AppendCurveProperties(l),l.controls.right.set(p-l.x,g-l.y),n=new dt(y,b,m-y,v-b,void 0,void 0,Z.curve),l=n,a=n.controls.left;break;case"t":case"q":d=l.x,f=l.y,a||(a=new lt),/q/i.test(x)?(p=parseFloat(s[0]),g=parseFloat(s[1]),m=parseFloat(s[0]),v=parseFloat(s[1]),y=parseFloat(s[2]),b=parseFloat(s[3])):(p=(_=Tt(l,a,o)).x,g=_.y,m=_.x,v=_.y,y=parseFloat(s[0]),b=parseFloat(s[1])),o&&(p+=d,g+=f,m+=d,v+=f,y+=d,b+=f),ot.isObject(l.controls)||dt.AppendCurveProperties(l),l.controls.right.set(.33*(p-l.x),.33*(g-l.y)),n=new dt(y,b,m-y,v-b,void 0,void 0,Z.curve),l=n,a=n.controls.left;break;case"a":d=l.x,f=l.y;var O=parseFloat(s[0]),E=parseFloat(s[1]),A=parseFloat(s[2]),T=parseFloat(s[3]),M=parseFloat(s[4]);y=parseFloat(s[5]),b=parseFloat(s[6]),o&&(y+=d,b+=f);var P=new dt(y,b);P.command=Z.arc,P.rx=O,P.ry=E,P.xAxisRotation=A,P.largeArcFlag=T,P.sweepFlag=M,n=P,l=P,a=void 0}n&&(Array.isArray(n)?i=i.concat(n):i.push(n))}))}(n=new me(i,r,void 0,!0).noStroke()).fill="black";var h=n.getBoundingClientRect(!0);return h.centroid={x:h.left+h.width/2,y:h.top+h.height/2},ot.each(n.vertices,(function(t){t.subSelf(h.centroid)})),Be.call(this,t,n,e),n.translation.addSelf(h.centroid),n},circle:function(t,e){var n=parseFloat(t.getAttribute("cx")),i=parseFloat(t.getAttribute("cy")),r=parseFloat(t.getAttribute("r")),o=new Se(0,0,r).noStroke();return o.fill="black",Be.call(this,t,o,e),o.translation.x=n,o.translation.y=i,o},ellipse:function(t,e){var n=parseFloat(t.getAttribute("cx")),i=parseFloat(t.getAttribute("cy")),r=parseFloat(t.getAttribute("rx")),o=parseFloat(t.getAttribute("ry")),a=new Te(0,0,r,o).noStroke();return a.fill="black",Be.call(this,t,a,e),a.translation.x=n,a.translation.y=i,a},rect:function(t,e){var n=parseFloat(t.getAttribute("rx")),i=parseFloat(t.getAttribute("ry"));if(!ot.isNaN(n)||!ot.isNaN(i))return Ne["rounded-rect"](t);parseFloat(t.getAttribute("x")),parseFloat(t.getAttribute("y"));var r=parseFloat(t.getAttribute("width")),o=parseFloat(t.getAttribute("height")),a=r/2,s=o/2,l=new Pe(0,0,r,o).noStroke();return l.fill="black",Be.call(this,t,l,e),l.translation.x+=a,l.translation.y+=s,l},"rounded-rect":function(t,e){parseFloat(t.getAttribute("x")),parseFloat(t.getAttribute("y"));var n=parseFloat(t.getAttribute("rx"))||0,i=parseFloat(t.getAttribute("ry"))||0,r=parseFloat(t.getAttribute("width")),o=parseFloat(t.getAttribute("height")),a=r/2,s=o/2,l=new lt(n,i),c=new Fe(0,0,r,o,l).noStroke();return c.fill="black",Be.call(this,t,c,e),c.translation.x+=a,c.translation.y+=s,c},line:function(t,e){var n=parseFloat(t.getAttribute("x1")),i=parseFloat(t.getAttribute("y1")),r=parseFloat(t.getAttribute("x2")),o=parseFloat(t.getAttribute("y2")),a=new Me(n,i,r,o).noFill();return Be.call(this,t,a,e),a},lineargradient:function(t,e){for(var n=parseFloat(t.getAttribute("x1")),i=parseFloat(t.getAttribute("y1")),r=parseFloat(t.getAttribute("x2")),o=parseFloat(t.getAttribute("y2")),a=(r+n)/2,s=(o+i)/2,l=[],c=0;c<t.children.length;c++){var u=t.children[c],h=u.getAttribute("offset");/%/gi.test(h)&&(h=parseFloat(h.replace(/%/gi,""))/100),h=parseFloat(h);var d,f=u.getAttribute("stop-color"),p=u.getAttribute("stop-opacity"),g=u.getAttribute("style");null===f&&(f=(d=!!g&&g.match(/stop-color:\s?([#a-fA-F0-9]*)/))&&d.length>1?d[1]:void 0),p=null===p?(d=!!g&&g.match(/stop-opacity:\s?([0-9.-]*)/))&&d.length>1?parseFloat(d[1]):1:parseFloat(p),l.push(new oe(h,f,p))}var m=new se(n-a,i-s,r-a,o-s,l);return Be.call(this,t,m,e),m},radialgradient:function(t,e){var n=parseFloat(t.getAttribute("cx"))||0,i=parseFloat(t.getAttribute("cy"))||0,r=parseFloat(t.getAttribute("r")),o=parseFloat(t.getAttribute("fx")),a=parseFloat(t.getAttribute("fy"));ot.isNaN(o)&&(o=n),ot.isNaN(a)&&(a=i);for(var s=Math.abs(n+o)/2,l=Math.abs(i+a)/2,c=[],u=0;u<t.children.length;u++){var h=t.children[u],d=h.getAttribute("offset");/%/gi.test(d)&&(d=parseFloat(d.replace(/%/gi,""))/100),d=parseFloat(d);var f,p=h.getAttribute("stop-color"),g=h.getAttribute("stop-opacity"),m=h.getAttribute("style");null===p&&(p=(f=!!m&&m.match(/stop-color:\s?([#a-fA-F0-9]*)/))&&f.length>1?f[1]:void 0),g=null===g?(f=!!m&&m.match(/stop-opacity:\s?([0-9.-]*)/))&&f.length>1?parseFloat(f[1]):1:parseFloat(g),c.push(new oe(d,p,g))}var v=new ce(n-s,i-l,r,c,o-s,a-l);return Be.call(this,t,v,e),v},text:function(t,e){var n,i=(n=t.getAttribute("text-anchor"),Ie[n]||"left"),r=function(t){var e=t.getAttribute("dominant-baseline"),n=t.getAttribute("alignment-baseline");return e||n}(t)||"baseline",o=t.textContent,a=new je(o);return Be.call(this,t,a,e),a.alignment=i,a.baseline=r,a}},qe=function(t,e){var n=new XMLHttpRequest;return n.open("GET",t),n.onreadystatechange=function(){4===n.readyState&&200===n.status&&e(n.responseText)},n.send(),n},He=function(t,e,n,i){me.call(this,[new dt,new dt,new dt,new dt],!0),this._renderer.flagTextures=He.FlagTextures.bind(this),this._renderer.bindTextures=He.BindTextures.bind(this),this._renderer.unbindTextures=He.UnbindTextures.bind(this),this.noStroke(),this.noFill(),Array.isArray(t)?this.textures=t.map(He.GenerateTexture.bind(this)):this.textures=[He.GenerateTexture(t)],this.origin=new lt,this._update(),this.translation.set(e||0,n||0),this.frameRate="number"==typeof i?i:He.DefaultFrameRate,this.index=0};ot.extend(He,{Properties:["frameRate","index"],DefaultFrameRate:30,FlagTextures:function(){this._flagTextures=!0},BindTextures:function(t){for(var e=t.length;e--;)t[e].bind(st.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()},UnbindTextures:function(t){for(var e=t.length;e--;)t[e].unbind(st.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()},MakeObservable:function(t){Pe.MakeObservable(t),ot.each(He.Properties,ie,t),Object.defineProperty(t,"textures",{enumerable:!0,get:function(){return this._textures},set:function(t){this._renderer.flagTextures;var e=this._renderer.bindTextures,n=this._renderer.unbindTextures;this._textures&&this._textures.unbind(st.Types.insert,e).unbind(st.Types.remove,n),this._textures=new jt((t||[]).slice(0)),this._textures.bind(st.Types.insert,e).bind(st.Types.remove,n),e(this._textures)}})},GenerateTexture:function(t){return t instanceof he?t:"string"==typeof t?new he(t):void 0}}),ot.extend(He.prototype,Pe.prototype,{_flagTextures:!1,_flagFrameRate:!1,_flagIndex:!1,_amount:1,_duration:0,_index:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_textures:null,_frameRate:0,_origin:null,constructor:He,play:function(t,e,n){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=ot.performance.now(),"number"==typeof t&&(this._firstFrame=t),"number"==typeof e&&(this._lastFrame=e),"function"==typeof n?this._onLastFrame=n:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=this._firstFrame,this},clone:function(t){var e=new He(this.textures,this.translation.x,this.translation.y,this.frameRate);return e._loop=this._loop,this._playing&&e.play(),t&&t.add(e),e},toObject:function(){var t=Pe.prototype.toObject.call(this);return t.textures=this.textures.map((function(t){return t.toObject()})),t.frameRate=this.frameRate,t.index=this.index,t._firstFrame=this._firstFrame,t._lastFrame=this._lastFrame,t._loop=this._loop,t},_update:function(){var t,e,n,i,r,o,a,s,l=this._textures;return this._flagTextures&&(this._amount=l.length),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._playing&&this._frameRate>0?(i=this._amount,ot.isNaN(this._lastFrame)&&(this._lastFrame=i-1),n=ot.performance.now()-this._startTime,r=1e3*((s=this._lastFrame+1)-this._firstFrame)/this._frameRate,this._loop?n%=r:n=Math.min(n,r),a=Q(this._firstFrame,s,n/r),(a=Math.floor(a))!==this._index&&(this._index=a,(o=l[this._index]).loaded&&(t=o.image.width,e=o.image.height,this.width!==t&&(this.width=t),this.height!==e&&(this.height=e),this.fill=o,a>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()))):!this._flagIndex&&this.fill instanceof he||((o=l[this._index]).loaded&&(t=o.image.width,e=o.image.height,this.width!==t&&(this.width=t),this.height!==e&&(this.height=e)),this.fill=o),Pe.prototype._update.call(this),this},flagReset:function(){return this._flagTextures=this._flagFrameRate=!1,Pe.prototype.flagReset.call(this),this}}),He.MakeObservable(He.prototype);var Ge=function(t,e,n,i,r,o){me.call(this,[new dt,new dt,new dt,new dt],!0),this.noStroke(),this.noFill(),t instanceof he?this.texture=t:"string"==typeof t&&(this.texture=new he(t)),this.origin=new lt,this._update(),this.translation.set(e||0,n||0),"number"==typeof i&&(this.columns=i),"number"==typeof r&&(this.rows=r),"number"==typeof o&&(this.frameRate=o),this.index=0};ot.extend(Ge,{Properties:["texture","columns","rows","frameRate","index"],MakeObservable:function(t){Pe.MakeObservable(t),ot.each(Ge.Properties,ie,t)}}),ot.extend(Ge.prototype,Pe.prototype,{_flagTexture:!1,_flagColumns:!1,_flagRows:!1,_flagFrameRate:!1,flagIndex:!1,_amount:1,_duration:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_texture:null,_columns:1,_rows:1,_frameRate:0,_index:0,_origin:null,constructor:Ge,play:function(t,e,n){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=ot.performance.now(),"number"==typeof t&&(this._firstFrame=t),"number"==typeof e&&(this._lastFrame=e),"function"==typeof n?this._onLastFrame=n:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=0,this},clone:function(t){var e=new Ge(this.texture,this.translation.x,this.translation.y,this.columns,this.rows,this.frameRate);return this.playing&&(e.play(this._firstFrame,this._lastFrame),e._loop=this._loop),t&&t.add(e),e},toObject:function(){var t=Pe.prototype.toObject.call(this);return t.texture=this.texture.toObject(),t.columns=this.columns,t.rows=this.rows,t.frameRate=this.frameRate,t.index=this.index,t._firstFrame=this._firstFrame,t._lastFrame=this._lastFrame,t._loop=this._loop,t},_update:function(){var t,e,n,i,r,o,a,s,l,c=this._texture,u=this._columns,h=this._rows;if((this._flagColumns||this._flagRows)&&(this._amount=this._columns*this._rows),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._flagTexture&&(this.fill=this._texture),this._texture.loaded){t=(a=c.image.width)/u,e=(s=c.image.height)/h,i=this._amount,this.width!==t&&(this.width=t),this.height!==e&&(this.height=e),this._playing&&this._frameRate>0&&(ot.isNaN(this._lastFrame)&&(this._lastFrame=i-1),n=ot.performance.now()-this._startTime,r=1e3*((l=this._lastFrame+1)-this._firstFrame)/this._frameRate,this._loop?n%=r:n=Math.min(n,r),o=Q(this._firstFrame,l,n/r),(o=Math.floor(o))!==this._index&&(this._index=o,o>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()));var d=-t*(this._index%u)+(a-t)/2,f=-e*Math.floor(this._index/u)+(s-e)/2;d!==c.offset.x&&(c.offset.x=d),f!==c.offset.y&&(c.offset.y=f)}return Pe.prototype._update.call(this),this},flagReset:function(){return this._flagTexture=this._flagColumns=this._flagRows=this._flagFrameRate=!1,Pe.prototype.flagReset.call(this),this}}),Ge.MakeObservable(Ge.prototype);var Ze=2*Math.PI,Ke=Math.PI/2,Ye=function(t,e,n,i,r,o,a){for(var s=a||3*_t.Resolution,l=[],c=0;c<s;c++)l.push(new dt);me.call(this,l,!0,!1,!0),this.innerRadius=n,this.outerRadius=i,this.startAngle=r,this.endAngle=o,this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)};ot.extend(Ye,{Properties:["startAngle","endAngle","innerRadius","outerRadius"],MakeObservable:function(t){me.MakeObservable(t),ot.each(Ye.Properties,ie,t)}}),ot.extend(Ye.prototype,me.prototype,{_flagStartAngle:!1,_flagEndAngle:!1,_flagInnerRadius:!1,_flagOuterRadius:!1,_startAngle:0,_endAngle:Ze,_innerRadius:0,_outerRadius:0,constructor:Ye,_update:function(){if(this._flagStartAngle||this._flagEndAngle||this._flagInnerRadius||this._flagOuterRadius){var t,e=this._startAngle,n=this._endAngle,i=this._innerRadius,r=this._outerRadius,o=tt(e,Ze)===tt(n,Ze),a=i>0,s=this.vertices,l=a?s.length/2:s.length,c=0;o?l--:a||(l-=2);for(var u=0,h=l-1;u<l;u++){var d=u/h,f=s[c],p=d*(n-e)+e,g=(n-e)/l,m=r*Math.cos(p),v=r*Math.sin(p);if(t=0===u?Z.move:Z.curve,f.command=t,f.x=m,f.y=v,f.controls.left.clear(),f.controls.right.clear(),f.command===Z.curve){var y=r*g/Math.PI;f.controls.left.x=y*Math.cos(p-Ke),f.controls.left.y=y*Math.sin(p-Ke),f.controls.right.x=y*Math.cos(p+Ke),f.controls.right.y=y*Math.sin(p+Ke),1===u&&f.controls.left.multiplyScalar(2),u===h&&f.controls.right.multiplyScalar(2)}c++}if(a){for(o?(s[c].command=Z.close,c++):h=--l-1,u=0;u<l;u++)d=u/h,f=s[c],p=(1-d)*(n-e)+e,g=(n-e)/l,m=i*Math.cos(p),v=i*Math.sin(p),t=Z.curve,u<=0&&(t=o?Z.move:Z.line),f.command=t,f.x=m,f.y=v,f.controls.left.clear(),f.controls.right.clear(),f.command===Z.curve&&(y=i*g/Math.PI,f.controls.left.x=y*Math.cos(p+Ke),f.controls.left.y=y*Math.sin(p+Ke),f.controls.right.x=y*Math.cos(p-Ke),f.controls.right.y=y*Math.sin(p-Ke),1===u&&f.controls.left.multiplyScalar(2),u===h&&f.controls.right.multiplyScalar(2)),c++;s[c].copy(s[0]),s[c].command=Z.line}else o||(s[c].command=Z.line,s[c].x=0,s[c].y=0,s[++c].copy(s[0]),s[c].command=Z.line)}return me.prototype._update.call(this),this},flagReset:function(){return me.prototype.flagReset.call(this),this._flagStartAngle=this._flagEndAngle=this._flagInnerRadius=this._flagOuterRadius=!1,this},clone:function(t){var e=this.innerRadius,n=this.outerradius,i=this.startAngle,r=this.endAngle,o=this.vertices.length,a=new Ye(0,0,e,n,i,r,o);return a.translation.copy(this.translation),a.rotation=this.rotation,a.scale=this.scale,this.matrix.manual&&a.matrix.copy(this.matrix),ot.each(me.Properties,(function(t){a[t]=this[t]}),this),t&&t.add(a),a},toObject:function(){var t=me.prototype.toObject.call(this);return ot.each(Ye.Properties,(function(e){t[e]=this[e]}),this),t}}),Ye.MakeObservable(Ye.prototype);var Xe=2*Math.PI,$e=Math.cos,Je=Math.sin,Qe=function(t,e,n,i){i=Math.max(i||0,3),me.call(this),this.closed=!0,this.automatic=!1,this.width=2*n,this.height=2*n,this.sides=i,this._update(),this.translation.set(t,e)};ot.extend(Qe,{Properties:["width","height","sides"],MakeObservable:function(t){me.MakeObservable(t),ot.each(Qe.Properties,ie,t)}}),ot.extend(Qe.prototype,me.prototype,{_flagWidth:!1,_flagHeight:!1,_flagSides:!1,_width:0,_height:0,_sides:0,constructor:Qe,_update:function(){if(this._flagWidth||this._flagHeight||this._flagSides){var t=this._sides,e=t+1,n=this.vertices.length;n>t&&(this.vertices.splice(t-1,n-t),n=t);for(var i=0;i<e;i++){var r=Xe*((i+.5)/t)+Math.PI/2,o=this._width*$e(r)/2,a=this._height*Je(r)/2;i>=n?this.vertices.push(new dt(o,a)):this.vertices[i].set(o,a),this.vertices[i].command=0===i?Z.move:Z.line}}return me.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagSides=!1,me.prototype.flagReset.call(this),this},clone:function(t){var e=new Qe(0,0,this.radius,this.sides);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,this.matrix.manual&&e.matrix.copy(this.matrix),ot.each(me.Properties,(function(t){e[t]=this[t]}),this),t&&t.add(e),e},toObject:function(){var t=me.prototype.toObject.call(this);return ot.each(Qe.Properties,(function(e){t[e]=this[e]}),this),t}}),Qe.MakeObservable(Qe.prototype);var tn=2*Math.PI,en=Math.cos,nn=Math.sin,rn=function(t,e,n,i,r){arguments.length<=3&&(n=(i=n)/2),("number"!=typeof r||r<=0)&&(r=5),me.call(this),this.closed=!0,this.automatic=!1,this.innerRadius=n,this.outerRadius=i,this.sides=r,this._update(),this.translation.set(t,e)};ot.extend(rn,{Properties:["innerRadius","outerRadius","sides"],MakeObservable:function(t){me.MakeObservable(t),ot.each(rn.Properties,ie,t)}}),ot.extend(rn.prototype,me.prototype,{_flagInnerRadius:!1,_flagOuterRadius:!1,_flagSides:!1,_innerRadius:0,_outerRadius:0,_sides:0,constructor:rn,_update:function(){if(this._flagInnerRadius||this._flagOuterRadius||this._flagSides){var t=2*this._sides,e=t+1,n=this.vertices.length;n>t&&(this.vertices.splice(t-1,n-t),n=t);for(var i=0;i<e;i++){var r=tn*((i+.5)/t),o=(i%2?this._outerRadius:this._innerRadius)/2,a=o*en(r),s=o*nn(r);i>=n?this.vertices.push(new dt(a,s)):this.vertices[i].set(a,s),this.vertices[i].command=0===i?Z.move:Z.line}}return me.prototype._update.call(this),this},flagReset:function(){return this._flagInnerRadius=this._flagOuterRadius=this._flagSides=!1,me.prototype.flagReset.call(this),this},clone:function(t){var e=this.innerRadius,n=this.outerRadius,i=this.sides,r=new rn(0,0,e,n,i);return r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,this.matrix.manual&&r.matrix.copy(this.matrix),ot.each(me.Properties,(function(t){r[t]=this[t]}),this),t&&t.add(r),r},toObject:function(){var t=me.prototype.toObject.call(this);return ot.each(rn.Properties,(function(e){t[e]=this[e]}),this),t}}),rn.MakeObservable(rn.prototype);var on={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",alignments:{left:"start",center:"middle",right:"end"},createElement:function(t,e){var n=t,i=document.createElementNS(on.ns,n);return"svg"===n&&(e=ot.defaults(e||{},{version:on.version})),e&&Object.keys(e).length>0&&on.setAttributes(i,e),i},setAttributes:function(t,e){for(var n=Object.keys(e),i=0;i<n.length;i++)/href/.test(n[i])?t.setAttributeNS(on.xlink,n[i],e[n[i]]):t.setAttribute(n[i],e[n[i]]);return this},removeAttributes:function(t,e){for(var n in e)t.removeAttribute(n);return this},toString:function(t,e){for(var n,i=t.length,r=i-1,o="",a=0;a<i;a++){var s,l,c,u,h,d,f,p,g,m,v,y,b,_,w=t[a],x=e?tt(a-1,i):Math.max(a-1,0),k=e?tt(a+1,i):Math.min(a+1,r),C=t[x],S=t[k],R=nt(w.x),O=nt(w.y);switch(w.command){case Z.close:s=Z.close;break;case Z.arc:m=w.rx,v=w.ry,y=w.xAxisRotation,b=w.largeArcFlag,_=w.sweepFlag,s=Z.arc+" "+m+" "+v+" "+y+" "+b+" "+_+" "+R+" "+O;break;case Z.curve:d=C.controls&&C.controls.right||lt.zero,f=w.controls&&w.controls.left||lt.zero,C.relative?(l=nt(d.x+C.x),c=nt(d.y+C.y)):(l=nt(d.x),c=nt(d.y)),w.relative?(u=nt(f.x+w.x),h=nt(f.y+w.y)):(u=nt(f.x),h=nt(f.y)),s=(0===a?Z.move:Z.curve)+" "+l+" "+c+" "+u+" "+h+" "+R+" "+O;break;case Z.move:n=w,s=Z.move+" "+R+" "+O;break;default:s=w.command+" "+R+" "+O}a>=r&&e&&(w.command===Z.curve&&(S=n,p=w.controls&&w.controls.right||w,g=S.controls&&S.controls.left||S,w.relative?(l=nt(p.x+w.x),c=nt(p.y+w.y)):(l=nt(p.x),c=nt(p.y)),S.relative?(u=nt(g.x+S.x),h=nt(g.y+S.y)):(u=nt(g.x),h=nt(g.y)),s+=" C "+l+" "+c+" "+u+" "+h+" "+(R=nt(S.x))+" "+(O=nt(S.y))),w.command!==Z.close&&(s+=" Z")),o+=s+" "}return o},getClip:function(t){var e=t._renderer.clip;if(!e){for(var n=t;n.parent;)n=n.parent;e=t._renderer.clip=on.createElement("clipPath"),n.defs.appendChild(e)}return e},group:{appendChild:function(t){var e=t._renderer.elem;if(e){var n=e.nodeName;!n||/(radial|linear)gradient/i.test(n)||t._clip||this.elem.appendChild(e)}},removeChild:function(t){var e=t._renderer.elem;e&&e.parentNode==this.elem&&e.nodeName&&(t._clip||this.elem.removeChild(e))},orderChild:function(t){this.elem.appendChild(t._renderer.elem)},renderChild:function(t){on[t._renderer.type].render.call(t,this)},render:function(t){if(this._update(),0===this._opacity&&!this._flagOpacity)return this;this._renderer.elem||(this._renderer.elem=on.createElement("g",{id:this.id}),t.appendChild(this._renderer.elem));var e=this._matrix.manual||this._flagMatrix,n={domElement:t,elem:this._renderer.elem};e&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");for(var i=0;i<this.children.length;i++){var r=this.children[i];on[r._renderer.type].render.call(r,t)}return this._flagOpacity&&this._renderer.elem.setAttribute("opacity",this._opacity),this._flagClassName&&this._renderer.elem.setAttribute("class",this.classList.join(" ")),this._flagAdditions&&this.additions.forEach(on.group.appendChild,n),this._flagSubtractions&&this.subtractions.forEach(on.group.removeChild,n),this._flagOrder&&this.children.forEach(on.group.orderChild,n),this._flagMask&&(this._mask?this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")"):this._renderer.elem.removeAttribute("clip-path")),this.flagReset()}},path:{render:function(t){if(this._update(),0===this._opacity&&!this._flagOpacity)return this;var e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagVertices){var n=on.toString(this._renderer.vertices,this._closed);e.d=n}if(this._fill&&this._fill._renderer&&(this._fill._update(),on[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),on[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e["stroke-opacity"]=this._opacity,e["fill-opacity"]=this._opacity),this._flagClassName&&(e.class=this.classList.join(" ")),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this._flagCap&&(e["stroke-linecap"]=this._cap),this._flagJoin&&(e["stroke-linejoin"]=this._join),this._flagMiter&&(e["stroke-miterlimit"]=this._miter),this.dashes&&this.dashes.length>0&&(e["stroke-dasharray"]=this.dashes.join(" "),e["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?on.setAttributes(this._renderer.elem,e):(e.id=this.id,this._renderer.elem=on.createElement("path",e),t.appendChild(this._renderer.elem)),this._flagClip){var i=on.getClip(this),r=this._renderer.elem;this._clip?(r.removeAttribute("id"),i.setAttribute("id",this.id),i.appendChild(r)):(i.removeAttribute("id"),r.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(r))}return this.flagReset()}},text:{render:function(t){this._update();var e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagFamily&&(e["font-family"]=this._family),this._flagSize&&(e["font-size"]=this._size),this._flagLeading&&(e["line-height"]=this._leading),this._flagAlignment&&(e["text-anchor"]=on.alignments[this._alignment]||this._alignment),this._flagBaseline&&(e["alignment-baseline"]=e["dominant-baseline"]=this._baseline),this._flagStyle&&(e["font-style"]=this._style),this._flagWeight&&(e["font-weight"]=this._weight),this._flagDecoration&&(e["text-decoration"]=this._decoration),this._fill&&this._fill._renderer&&(this._fill._update(),on[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),on[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e.opacity=this._opacity),this._flagClassName&&(e.class=this.classList.join(" ")),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this.dashes&&this.dashes.length>0&&(e["stroke-dasharray"]=this.dashes.join(" "),e["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?on.setAttributes(this._renderer.elem,e):(e.id=this.id,this._renderer.elem=on.createElement("text",e),t.defs.appendChild(this._renderer.elem)),this._flagClip){var n=on.getClip(this),i=this._renderer.elem;this._clip?(i.removeAttribute("id"),n.setAttribute("id",this.id),n.appendChild(i)):(n.removeAttribute("id"),i.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(i))}return this._flagValue&&(this._renderer.elem.textContent=this._value),this.flagReset()}},"linear-gradient":{render:function(t,e){e||this._update();var n={};if(this._flagEndPoints&&(n.x1=this.left._x,n.y1=this.left._y,n.x2=this.right._x,n.y2=this.right._y),this._flagSpread&&(n.spreadMethod=this._spread),this._renderer.elem?on.setAttributes(this._renderer.elem,n):(n.id=this.id,n.gradientUnits="userSpaceOnUse",this._renderer.elem=on.createElement("linearGradient",n),t.defs.appendChild(this._renderer.elem)),this._flagStops){var i=this._renderer.elem.childNodes.length!==this.stops.length;if(i)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(var r=0;r<this.stops.length;r++){var o=this.stops[r],a={};o._flagOffset&&(a.offset=100*o._offset+"%"),o._flagColor&&(a["stop-color"]=o._color),o._flagOpacity&&(a["stop-opacity"]=o._opacity),o._renderer.elem?on.setAttributes(o._renderer.elem,a):o._renderer.elem=on.createElement("stop",a),i&&this._renderer.elem.appendChild(o._renderer.elem),o.flagReset()}}return this.flagReset()}},"radial-gradient":{render:function(t,e){e||this._update();var n={};if(this._flagCenter&&(n.cx=this.center._x,n.cy=this.center._y),this._flagFocal&&(n.fx=this.focal._x,n.fy=this.focal._y),this._flagRadius&&(n.r=this._radius),this._flagSpread&&(n.spreadMethod=this._spread),this._renderer.elem?on.setAttributes(this._renderer.elem,n):(n.id=this.id,n.gradientUnits="userSpaceOnUse",this._renderer.elem=on.createElement("radialGradient",n),t.defs.appendChild(this._renderer.elem)),this._flagStops){var i=this._renderer.elem.childNodes.length!==this.stops.length;if(i)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(var r=0;r<this.stops.length;r++){var o=this.stops[r],a={};o._flagOffset&&(a.offset=100*o._offset+"%"),o._flagColor&&(a["stop-color"]=o._color),o._flagOpacity&&(a["stop-opacity"]=o._opacity),o._renderer.elem?on.setAttributes(o._renderer.elem,a):o._renderer.elem=on.createElement("stop",a),i&&this._renderer.elem.appendChild(o._renderer.elem),o.flagReset()}}return this.flagReset()}},texture:{render:function(t,e){e||this._update();var n={},i={x:0,y:0},r=this.image;if(this._flagLoaded&&this.loaded)switch(r.nodeName.toLowerCase()){case"canvas":i.href=i["xlink:href"]=r.toDataURL("image/png");break;case"img":case"image":i.href=i["xlink:href"]=this.src}return(this._flagOffset||this._flagLoaded||this._flagScale)&&(n.x=this._offset.x,n.y=this._offset.y,r&&(n.x-=r.width/2,n.y-=r.height/2,this._scale instanceof lt?(n.x*=this._scale.x,n.y*=this._scale.y):(n.x*=this._scale,n.y*=this._scale)),n.x>0&&(n.x*=-1),n.y>0&&(n.y*=-1)),(this._flagScale||this._flagLoaded||this._flagRepeat)&&(n.width=0,n.height=0,r)&&(i.width=n.width=r.width,i.height=n.height=r.height,"no-repeat"===this._repeat&&(n.width+=1,n.height+=1),this._scale instanceof lt?(n.width*=this._scale.x,n.height*=this._scale.y):(n.width*=this._scale,n.height*=this._scale)),(this._flagScale||this._flagLoaded)&&(this._renderer.image?on.setAttributes(this._renderer.image,i):this._renderer.image=on.createElement("image",i)),this._renderer.elem?0!==Object.keys(n).length&&on.setAttributes(this._renderer.elem,n):(n.id=this.id,n.patternUnits="userSpaceOnUse",this._renderer.elem=on.createElement("pattern",n),t.defs.appendChild(this._renderer.elem)),this._renderer.elem&&this._renderer.image&&!this._renderer.appended&&(this._renderer.elem.appendChild(this._renderer.image),this._renderer.appended=!0),this.flagReset()}}},an=function(t){this.domElement=t.domElement||on.createElement("svg"),this.scene=new Vt,this.scene.parent=this,this.defs=on.createElement("defs"),this.domElement.appendChild(this.defs),this.domElement.defs=this.defs,this.domElement.style.overflow="hidden"};ot.extend(an,{Utils:on}),ot.extend(an.prototype,st,{constructor:an,setSize:function(t,e){return this.width=t,this.height=e,on.setAttributes(this.domElement,{width:t,height:e}),this.trigger(st.Types.resize,t,e)},render:function(){return on.group.render.call(this.scene,this.domElement),this}});var sn=yt.Multiply,ln=[1,0,0,0,1,0,0,0,1],cn=new et(9),un=Jt.Utils,hn={isHidden:/(undefined|none|transparent)/i,canvas:Y.document?Y.document.createElement("canvas"):{getContext:function(){}},alignments:{left:"start",middle:"center",right:"end"},matrix:new yt,group:{removeChild:function(t,e){if(t.children)for(var n=0;n<t.children.length;n++)hn.group.removeChild(t.children[n],e);else e.deleteTexture(t._renderer.texture),delete t._renderer.texture},render:function(t,e){this._update();var n,i=this.parent,r=i._matrix&&i._matrix.manual||i._flagMatrix,o=this._matrix.manual||this._flagMatrix;if((r||o)&&(this._renderer.matrix||(this._renderer.matrix=new et(9)),this._matrix.toTransformArray(!0,cn),sn(cn,i._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof lt||(this._renderer.scale=new lt),this._scale instanceof lt?(this._renderer.scale.x=this._scale.x,this._renderer.scale.y=this._scale.y):(this._renderer.scale.x=this._scale,this._renderer.scale.y=this._scale),/renderer/i.test(i._renderer.type)||(this._renderer.scale.x*=i._renderer.scale.x,this._renderer.scale.y*=i._renderer.scale.y),r&&(this._flagMatrix=!0)),this._mask&&(t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,0),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1),hn[this._mask._renderer.type].render.call(this._mask,t,e,this),t.stencilFunc(t.EQUAL,1,255),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.colorMask(!0,!0,!0,!0)),this._flagOpacity=i._flagOpacity||this._flagOpacity,this._renderer.opacity=this._opacity*(i&&i._renderer?i._renderer.opacity:1),this._flagSubtractions)for(n=0;n<this.subtractions.length;n++)hn.group.removeChild(this.subtractions[n],t);for(n=0;n<this.children.length;n++){var a=this.children[n];hn[a._renderer.type].render.call(a,t,e)}return this._mask&&t.disable(t.STENCIL_TEST),this.flagReset()}},path:{updateCanvas:function(t){var e,n,i,r,o,a,s,l,c,u,h,d,f,p,g,m=t._renderer.vertices,v=this.canvas,y=this.ctx,b=t._renderer.scale,_=t._stroke,w=t._linewidth,x=t._fill,k=t._renderer.opacity||t._opacity,C=t._cap,S=t._join,R=t._miter,O=t._closed,E=t.dashes,A=m.length,T=A-1;v.width=Math.max(Math.ceil(t._renderer.rect.width*b.x),1),v.height=Math.max(Math.ceil(t._renderer.rect.height*b.y),1);var M,P=t._renderer.rect.centroid,F=P.x,j=P.y;y.clearRect(0,0,v.width,v.height),x&&("string"==typeof x?y.fillStyle=x:(hn[x._renderer.type].render.call(x,y,t),y.fillStyle=x._renderer.effect)),_&&("string"==typeof _?y.strokeStyle=_:(hn[_._renderer.type].render.call(_,y,t),y.strokeStyle=_._renderer.effect),w&&(y.lineWidth=w),R&&(y.miterLimit=R),S&&(y.lineJoin=S),!O&&C&&(y.lineCap=C)),"number"==typeof k&&(y.globalAlpha=k),E&&E.length>0&&(y.lineDashOffset=E.offset||0,y.setLineDash(E)),y.save(),y.scale(b.x,b.y),y.translate(F,j),y.beginPath();for(var I=0;I<m.length;I++){var D=m[I];switch(f=D.x,p=D.y,D.command){case Z.close:y.closePath();break;case Z.arc:var L=D.rx,z=D.ry,V=D.xAxisRotation,B=D.largeArcFlag,W=D.sweepFlag,U=(i=m[n=O?tt(I-1,A):Math.max(I-1,0)]).x,N=i.y;un.renderSvgArcCommand(y,U,N,L,z,B,W,V,f,p);break;case Z.curve:n=O?tt(I-1,A):Math.max(I-1,0),e=O?tt(I+1,A):Math.min(I+1,T),i=m[n],r=m[e],c=i.controls&&i.controls.right||lt.zero,u=D.controls&&D.controls.left||lt.zero,i._relative?(s=c.x+i.x,l=c.y+i.y):(s=c.x,l=c.y),D._relative?(o=u.x+D.x,a=u.y+D.y):(o=u.x,a=u.y),y.bezierCurveTo(s,l,o,a,f,p),I>=T&&O&&(r=M,h=D.controls&&D.controls.right||lt.zero,d=r.controls&&r.controls.left||lt.zero,D._relative?(s=h.x+D.x,l=h.y+D.y):(s=h.x,l=h.y),r._relative?(o=d.x+r.x,a=d.y+r.y):(o=d.x,a=d.y),f=r.x,p=r.y,y.bezierCurveTo(s,l,o,a,f,p));break;case Z.line:y.lineTo(f,p);break;case Z.move:M=D,y.moveTo(f,p)}}O&&y.closePath(),hn.isHidden.test(x)||((g=x._renderer&&x._renderer.offset)&&(y.save(),y.translate(-x._renderer.offset.x,-x._renderer.offset.y),y.scale(x._renderer.scale.x,x._renderer.scale.y)),y.fill(),g&&y.restore()),hn.isHidden.test(_)||((g=_._renderer&&_._renderer.offset)&&(y.save(),y.translate(-_._renderer.offset.x,-_._renderer.offset.y),y.scale(_._renderer.scale.x,_._renderer.scale.y),y.lineWidth=w/_._renderer.scale.x),y.stroke(),g&&y.restore()),y.restore()},getBoundingClientRect:function(t,e,n){var i,r,o=1/0,a=-1/0,s=1/0,l=-1/0;t.forEach((function(t){var e,n,i,r,c,u,h=t.x,d=t.y,f=t.controls;s=Math.min(d,s),o=Math.min(h,o),a=Math.max(h,a),l=Math.max(d,l),t.controls&&(c=f.left,u=f.right,c&&u&&(e=t._relative?c.x+h:c.x,n=t._relative?c.y+d:c.y,i=t._relative?u.x+h:u.x,r=t._relative?u.y+d:u.y,e&&n&&i&&r&&(s=Math.min(n,r,s),o=Math.min(e,i,o),a=Math.max(e,i,a),l=Math.max(n,r,l))))})),"number"==typeof e&&(s-=e,o-=e,a+=e,l+=e),i=a-o,r=l-s,n.top=s,n.left=o,n.right=a,n.bottom=l,n.width=i,n.height=r,n.centroid||(n.centroid={}),n.centroid.x=-o,n.centroid.y=-s},render:function(t,e,n){if(!this._visible||!this._opacity)return this;this._update();var i=n||this.parent,r=i._matrix.manual||i._flagMatrix,o=this._matrix.manual||this._flagMatrix,a=this._renderer.parent!==i,s=this._flagVertices||this._flagFill||this._fill instanceof se&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof ce&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof he&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof se&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof ce&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof he&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||i._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((r||o||a)&&(this._renderer.matrix||(this._renderer.matrix=new et(9)),this._matrix.toTransformArray(!0,cn),sn(cn,i._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof lt||(this._renderer.scale=new lt),this._scale instanceof lt?(this._renderer.scale.x=this._scale.x*i._renderer.scale.x,this._renderer.scale.y=this._scale.y*i._renderer.scale.y):(this._renderer.scale.x=this._scale*i._renderer.scale.x,this._renderer.scale.y=this._scale*i._renderer.scale.y),a&&(this._renderer.parent=i)),s?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*i._renderer.opacity,hn.path.getBoundingClientRect(this._renderer.vertices,this._linewidth,this._renderer.rect),hn.updateTexture.call(hn,t,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),!this._clip||n){t.bindTexture(t.TEXTURE_2D,this._renderer.texture);var l=this._renderer.rect;return t.uniformMatrix3fv(e.matrix,!1,this._renderer.matrix),t.uniform4f(e.rect,l.left,l.top,l.right,l.bottom),t.drawArrays(t.TRIANGLES,0,6),this.flagReset()}}},text:{updateCanvas:function(t){var e=this.canvas,n=this.ctx,i=t._renderer.scale,r=t._stroke,o=t._linewidth*i,a=t._fill,s=t._renderer.opacity||t._opacity,l=t.dashes,c=t._decoration;un.alignments[t._alignment]||t._alignment,t._baseline,e.width=Math.max(Math.ceil(t._renderer.rect.width*i.x),1),e.height=Math.max(Math.ceil(t._renderer.rect.height*i.y),1);var u,h,d,f,p,g,m,v,y,b,_,w=t._renderer.rect.centroid,x=w.x,k=w.y,C=a._renderer&&a._renderer.offset&&r._renderer&&r._renderer.offset;if(n.clearRect(0,0,e.width,e.height),C||(n.font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" ")),n.textAlign="center",n.textBaseline="middle",a&&("string"==typeof a?n.fillStyle=a:(hn[a._renderer.type].render.call(a,n,t),n.fillStyle=a._renderer.effect)),r&&("string"==typeof r?n.strokeStyle=r:(hn[r._renderer.type].render.call(r,n,t),n.strokeStyle=r._renderer.effect),o&&(n.lineWidth=o)),"number"==typeof s&&(n.globalAlpha=s),l&&l.length>0&&(n.lineDashOffset=l.offset||0,n.setLineDash(l)),n.save(),n.scale(i.x,i.y),n.translate(x,k),hn.isHidden.test(a)||(a._renderer&&a._renderer.offset?(g=a._renderer.scale.x,m=a._renderer.scale.y,n.save(),n.translate(-a._renderer.offset.x,-a._renderer.offset.y),n.scale(g,m),u=t._size/a._renderer.scale.y,h=t._leading/a._renderer.scale.y,n.font=[t._style,t._weight,u+"px/",h+"px",t._family].join(" "),d=a._renderer.offset.x/a._renderer.scale.x,f=a._renderer.offset.y/a._renderer.scale.y,n.fillText(t.value,d,f),n.restore()):n.fillText(t.value,0,0)),hn.isHidden.test(r)||(r._renderer&&r._renderer.offset?(g=r._renderer.scale.x,m=r._renderer.scale.y,n.save(),n.translate(-r._renderer.offset.x,-r._renderer.offset.y),n.scale(g,m),u=t._size/r._renderer.scale.y,h=t._leading/r._renderer.scale.y,n.font=[t._style,t._weight,u+"px/",h+"px",t._family].join(" "),d=r._renderer.offset.x/r._renderer.scale.x,f=r._renderer.offset.y/r._renderer.scale.y,p=o/r._renderer.scale.x,n.lineWidth=p,n.strokeText(t.value,d,f),n.restore()):n.strokeText(t.value,0,0)),/(underline|strikethrough)/i.test(c)){var S=n.measureText(t.value);switch(c){case"underline":y=S.actualBoundingBoxAscent,_=S.actualBoundingBoxAscent;break;case"strikethrough":y=0,_=0}v=-S.width/2,b=S.width/2,n.lineWidth=Math.max(Math.floor(t._size/15),1),n.strokeStyle=n.fillStyle,n.beginPath(),n.moveTo(v,y),n.lineTo(b,_),n.stroke()}n.restore()},getBoundingClientRect:function(t,e){var n=hn.ctx;n.font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" "),n.textAlign="center",n.textBaseline=t._baseline;var i=1.25*n.measureText(t._value).width,r=1.25*Math.max(t._size,t._leading);this._linewidth&&!hn.isHidden.test(this._stroke)&&(i+=2*this._linewidth,r+=2*this._linewidth);var o=i/2,a=r/2;switch(hn.alignments[t._alignment]||t._alignment){case hn.alignments.left:e.left=0,e.right=i;break;case hn.alignments.right:e.left=-i,e.right=0;break;default:e.left=-o,e.right=o}switch(t._baseline){case"bottom":e.top=-r,e.bottom=0;break;case"top":e.top=0,e.bottom=r;break;default:e.top=-a,e.bottom=a}e.width=i,e.height=r,e.centroid||(e.centroid={}),e.centroid.x=o,e.centroid.y=a},render:function(t,e,n){if(!this._visible||!this._opacity)return this;this._update();var i=n||this.parent,r=i._matrix.manual||i._flagMatrix,o=this._matrix.manual||this._flagMatrix,a=this._renderer.parent!==i,s=this._flagVertices||this._flagFill||this._fill instanceof se&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof ce&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof he&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof se&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof ce&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof he&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||i._flagOpacity||this._flagVisible||this._flagScale||this._flagValue||this._flagFamily||this._flagSize||this._flagLeading||this._flagAlignment||this._flagBaseline||this._flagStyle||this._flagWeight||this._flagDecoration||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((r||o||a)&&(this._renderer.matrix||(this._renderer.matrix=new et(9)),this._matrix.toTransformArray(!0,cn),sn(cn,i._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof lt||(this._renderer.scale=new lt),this._scale instanceof lt?(this._renderer.scale.x=this._scale.x*i._renderer.scale.x,this._renderer.scale.y=this._scale.y*i._renderer.scale.y):(this._renderer.scale.x=this._scale*i._renderer.scale.x,this._renderer.scale.y=this._scale*i._renderer.scale.y),a&&(this._renderer.parent=i)),s?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*i._renderer.opacity,hn.text.getBoundingClientRect(this,this._renderer.rect),hn.updateTexture.call(hn,t,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),!this._clip||n){t.bindTexture(t.TEXTURE_2D,this._renderer.texture);var l=this._renderer.rect;return t.uniformMatrix3fv(e.matrix,!1,this._renderer.matrix),t.uniform4f(e.rect,l.left,l.top,l.right,l.bottom),t.drawArrays(t.TRIANGLES,0,6),this.flagReset()}}},"linear-gradient":{render:function(t,e){if(t.canvas.getContext("2d")){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops){this._renderer.effect=t.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y);for(var n=0;n<this.stops.length;n++){var i=this.stops[n];this._renderer.effect.addColorStop(i._offset,i._color)}}return this.flagReset()}}},"radial-gradient":{render:function(t,e){if(t.canvas.getContext("2d")){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops){this._renderer.effect=t.createRadialGradient(this.center._x,this.center._y,0,this.focal._x,this.focal._y,this._radius);for(var n=0;n<this.stops.length;n++){var i=this.stops[n];this._renderer.effect.addColorStop(i._offset,i._color)}}return this.flagReset()}}},texture:{render:function(t,e){if(t.canvas.getContext("2d")){this._update();var n=this.image;if((this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)this._renderer.effect=t.createPattern(n,this._repeat);else if(!this._renderer.effect)return this.flagReset();return(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof lt||(this._renderer.offset=new lt),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,n&&(this._renderer.offset.x+=n.width/2,this._renderer.offset.y+=n.height/2,this._scale instanceof lt?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof lt||(this._renderer.scale=new lt),this._scale instanceof lt?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}}},updateTexture:function(t,e){this[e._renderer.type].updateCanvas.call(hn,e),e._renderer.texture||(e._renderer.texture=t.createTexture()),t.bindTexture(t.TEXTURE_2D,e._renderer.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.canvas.width<=0||this.canvas.height<=0||t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.canvas)},program:{create:function(t,e){var n,i;if(n=t.createProgram(),ot.each(e,(function(e){t.attachShader(n,e)})),t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS))throw i=t.getProgramInfoLog(n),t.deleteProgram(n),new ne("unable to link program: "+i);return n}},shaders:{create:function(t,e,n){var i,r;if(i=t.createShader(t[n]),t.shaderSource(i,e),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw r=t.getShaderInfoLog(i),t.deleteShader(i),new ne("unable to compile shader "+i+": "+r);return i},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},vertex:["precision mediump float;","attribute vec2 a_position;","","uniform mat3 u_matrix;","uniform vec2 u_resolution;","uniform vec4 u_rect;","","varying vec2 v_textureCoords;","","void main() {","   vec2 rectCoords = (a_position * (u_rect.zw - u_rect.xy)) + u_rect.xy;","   vec2 projected = (u_matrix * vec3(rectCoords, 1.0)).xy;","   vec2 normal = projected / u_resolution;","   vec2 clipspace = (normal * 2.0) - 1.0;","","   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);","   v_textureCoords = a_position;","}"].join("\n"),fragment:["precision mediump float;","","uniform sampler2D u_image;","varying vec2 v_textureCoords;","","void main() {","  vec4 texel = texture2D(u_image, v_textureCoords);","  if (texel.a == 0.0) {","    discard;","  }","  gl_FragColor = texel;","}"].join("\n")},TextureRegistry:new re};hn.ctx=hn.canvas.getContext("2d");var dn=function(t){var e,n,i;if(this.domElement=t.domElement||document.createElement("canvas"),void 0!==t.offscreenElement&&(hn.canvas=t.offscreenElement,hn.ctx=hn.canvas.getContext("2d")),this.scene=new Vt,this.scene.parent=this,this._renderer={type:"renderer",matrix:new et(ln),scale:1,opacity:1},this._flagMatrix=!0,t=ot.defaults(t||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!0,overdraw:!1}),this.overdraw=t.overdraw,e=this.ctx=this.domElement.getContext("webgl",t)||this.domElement.getContext("experimental-webgl",t),!this.ctx)throw new ne("unable to create a webgl context. Try using another renderer.");n=hn.shaders.create(e,hn.shaders.vertex,hn.shaders.types.vertex),i=hn.shaders.create(e,hn.shaders.fragment,hn.shaders.types.fragment),this.program=hn.program.create(e,[n,i]),e.useProgram(this.program),this.program.position=e.getAttribLocation(this.program,"a_position"),this.program.matrix=e.getUniformLocation(this.program,"u_matrix"),this.program.rect=e.getUniformLocation(this.program,"u_rect");var r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(this.program.position,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.program.position),e.bufferData(e.ARRAY_BUFFER,new et([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enable(e.BLEND),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)};ot.extend(dn,{Utils:hn}),ot.extend(dn.prototype,st,{constructor:dn,setSize:function(t,e,n){this.width=t,this.height=e,this.ratio=void 0===n?Ft(this.ctx):n,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,ot.isObject(this.domElement.style)&&ot.extend(this.domElement.style,{width:t+"px",height:e+"px"}),this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio,this._flagMatrix=!0,this.ctx.viewport(0,0,t*this.ratio,e*this.ratio);var i=this.ctx.getUniformLocation(this.program,"u_resolution");return this.ctx.uniform2f(i,t*this.ratio,e*this.ratio),this.trigger(st.Types.resize,t,e,n)},render:function(){var t=this.ctx;return this.overdraw||t.clear(t.COLOR_BUFFER_BIT),hn.group.render.call(this.scene,t,this.program),this._flagMatrix=!1,this}});var fn=function(t){var e=ot.defaults(t||{},{fullscreen:!1,fitted:!1,width:640,height:480,type:fn.Types.svg,autostart:!1});if(ot.each(e,(function(t,e){/fullscreen/i.test(e)||/autostart/i.test(e)||(this[e]=t)}),this),ot.isElement(e.domElement)){var n=e.domElement.tagName.toLowerCase();/^(CanvasRenderer-canvas|WebGLRenderer-canvas|SVGRenderer-svg)$/.test(this.type+"-"+n)||(this.type=fn.Types[n])}this.renderer=new fn[this.type](this),this.setPlaying(e.autostart),this.frameCount=0,e.fullscreen?(this.fit=pn.bind(this),this.fit.domElement=window,this.fit.attached=!0,ot.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),ot.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),ee.bind(this.fit.domElement,"resize",this.fit),this.fit()):e.fitted?(this.fit=gn.bind(this),ot.extend(this.renderer.domElement.style,{display:"block"})):ot.isElement(e.domElement)||(this.renderer.setSize(e.width,e.height,this.ratio),this.width=e.width,this.height=e.height),this.renderer.bind(st.Types.resize,mn.bind(this)),this.scene=this.renderer.scene,fn.Instances.push(this),e.autostart&&vn.init()};function pn(){var t=document.body.getBoundingClientRect(),e=this.width=t.width,n=this.height=t.height;this.renderer.setSize(e,n,this.ratio)}function gn(){var t=this.renderer.domElement.parentElement;if(t){var e=t.getBoundingClientRect(),n=this.width=e.width,i=this.height=e.height;this.renderer.setSize(n,i,this.ratio)}else console.warn("Two.js: Attempting to fit to parent, but no parent found.")}function mn(t,e){this.width=t,this.height=e,this.trigger(st.Types.resize,t,e)}ot.extend(fn,_t),ot.extend(fn.prototype,st,{constructor:fn,appendTo:function(t){return t.appendChild(this.renderer.domElement),this.fit&&(this.fit.domElement!==window&&(this.fit.domElement=t,this.fit.attached=!1),this.update()),this},play:function(){return this.playing=!0,vn.init(),this.trigger(st.Types.play)},pause:function(){return this.playing=!1,this.trigger(st.Types.pause)},setPlaying:function(t){this.playing=t},release:function(t){var e,n,i;if(ot.isObject(t)){if("function"==typeof t.unbind&&t.unbind(),t.vertices)for("function"==typeof t.vertices.unbind&&t.vertices.unbind(),e=0;e<t.vertices.length;e++)"function"==typeof(n=t.vertices[e]).unbind&&n.unbind();if(t.children)for(e=0;e<t.children.length;e++)i=t.children[e],this.release(i);return t}},update:function(){var t=!!this._lastFrame,e=ot.performance.now();t&&(this.timeDelta=parseFloat((e-this._lastFrame).toFixed(3))),this._lastFrame=e,this.fit&&!this.fit.attached&&(ee.bind(this.fit.domElement,"resize",this.fit),this.fit.attached=!0,this.fit());var n=this.width,i=this.height,r=this.renderer;return n===r.width&&i===r.height||r.setSize(n,i,this.ratio),this.trigger(st.Types.update,this.frameCount,this.timeDelta),this.render()},render:function(){return this.renderer.render(),this.trigger(st.Types.render,this.frameCount++)},add:function(t){var e=t;return e instanceof Array||(e=Array.prototype.slice.call(arguments)),this.scene.add(e),this},remove:function(t){var e=t;return e instanceof Array||(e=Array.prototype.slice.call(arguments)),this.scene.remove(e),this},clear:function(){return this.scene.remove(this.scene.children),this},makeLine:function(t,e,n,i){var r=new Me(t,e,n,i);return this.scene.add(r),r},makeArrow:function(t,e,n,i,r){var o="number"==typeof r?r:10,a=Math.atan2(i-e,n-t),s=[new dt(t,e,void 0,void 0,void 0,void 0,Z.move),new dt(n,i,void 0,void 0,void 0,void 0,Z.line),new dt(n-o*Math.cos(a-Math.PI/4),i-o*Math.sin(a-Math.PI/4),void 0,void 0,void 0,void 0,Z.line),new dt(n,i,void 0,void 0,void 0,void 0,Z.move),new dt(n-o*Math.cos(a+Math.PI/4),i-o*Math.sin(a+Math.PI/4),void 0,void 0,void 0,void 0,Z.line)],l=new me(s,!1,!1,!0);return l.noFill(),l.cap="round",l.join="round",this.scene.add(l),l},makeRectangle:function(t,e,n,i){var r=new Pe(t,e,n,i);return this.scene.add(r),r},makeRoundedRectangle:function(t,e,n,i,r){var o=new Fe(t,e,n,i,r);return this.scene.add(o),o},makeCircle:function(t,e,n,i){var r=new Se(t,e,n,i);return this.scene.add(r),r},makeEllipse:function(t,e,n,i,r){var o=new Te(t,e,n,i,r);return this.scene.add(o),o},makeStar:function(t,e,n,i,r){var o=new rn(t,e,n,i,r);return this.scene.add(o),o},makeCurve:function(t){var e=arguments.length,n=t;if(!Array.isArray(t)){n=[];for(var i=0;i<e;i+=2){var r=arguments[i];if("number"!=typeof r)break;var o=arguments[i+1];n.push(new dt(r,o))}}var a=arguments[e-1],s=new me(n,!("boolean"==typeof a?a:void 0),!0),l=s.getBoundingClientRect();return s.center().translation.set(l.left+l.width/2,l.top+l.height/2),this.scene.add(s),s},makePolygon:function(t,e,n,i){var r=new Qe(t,e,n,i);return this.scene.add(r),r},makeArcSegment:function(t,e,n,i,r,o,a){var s=new Ye(t,e,n,i,r,o,a);return this.scene.add(s),s},makePath:function(t){var e=arguments.length,n=t;if(!Array.isArray(t)){n=[];for(var i=0;i<e;i+=2){var r=arguments[i];if("number"!=typeof r)break;var o=arguments[i+1];n.push(new dt(r,o))}}var a=arguments[e-1],s=new me(n,!("boolean"==typeof a?a:void 0)),l=s.getBoundingClientRect();return"number"==typeof l.top&&"number"==typeof l.left&&"number"==typeof l.right&&"number"==typeof l.bottom&&s.center().translation.set(l.left+l.width/2,l.top+l.height/2),this.scene.add(s),s},makeText:function(t,e,n,i){var r=new je(t,e,n,i);return this.add(r),r},makeLinearGradient:function(t,e,n,i){var r=Array.prototype.slice.call(arguments,4),o=new se(t,e,n,i,r);return this.add(o),o},makeRadialGradient:function(t,e,n){var i=Array.prototype.slice.call(arguments,3),r=new ce(t,e,n,i);return this.add(r),r},makeSprite:function(t,e,n,i,r,o,a){var s=new Ge(t,e,n,i,r,o);return a&&s.play(),this.add(s),s},makeImageSequence:function(t,e,n,i,r){var o=new He(t,e,n,i);return r&&o.play(),this.add(o),o},makeTexture:function(t,e){return new he(t,e)},makeGroup:function(t){var e=t;e instanceof Array||(e=Array.prototype.slice.call(arguments));var n=new Vt;return this.scene.add(n),n.add(e),n},interpret:function(t,e,n){var i=t.tagName.toLowerCase();if(n=void 0===n||n,!(i in Ne))return null;var r=Ne[i].call(this,t);return n?this.add(e&&r instanceof Vt?r.children:r):r.parent&&r.remove(),r},load:function(t,e){var n,i,r,o=new Vt,a=function(t){for(ee.temp.innerHTML=t,i=0;i<ee.temp.children.length;i++)if(n=ee.temp.children[i],/svg/i.test(n.nodeName))for(r=0;r<n.children.length;r++)o.add(this.interpret(n.children[r]));else o.add(this.interpret(n));if("function"==typeof e){var a=ee.temp.children.length<=1?ee.temp.children[0]:ee.temp.children;e(o,a)}}.bind(this);return/.*\.svg/gi.test(t)?(qe(t,a),o):(a(t),o)}});var vn=ee.getRequestAnimationFrame();function yn(){for(var t=0;t<fn.Instances.length;t++){var e=fn.Instances[t];e.playing&&e.update()}fn.nextFrameID=vn(yn)}vn.init=function(){yn(),vn.init=function(){}},ot.extend(fn,{Anchor:dt,Collection:jt,Events:st,Group:Vt,Matrix:yt,Path:me,Registry:re,Shape:It,Text:je,Vector:lt,Gradient:ae,ImageSequence:He,LinearGradient:se,RadialGradient:ce,Sprite:Ge,Stop:oe,Texture:he,ArcSegment:Ye,Circle:Se,Ellipse:Te,Line:Me,Polygon:Qe,Rectangle:Pe,RoundedRectangle:Fe,Star:rn,CanvasRenderer:Jt,SVGRenderer:an,WebGLRenderer:dn,Commands:Z,Utils:ot.extend({Error:ne,getRatio:Ft,defineGetterSetter:ie,read:Ne,xhr:qe},ot,te,Mt,it)});var bn=fn,_n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},wn=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),xn=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};String.prototype.startsWith=String.prototype.startsWith||function(t){return 0===this.indexOf(t)},String.prototype.padStart=String.prototype.padStart||function(t,e){for(var n=this;n.length<t;)n=e+n;return n};var kn={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function Cn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e>0?t.toFixed(e).replace(/0+$/,"").replace(/\.$/,""):t.toString();return n||"0"}var Sn=function(){function t(e,n,i,r){_n(this,t);var o=this;if(void 0===e);else if(Array.isArray(e))this.rgba=e;else if(void 0===i){var a=e&&""+e;a&&function(e){if(e.startsWith("hsl")){var n=e.match(/([\-\d\.e]+)/g).map(Number),i=xn(n,4),r=i[0],a=i[1],s=i[2],l=i[3];void 0===l&&(l=1),r/=360,a/=100,s/=100,o.hsla=[r,a,s,l]}else if(e.startsWith("rgb")){var c=e.match(/([\-\d\.e]+)/g).map(Number),u=xn(c,4),h=u[0],d=u[1],f=u[2],p=u[3];void 0===p&&(p=1),o.rgba=[h,d,f,p]}else e.startsWith("#")?o.rgba=t.hexToRgb(e):o.rgba=t.nameToRgb(e)||t.hexToRgb(e)}(a.toLowerCase())}else this.rgba=[e,n,i,void 0===r?1:r]}return wn(t,[{key:"printRGB",value:function(t){var e=(t?this.rgba:this.rgba.slice(0,3)).map((function(t,e){return Cn(t,3===e?3:0)}));return t?"rgba("+e+")":"rgb("+e+")"}},{key:"printHSL",value:function(t){var e=[360,100,100,1],n=["","%","%",""],i=(t?this.hsla:this.hsla.slice(0,3)).map((function(t,i){return Cn(t*e[i],3===i?3:1)+n[i]}));return t?"hsla("+i+")":"hsl("+i+")"}},{key:"printHex",value:function(t){var e=this.hex;return t?e:e.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=t.hslToRgb(this._hsla)},set:function(t){3===t.length&&(t[3]=1),this._rgba=t,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=t.rgbToHsl(this._rgba)},set:function(t){3===t.length&&(t[3]=1),this._hsla=t,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){return"#"+this.rgba.map((function(t,e){return e<3?t.toString(16):Math.round(255*t).toString(16)})).map((function(t){return t.padStart(2,"0")})).join("")},set:function(e){this.rgba=t.hexToRgb(e)}}],[{key:"hexToRgb",value:function(t){var e=(t.startsWith("#")?t.slice(1):t).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!e.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+t);var n=e.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map((function(t){return parseInt(t,16)}));return n[3]=n[3]/255,n}},{key:"nameToRgb",value:function(e){var n=e.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),i=kn[n];return void 0===i?i:t.hexToRgb(i.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(t){var e=xn(t,4),n=e[0],i=e[1],r=e[2],o=e[3];n/=255,i/=255,r/=255;var a=Math.max(n,i,r),s=Math.min(n,i,r),l=void 0,c=void 0,u=(a+s)/2;if(a===s)l=c=0;else{var h=a-s;switch(c=u>.5?h/(2-a-s):h/(a+s),a){case n:l=(i-r)/h+(i<r?6:0);break;case i:l=(r-n)/h+2;break;case r:l=(n-i)/h+4}l/=6}return[l,c,u,o]}},{key:"hslToRgb",value:function(t){var e=xn(t,4),n=e[0],i=e[1],r=e[2],o=e[3],a=void 0,s=void 0,l=void 0;if(0===i)a=s=l=r;else{var c=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},u=r<.5?r*(1+i):r+i-r*i,h=2*r-u;a=c(h,u,n+1/3),s=c(h,u,n),l=c(h,u,n-1/3)}var d=[255*a,255*s,255*l].map(Math.round);return d[3]=o,d}}]),t}(),Rn=function(){function t(){_n(this,t),this._events=[]}return wn(t,[{key:"add",value:function(t,e,n){t.addEventListener(e,n,!1),this._events.push({target:t,type:e,handler:n})}},{key:"remove",value:function(e,n,i){this._events=this._events.filter((function(r){var o=!0;return e&&e!==r.target&&(o=!1),n&&n!==r.type&&(o=!1),i&&i!==r.handler&&(o=!1),o&&t._doRemove(r.target,r.type,r.handler),!o}))}},{key:"destroy",value:function(){this._events.forEach((function(e){return t._doRemove(e.target,e.type,e.handler)})),this._events=[]}}],[{key:"_doRemove",value:function(t,e,n){t.removeEventListener(e,n,!1)}}]),t}();function On(t,e,n){var i=!1;function r(t,e,n){return Math.max(e,Math.min(t,n))}function o(t,o,a){if(a&&(i=!0),i){t.preventDefault();var s=e.getBoundingClientRect(),l=s.width,c=s.height,u=o.clientX,h=o.clientY,d=r(u-s.left,0,l),f=r(h-s.top,0,c);n(d/l,f/c)}}function a(t,e){1===(void 0===t.buttons?t.which:t.buttons)?o(t,t,e):i=!1}function s(t,e){1===t.touches.length?o(t,t.touches[0],e):i=!1}t.add(e,"mousedown",(function(t){a(t,!0)})),t.add(e,"touchstart",(function(t){s(t,!0)})),t.add(window,"mousemove",a),t.add(e,"touchmove",s),t.add(window,"mouseup",(function(t){i=!1})),t.add(e,"touchend",(function(t){i=!1})),t.add(e,"touchcancel",(function(t){i=!1}))}var En="keydown",An="mousedown",Tn="focusin";function Mn(t,e){return(e||document).querySelector(t)}function Pn(t){t.preventDefault(),t.stopPropagation()}function Fn(t,e,n,i,r){t.add(e,En,(function(t){n.indexOf(t.key)>=0&&(r&&Pn(t),i(t))}))}var jn=function(){function t(e){_n(this,t),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new Rn,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(e)}return wn(t,[{key:"setOptions",value:function(t){var e=this;if(t){var n=this.settings;if(t instanceof HTMLElement)n.parent=t;else{n.parent&&t.parent&&n.parent!==t.parent&&(this._events.remove(n.parent),this._popupInited=!1),function(t,e,n){for(var i in t)e[i]=t[i]}(t,n),t.onChange&&(this.onChange=t.onChange),t.onDone&&(this.onDone=t.onDone),t.onOpen&&(this.onOpen=t.onOpen),t.onClose&&(this.onClose=t.onClose);var i=t.color||t.colour;i&&this._setColor(i)}var r=n.parent;if(r&&n.popup&&!this._popupInited){var o=function(t){return e.openHandler(t)};this._events.add(r,"click",o),Fn(this._events,r,[" ","Spacebar","Enter"],o),this._popupInited=!0}else t.parent&&!n.popup&&this.show()}}},{key:"openHandler",value:function(t){if(this.show()){t&&t.preventDefault(),this.settings.parent.style.pointerEvents="none";var e=t&&t.type===En?this._domEdit:this.domElement;setTimeout((function(){return e.focus()}),100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(t){var e=t&&t.type,n=!1;if(t)if(e===An||e===Tn){var i=(this.__containedEvent||0)+100;t.timeStamp>i&&(n=!0)}else Pn(t),n=!0;else n=!0;n&&this.hide()&&(this.settings.parent.style.pointerEvents="",e!==An&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(t,e){this.closeHandler(),this.setOptions(t),e&&this.openHandler()}},{key:"setColor",value:function(t,e){this._setColor(t,{silent:e})}},{key:"_setColor",value:function(t,e){if("string"==typeof t&&(t=t.trim()),t){e=e||{};var n=void 0;try{n=new Sn(t)}catch(t){if(e.failSilently)return;throw t}if(!this.settings.alpha){var i=n.hsla;i[3]=1,n.hsla=i}this.colour=this.color=n,this._setHSLA(null,null,null,null,e)}}},{key:"setColour",value:function(t,e){this.setColor(t,e)}},{key:"show",value:function(){if(!this.settings.parent)return!1;if(this.domElement){var t=this._toggleDOM(!0);return this._setPosition(),t}var e,n,i=(e=this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>',(n=document.createElement("div")).innerHTML=e,n.firstElementChild);return this.domElement=i,this._domH=Mn(".picker_hue",i),this._domSL=Mn(".picker_sl",i),this._domA=Mn(".picker_alpha",i),this._domEdit=Mn(".picker_editor input",i),this._domSample=Mn(".picker_sample",i),this._domOkay=Mn(".picker_done button",i),this._domCancel=Mn(".picker_cancel button",i),i.classList.add("layout_"+this.settings.layout),this.settings.alpha||i.classList.add("no_alpha"),this.settings.editor||i.classList.add("no_editor"),this.settings.cancelButton||i.classList.add("no_cancel"),this._ifPopup((function(){return i.classList.add("popup")})),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var t=this,e=this,n=this.domElement,i=this._events;function r(t,e,n){i.add(t,e,n)}r(n,"click",(function(t){return t.preventDefault()})),On(i,this._domH,(function(t,n){return e._setHSLA(t)})),On(i,this._domSL,(function(t,n){return e._setHSLA(null,t,1-n)})),this.settings.alpha&&On(i,this._domA,(function(t,n){return e._setHSLA(null,null,null,1-n)}));var o=this._domEdit;r(o,"input",(function(t){e._setColor(this.value,{fromEditor:!0,failSilently:!0})})),r(o,"focus",(function(t){var e=this;e.selectionStart===e.selectionEnd&&e.select()})),this._ifPopup((function(){var e=function(e){return t.closeHandler(e)};r(window,An,e),r(window,Tn,e),Fn(i,n,["Esc","Escape"],e);var o=function(e){t.__containedEvent=e.timeStamp};r(n,An,o),r(n,Tn,o),r(t._domCancel,"click",e)}));var a=function(e){t._ifPopup((function(){return t.closeHandler(e)})),t.onDone&&t.onDone(t.colour)};r(this._domOkay,"click",a),Fn(i,n,["Enter"],a)}},{key:"_setPosition",value:function(){var t=this.settings.parent,e=this.domElement;t!==e.parentNode&&t.appendChild(e),this._ifPopup((function(n){"static"===getComputedStyle(t).position&&(t.style.position="relative");var i=!0===n?"popup_right":"popup_"+n;["popup_top","popup_bottom","popup_left","popup_right"].forEach((function(t){t===i?e.classList.add(t):e.classList.remove(t)})),e.classList.add(i)}))}},{key:"_setHSLA",value:function(t,e,n,i,r){r=r||{};var o=this.colour,a=o.hsla;[t,e,n,i].forEach((function(t,e){(t||0===t)&&(a[e]=t)})),o.hsla=a,this._updateUI(r),this.onChange&&!r.silent&&this.onChange(o)}},{key:"_updateUI",value:function(t){if(this.domElement){t=t||{};var e=this.colour,n=e.hsla,i="hsl("+360*n[0]+", 100%, 50%)",r=e.hslString,o=e.hslaString,a=this._domH,s=this._domSL,l=this._domA,c=Mn(".picker_selector",a),u=Mn(".picker_selector",s),h=Mn(".picker_selector",l);y(0,c,n[0]),this._domSL.style.backgroundColor=this._domH.style.color=i,y(0,u,n[1]),b(0,u,1-n[2]),s.style.color=r,b(0,h,1-n[3]);var d=r,f=d.replace("hsl","hsla").replace(")",", 0)"),p="linear-gradient("+[d,f]+")";if(this._domA.style.background=p+", linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0 / 2em 2em,\n                   linear-gradient(45deg, lightgrey 25%,       white 25%,       white 75%, lightgrey 75%) 1em 1em / 2em 2em",!t.fromEditor){var g=this.settings.editorFormat,m=this.settings.alpha,v=void 0;switch(g){case"rgb":v=e.printRGB(m);break;case"hsl":v=e.printHSL(m);break;default:v=e.printHex(m)}this._domEdit.value=v}this._domSample.style.color=o}function y(t,e,n){e.style.left=100*n+"%"}function b(t,e,n){e.style.top=100*n+"%"}}},{key:"_ifPopup",value:function(t,e){this.settings.parent&&this.settings.popup?t&&t(this.settings.popup):e&&e()}},{key:"_toggleDOM",value:function(t){var e=this.domElement;if(!e)return!1;var n=t?"":"none",i=e.style.display!==n;return i&&(e.style.display=n),i}}]),t}(),In=document.createElement("style");In.textContent='.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:"";display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:"";display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px #1e90ff}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:#f5f5f5;background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:#fff}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid #fff;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255, 255, 255, 0) 50%),linear-gradient(0deg, black, rgba(0, 0, 0, 0) 50%),linear-gradient(90deg, #808080, rgba(128, 128, 128, 0))}.picker_alpha,.picker_sample{position:relative;background:linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0/2em 2em,linear-gradient(45deg, lightgrey 25%, white 25%, white 75%, lightgrey 75%) 1em 1em/2em 2em;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:"";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:"";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}',document.documentElement.firstElementChild.appendChild(In),jn.StyleElement=In;var Dn=function(){return Dn=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Dn.apply(this,arguments)},Ln=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i};function zn(t,e){return void 0===e&&(e=function(t){return!1}),t&&t.parent?(null==e?void 0:e(t.parent))?t.parent:zn(t.parent,e):null}var Vn=o.Builders.builders.webform.prototype.editComponent;function Bn(t){var e,n;return(null===(n=null===(e=t.instance.options)||void 0===e?void 0:e.flags)||void 0===n?void 0:n.isInDataTable)&&!["hidden","columns","panel","table","tabs","well","fieldset"].includes(t.data.type)}function Wn(){return[{key:"display",components:[{weight:442,type:"number",input:!0,key:"columnWeight",label:"Column weight in DataTable",placeholder:"0",defaultValue:0,tooltip:"Make columns appear in a different order in the table.",customConditional:function(t){return Bn(t)}},{weight:1370,type:"checkbox",label:"Hide column in Data Table by default",tooltip:"Hide column in Data Table by default.",key:"hideColumnByDefault",input:!0,customConditional:function(t){return Bn(t)}},{label:"Disable sorting and filtering in Data Table",tooltip:"if enabled, sorting and filtering is disabled for this column.",tableView:!1,key:"disableSortingAndFiltering",type:"checkbox",input:!0,weight:1390,defaultValue:!1,customConditional:function(t){return Bn(t)}},{label:"Column Query Property",weight:445,tooltip:"The component property to use it in API driven Data Table queries for filtering and sorting. If the property is not defined, the component key will be used instead.",tableView:!0,key:"columnQueryProperty",type:"textfield",input:!0,customConditional:function(t){return Bn(t)}}]}]}o.Builders.builders.webform.prototype.editComponent=function(t,e,n,i,r,o){void 0===o&&(o={});var a=null==e?void 0:e.formioComponent,s=a&&("datatable"===a.type||!!zn(a,(function(t){return"datatable"===t.type})));Vn.call(this,t,e,n,i,r,Dn({isInDataTable:s},o))},Object.values(o.Components.components).forEach((function(t){var e=t.editForm;t.editForm=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.apply(void 0,Ln([Wn()],t))}}));var Un=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}([{type:"textfield",label:"Image Url",input:!0,key:"imageUrl",weight:20},{type:"select",input:!0,key:"imageType",label:"Image Type",tooltip:"Element used to display background image",weight:20,defaultValue:"image",dataSrc:"values",data:{values:[{label:"Image",value:"image"},{label:"SVG",value:"svg"}]}},{type:"textfield",label:"Width",input:!0,key:"width",customConditional:function(t){return!t.data.autoSize},weight:20},{type:"textfield",label:"Height",input:!0,key:"height",customConditional:function(t){return!t.data.autoSize},weight:20},{type:"checkbox",label:"Set Size Automatically",input:!0,key:"autoSize",tooltip:"Background image will fill the available width. Uncheck this if you want to specify width/height manually.",weight:20},{type:"textfield",label:"Default Zoom",input:!0,key:"defaultZoom",placeholder:"100",weight:20},{type:"textfield",label:"Default Stroke Color",description:"Start with # sign",input:!0,key:"defaultStroke",placeholder:"#333",weight:20},{type:"textfield",label:"Default Fill Color",description:"Start with # sign",input:!0,key:"defaultFill",placeholder:"#ccc",weight:20},{type:"number",label:"Default Line Width",input:!0,key:"defaultLineWidth",placeholder:"1",weight:20},{type:"number",label:"Default Circle Size",input:!0,key:"defaultCircleSize",placeholder:"10",weight:20},{key:"placeholder",ignore:!0}],Wn()),Nn=[{key:"unique",ignore:!0}],qn=[{key:"multiple",ignore:!0}],Hn=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},Gn=o.Components.components.component.editForm;function Zn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Gn.apply(void 0,Hn([[{key:"display",components:Un},{key:"validation",components:Nn},{key:"data",components:qn},{key:"addons",ignore:!0}]],t))}function Kn(t){var e=this;return{pencil:{state:{mode:"pencil"},eventStart:function(n){e.points=[n],e.prev=n,e.curve=e.two.makeCurve([new t.Vector(e.prev.x,e.prev.y),new t.Vector(n.x,n.y+1)],!0),e.curve.noFill().stroke=e.state.stroke,e.curve.linewidth=e.state.linewidth,e.curve.vertices.forEach((function(t){return t.addSelf(e.curve.translation)})),e.curve.translation.clear(),e.two.update(),e.layers.push(e.curve)},drag:function(n){e.points.push(n),e.curve.vertices.push(new t.Vector(n.x,n.y)),e.two.update(),e.prev=n},eventEnd:function(){var t=e.dataValue.slice();t.push(Object.assign({},e.state,{points:e.points})),e.dataValue=t,e.triggerChange()},draw:function(n){var i=e.two.makeCurve(n.points.map((function(e){return new t.Vector(e.x,e.y)})),!0);return i.noFill().stroke=n.stroke,i.linewidth=n.linewidth,i.vertices.forEach((function(t){return t.addSelf(i.translation)})),i.translation.clear(),i}},line:{state:{mode:"line"},eventStart:function(t){e.center=t,e.line=e.two.makeLine(t.x,t.y,t.x,t.y),e.line.fill=e.state.fill,e.line.stroke=e.state.stroke,e.line.linewidth=e.state.linewidth,e.two.update(),e.layers.push(e.line),e.layers.length},drag:function(t){e.line.vertices[1].x=t.x,e.line.vertices[1].y=t.y,e.two.update()},eventEnd:function(){var t=e.dataValue.slice(),n=e.line.vertices.map((function(t){return{x:t.x,y:t.y}}));t.push(Object.assign({},e.state,{vertices:n})),e.dataValue=t,e.triggerChange()},draw:function(t){var n=e.two.makeLine(t.vertices[0].x,t.vertices[0].y,t.vertices[1].x,t.vertices[1].y);return n.fill=t.fill,n.stroke=t.stroke,n.linewidth=t.linewidth,n}},circle:{state:{mode:"circle"},eventStart:function(t){e.center=t;var n=e.two.makeCircle(t.x,t.y,e.state.circleSize);n.fill=e.state.fill,n.stroke=e.state.stroke,n.linewidth=e.state.linewidth,e.two.update(),e.layers.push(n)},drag:function(){},eventEnd:function(){var t=e.dataValue.slice();t.push(Object.assign({},e.state,{center:e.center})),e.dataValue=t,e.triggerChange()},draw:function(t){var n=e.two.makeCircle(t.center.x,t.center.y,t.circleSize);return n.fill=t.fill,n.stroke=t.stroke,n.linewidth=t.linewidth,n}},rectangle:{cursor:{hover:"crosshair"},state:{mode:"rectangle"},eventStart:function(t){e.dragStartPoint=t},drag:function(t){e.dragEndPoint=t,e.rectangle&&e.rectangle.remove(),e.width=Math.abs(e.dragEndPoint.x-e.dragStartPoint.x),e.height=Math.abs(e.dragEndPoint.y-e.dragStartPoint.y),e.center={x:Math.min(e.dragStartPoint.x,e.dragEndPoint.x)+e.width/2,y:Math.min(e.dragStartPoint.y,e.dragEndPoint.y)+e.height/2},e.rectangle=e.two.makeRectangle(e.center.x,e.center.y,e.width,e.height),e.rectangle.fill=e.state.fill,e.rectangle.stroke=e.state.stroke,e.rectangle.linewidth=e.state.linewidth,e.two.update(),e.layers.push(e.rectangle)},eventEnd:function(){var t=e.dataValue.slice();delete e.rectangle;var n={center:e.center,width:e.width,height:e.height};t.push(Object.assign({},e.state,n)),e.dataValue=t,e.triggerChange()},draw:function(t){var n=e.two.makeRectangle(t.center.x,t.center.y,t.width,t.height);return n.fill=t.fill,n.stroke=t.stroke,n.linewidth=t.linewidth,n}},zoomIn:{cursor:{hover:"zoom-in"},state:{mode:"zoomIn"},eventStart:function(t){return e.zoom(t,e.zoomInfo.multiplier)}},zoomOut:{cursor:{hover:"zoom-out"},state:{mode:"zoomOut"},eventStart:function(t){return e.zoom(t,1/e.zoomInfo.multiplier)}},dragImage:{cursor:{hover:"grab",clicked:"grabbing"},state:{mode:"dragImage"},eventStart:function(t){return e.dragStartPoint=t},drag:function(t){e.dragLastPoint||(e.dragLastPoint=e.dragStartPoint);var n={x:Math.round(t.x-e.dragStartPoint.x),y:Math.round(t.y-e.dragStartPoint.y)};0===n.x&&0===n.y||(e.dragImage(n),e.dragLastPoint=t)}}}}var Yn,Xn={modes:[{title:"Pencil",key:"pencil",icon:"fa fa-pencil"},{title:"Line",key:"line",icon:"fa fa-minus"},{title:"Circle",key:"circle",icon:"fa fa-circle",input:{type:"number",class:"formio-sketchpad-radius-input",attributes:{min:0}}},{title:"Rectangle",key:"rectangle",icon:"fa fa-square-o"},{title:"Zoom In",key:"zoomIn",icon:"fa fa-search-plus"},{title:"Zoom Out",key:"zoomOut",icon:"fa fa-search-minus"},{title:"Drag Zoomed Image",key:"dragImage",icon:"fa fa-hand-paper-o"}],styles:[{title:"Stroke Color",key:"stroke",icon:"fa fa-square-o"},{title:"Fill Color",key:"fill",icon:"fa fa-square"},{title:"Line Width",key:"width",icon:"fa fa-minus",input:{type:"number",class:"formio-sketchpad-linewidth-input",attributes:{min:0,max:250}}}],actions:[{title:"Undo",key:"undo",icon:"fa fa-undo"},{title:"Redo",key:"redo",icon:"fa fa-repeat"},{title:"Reset Zoom",key:"resetZoom",icon:"fa fa-search"},{title:"Clear All",key:"clearAll",icon:"fa fa-ban"}]},$n=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Jn=function(){return Jn=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Jn.apply(this,arguments)},Qn=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},ti=o.Components.components.field,ei=function(t){function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var r=t.apply(this,n)||this;return r.dimensionsCorrection=1,r.imageType=r.component.imageType,r.modes=Kn.call(r,bn),r.state={mode:Object.keys(r.modes)[0],stroke:r.component.defaultStroke||e.defaultStroke,fill:r.component.defaultFill||e.defaultFill,linewidth:r.component.defaultLineWidth||e.defaultLineWidth,circleSize:r.component.defaultCircleSize||e.defaultCircleSize},r.dimensionsMultiplier=1,r.zoomInfo={viewBox:{},canvasViewBox:{},multiplier:1.5,totalMultiplier:1},r.deleted=[],r.layers=[],r}return $n(e,t),Object.defineProperty(e,"defaultFill",{get:function(){return"#ccc"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultStroke",{get:function(){return"#333"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultLineWidth",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultCircleSize",{get:function(){return 10},enumerable:!1,configurable:!0}),e.schema=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ti.schema.apply(ti,Qn([{type:"sketchpad",label:"Sketchpad",key:"sketchpad",input:!0,multiple:!0,modalEdit:!0,imageType:"image",autoSize:!0,defaultZoom:100,defaultStroke:e.defaultStroke,defaultFill:e.defaultFill,defaultLineWidth:e.defaultLineWidth,defaultCircleSize:e.defaultCircleSize}],t))},Object.defineProperty(e,"builderInfo",{get:function(){return{title:"Sketchpad",group:"premium",icon:"image",weight:110,documentation:"/userguide/forms/premium-components#sketchpad",schema:e.schema()}},enumerable:!1,configurable:!0}),e.savedValueTypes=function(t){return o.Utils.getComponentSavedTypes(t)||[o.Utils.componentValueTypes.array]},Object.defineProperty(e,"conditionOperatorsSettings",{get:function(){return Jn(Jn({},t.conditionOperatorsSettings),{operators:["isEmpty","isNotEmpty"]})},enumerable:!1,configurable:!0}),Object.defineProperty(e,"serverConditionSettings",{get:function(){return e.conditionOperatorsSettings},enumerable:!1,configurable:!0}),e.prototype.render=function(){return t.prototype.render.call(this,this.renderTemplate(this.templateName,Jn({},this.renderContext)))},e.prototype.loadComponentRefs=function(t){this.loadRefs(t,Jn({canvas:"single",drawingContainer:"single",background:"single",backgroundImage:"single",totalMultiplier:"single",previewContainer:"single",previewDrawing:"single",previewBackground:"single"},this.buttonsRefs))},e.prototype.init=function(){var e=this,n=new o.Formio.Promise((function(t,n){e.backgroundReady={resolve:t,reject:n}}));return this.backgroundReady.promise=n,t.prototype.init.call(this)},e.prototype.attach=function(e){var n=this,i=new o.Formio.Promise((function(t,e){n.backgroundReady={resolve:t,reject:e}}));this.backgroundReady.promise=i;var r=t.prototype.attach.call(this,e);return this.loadComponentRefs(e),this.refs.canvas&&(this.createDrawingArea(),this.backgroundReady.promise.then((function(){return n.onBackgroundReady()})),this.disabled||this.shouldDisabled||this.readOnly||this.attachDrawEvents(),"image"===this.imageType&&this.refs.backgroundImage?this.loadBackgroundImage(this.refs.backgroundImage):this.addBackground(),this.attachToolbar()),r},Object.defineProperty(e.prototype,"buttonsRefs",{get:function(){var t={};return Object.values(Xn).forEach((function(e){return e.forEach((function(e){t[e.key]="single",e.input&&(t[e.key+"-input"]="single")}))})),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderContext",{get:function(){return{zoomInfo:{totalMultiplier:this.zoomInfo?Math.round(100*this.zoomInfo.totalMultiplier)/100:1},buttonGroups:this.buttonGroups,disabled:t.prototype.disabled}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultSchema",{get:function(){return e.schema()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"templateName",{get:function(){return"sketchpad"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emptyValue",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataReady",{get:function(){return this.backgroundReady.promise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attachFunctions",{get:function(){var t=this,e=function(t,e,n){var i=new jn(t);return t.style.color=e,i.setColor(e,!0),i.onChange=function(e){t.style.color=e.rgbaString,n(e.rgbaString)},t},n=function(e,n,i){var r=t.refs[e];r&&(r.addEventListener("change",(function(t){return i(t.target.value)})),r.value=n)};return{stroke:function(n){return e(n,t.state.stroke,(function(e){return t.state.stroke=e}))},fill:function(n){return e(n,t.state.fill,(function(e){return t.state.fill=e}))},width:function(){return n("width-input",t.state.linewidth,(function(e){return t.state.linewidth=+e}))},circle:function(){return n("circle-input",t.state.circleSize,(function(e){return t.state.circleSize=+e}))}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonGroups",{get:function(){return Object.entries(Xn).map((function(t){return t[1]}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentLabel",{get:function(){return this.component.hideLabel?"":'<label class="control-label">'+this.component.label+"</label><br>"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewBoxFromSubmission",{get:function(){return this._viewBoxFromSubmission},set:function(t){this._viewBoxFromSubmission=t;var e=t.width,n=t.height,i=t.minX,r=t.minY;this.backgroundReady.isReady&&this.setCanvasViewBox(e,n,i,r)},enumerable:!1,configurable:!0}),e.prototype.loadBackgroundImage=function(t){var e=this;t.addEventListener("load",(function(){return e.addBackground()})),t.setAttribute("src",this.component.imageUrl)},e.prototype.createDrawingArea=function(){this.two=new bn({type:bn.Types.svg}).appendTo(this.refs.canvas),this.canvasSvg=this.two.renderer.domElement,this.addClass(this.canvasSvg,"formio-sketchpad-svg"),this.canvasSvg.setAttribute("preserveAspectRatio","xMidYMid meet")},e.prototype.getActualCoordinate=function(t){var e=t.x,n=t.y,i=this.zoomInfo.canvasViewBox.current.minX,r=this.zoomInfo.canvasViewBox.current.minY;return t.x=Math.round(e/this.zoomInfo.totalMultiplier/this.dimensionsMultiplier+i),t.y=Math.round(n/this.zoomInfo.totalMultiplier/this.dimensionsMultiplier+r),t},e.prototype.onBackgroundReady=function(){var t=this;this.backgroundReady.isReady=!0,this.addEventListener(window,"resize",o.Utils._.debounce((function(){return t.stretchDrawingArea()}),100)),this.resetZoom()},e.prototype.addBackground=function(){var t=this;this.refs.backgroundImage&&this.refs.backgroundImage.complete?this.setBackgroundImage():this.component.imageUrl&&"svg"===this.imageType&&o.Formio.makeStaticRequest(this.component.imageUrl,"GET",null,{noToken:!0,headers:{}}).then((function(e){t.setBackgroundImage(e)})).catch((function(e){console.warn(e),t.refs.background.innerHTML=t.t("Background image failed to load. Tagpad doesn't work without background image"),t.backgroundReady.reject()}))},e.prototype.parseSvg=function(t){var e=(new DOMParser).parseFromString(t,"image/svg+xml").getElementsByTagName("svg");return e&&e[0]?e[0]:null},e.prototype.prepareSvg=function(t){t.removeAttribute("width"),t.removeAttribute("height"),t.setAttribute("ref","backgroundImage")},e.prototype.setSvgImage=function(t){var e=this.parseSvg(t);if(e){var n=e.getAttribute("viewBox"),i=n?n.split(" ").map(parseFloat):this.mapDimensionsFromAttributes(e);this.setDimensions.apply(this,i),this.prepareSvg(e);var r=this.dimensions;this.assignZoomInfo(r),this.setViewBoxAttribute(e,r),t=(t=(new XMLSerializer).serializeToString(e)).replace("<svg:svg","<svg").replace("</svg:svg>","</svg>"),this.loadComponentRefs(this.element),this.refs.background.innerHTML=t}else console.warn("Sketchpad '"+this.component.key+"': Background SVG doesn't contain <svg> tag on it")},e.prototype.assignZoomInfo=function(t,e){void 0===e&&(e="viewBox"),this.zoomInfo[e].default={width:t.width,height:t.height,minX:t.minX,minY:t.minY},this.state.viewBox=this.zoomInfo[e].default,this.zoomInfo[e].current=o.Utils._.cloneDeep(this.zoomInfo[e].default)},e.prototype.buttonAttributes=function(t){return t&&t.input&&t.input.attributes?Object.entries(t.input.attributes).map((function(t){return t[0]+"='"+t[1]+"'"})).join(" "):""},e.prototype.attachDrawEvents=function(){var t=this;this.canvasSvg.addEventListener("mousedown",(function(e){e.preventDefault();var n=t.canvasSvg.getBoundingClientRect(),i="default";t.modes[t.state.mode].cursor&&(i=t.modes[t.state.mode].cursor.clicked||t.modes[t.state.mode].cursor.hover),t.canvasSvg.style.cursor=i,t.modes[t.state.mode].eventStart&&t.modes[t.state.mode].eventStart(t.getActualCoordinate({x:e.clientX-n.left,y:e.clientY-n.top}));var r=function(e){e.preventDefault();var n=t.canvasSvg.getBoundingClientRect();t.modes[t.state.mode].drag&&t.modes[t.state.mode].drag(t.getActualCoordinate({x:e.clientX-n.left,y:e.clientY-n.top}))},o=function(e){e.preventDefault(),t.canvasSvg.removeEventListener("mousemove",r),t.canvasSvg.removeEventListener("mouseup",o),document.removeEventListener("mouseup",o);var n="default";t.modes[t.state.mode].cursor&&(n=t.modes[t.state.mode].cursor.hover||n),t.canvasSvg.style.cursor=n;var i=t.canvasSvg.getBoundingClientRect();t.modes[t.state.mode].eventEnd&&t.modes[t.state.mode].eventEnd(t.getActualCoordinate({x:e.clientX-i.left,y:e.clientY-i.top}))};return t.canvasSvg.addEventListener("mousemove",r),t.canvasSvg.addEventListener("mouseup",o),document.addEventListener("mouseup",o),!1})),this.canvasSvg.addEventListener("touchstart",(function(e){e.preventDefault();var n=t.canvasSvg.getBoundingClientRect(),i=e.changedTouches[0],r="default";t.modes[t.state.mode].cursor&&(r=t.modes[t.state.mode].cursor.clicked||t.modes[t.state.mode].cursor.hover),t.canvasSvg.style.cursor=r,t.modes[t.state.mode].eventStart&&t.modes[t.state.mode].eventStart(t.getActualCoordinate({x:i.clientX-n.left,y:i.clientY-n.top}));var o=function(e){e.preventDefault();var n=t.canvasSvg.getBoundingClientRect(),i=e.changedTouches[0];t.modes[t.state.mode].drag&&t.modes[t.state.mode].drag(t.getActualCoordinate({x:i.clientX-n.left,y:i.clientY-n.top}))},a=function(e){e.preventDefault(),t.canvasSvg.removeEventListener("touchmove",o),t.canvasSvg.removeEventListener("touchend",a);var n=t.canvasSvg.getBoundingClientRect(),i=e.changedTouches[0],r="default";t.modes[t.state.mode].cursor&&(r=t.modes[t.state.mode].cursor.hover||r),t.canvasSvg.style.cursor=r,t.modes[t.state.mode].eventEnd&&t.modes[t.state.mode].eventEnd(t.getActualCoordinate({x:i.clientX-n.left,y:i.clientY-n.top}))};return t.canvasSvg.addEventListener("touchmove",o),t.canvasSvg.addEventListener("touchend",a),!1})),this.two.update()},e.prototype.attachToolbar=function(){this.attachModesButtons(),this.attachStylesButtons(),this.attachActionsButtons(),this.setActiveButton(this.state.mode)},e.prototype.attachModesButtons=function(){var t=this;Xn.modes.forEach((function(e){var n=t.refs[e.key];if(n&&t.modes[e.key]){var i=t.modes[e.key];n.addEventListener("click",(function(e){return t.setState(i.state)})),t.callAttachFunction(n,e.key)}}))},e.prototype.attachStylesButtons=function(){var t=this;Xn.styles.forEach((function(e){var n=t.refs[e.key];n&&t.callAttachFunction(n,e.key)}))},e.prototype.attachActionsButtons=function(){var t=this;Xn.actions.forEach((function(e){var n=t.refs[e.key];n&&n.addEventListener("click",(function(){return t[e.key]()}))}))},e.prototype.callAttachFunction=function(t,e){this.attachFunctions[e]&&this.attachFunctions[e](t)},e.prototype.setState=function(t){Object.assign(this.state,t),this.setActiveButton(this.state.mode),this.canvasSvg.style.cursor=o.Utils._.get(this.modes[this.state.mode],"cursor.hover","default")},e.prototype.setActiveButton=function(t){var e=this;Xn.modes.forEach((function(n){e.refs[n.key]&&e.removeClass(e.refs[n.key],"active"),e.refs[t]&&e.addClass(e.refs[t],"active")}))},e.prototype.setBackgroundImage=function(t){if("svg"===this.imageType)if(t&&t.startsWith("<?xml"))this.setSvgImage(t);else{this.imageType="image";var e=new Image;e.setAttribute("ref","backgroundImage"),this.refs.background.appendChild(e),this.loadBackgroundImage(e)}else this.setRasterImage();this.onBackgroundImageSet()},e.prototype.setRasterImage=function(){var t=this.refs.backgroundImage.naturalWidth,e=this.refs.backgroundImage.naturalHeight;this.setDimensions(0,0,t,e),this.assignZoomInfo(this.dimensions)},e.prototype.setCanvasViewBox=function(t,e,n,i){var r,o;void 0===n&&(n=0),void 0===i&&(i=0),this.setDimensions(n,i,t,e),this.assignZoomInfo(this.dimensions,"canvasViewBox"),(null===(o=null===(r=this.zoomInfo)||void 0===r?void 0:r.viewBox)||void 0===o?void 0:o.default)?this.dimensionsCorrection=this.dimensions.width/this.zoomInfo.viewBox.default.width:console.warn("Default ViewBox is not defined"),this.setViewBoxAttribute(this.canvasSvg,this.zoomInfo.canvasViewBox.default),this.setEditorSize(this.dimensions.width,this.dimensions.height),this.stretchDrawingArea()},e.prototype.calculateCanvasViewBox=function(){var t=this.component.width,e=this.component.height;if(this.component.autoSize){var n=this.calculateAutoSize();t=n.width,e=n.height}return t&&e&&!this.component.autoSize&&(this.refs.drawingContainer.style.maxWidth=t+"px",this.refs.drawingContainer.style.maxHeight=e+"px"),"image"===this.imageType&&(t=this.refs.backgroundImage.naturalWidth,e=this.refs.backgroundImage.naturalHeight),{minX:0,minY:0,width:t,height:e}},e.prototype.onBackgroundImageSet=function(){this.loadRefs(this.element,{backgroundImage:"single",component:"single"});var t=this.viewBoxFromSubmission||this.calculateCanvasViewBox(),e=t.width,n=t.height,i=t.minX,r=t.minY;this.setCanvasViewBox(e,n,i,r),this.draw(this.dataValue),this.backgroundReady.resolve()},e.prototype.calculateAutoSize=function(){var t,e=Math.round(null===(t=this.refs.drawingContainer)||void 0===t?void 0:t.offsetWidth),n=this.dimensions.width/this.dimensions.height,i=Math.round(e/n),r=Math.round((null===window||void 0===window?void 0:window.innerHeight)-.2*(null===window||void 0===window?void 0:window.innerHeight));return(r<i||0===e)&&(i=r,e=Math.round(i*n)),{width:e,height:i}},e.prototype.setOpenModalElement=function(){var t="\n      "+this.componentLabel+'\n      <div class="formio-sketchpad-modal-preview-container" ref="previewContainer">\n        <div ref="openModal">\n          <img\n            class="formio-sketchpad-modal-preview-background"\n            ref="previewBackground"\n            src="'+this.component.imageUrl+'"\n            width="100%"\n            alt="sketchpad preview background"\n          />\n        </div>\n      </div>\n    ';this.componentModal.setOpenModalElement(t)},e.prototype.getPreviewImage=function(){return this.canvasSvg&&this.two&&this.zoomInfo.viewBox.default?'<img class="formio-sketchpad-modal-preview-drawing" src="data:image/svg+xml;base64,'+this.getEncodedDrawing()+'"\n                ref="previewDrawing" width="100%" alt="sketchpad preview drawing"/>':""},e.prototype.getValueAsString=function(t,e){return t&&t.length?(null==e?void 0:e.email)?'\n        <table border="1" style="width:100%">\n          <thead>\n            <tr><th>'+this.component.label+"</th>[Complex Data]</tr>\n          </thead>\n        <tbody>\n      ":"[Complex Data]":""},e.prototype.getEncodedDrawing=function(){var t=this.getSvg(),e=(new XMLSerializer).serializeToString(t);return window.btoa(e)},e.prototype.getModalPreviewTemplate=function(){return"\n      "+this.componentLabel+"\n      <div class='formio-sketchpad-modal-preview-container' ref='previewContainer'>\n        <div ref=\"openModal\">\n          <img\n            ref=\"previewBackground\"\n            class='formio-sketchpad-modal-preview-background'\n            src="+this.component.imageUrl+'\n            width="100%"\n            alt="sketchpad preview background"\n          />\n          '+this.getPreviewImage()+"\n        </div>\n      </div>"},e.prototype.mapDimensionsFromAttributes=function(t){return[{attribute:"x",defaultValue:0},{attribute:"y",defaultValue:0},{attribute:"width",defaultValue:640},{attribute:"height",defaultValue:480}].map((function(e){return parseFloat(t.getAttribute(e.attribute))||e.defaultValue}))},e.prototype.setDimensions=function(t,e,n,i){this.dimensions={width:n,height:i,minX:t,minY:e}},e.prototype.stretchDrawingArea=function(){var t=this.calculateAutoSize(),e=t.width,n=t.height;if(e&&n){var i=this.zoomInfo,r=i.canvasViewBox,o=i.totalMultiplier,a=r.default.width,s=r.default.height;if(this.dimensionsMultiplier=e/a,this.dimensions.width=Math.round(a*this.dimensionsMultiplier),this.dimensions.height=Math.round(s*this.dimensionsMultiplier),e===this.editorSize.width&&n===this.editorSize.height)return;var l=o>1?this.dimensions.width:this.dimensions.width*o,c=o>1?this.dimensions.height:this.dimensions.height*o;this.setEditorSize(l,c)}},e.prototype.setEditorSize=function(t,e){this.two&&(this.editorSize={width:t,height:e},this.two.width=t,this.two.height=e,this.two.update()),this.refs.backgroundImage&&(this.refs.backgroundImage.setAttribute("width",t),this.refs.backgroundImage.setAttribute("height",e)),this.canvasSvg&&(this.canvasSvg.style.width=t,this.canvasSvg.style.height=e)},e.prototype.clear=function(){this.two&&this.two.clear()},e.prototype.clearAll=function(){this.layers=[],this.dataValue=[],this.two&&(this.clear(),this.two.update())},e.prototype.draw=function(t){var e=this;this.two&&(this.clear(),t&&t.length?(this.layers=t.map((function(t){return e.modes[t.mode].draw(t)})),this.two.update(),this.appendDrawingToPreview()):this.two.update())},e.prototype.appendDrawingToPreview=function(){var t,e,n,i,r,o,a,s;return r=this,o=void 0,s=function(){var r,o,a,s;return function(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(l){switch(l.label){case 0:return(null===(t=this.componentModal)||void 0===t?void 0:t.element)?(this.loadComponentRefs(this.componentModal.element),r="data:image/svg+xml;base64,"+this.getEncodedDrawing(),o=void 0,this.refs.previewDrawing?(null===(e=this.refs.previewDrawing)||void 0===e||e.setAttribute("src",r),(null===(n=this.refs.previewBackground)||void 0===n?void 0:n.height)>0?[4,this.combineIntoSingleImage(this.refs.previewBackground,this.refs.previewDrawing,this.imageType)]:[3,2]):[3,3]):[3,6];case 1:o=l.sent(),null===(i=this.refs.previewDrawing)||void 0===i||i.setAttribute("src",o),l.label=2;case 2:return[3,6];case 3:return(a=new Image).src=r,this.addClass(a,"formio-sketchpad-modal-preview-drawing"),a.setAttribute("ref","previewDrawing"),navigator.userAgent.includes("Firefox")?[3,5]:(o=this.combineIntoSingleImage(this.refs.previewBackground,a,this.imageType),s=a,[4,o]);case 4:s.src=l.sent(),l.label=5;case 5:this.refs.previewContainer&&(this.refs.previewContainer.appendChild(a),this.addEventListener(a,"click",this.componentModal.openModalListener)),l.label=6;case 6:return[2]}}))},new((a=void 0)||(a=Promise))((function(t,e){function n(t){try{l(s.next(t))}catch(t){e(t)}}function i(t){try{l(s.throw(t))}catch(t){e(t)}}function l(e){var r;e.done?t(e.value):(r=e.value,r instanceof a?r:new a((function(t){t(r)}))).then(n,i)}l((s=s.apply(r,o||[])).next())}))},e.prototype.combineIntoSingleImage=function(t,e,n){var i=this,r=new Promise((function(n){var r=document.createElement("canvas"),o=t.naturalWidth,a=t.width,s=t.naturalHeight,l=t.height,c=o||a,u=s||l;r.width=c,r.height=u;var h=r.getContext("2d");h.rect(0,0,r.width,r.height),e.crossOrigin="anonymous",e.width=c,e.height=u;var d=[t,e].length;t.onload=e.onload=function(){0==--d&&(i.options.pdf&&(t.style.display="none",e.style.position="relative"),t instanceof HTMLImageElement&&(t.crossOrigin="anonymous"),h.drawImage(t,0,0,c,u),h.drawImage(e,0,0,c,u),n(r.toDataURL("image/png",1)),t.crossOrigin=null)}}));return r},e.prototype.undo=function(){var t=this.dataValue.slice();t.length&&(this.deleted.push(t.pop()),this.dataValue=t,this.triggerChange(),this.draw(t))},e.prototype.redo=function(){if(this.deleted.length){var t=this.dataValue.slice();t.push(this.deleted.pop()),this.dataValue=t,this.triggerChange(),this.draw(t)}},e.prototype.setValue=function(e,n){var i;t.prototype.setValue.call(this,e,n);var r=null===(i=null==e?void 0:e[0])||void 0===i?void 0:i.viewBox;r&&(this.viewBoxFromSubmission=r),this.backgroundReady.isReady&&this.two&&this.draw(e)},e.prototype.getSvg=function(){var t=this.canvasSvg.cloneNode(!0);this.addClass(t,"formio-sketchpad-preview-svg"),t.removeAttribute("style");var e=this.zoomInfo.canvasViewBox.default;return this.setViewBoxAttribute(t,e),t},e.prototype.normalizeSvgOffset=function(t){void 0===t&&(t="viewBox");var e=this.zoomInfo[t];this.zoomInfo[t].current.minX=e.current.minX<e.default.minX?e.default.minX:e.current.minX,this.zoomInfo[t].current.minY=e.current.minY<e.default.minY?e.default.minY:e.current.minY;var n=e.default.width-e.current.width+e.default.minX,i=e.default.height-e.current.height+e.default.minY;this.zoomInfo[t].current.minX=e.current.minX>n?n:e.current.minX,this.zoomInfo[t].current.minY=e.current.minY>i?i:e.current.minY},e.prototype.setViewBoxAttribute=function(t,e){t.setAttribute("viewBox",e.minX+" "+e.minY+" "+e.width+" "+e.height)},e.prototype.updateSvgViewBox=function(t){void 0===t&&(t="viewBox");var e=this.zoomInfo[t].current;"svg"===this.imageType&&("viewBox"===t?this.setViewBoxAttribute(this.refs.backgroundImage,e):this.setViewBoxAttribute(this.canvasSvg,e))},e.prototype.drag=function(t,e){void 0===e&&(e="viewBox"),this.zoomInfo[e].current.minX=this.zoomInfo[e].current.minX-t.x,this.zoomInfo[e].current.minY=this.zoomInfo[e].current.minY-t.y,this.normalizeSvgOffset(e),this.updateSvgViewBox(e)},e.prototype.dragImage=function(t){if("svg"!==this.imageType){var e=this.refs.drawingContainer.clientWidth,n=this.refs.drawingContainer.clientHeight,i=this.refs.drawingContainer.scrollHeight,r=this.refs.drawingContainer.scrollWidth,o=this.refs.drawingContainer.scrollLeft,a=this.refs.drawingContainer.scrollTop;return this.refs.drawingContainer.scrollTop=Math.min(i-n,a+t.y),void(this.refs.drawingContainer.scrollLeft=Math.min(r-e,o+t.x))}var s=this.dimensionsCorrection?{x:t.x/this.dimensionsCorrection,y:t.y/this.dimensionsCorrection}:t;this.drag(s),this.drag(t,"canvasViewBox")},e.prototype.setTotalMultiplier=function(t){this.zoomInfo.totalMultiplier=t,this.refs.totalMultiplier.innerHTML=this.t(Math.round(100*t)/100)},e.prototype.zoomImage=function(t,e){void 0===e&&(e="viewBox"),this.zoomInfo[e].current.width=Math.round(this.zoomInfo[e].default.width/this.zoomInfo.totalMultiplier),this.zoomInfo[e].current.height=Math.round(this.zoomInfo[e].default.height/this.zoomInfo.totalMultiplier);var n=this.zoomInfo[e].current,i=n.width,r=n.height,o=this.zoomInfo[e].default,a=o.width,s=o.height;i>a&&r>s?this.zoomOut(e):this.zoomIn(t,e),this.updateSvgViewBox(e)},e.prototype.zoom=function(t,e){this.setTotalMultiplier(this.zoomInfo.totalMultiplier*e);var n=this.dimensionsCorrection?{x:t.x/this.dimensionsCorrection,y:t.y/this.dimensionsCorrection}:t;this.zoomImage(n),this.zoomImage(t,"canvasViewBox")},e.prototype.zoomOut=function(t){void 0===t&&(t="viewBox"),this.setEditorSize(this.dimensions.width*this.zoomInfo.totalMultiplier,this.dimensions.height*this.zoomInfo.totalMultiplier),this.zoomInfo[t].current=o.Utils._.cloneDeep(this.zoomInfo[t].default)},e.prototype.zoomIn=function(t,e){void 0===e&&(e="viewBox"),this.canvasSvg.width===this.dimensions.width&&this.canvasSvg.height===this.dimensions.height||this.setEditorSize(this.dimensions.width,this.dimensions.height),"svg"!==this.imageType?this.refs.backgroundImage&&this.setEditorSize(this.dimensions.width*this.zoomInfo.totalMultiplier,this.dimensions.height*this.zoomInfo.totalMultiplier):(this.zoomInfo[e].current.minX=t.x-this.zoomInfo[e].current.width/2,this.zoomInfo[e].current.minY=t.y-this.zoomInfo[e].current.height/2),this.normalizeSvgOffset(e)},e.prototype.resetZoom=function(){this.zoom({x:0,y:0},this.component.defaultZoom/100/this.zoomInfo.totalMultiplier)},e.editForm=Zn,e}(ti),ni=ei,ii=[],ri="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(Yn||(Yn={}));var oi,ai=function(t){return Object.freeze(t)},si=function(t,e){this.inlineSize=t,this.blockSize=e,ai(this)},li=function(){function t(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,ai(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),ci=function(t){return t instanceof SVGElement&&"getBBox"in t},ui=function(t){if(ci(t)){var e=t.getBBox(),n=e.width,i=e.height;return!n&&!i}var r=t,o=r.offsetWidth,a=r.offsetHeight;return!(o||a||t.getClientRects().length)},hi=function(t){var e;if(t instanceof Element)return!0;var n=null===(e=null==t?void 0:t.ownerDocument)||void 0===e?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},di="undefined"!=typeof window?window:{},fi=new WeakMap,pi=/auto|scroll/,gi=/^tb|vertical/,mi=/msie|trident/i.test(di.navigator&&di.navigator.userAgent),vi=function(t){return parseFloat(t||"0")},yi=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=!1),new si((n?e:t)||0,(n?t:e)||0)},bi=ai({devicePixelContentBoxSize:yi(),borderBoxSize:yi(),contentBoxSize:yi(),contentRect:new li(0,0,0,0)}),_i=function(t,e){if(void 0===e&&(e=!1),fi.has(t)&&!e)return fi.get(t);if(ui(t))return fi.set(t,bi),bi;var n=getComputedStyle(t),i=ci(t)&&t.ownerSVGElement&&t.getBBox(),r=!mi&&"border-box"===n.boxSizing,o=gi.test(n.writingMode||""),a=!i&&pi.test(n.overflowY||""),s=!i&&pi.test(n.overflowX||""),l=i?0:vi(n.paddingTop),c=i?0:vi(n.paddingRight),u=i?0:vi(n.paddingBottom),h=i?0:vi(n.paddingLeft),d=i?0:vi(n.borderTopWidth),f=i?0:vi(n.borderRightWidth),p=i?0:vi(n.borderBottomWidth),g=h+c,m=l+u,v=(i?0:vi(n.borderLeftWidth))+f,y=d+p,b=s?t.offsetHeight-y-t.clientHeight:0,_=a?t.offsetWidth-v-t.clientWidth:0,w=r?g+v:0,x=r?m+y:0,k=i?i.width:vi(n.width)-w-_,C=i?i.height:vi(n.height)-x-b,S=k+g+_+v,R=C+m+b+y,O=ai({devicePixelContentBoxSize:yi(Math.round(k*devicePixelRatio),Math.round(C*devicePixelRatio),o),borderBoxSize:yi(S,R,o),contentBoxSize:yi(k,C,o),contentRect:new li(h,l,k,C)});return fi.set(t,O),O},wi=function(t,e,n){var i=_i(t,n),r=i.borderBoxSize,o=i.contentBoxSize,a=i.devicePixelContentBoxSize;switch(e){case Yn.DEVICE_PIXEL_CONTENT_BOX:return a;case Yn.BORDER_BOX:return r;default:return o}},xi=function(t){var e=_i(t);this.target=t,this.contentRect=e.contentRect,this.borderBoxSize=ai([e.borderBoxSize]),this.contentBoxSize=ai([e.contentBoxSize]),this.devicePixelContentBoxSize=ai([e.devicePixelContentBoxSize])},ki=function(t){if(ui(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},Ci=function(){var t=1/0,e=[];ii.forEach((function(n){if(0!==n.activeTargets.length){var i=[];n.activeTargets.forEach((function(e){var n=new xi(e.target),r=ki(e.target);i.push(n),e.lastReportedSize=wi(e.target,e.observedBox),r<t&&(t=r)})),e.push((function(){n.callback.call(n.observer,i,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,i=e;n<i.length;n++)(0,i[n])();return t},Si=function(t){ii.forEach((function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach((function(n){n.isActive()&&(ki(n.target)>t?e.activeTargets.push(n):e.skippedTargets.push(n))}))}))},Ri=[],Oi=0,Ei={attributes:!0,characterData:!0,childList:!0,subtree:!0},Ai=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Ti=function(t){return void 0===t&&(t=0),Date.now()+t},Mi=!1,Pi=function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var e=this;if(void 0===t&&(t=250),!Mi){Mi=!0;var n,i=Ti(t);n=function(){var n=!1;try{n=function(){var t,e=0;for(Si(e);ii.some((function(t){return t.activeTargets.length>0}));)e=Ci(),Si(e);return ii.some((function(t){return t.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:ri}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=ri),window.dispatchEvent(t)),e>0}()}finally{if(Mi=!1,t=i-Ti(),!Oi)return;n?e.run(1e3):t>0?e.run(t):e.start()}},function(t){if(!oi){var e=0,n=document.createTextNode("");new MutationObserver((function(){return Ri.splice(0).forEach((function(t){return t()}))})).observe(n,{characterData:!0}),oi=function(){n.textContent="".concat(e?e--:e++)}}Ri.push(t),oi()}((function(){requestAnimationFrame(n)}))}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,e=function(){return t.observer&&t.observer.observe(document.body,Ei)};document.body?e():di.addEventListener("DOMContentLoaded",e)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Ai.forEach((function(e){return di.addEventListener(e,t.listener,!0)})))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),Ai.forEach((function(e){return di.removeEventListener(e,t.listener,!0)})),this.stopped=!0)},t}(),Fi=new Pi,ji=function(t){!Oi&&t>0&&Fi.start(),!(Oi+=t)&&Fi.stop()},Ii=function(){function t(t,e){this.target=t,this.observedBox=e||Yn.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t,e=wi(this.target,this.observedBox,!0);return t=this.target,ci(t)||function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),Di=function(t,e){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=e},Li=new WeakMap,zi=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},Vi=function(){function t(){}return t.connect=function(t,e){var n=new Di(t,e);Li.set(t,n)},t.observe=function(t,e,n){var i=Li.get(t),r=0===i.observationTargets.length;zi(i.observationTargets,e)<0&&(r&&ii.push(i),i.observationTargets.push(new Ii(e,n&&n.box)),ji(1),Fi.schedule())},t.unobserve=function(t,e){var n=Li.get(t),i=zi(n.observationTargets,e),r=1===n.observationTargets.length;i>=0&&(r&&ii.splice(ii.indexOf(n),1),n.observationTargets.splice(i,1),ji(-1))},t.disconnect=function(t){var e=this,n=Li.get(t);n.observationTargets.slice().forEach((function(n){return e.unobserve(t,n.target)})),n.activeTargets.splice(0,n.activeTargets.length)},t}(),Bi=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Vi.connect(this,t)}return t.prototype.observe=function(t,e){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!hi(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Vi.observe(this,t,e)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!hi(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Vi.unobserve(this,t)},t.prototype.disconnect=function(){Vi.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}(),Wi=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}([{type:"textfield",label:"Image Url",input:!0,key:"imageUrl",weight:20},{type:"textfield",label:"Width",input:!0,key:"canvasWidth",weight:20},{type:"textfield",label:"Height",input:!0,key:"canvasHeight",weight:20},{type:"textfield",label:"Dot Size",input:!0,key:"dotSize",placeholder:"10",weight:20},{type:"textfield",label:"Dot Stroke Size",input:!0,key:"dotStrokeSize",placeholder:"2",weight:20},{type:"textfield",label:"Dot Stroke Color",input:!0,key:"dotStrokeColor",placeholder:"#333",weight:20},{type:"textfield",label:"Dot Fill Color",input:!0,key:"dotFillColor",placeholder:"#ccc",weight:20},{type:"textfield",label:"Dot Custom Label",input:!0,key:"dotCustomLabel",placeholder:"x",tooltip:"Custom static label for dot.",weight:20}],Wn()),Ui=[{key:"multiple",ignore:!0}],Ni=[{type:"textarea",input:!0,key:"template",label:"Dot Value Template",editor:"ace",as:"html",rows:10,weight:18,tooltip:"The HTML template for displaying dots' values in preview mode (View Tab, generated PDF)",description:'Four available variables. "dot" is the data of the dot, "index" is the index of the dot (indexes start from \'0\'), "components" is an array of components of the form associated with the dot and "instance" is an instance of the Tagpad.'}],qi=[{key:"unique",ignore:!0}],Hi=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},Gi=o.Components.components.component.editForm;function Zi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Gi.apply(void 0,Hi([[{key:"display",components:Wi},{key:"validation",components:qi},{key:"data",components:Ui},{key:"templates",label:"Templates",weight:5,components:Ni},{key:"addons",ignore:!0}]],t))}var Ki=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Yi=function(){return Yi=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Yi.apply(this,arguments)},Xi=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},$i=o.Components.components.component,Ji=o.Components.components.nestedarray,Qi=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=t.apply(this,e)||this;i.type="tagpad",i.dots=[];var r=new o.Formio.Promise((function(t,e){i.backgroundReady={resolve:t,reject:e}}));return i.backgroundReady.promise=r,i.dimensionsMultiplier=1,i.sizeFromSubmission=!1,i}return Ki(e,t),e.schema=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Ji.schema.apply(Ji,Xi([{type:"tagpad",label:"Tagpad",key:"tagpad",input:!0,dotSize:10,dotStrokeSize:2,dotStrokeColor:"#333",dotFillColor:"#ccc",dotCustomLabel:"",components:[],tree:!0,template:e.defaultDotPreviewTemplate}],t))},Object.defineProperty(e,"builderInfo",{get:function(){return{title:"Tagpad",group:"premium",icon:"tag",weight:115,documentation:"/userguide/forms/premium-components#tagpad",schema:e.schema()}},enumerable:!1,configurable:!0}),e.savedValueTypes=function(t){return o.Utils.getComponentSavedTypes(t)||[o.Utils.componentValueTypes.array]},Object.defineProperty(e.prototype,"defaultSchema",{get:function(){return e.schema()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emptyValue",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultValue",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iterableRows",{get:function(){return this.editForms},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttons",{get:function(){var t=this,e={};return[{name:"removeDot",method:"removeSelectedDot"}].forEach((function(n){t.hasButton(n.name)&&(e[n.name]=n)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataReady",{get:function(){return this.backgroundReady.promise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderContext",{get:function(){return{selectedDot:this.selectedDot,hasDots:this.dots&&this.dots.length||this.dataValue.length,buttons:this.buttons,canvasMaxHeight:this.userDefiniedCanvasSize.height?this.userDefiniedCanvasSize.height+"px":"50%",canvasMaxWidth:this.userDefiniedCanvasSize.width?this.userDefiniedCanvasSize.width+"px":"50%"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"formComponents",{get:function(){var t,e,n=null===(t=this.editForms)||void 0===t?void 0:t[null===(e=this.selectedDot)||void 0===e?void 0:e.index];return n?n.components:this.components},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userDefiniedCanvasSize",{get:function(){var t=parseInt(this.component.canvasWidth,10),e=parseInt(this.component.canvasHeight,10);return isNaN(t)||isNaN(e)?{width:void 0,height:void 0}:{width:t,height:e}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultDotPreviewTemplate",{get:function(){return'<div class="dot-preview-label"> Dot {{index + 1}}: </div>\n    {% Object.keys(dot).forEach(function(key) { %}\n      <div style="margin-left: 15px;"><span class="dot-preview-field-label">{{key}}</span>:\n        <p class="dot-preview-value">\n          {{\n            instance.getComponent([index, key]) && \'getValueAsString\' in instance.getComponent([index, key])\n              ? instance.getComponent([index, key]).getView(dot[key])\n              : dot[key]\n          }}\n        </p>\n    </div>\n    {% }) %}'},enumerable:!1,configurable:!0}),e.prototype.init=function(){var e=this;if(this.builderMode)return this.editForms=[],t.prototype.init.call(this);this.components=this.components||[];var n=this.dataValue||this.emptyValue;this.editForms=n.map((function(t,n){return{isOpen:!1,data:t.dot?t.dot.data:t.data,components:e.createFormComponents(t,n)}}))},e.prototype.render=function(e){if(this.builderMode)return t.prototype.render.call(this);var n=this.renderContext;return t.prototype.render.call(this,e||this.renderTemplate("tagpad",Yi(Yi({},n),{components:this.renderComponents(this.formComponents)})))},e.prototype.attach=function(e){var n=this,i=new o.Formio.Promise((function(t,e){n.backgroundReady={resolve:t,reject:e}}));return this.backgroundReady.promise=i,this.builderMode||(this.loadRefs(e,{canvas:"single",background:"single",form:"single",canvasImage:"single",image:"single",removeDot:"single"}),this.refs.background&&this.hasBackgroundImage&&(this.createDrawingArea(),this.backgroundReady.promise.then((function(){n.resizeObserver=new Bi((function(){if(n.originalImageSize&&(!n.originalImageSize.width||!n.originalImageSize.height)){n.setOriginalImageSize();var t=n.originalImageSize,e=t.width,i=t.height;n.setDimensions(0,0,e,i),n.setViewBoxAttribute(n.canvasSvg,n.dimensions)}n.stretchDrawingArea()})),n.refs.background&&n.resizeObserver.observe(n.refs.background)})),this.disabled||this.shouldDisabled||this.readOnly||this.attachDrawEvents(),this.refs.image&&!this.imageWasLoaded?this.refs.image.addEventListener("load",(function(t){n.setOriginalImageSize(),n.imageWasLoaded=!0,n.addBackground()})):this.addBackground()),this.attachButtons(),this.dataValue.length>0&&0===this.dots.length?this.createDots():this.dots.length>0&&this.dots.forEach((function(t){return n.drawDot(t.dot,t.index)})),this.components&&this.attachComponents(this.refs.form,this.formComponents)),t.prototype.attach.call(this,e)},e.prototype.beforeFocus=function(t){"beforeFocus"in this.parent&&this.parent.beforeFocus(this);var e=this.getRelativePath(t.path),n=o.Utils.getArrayFromComponentPath(e);o.Utils._.isNumber(n[0])&&this.selectDot(n[0])},e.prototype.getRelativePath=function(t){var e="."+this.key,n=this.isInputComponent?this.path:this.path.slice(0).replace(e,"");return t.replace(n,"")},e.prototype.setOriginalImageSize=function(){this.loadRefs(this.element,{background:"single",canvasContainer:"single"});var t=null===window||void 0===window?void 0:window.getComputedStyle(this.refs.background),e=parseInt(null==t?void 0:t.width,10),n=parseInt(null==t?void 0:t.height,10);e=isNaN(e)?0:e,n=isNaN(n)?0:n,this.originalImageSize={width:e,height:n}},e.prototype.attachDrawEvents=function(){var t=this;!this.options.readOnly&&this.canvasSvg&&(this.canvasSvg.addEventListener("mouseup",(function(e){return t.mouseEnd(e)})),this.canvasSvg.addEventListener("touchend",(function(e){return t.touchEnd(e)})),this.two.update())},e.prototype.attachButtons=function(){var t=this;o.Utils._.each(this.buttons,(function(e){var n=t.refs[""+e.name];n&&t.addEventListener(n,"click",(function(i){i.preventDefault(),n.setAttribute("disabled","disabled"),t.setLoading(n,!0),"function"==typeof t[e.method]&&t[e.method](),n.removeAttribute("disabled"),t.setLoading(n,!1)}))}))},e.prototype.redraw=function(){t.prototype.redraw.call(this);var e=[];this.dots.forEach((function(t){return e.push(t.shape.circle,t.shape.text)})),this.two&&this.two.add(e)},e.prototype.destroy=function(){this.canvasSvg&&(this.canvasSvg.removeEventListener("touchend",this.touchEnd),this.canvasSvg.removeEventListener("mouseup",this.mouseEnd));for(var e=0;e<this.dots.length;e++)this.destroyDot(e);this.destroyComponents(),this.dots=[],this.editForms=[],t.prototype.destroy.call(this),this.emit("destroy"),this.off("destroy")},e.prototype.destroyDot=function(t){var e=this;if(this.dots[t]){var n=this.dots[t];a.each(this.drawDotEvents,(function(t){n.shape.circle._renderer.elem.removeEventListener(t,e.dotClicked),n.shape.text._renderer.elem.removeEventListener(t,e.dotClicked)}))}},e.prototype.destroyComponents=function(){var e=this;if(this.builderMode||!this.components)return t.prototype.destroyComponents.call(this);this.components.slice().forEach((function(t){return e.removeComponent(t,e.components)}))},e.prototype.addBackground=function(){this.refs.image&&this.refs.image.complete&&!this.imageWasLoaded?this.imageWasLoaded=!0:this.refs.image&&this.refs.image.complete&&this.imageWasLoaded&&this.setBackgroundImage()},e.prototype.setBackgroundImage=function(t){if(this.sizeFromSubmission)this.setViewBoxAttribute(this.canvasSvg,this.dimensions);else{var e=this.originalImageSize,n=e.width,i=e.height;this.setDimensions(0,0,n,i),this.setViewBoxAttribute(this.canvasSvg,this.dimensions)}this.loadRefs(this.refs.background,{backgroundImage:"single"}),this.stretchDrawingArea(),this.backgroundReady.resolve()},e.prototype.mapDimensionsFromAttributes=function(t){return[{attribute:"x",defaultValue:0},{attribute:"y",defaultValue:0},{attribute:"width",defaultValue:640},{attribute:"height",defaultValue:480}].map((function(e){return parseFloat(t.getAttribute(e.attribute))||e.defaultValue}))},e.prototype.setDimensions=function(t,e,n,i){this.dimensions={width:n,height:i,minX:t,minY:e}},e.prototype.setViewBoxAttribute=function(t,e){t.setAttribute("viewBox",e.minX+" "+e.minY+" "+e.width+" "+e.height)},e.prototype.hasButton=function(t){return"removeDot"===t&&!this.options.readOnly},Object.defineProperty(e.prototype,"iteratableRows",{get:function(){return this.editForms},enumerable:!1,configurable:!0}),e.prototype.componentContext=function(t){return this.iteratableRows[t.row]?this.iteratableRows[t.row].data:{}},e.prototype.createFormComponents=function(t,e){var n=this,i=[];return this.component.components.forEach((function(r){var a=o.Utils._.clone(n.options);a.row=""+e,a.name+="["+e+"]";var s=t.dot?t.dot.data:t.data,l=n.createComponent(r,a,s);i.push(l)})),i},e.prototype.redrawDots=function(){this.dots=[],this.two.clear(),this.two.render(),this.createDots()},e.prototype.createDots=function(){var t=this,e=this.dataValue;e&&e.length&&this.two&&(e.forEach((function(e,n){t.dots[n]?t.hasChanged(e,t.dots[n].dot)&&(t.removeDot(n),t.addDot(e,n)):t.addDot(e)})),this.dots.splice(e.length),this.editForms.splice(e.length))},e.prototype.getComponent=function(t,e){t=Array.isArray(t)?t:[t];var n=null,i=t[0],r=t[1],a=t.slice(2);return o.Utils._.isNumber(i)&&r?(this.everyComponent((function(t){t.key===r&&(n=t)}),i),n&&(o.Utils._.isFunction(e)&&e(n,this.getComponents),a.length&&"getComponent"in n)?n.getComponent(a,e):n):n},e.prototype.rescaleImage=function(t){var e=this;if(void 0===t&&(t={}),t.fromSubmission&&this.dataValue.length)return o.Utils._.get(this.dataValue,"[0].coordinate.width",!1)?(this.setDimensions(0,0,this.dataValue[0].coordinate.width,this.dataValue[0].coordinate.height),void(this.sizeFromSubmission=!0)):void(this.hasBackgroundImage&&this.backgroundReady.promise.then((function(){e.dataValue=e.dataValue.map((function(t){return t.coordinate.width=e.dimensions.width,t.coordinate.height=e.dimensions.height,t}))})))},e.prototype.setValue=function(t,e){this.dataValue=t,this.rescaleImage(e),this.createDots(),this.rebuild()},e.prototype.mouseEnd=function(t){t.preventDefault();var e=this.canvasSvg.getBoundingClientRect(),n=this.getActualCoordinate({x:t.clientX-e.left,y:t.clientY-e.top});this.addDot({coordinate:n,data:{}}),this.selectDot(this.dots.length-1)},e.prototype.touchEnd=function(t){t.preventDefault();var e=this.canvasSvg.getBoundingClientRect(),n=t.changedTouches[0],i=this.getActualCoordinate({x:n.clientX-e.left,y:n.clientY-e.top});this.addDot({coordinate:i,data:{}}),this.selectDot(this.dots.length-1)},e.prototype.getActualCoordinate=function(t){return t.x=Math.round(t.x/this.dimensionsMultiplier)+this.dimensions.minX,t.y=Math.round(t.y/this.dimensionsMultiplier)+this.dimensions.minY,t.width=this.dimensions.width,t.height=this.dimensions.height,t},e.prototype.selectDot=function(t){if(this.selectedDot&&this.dots[this.selectedDot.index]&&(this.dots[this.selectedDot.index].shape.circle.dashes=[0]),!o.Utils._.isNumber(t)||!this.dots[t])return this.selectedDot=null,void this.redraw();var e=this.dots[t];this.selectedDot=e,this.dots[this.selectedDot.index].shape.circle.dashes=[1],this.redraw(),this.triggerChange()},e.prototype.dotClicked=function(t,e){t.stopPropagation(),this.selectDot(e)},e.prototype.addDot=function(t,e){var n=this;if(t){var i="number"==typeof e?e:this.dots.length,r=this.drawDot(t,i);this.dots.splice(i,0,{index:i,dot:t,shape:r}),this.dataValue[i]||this.dataValue.splice(i,0,t),this.editForms[i]&&this.editForms.splice(i,1)[0].components.forEach((function(t){return n.removeComponent(t,n.components)})),this.editForms.splice(i,0,{components:this.createFormComponents(this.dots[i],i),data:t.data||{}})}},Object.defineProperty(e.prototype,"drawDotEvents",{get:function(){return["mouseup","touchend"]},enumerable:!1,configurable:!0}),e.prototype.drawDot=function(t,e){var n=this,i=t.coordinate,r=i.x,o=i.y,s=this.drawDotCircle(r,o,this.component.dotSize,e),l=this.drawDotLabel(r,o,this.component.dotCustomLabel||e+1);return this.two.add(s,l),this.two.update(),a.each(this.drawDotEvents,(function(t){s._renderer.elem.addEventListener(t,(function(t){return n.dotClicked(t,e)})),l._renderer.elem.addEventListener(t,(function(t){return n.dotClicked(t,e)}))})),{circle:s,text:l}},e.prototype.drawDotCircle=function(t,e,n,i){var r=this.two.makeCircle(t,e,n);return r.fill=this.component.dotFillColor,r.stroke=this.component.dotStrokeColor,r.linewidth=this.component.dotStrokeSize,r.className+=" formio-tagpad-dot",this.selectedDot&&this.selectedDot.index===i&&(r.dashes=[1]),r},e.prototype.drawDotLabel=function(t,e,n){var i=new bn.Text(n,t,e);return i.className+=" formio-tagpad-dot-index",i.styles={color:this.component.dotStrokeColor},i},e.prototype.createDrawingArea=function(){this.two=new bn({type:bn.Types.svg,width:"100%",height:"100%"}).appendTo(this.refs.canvas),this.canvasSvg=this.two.renderer.domElement,this.canvasSvg.setAttribute("preserveAspectRatio","xMidYMid meet")},e.prototype.stretchDrawingArea=function(){var t,e;this.loadRefs(this.element,{background:"single"});var n=null===(t=this.refs.background)||void 0===t?void 0:t.offsetWidth,i=null===(e=this.refs.background)||void 0===e?void 0:e.offsetHeight;if(n&&i){var r=n/this.dimensions.width;this.dimensionsMultiplier!==r&&(this.dimensionsMultiplier=n/this.dimensions.width,this.setEditorSize(n,i))}},e.prototype.setEditorSize=function(t,e){this.two.width=t,this.two.height=e,this.two.update(),this.refs.image&&(this.refs.image.setAttribute("width",t),this.refs.image.setAttribute("height",e))},Object.defineProperty(e.prototype,"hasBackgroundImage",{get:function(){return this.component.image||this.component.imageUrl},enumerable:!1,configurable:!0}),e.prototype.removeSelectedDot=function(){this.selectedDot&&this.removeDot(this.selectedDot.index)},e.prototype.removeDot=function(t){var e=this;this.dataValue[t]&&this.dots[t]&&(this.destroyDot(t),this.destroyComponents(),this.dataValue.splice(t,1),this.dots.splice(t,1),this.editForms.splice(t,1)[0].components.forEach((function(t){return e.removeComponent(t,e.components)})),this.selectDot(0))},e.prototype.focus=function(){return this.refs.canvas&&this.refs.canvas.focus()},e.prototype.checkData=function(t,e,n){var i=this;return t=t||this.rootValue,e=e||{},n=n||this.data,$i.prototype.checkData.call(this,t,e,n),this.editForms.reduce((function(n,r,o){return i.checkDot(t,e,r.data,o)&&n}),!0)},e.prototype.checkValidity=function(t,e,n){return t=t||this.rootValue,n=n||this.data,this.checkCondition(n,t)?this.checkComponentValidity(t,e,n):(this.setCustomValidity(""),!0)},e.prototype.checkComponentValidity=function(e,n,i){var r=this;if(!t.prototype.checkComponentValidity.call(this,e,n,i))return!1;var o=!0;if(this.editForms.forEach((function(t,e){var i=r.checkDotValidity(t,n,r.dots[e]);o=o&&i})),!o)return!1;var a=this.invalid||this.invalidMessage(e,n);return this.setCustomValidity(a,n),!0},e.prototype.checkDot=function(e,n,i,r){var o=t.prototype.checkData.call(this,e,n,i,this.editForms[r].components);return this.setDotValidity(this.dots[r],o),o},e.prototype.checkDotValidity=function(t,e,n){var i=!0;if(!t)return!0;var r=e||t.dirty;return t.components.forEach((function(e){(r=r||!e.pristine)&&(e.setPristine(!r),t.dirty=!!r,i=i&&e.checkValidity(null,r,t.data))})),this.setDotValidity(n,i),!!i},e.prototype.addDotNumberToErrorMessages=function(t){this.editForms[t.index].components.forEach((function(e){e.errors.forEach((function(e){var n=" (see dot "+(t.index+1)+")";e.message.includes(n)||(e.message+=n,e.messages.forEach((function(t){return t.message+=n})))}))}))},e.prototype.setDotValidity=function(t,e){if(t){var n=e?this.component.dotStrokeColor:"#ff0000";t.shape.circle.stroke=n,t.shape.text.styles.color=n,this.two.update(),this.addDotNumberToErrorMessages(t)}},e.prototype.getDataAsString=function(){var t=this,n="",i=this.component.template||e.defaultDotPreviewTemplate;return this.iterableRows.forEach((function(e,r){var o=e.data,a=e.components,s=t.interpolate(i,{dot:o,index:r,components:a,instance:t});n+=s})),n},e.prototype.getValueAsString=function(e,n){var i=this;if(!e||!e.length)return"";if(n&&n.email){var r="";o.Utils.eachComponent(this.components,(function(t){r+="<th>"+t.label+"</th>"}));var a='\n        <table border="1" style="width:100%">\n          <thead>\n            <tr><th>Dots</th>'+r+"</tr>\n          </thead>\n          <tbody>\n      ";return e.map((function(t,e){var r=i.editForms[e].components,s="";o.Utils.eachComponent(r,(function(t){s+='<td style="text-align: center">',t.isInputComponent&&t.visible&&!t.skipInEmail&&(s+=t.getView(t.dataValue,n)),s+="</td>"})),a+='\n          <tr>\n            <td style="text-align: center">'+(e+1)+"</td>\n            "+s+"\n          </tr>\n        "})),a+="</tbody></table>"}return t.prototype.getValueAsString.call(this,e,n)},e.editForm=Zi,e}(Ji),tr=Qi,er=[{type:"checkbox",input:!0,weight:105,key:"inlineEdit",label:"Inline Editing",tooltip:"Check this if you would like your changes within 'edit' mode to be committed directly to the submission object as that row is being changed"},{key:"defaultValue",ignore:!0},{key:"multiple",ignore:!0}],nr=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}([{key:"placeholder",ignore:!0},{key:"modalEdit",ignore:!0}],Wn()),ir=[{type:"textarea",label:"Header Template",key:"templates.header",rows:5,editor:"ace",as:"handlebars",input:!0,placeholder:"/*** Lodash Template Code ***/",tooltip:"This is the <a href='https://lodash.com/docs/4.17.5#template'>Lodash Template</a> used to render the header of the Dynamic Wizard.",customConditional:function(){return!o.Utils.Evaluator.noeval}},{type:"textarea",label:"Row Template",key:"templates.row",rows:5,editor:"ace",as:"handlebars",input:!0,placeholder:"/*** Lodash Template Code ***/",description:'Three available variables. "row" is an object of one row\'s data, "components" is the array of components in the grid and "state" is current row\'s state (can be "draft" or "saved").',tooltip:"This is the <a href='https://lodash.com/docs/4.17.5#template'>Lodash Template</a> used to render each row of the Dynamic Wizard.",customConditional:function(){return!o.Utils.Evaluator.noeval}},{type:"textarea",label:"Footer Template",key:"templates.footer",rows:5,editor:"ace",as:"handlebars",input:!0,placeholder:"/*** Lodash Template Code ***/",description:'Two available variables. "value" is the array of row data and "components" is the array of components in the grid.',tooltip:"This is the <a href='https://lodash.com/docs/4.17.5#template'>Lodash Template</a> used to render the footer of the Dynamic Wizard.",customConditional:function(){return!o.Utils.Evaluator.noeval}},{type:"textfield",input:!0,key:"rowClass",label:"Row CSS Class",placeholder:"Row CSS Class",tooltip:"CSS class to add to the edit row wrapper."}],rr=[{ignore:!0,key:"unique"},{weight:110,key:"validate.minLength",label:"Minimum Length",placeholder:"Minimum Length",type:"number",tooltip:"The minimum length requirement this field must meet.",input:!0},{weight:120,key:"validate.maxLength",label:"Maximum Length",placeholder:"Maximum Length",type:"number",tooltip:"The maximum length requirement this field must meet.",input:!0},{type:"checkbox",input:!0,weight:105,key:"rowDrafts",label:"Enable Row Drafts",tooltip:"Allow save rows even if their data is invalid. Errors will occur when try to submit with invalid rows."}],or=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},ar=o.Components.components.component.editForm;function sr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ar.apply(void 0,or([[{label:"Templates",key:"templates",weight:5,components:ir},{key:"display",components:nr},{key:"data",components:er},{key:"validation",components:rr},{key:"addons",ignore:!0}]],t))}var lr=i(26213),cr=i(86131),ur={row:lr.Z,header:cr.Z},hr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),dr=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},fr=o.Components.components.editgrid,pr=o.Components.components.nested,gr={New:"new",Editing:"editing",Saved:"saved",Removed:"removed",Draft:"draft"},mr=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=t.apply(this,e)||this;return i.type="dynamicWizard",i.isChangingMode=!0,i.isSavingInProgress=!1,i.editRows=[],i.changingRowIndex=null,i.step=0,i.buttonSettings={showPrevious:!0,showNext:!0,showSubmit:!0,showCancel:!i.options.readOnly},i.shouldUpdate=!0,i}return hr(e,t),e.schema=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr.schema.apply(fr,dr([{type:"dynamicWizard",label:"Dynamic Wizard",key:"dynamicWizard",templates:{header:e.defaultHeaderTemplate,row:e.defaultRowTemplate,footer:""}}],t))},Object.defineProperty(e,"builderInfo",{get:function(){return{title:"Dynamic Wizard",group:"premium",documentation:"/userguide/form-building/premium-components#dynamic-wizard",icon:"tasks",ignoreForForm:!0,disableSiblings:!0,weight:20,schema:e.schema()}},enumerable:!1,configurable:!0}),e.savedValueTypes=function(t){return o.Utils.getComponentSavedTypes(t)||[o.Utils.componentValueTypes.array]},Object.defineProperty(e,"defaultHeaderTemplate",{get:function(){return'<div class="row" role="row">\n    <div class="col-sm-2">\n      Users\n    </div>\n  </div>'},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultRowTemplate",{get:function(){return'<div class="list-group-item">\n    <div class="list-group-subheader">\n      <div class="row" role="row">\n        <div class="col-sm-2">\n          User {{ rowIndex + 1 }}\n        </div>\n        {% if (!ctx.self.options.readOnly && !component.disabled) { %}\n        <div class="col-sm-2" role="gridcell">\n          <div class="btn-group pull-right">\n            <button class="btn btn-default btn-light btn-sm editCard" aria-label="{{ ctx.t(\'Edit row \' + (rowIndex + 1)) }}"><i class="{{ ctx.iconClass(\'edit\') }}"></i></button>\n            {% if (!instance.hasRemoveButtons || instance.hasRemoveButtons()) { %}\n            <button class="btn btn-danger btn-sm removeRow" aria-label="{{ ctx.t(\'Remove row \' + (rowIndex + 1)) }}"><i class="{{ ctx.iconClass(\'trash\') }}"></i></button>\n            {% } %}\n          </div>\n        </div>\n        {% } %}\n      </div>\n    </div>\n    {% ctx.util.eachComponent(ctx.components, function(component) { %}\n    {% if ((!component.hasOwnProperty(\'tableView\') || component.tableView) && isVisibleInRow(component)) { %}\n    <div class="row" role="row">\n      <div class="col-sm-2" role="gridcell">\n        {{ component.key }}\n      </div>\n    </div>\n    <div class="row" role="row">\n      <div class="col-sm-2" role="gridcell">\n        {{ ctx.getView(component, ctx.row[component.key]) }}\n      </div>\n    </div>\n    {% } %}\n    {% }) %}\n  </div>'},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dynamicWizardKey",{get:function(){return"dynamicWizard-"+this.key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowRef",{get:function(){return this.dynamicWizardKey+"-row"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowElements",{get:function(){return this.refs[this.rowRef]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowRefs",{get:function(){return this.refs["dynamicWizard-"+this.component.key+"-row"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"agreeButtonRef",{get:function(){return this.dynamicWizardKey+"-agreeButton"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"denyButtonRef",{get:function(){return this.dynamicWizardKey+"-denyButton"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"agreeButtonElements",{get:function(){return this.refs[this.agreeButtonRef]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cancelRowRef",{get:function(){return this.dynamicWizardKey+"-cancelRow"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cancelRowElements",{get:function(){return this.refs[this.cancelRowRef]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inlineEditMode",{get:function(){return this.component.inlineEdit},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"saveEditMode",{get:function(){return!this.inlineEditMode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rootWizard",{get:function(){var t;return this.findRootWizard(null===(t=this.parent)||void 0===t?void 0:t.parent)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasComponents",{get:function(){return this.component.components.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttons",{get:function(){var t=this,e={};return[{name:"cancel",method:"cancelRow"},{name:"previous",method:"prevPage"},{name:"next",method:"nextPage"}].forEach((function(n){t.hasButton(n.name)&&(e[n.name]=n)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultSchema",{get:function(){return e.schema()},enumerable:!1,configurable:!0}),e.prototype.init=function(e,n){return void 0===n&&(n=this._visible),this.prevVisibility=n,this.prevBlocking=this.disabled,this.secondRender=!!e,this.shouldUpdate=!0,this.changingRowIndex=null,this.builderMode&&(this.editRows=[]),t.prototype.init.call(this)},e.prototype.render=function(e){var n,i,r;if(this.builderMode)return t.prototype.render.call(this);var a=this.dataValue||[],s=o.Utils.Evaluator.noeval?ur.header:o.Utils._.get(this.component,"templates.header"),l=this.editRows[this.changingRowIndex];0===this.step&&l&&!l.components[this.step]._visible&&this.nextPage();var c=!this.editRows.length&&0===this.step&&0===this.changingRowIndex;return(!this.secondRender&&this.shouldUpdate||c)&&!this.options.readOnly&&(this.secondRender=!0,this.rootWizard.editMode||0===this.root.page&&this.page===this.root.page&&this._parentVisible&&this._visible&&!this._disabled&&this.hasComponents&&(this.shouldUpdate=!1,this.isInitRowExists=!0,this.addRow(!0,c))),(null===(n=this.root)||void 0===n?void 0:n.editMode)&&this.rootWizard.editMode&&this.isInitRowExists&&(this.isInitRowExists=!1,this.cancelRow()),t.prototype.render.call(this,e||this.renderTemplate("dynamicWizard",{ref:{row:this.rowRef,agreeButton:this.agreeButtonRef,denyButton:this.denyButtonRef},header:this.renderString(s),footer:this.renderString(o.Utils._.get(this.component,"templates.footer"),{components:this.component.components,value:a}),rows:this.editRows.map(this.renderRow.bind(this)),currentComponent:-1===this.step?null:null===(r=null===(i=this.editRows[this.changingRowIndex])||void 0===i?void 0:i.components[this.step])||void 0===r?void 0:r.render(),errors:this.editRows.map((function(t){return t.error})),buttons:this.buttons,hasAddButton:this.hasAddButton(),hasRemoveButtons:this.hasRemoveButtons(),isChangingMode:this.isChangingMode,isDisabled:this._disabled,isBlocking:!this._visible||this._disabled||!this.hasComponents,dynamicWizardKey:this.dynamicWizardKey,readOnly:this.options.readOnly}))},e.prototype.attach=function(e){var n,i=this,r=t.prototype.attach.call(this,e);if(this.builderMode)return t.prototype.attach.call(this,e);if(this.visibilityCheck(),this.blockingCheck(),this.loadRefs(e,((n={})[this.agreeButtonRef]="multiple",n[this.denyButtonRef]="multiple",n[this.rowRef]="multiple",n[this.dynamicWizardKey+"-cancel"]="single",n[this.dynamicWizardKey+"-previous"]="single",n[this.dynamicWizardKey+"-next"]="single",n)),this.agreeButtonElements.forEach((function(t){i.addEventListener(t,"click",(function(){i.addRow(),-1===i.rootWizard.currentNextPage&&i.rootWizard.redraw()}))})),this.attachNav(),this.isChangingMode){var o=this.editRows[this.changingRowIndex];o&&this.attachComponents(this.rowElements[0],o.components,this.component.components,!0)}else this.rowElements.forEach((function(t,e){[{className:"removeCard",event:"click",action:function(){return i.removeRow(e)}},{className:"editCard",event:"click",action:function(){i.editRow(e)}}].forEach((function(e){var n=e.className,r=e.event,o=e.action,a=t.getElementsByClassName(n);Array.prototype.forEach.call(a,(function(t){i.addEventListener(t,r,o)}))}))}));return r},e.prototype.attachNav=function(){var t=this;o.Utils._.each(this.buttons,(function(e){var n=t.refs[t.dynamicWizardKey+"-"+e.name];t.addEventListener(n,"click",(function(n){if(n.preventDefault(),!t[e.method]()||"nextPage"!==e.method){t.redraw().then((function(){t.afterAttachNav(e.method)}));var i=t.editRows[t.changingRowIndex];i&&t.validateRow(i,!1)}}))}))},e.prototype.afterAttachNav=function(t){var e,n=this.editRows[this.changingRowIndex];switch(t){case"prevPage":case"nextPage":if(-1===this.step)this.agreeButtonElements[0].focus();else{var i=null===(e=n.components[this.step].refs)||void 0===e?void 0:e.input;i?i[0].focus():this.focusOnNewRowElement(n.components,this.step)}}},e.prototype.attachComponents=function(e,n,i,r){var a;if(void 0===i&&(i=this.component.components),this.builderMode)return t.prototype.attachComponents.call(this,e,n,i);if(r){if(n=n||this.component.components,!(e=this.hook("attachComponents",e,n,i,this)))return new o.Formio.Promise((function(){}));var s=0,l=[];return this.isChangingMode?!o.Utils._.isNil(this.step)&&e.children[0]&&!(null===(a=e.children[0])||void 0===a?void 0:a.getAttribute("data-noattach"))&&n[this.step]&&l.push(n[this.step].attach(e.children[0])):Array.prototype.slice.call(e.children).forEach((function(t){!t.getAttribute("data-noattach")&&n[s]&&(l.push(n[s].attach(t)),s++)})),o.Formio.Promise.all(l)}},e.prototype.visibilityCheck=function(){this.page===this.root.page&&(this._visible&&!this.prevVisibility&&(this.prevVisibility=!0,!this.disabled&&this.hasComponents&&this.addRow()),this.prevVisibility&&!this._visible&&(this.prevVisibility=!1))},e.prototype.blockingCheck=function(){this.page===this.root.page&&this.prevBlocking&&!this.disabled&&(this.prevBlocking=!1,this.isChangingMode=!1,this.rootWizard.redraw())},e.prototype.isOpen=function(t){return[gr.New,gr.Editing].includes(null==t?void 0:t.state)},e.prototype.resetValue=function(){pr.prototype.resetValue.call(this),this.emptyRows(),this.step=0,this.addRow(!0,!0)},e.prototype.addRow=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),!this.options.readOnly){if(!this.hasAddButton()&&!this.isOpen(this.editRows[this.changingRowIndex]))return this.isChangingMode&&(this.isChangingMode=!1),this.rootWizard.element.classList.remove("dynamicWizard-changingMode"),void this.rootWizard.redraw();var n,i={},r=this.editRows.length;return(o.Utils._.isNil(this.changingRowIndex)||e)&&(this.changingRowIndex=this.editRows.length,n={components:this.createRowComponents(i,r),data:i,state:gr.New,backup:null,error:null},this.editRows.push(n),this.inlineEditMode&&(this.dataValue.push(i),this.triggerChange()),this.checkRow("checkData",null,{},n.data,n.components),this.component.modal&&this.addRowModal(r)),this.isChangingMode=!0,this.step=-1!==this.step?this.step:0,this.addChangingMode(t),n||this.editRows[this.changingRowIndex]}},e.prototype.cancelRow=function(){var t=this,e=o.Utils._.clone(this.changingRowIndex);if(!this.options.readOnly){var n=this.editRows[e];(null==n?void 0:n.state)===gr.New?this.isSavingInProgress?this.removeRow(e):(n.state=gr.Removed,this.clearErrors(e),this.destroyComponents(e),this.inlineEditMode&&this.splice(e),this.editRows.splice(e,1)):(null==n?void 0:n.state)===gr.Editing&&(n.state=n.prevState,this.inlineEditMode&&(this.dataValue[e]=n.backup),n.data=n.backup,n.backup=null,this.isSavingInProgress&&(this.setValues(n),this.rebuild(!0)),this.restoreRowContext(n),this.component.rowDrafts||this.clearErrors(e)),this.returnPrevPageState(),this.shouldUpdate=!0,this.emit("cancelRow"),this.checkValidity(null,!0),this.redraw().then((function(){t.afterCancelRow()})),this.component.rowDrafts&&this.checkValidity(this.data,!1)}},e.prototype.afterCancelRow=function(){this.agreeButtonElements[0].focus()},e.prototype.rebuild=function(t){return void 0===t&&(t=!1),this.destroy(),this.init(t,this.prevVisibility),this.visible=this.conditionallyVisible(null,null),this.redraw()},e.prototype.returnPrevPageState=function(){this.isChangingMode=!1,this.isSavingInProgress=!1,this.step=-1,this.changingRowIndex=null,this.removeChangingMode()},e.prototype.setValues=function(t){if(!this.options.readOnly&&this.saveEditMode){var e=this.dataValue||[];if((null==t?void 0:t.state)!==gr.New||this.isSavingInProgress)((null==t?void 0:t.state)===gr.Editing||this.isSavingInProgress)&&(e[this.changingRowIndex]=null==t?void 0:t.data);else{var n=e.length;e.push(null==t?void 0:t.data),this.changingRowIndex!==n&&(this.editRows.splice(this.changingRowIndex,1),this.editRows.splice(this.changingRowIndex,0,t))}}},e.prototype.saveRow=function(t){var e=this,n=this.editRows[this.changingRowIndex];return n&&(this.setValues(n),this.isSavingInProgress&&(this.isSavingInProgress=!1),n.state=this.component.rowDrafts&&!t?gr.Draft:gr.Saved,n.backup=null,this.updateValue(),this.triggerChange(),this.component.rowDrafts&&n.components.forEach((function(t){return t.setPristine(e.pristine)})),this.checkValidity(null,!0),this.redraw().then((function(){e.emit("saveRow"),e.afterSaveRow&&e.afterSaveRow()})),n.alerts&&(n.alerts=!1),this.isChangingMode=!1,this.changingRowIndex=null,this.shouldUpdate=!0,this.removeChangingMode()),!0},e.prototype.saveCurrentPageData=function(t){(null==t?void 0:t.state)!==gr.New&&(null==t?void 0:t.state)!==gr.Editing||(this.setValues(t),this.checkData(this.data),this.isSavingInProgress||(this.isSavingInProgress=!0))},e.prototype.isRowEditing=function(t){return(null==t?void 0:t.state)===gr.Editing||(null==t?void 0:t.state)===gr.New},e.prototype.switchToStep=function(t){var e=this.getRelativePath(t.path),n=o.Utils.getArrayFromComponentPath(e),i=o.Utils._.findIndex(this.components,(function(e){return e.key===t.component.key})),r=this.editRows[n[0]],a=this.isRowEditing(r);r?a?(this.step=o.Utils._.isFinite(i)?i:0,this.addChangingMode(),this.validateRow(r,!1)):this.editRow(n[0],i):this.addRow()},e.prototype.editRow=function(t,e){var n=this.editRows[t],i=this.isRowEditing(n);if(n&&!i){n.prevState=n.state,n.state=gr.Editing;var r=o.Utils._.cloneDeep(n.data);if(this.inlineEditMode?n.backup=r:(n.backup=n.data,n.data=r,this.restoreRowContext(n)),this.component.modal)return this.addRowModal(t);this.isChangingMode=!0,this.changingRowIndex=t,this.step=o.Utils._.isFinite(e)?e:0,this.addChangingMode(),this.validateRow(n,!1)}},e.prototype.removeRow=function(t){var e=this;this.options.readOnly||(this.baseRemoveRow(t),this.splice(t),this.editRows.splice(t,1),this.updateRowsComponents(t),this.updateValue(),this.triggerChange(),this.checkValidity(null,!0),this.checkData(),this.redraw().then((function(){e.afterRemoveRow()})),this.shouldUpdate=!0)},e.prototype.afterRemoveRow=function(){this.agreeButtonElements[0].focus()},e.prototype.renderRow=function(t,n){var i=this,r=this.dataValue||[],a=this.flattenComponents(n),s=o.Utils.Evaluator.noeval?ur.row:o.Utils._.get(this.component,"templates.row",e.defaultRowTemplate);return this.renderString(s,{row:r[n]||{},data:this.data,rowIndex:n,components:this.component.components,flattenedComponents:a,isVisibleInRow:function(t){return i.isComponentVisibleInRow(t,a)},getView:function(t,e){var n=a[t.key],i=n?n.getView(e||n.dataValue):"";return n&&n.widget&&"--- PROTECTED ---"!==i&&(i=o.Utils._.isArray(i)?i.map((function(t){return n.widget.getValueAsString(t)})):n.widget.getValueAsString(i)),i},state:this.editRows[n].state})},e.prototype.hasButton=function(t,e){void 0===e&&(e=this.getNextPage());var n=this.buttonSettings,i=n.previous,r=void 0===i?this.buttonSettings.showPrevious:i,o=n.cancel,a=void 0===o?this.buttonSettings.showCancel:o,s=n.next,l=void 0===s?this.buttonSettings.showNext:s;switch(t){case"previous":return r&&0!==this.step&&this.hasComponents;case"next":return l&&e&&this.hasComponents;case"cancel":return a&&this.hasComponents;default:return!0}},e.prototype.getNextPage=function(){var t;return this.step<(null===(t=this.component)||void 0===t?void 0:t.components.length)},e.prototype.prevPage=function(){var t,e,n=this.editRows[this.changingRowIndex];if(0!==this.step){var i=o.Utils._.clone(this.step);this.step=i-1,(null===(e=null===(t=null==n?void 0:n.components)||void 0===t?void 0:t[this.step])||void 0===e?void 0:e._visible)?this.saveCurrentPageData(n):this.prevPage()}else this.rootWizard.prevPage()},e.prototype.findRootWizard=function(t){var e,n,i,r=null===(e=null==t?void 0:t.parent)||void 0===e?void 0:e.parent;return(null===(n=null==t?void 0:t.parent)||void 0===n?void 0:n.subForm)&&(r=null==r?void 0:r.parent),r&&"wizard"===(null===(i=null==r?void 0:r._form)||void 0===i?void 0:i.display)?this.findRootWizard(r):t},e.prototype.nextPage=function(){var t,e,n,i,r=this.editRows[this.changingRowIndex],a=this.validateRow(r,!0);if(!this.component.rowDrafts&&!a)return!0;if(this.step===(null===(e=null===(t=this.component)||void 0===t?void 0:t.components)||void 0===e?void 0:e.length)-1)return this.step=-1,this.saveRow(a),-1===this.rootWizard.currentNextPage&&this.rootWizard.redraw(),!1;var s=o.Utils._.clone(this.step);this.step=s+1,(null===(i=null===(n=null==r?void 0:r.components)||void 0===n?void 0:n[this.step])||void 0===i?void 0:i._visible)?this.saveCurrentPageData(r):this.nextPage()},e.prototype.validateStep=function(t,e,n,i){var r=e,o=!(!t.serverErrors||!t.serverErrors.length);return this.component.rowDrafts||o||t.setPristine(!n),r&&t.checkValidity(null,n,i)},e.prototype.validateRow=function(t,e){var n=this,i=!0;if(!t)return i;var r=dr(this.errors);if(t.state===gr.Editing||e||t.state===gr.Draft&&!this.pristine&&!this.root.pristine){var o=t.components[this.step];o?i=this.validateStep(o,i,e,t.data):-1===this.step&&t.components.forEach((function(r){i=n.validateStep(r,i,e,t.data)}))}return this.component.validate&&this.component.validate.row&&("true"!==(i=this.evaluate(this.component.validate.row,{valid:i,row:t.data},"valid",!0)).toString()?(t.error=i,i=!1):t.error=null,null===i&&(i="Invalid row validation for "+this.key)),t.errors=i?null:this.errors.filter((function(t){return!r.includes(t)})),this.showRowErrorAlerts(t,!!i),!!i},e.prototype.findSourceRoot=function(t){return(null==t?void 0:t.parent)?this.findSourceRoot(null==t?void 0:t.root):t},e.prototype.changeState=function(t){var e=this.root?this.findSourceRoot(this.root):{};t&&!e.submissionInProcess?!this.prevVisibility&&this._visible?this.rebuild(this.secondRender):this.rebuild():this.redraw()},e.prototype.addChangingMode=function(t){var e=this;void 0===t&&(t=!1),this.rootWizard.element&&(this.rootWizard.element.classList.contains("dynamicWizard-changingMode")||this.rootWizard.element.classList.add("dynamicWizard-changingMode"),t||(this.redraw().then((function(){e.afterAddChangingMode()})),this.rootWizard.redraw()),this.triggerChange())},e.prototype.afterAddChangingMode=function(){var t,e,n=this.editRows[this.changingRowIndex];(null===(t=n.components[this.step].refs)||void 0===t?void 0:t.input)?null===(e=n.components[this.step].refs)||void 0===e||e.input[0].focus():this.focusOnNewRowElement(n.components,this.step)},e.prototype.removeChangingMode=function(){var t,e=this;(null===(t=this.rootWizard)||void 0===t?void 0:t.element)&&(this.rootWizard.element.classList.remove("dynamicWizard-changingMode"),this.redraw().then((function(){e.afterRemoveChangingMode&&e.afterRemoveChangingMode()})),this.rootWizard.redraw(),this.triggerChange())},e.prototype.getValueAsString=function(e,n){var i;if(null==n?void 0:n.email){var r='\n        <table border="1" style="width:100%">\n          <thead>\n            <tr>\n      ';return null===(i=this.component.components)||void 0===i||i.forEach((function(t){var e=t.label||t.key;r+='<th style="padding: 5px 10px;">'+e+"</th>"})),r+="\n          </tr>\n        </thead>\n        <tbody>\n      ",this.iteratableRows.forEach((function(t){var e=t.components;r+="<tr>",s().each(e,(function(t){r+='<td style="padding:5px 10px;">',t.isInputComponent&&t.visible&&!t.skipInEmail&&(r+=t.getView(t.dataValue,n)),r+="</td>"})),r+="</tr>"})),r+="\n          </tbody>\n        </table>\n      "}return e&&e.length?t.prototype.getValueAsString.call(this,e,n):""},e.editForm=sr,e}(fr),vr=mr,yr=[{type:"equal",label:"Is equal to",filter:function(t,e){return a.isEqual(t,e)}},{type:"notEqual",label:"Is not equal to",filter:function(t,e){return!a.isEqual(t,e)}},{type:"gt",label:"Is after",filter:function(t,e){return t>e}},{type:"lt",label:"Is before",filter:function(t,e){return t<e}}],br={select:[{type:"equal",label:"Is equal to",filter:function(t,e){return a.isEqual(t,e)}},{type:"notEqual",label:"Is not equal to",filter:function(t,e){return!a.isEqual(t,e)}},{type:"contain",label:"Contains",filter:function(t,e){return a.isArray(t)?e.every((function(e){return t.includes(e)})):a.isEqual(t,e)}},{type:"notContain",label:"Does not contain",filter:function(t,e){return a.isArray(t)?e.every((function(e){return!t.includes(e)})):!a.isEqual(t,e)}},{type:"gt",label:"Greater than",filter:function(t,e){return t>e}},{type:"gte",label:"Greater than or equal to",filter:function(t,e){return t>=e}},{type:"lt",label:"Less than",filter:function(t,e){return t<e}},{type:"lte",label:"Less than or equal to",filter:function(t,e){return t<=e}}],checkbox:[{type:"equal",label:"Is equal to",filter:function(t,e){return a.isEqual(t,e)}}],selectboxes:[{type:"equal",label:"Is equal to",filter:function(t,e){return a.isEqual(t,e)}},{type:"contain",label:"Contains",filter:function(t,e){return t.toString().includes(e.toString())}}],day:yr,survey:[{type:"contain",label:"Contains",filter:function(t,e){return t.toString().includes(e.toString())}}],signature:[{type:"matches",label:"Is equal to",filter:function(t,e){return t.toString().match(new RegExp(e,"gi"))}}],file:[{type:"exists",label:"Uploaded",filter:function(t,e){return a.isEqual(!!t,e)}}],radio:[{type:"equal",label:"Is equal to",filter:function(t,e){return a.isEqual(t,e)}},{type:"notEqual",label:"Is not equal to",filter:function(t,e){return!a.isEqual(t,e)}}],phoneNumber:[{type:"equal",label:"Is equal to",filter:function(t,e){return a.isEqual(t,e)}},{type:"notEqual",label:"Is not equal to",filter:function(t,e){return!a.isEqual(t,e)}},{type:"startsWith",label:"Starts with",filter:function(t,e){return t.toString().startsWith(e.toString())}},{type:"contain",label:"Contains",filter:function(t,e){return t.toString().includes(e.toString())}},{type:"notContain",label:"Does not contain",filter:function(t,e){return!t.toString().includes(e.toString())}},{type:"endsWith",label:"Ends with",filter:function(t,e){return t.toString().endsWith(e.toString())}},{type:"matches",label:"Matches (RegExp)",filter:function(t,e){return t.toString().match(new RegExp(e,"gi"))}}],time:yr},_r=[{key:"multiple",ignore:!0},{key:"defaultValue",ignore:!0},{label:"Submit Data to the Server",type:"checkbox",input:!0,key:"isSubmitData",weight:700,defaultValue:!1,tooltip:"When enabled, the data from the Data Table will be submitted to the server",customConditional:'show = !_.get(data, "fetch.enableFetch", "") && !data.submitSelectedRows;'},{label:"Submit Selected Rows",type:"checkbox",input:!0,key:"submitSelectedRows",weight:800,defaultValue:!1,tooltip:"When enabled, the data of the selected rows will be submitted to the server",customConditional:'show = _.get(data, "fetch.enableFetch", false)'}],wr=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}([{key:"placeholder",ignore:!0},{label:"Sortable",type:"checkbox",input:!0,key:"sortable",weight:442,defaultValue:!0},{label:"Filterable",type:"checkbox",input:!0,key:"filterable",weight:442,defaultValue:!0},{label:"Inline editing",type:"checkbox",input:!0,key:"inlineEditing",weight:442,defaultValue:!1,customConditional:function(t){var e;return!(null===(e=t.data.fetch)||void 0===e?void 0:e.enableFetch)}},{type:"textfield",label:"Cell max width",input:!0,key:"cellMaxWidth",defaultValue:"",weight:442},{label:"Clip cells",type:"checkbox",input:!0,key:"clipCells",weight:442,defaultValue:!1},{type:"select",input:!0,key:"itemsPerPage",label:"Items per page",weight:442,defaultValue:10,dataSrc:"values",data:{values:[{label:"5",value:5},{label:"10",value:10},{label:"25",value:25},{label:"50",value:50},{label:"100",value:100},{label:"All",value:-1}]}},{label:"Show add button",type:"checkbox",input:!0,key:"showAddBtn",weight:442,defaultValue:!0,customConditional:function(t){var e=t.data;return!t._.get(e,"fetch.enableFetch")}},{label:"Show edit button",type:"checkbox",input:!0,key:"showEditBtn",weight:442,customConditional:function(t){var e=t.data;return!t._.get(e,"fetch.enableFetch")},defaultValue:!0},{label:"Show delete button",type:"checkbox",input:!0,key:"showDeleteBtn",weight:442,customConditional:function(t){var e=t.data;return!t._.get(e,"fetch.enableFetch")},defaultValue:!0},{label:"Show delete all button",type:"checkbox",input:!0,key:"showDeleteAllBtn",customConditional:function(t){var e=t.data;return!t._.get(e,"fetch.enableFetch")},weight:442,defaultValue:!1},{type:"textfield",label:"Delete all confirmation message",input:!0,key:"deleteAllConfirmationMessage",defaultValue:"Are you sure you wish to delete all rows?",weight:442,conditional:{json:{"===":[{var:"data.showDeleteAllBtn"},!0]}}}],Wn()),xr=[{ignore:!0,key:"unique"},{key:"validate.required",conditional:{show:"true",when:"isSubmitData",eq:"true"}},{weight:110,key:"validate.minLength",label:"Minimum Length",placeholder:"Minimum Length",type:"textfield",tooltip:"The minimum length requirement this field must meet.",input:!0},{weight:120,key:"validate.maxLength",label:"Maximum Length",placeholder:"Maximum Length",type:"textfield",tooltip:"The maximum length requirement this field must meet.",input:!0}],kr=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},Cr=[{label:"Default Sort Query",tooltip:"This sort query is used if the data table column sorting is not set.",tableView:!0,weight:20,key:"fetch.sort.defaultQuery",type:"textfield",input:!0},{label:"Descending Order",tooltip:"Type of default sorting.",tableView:!1,defaultValue:!1,weight:30,key:"fetch.sort.descending",customConditional:'show = !!_.get(data, "fetch.sort.defaultQuery", "");',type:"checkbox",input:!0},{type:"checkbox",input:!0,weight:40,key:"allowCaching",label:"Enable to Store Request Result in the Cache",defaultValue:!0,tooltip:"When checked, the requests and its results will be stored in the cache and if the Select will try to make the request to the same URL with the same paremetrs, the cached data will be returned. It allows to increase performance, but if the remote source's data is changing quite often and you always need to keep it up-to-date, uncheck this option."}],Sr=[{type:"checkbox",input:!0,weight:0,key:"fetch.enableFetch",label:"Enable fetch",defaultValue:!1,tooltip:"If fetch is enabled, the DataTable will be automatically populated with data from the data source and will not be submitted."},{type:"select",input:!0,weight:0,tooltip:"The source to get the data. You can fetch from a URL or resource.",key:"fetch.dataSrc",label:"Fetch Source Type",dataSrc:"values",validate:{required:!0},customConditional:function(t){var e=t.data;return t._.get(e,"fetch.enableFetch",!1)},customDefaultValue:function(t){if(t.data.fetch.url)return"url"},data:{values:[{value:"url",label:"URL"},{value:"resource",label:"Resource"}]}},{type:"panel",title:"Fetch Settings",key:"fetchUrl",weight:700,customConditional:function(t){var e=t.data;return"url"===t._.get(e,"fetch.dataSrc")},components:kr(P.baseEditFetchComponents([{key:"dataSrc",ignore:!0},{key:"indexeddb.fromExisting",ignore:!0},{key:"indexeddb.database",ignore:!0},{key:"indexeddb.table",ignore:!0},{key:"indexeddb.database",ignore:!0},{key:"indexeddb.table",ignore:!0},{key:"fetch.url",conditional:""},{key:"fetch.method",ignore:!0},{key:"fetch.headers",conditional:""},{key:"fetch.forwardHeaders",ignore:!0},{key:"fetch.authenticate",conditional:""},{key:"specifyPostBodyPanel",ignore:!0},{key:"allowCaching",ignore:!0}]),[{type:"textfield",input:!0,key:"fetch.provider",weight:10,label:"Custom Fetch Provider",placeholder:"Enter the name of your fetch provider (optional)",tooltip:"A name of custom fetch provider. If not specified, default URL provider is used.",clearOnHide:!0}],Cr)},{type:"panel",title:"Fetch Settings",key:"fetchResource",weight:700,customConditional:function(t){var e=t.data;return"resource"===t._.get(e,"fetch.dataSrc")},components:kr([{type:"select",input:!0,dataSrc:"url",data:{url:"/form?type=resource&limit=1000000&select=_id,title"},authenticate:!0,template:"<span>{{ item.title }}</span>",valueProperty:"_id",clearOnHide:!0,label:"Resource",key:"fetch.resource",validate:{required:!0},lazyLoad:!0,weight:10,tooltip:"The resource to be used to populate the data in the data table."},{type:"datagrid",input:!0,label:"Grid Components",key:"fetch.components",tooltip:"Select resource fields to display in data table.",weight:15,reorder:!0,logic:[{name:"reset on resource change",trigger:{type:"event",event:"change"},actions:[{name:"reset value",type:"customAction",customAction:"\n                  var changes =  _.get(result, '[0].changed', null);\n                  if (input.length && changes && changes.component && changes.component.key === 'fetch.resource') {\n                    instance.resetValue();\n                    instance.rebuild();\n                  }\n                "}]}],addAnother:"Add Component",initEmpty:!0,validate:{required:!0},components:[{type:"select",input:!0,authenticate:!0,label:"Component",key:"path",skipMerge:!0,clearOnHide:!0,refreshOn:"fetch.resource",clearOnRefresh:!0,template:"<span>{{ item.label }}</span>",valueProperty:"key",dataSrc:"url",lazyLoad:!0,onSetItems:"\n              const newItems = [];\n              utils.eachComponent(items.components, (component, path) => {\n                const compClass = Formio.Components?.components[component.type];\n                const nestedDataComp = Formio.Components?.components?.nesteddata;\n                const excludeFromOptions = !component.input\n                  || (compClass && nestedDataComp && compClass.prototype instanceof nestedDataComp && !_.includes(['address'], component.type))\n                  || _.includes(['button', 'form', 'datasource', 'sketchpad', 'reviewpage'], component.type);\n\n                if (!excludeFromOptions) {\n                  newItems.push({\n                    label: (component.label || component.key) + '(' + path + ')',\n                    key: path\n                  });\n                }\n\n                if (_.includes(['datamap', 'datagrid', 'editgrid', 'datatable', 'address', 'tagpad'], component.type)) {\n                  return true;\n                }\n              });\n              items = newItems;\n            ",data:{url:"/form/{{ data.fetch.resource }}"}},{label:"Key",key:"key",input:!0,type:"textfield",customClass:"formio-builder-datatable-component-key",allowCalculateOverride:!0,validate:{pattern:"(\\w|\\w[\\w-.]*\\w)",patternMessage:"The key must only contain alphanumeric characters, underscores, dots and dashes and should not be ended by dash or dot."},calculateValue:"value = row.path;"}]}],Cr)}],Rr=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},Or=o.Components.components.component.editForm;function Er(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Or.apply(void 0,Rr([[{key:"display",components:wr},{label:"Fetch",key:"fetch",weight:25,components:Sr},{key:"data",components:_r},{key:"validation",components:xr},{key:"addons",ignore:!0}]],t))}var Ar=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Tr=function(){return Tr=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Tr.apply(this,arguments)},Mr=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},Pr=o.Components.components.editgrid,Fr=o.Components.components.nested;Formio.cdn.baseUrl||Formio.cdn.setBaseUrl("https://cdn.form.io"),(Formio.version||"").includes("rc")&&(Formio.cdn.setOverrideUrl("grid","https://cdn.test-form.io"),Formio.cdn.setOverrideUrl("core","https://cdn.test-form.io"));var jr=function(t){function e(){for(var e,n,i,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var a=t.apply(this,r)||this;a.editRows=[],a.savedRows=[],a.isModalOpened=!1,a.columns={},a.initComponents=[],a.type="datatable",a.tabIndex=0;var s=new Formio.Promise((function(t,e){a.dataTableReady={resolve:t,reject:e}}));a.dataTableReady.promise=s,(null===(e=a.component.fetch)||void 0===e?void 0:e.enableFetch)&&(null===(n=a.component.fetch)||void 0===n?void 0:n.url)&&!(null===(i=a.component.fetch)||void 0===i?void 0:i.dataSrc)&&(a.component.fetch.dataSrc="url"),a.fetchResource&&(a.component.components=[]);var l=new Formio.Promise((function(t,e){a.resourceComponentsReady={resolve:t,reject:e}}));return a.resourceComponentsReady.promise=l,a.options.preview&&a.selectedRowsSubmitEnabled&&(a.dataValue=a.emptyValue),a.attachResourceComponents(),a}return Ar(e,t),e.schema=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Pr.schema.apply(Pr,Mr([{type:"datatable",label:"Data Table",key:"dataTable"}],t))},Object.defineProperty(e,"builderInfo",{get:function(){return{title:"Data Table",group:"premium",icon:"table",weight:115,documentation:"/userguide/forms/premium-components#data-table",schema:e.schema()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataReady",{get:function(){return this.dataTableReady.promise},enumerable:!1,configurable:!0}),e.savedValueTypes=function(t){var e;return(null===(e=(t=t||{}).fetch)||void 0===e?void 0:e.enableFetch)?[]:o.Utils.getComponentSavedTypes(t)||[o.Utils.componentValueTypes.array]},Object.defineProperty(e.prototype,"notDragDrop",{get:function(){return this.builderMode&&this.isFetchResourceEnabled()},enumerable:!1,configurable:!0}),e.prototype.render=function(e){var n,i=this;if(this.builderMode){if(this.isFetchResourceEnabled()){var r=(this.component.fetch||{}).components,o=void 0===r?[]:r;return Fr.prototype.render.call(this,this.renderTemplate("datatable",{resourceComponents:o}))}return t.prototype.render.call(this)}return t.prototype.render.call(this,e||this.renderTemplate("datatable",{ref:{row:this.rowRef,addRow:this.addRowRef,saveRow:this.saveRowRef,cancelRow:this.cancelRowRef},header:"<h4>"+("new"===(null===(n=this.editRows[0])||void 0===n?void 0:n.state)?"Add row":"Edit row")+"</h4>",rows:this.editRows.map(this.renderRow.bind(this)),openRows:this.editRows.map((function(t){return i.isOpen(t)})),errors:this.editRows.map((function(t){return t.error})),hasRemoveButtons:this.hasRemoveButtons()}))},e.prototype.isFetchResourceEnabled=function(){var t=this.component.fetch||{},e=t.enableFetch,n=void 0!==e&&e,i=t.dataSrc;return n&&"resource"===(void 0===i?"":i)},Object.defineProperty(e.prototype,"fetchResource",{get:function(){var t=this.component.fetch||{},e=t.resource,n=void 0===e?"":e,i=t.components,r=void 0===i?[]:i;return this.isFetchResourceEnabled()&&n&&r.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fetchUrl",{get:function(){var t=this.component.fetch||{},e=t.enableFetch,n=void 0!==e&&e,i=t.dataSrc,r=void 0===i?"":i,o=t.url;return n&&"url"===r&&(void 0===o?"":o)},enumerable:!1,configurable:!0}),e.prototype.attachResourceComponents=function(){var t=this;this.fetchResource&&!this.builderMode?Formio.makeRequest(this.options.formio,"datatable",this.resouceFormUrl,"GET",null,{noToken:!1,ignoreCache:!this.component.allowCaching}).then((function(e){var n=t.component.fetch.components||[],i=a.chain(n).map((function(t){return t.path||""})).filter((function(t){return!!t})).value(),r={};e&&e.components&&o.Utils.eachComponent(e.components,(function(t,e){a.includes(i,e)&&(r[e]=t)}),!0);var s=[];a.each(i,(function(e){var n=r[e];if(n){(n=a.omit(n,["logic","prefix","suffix","action","defaultValue","customDefaultValue","conditional","hideLabel","multiple","calculateValue","validate","hidden","customConditional"])).tableView=!0;var i=a.find(t.component.fetch.components||[],(function(t){return(null==t?void 0:t.path)&&a.isEqual(e,t.path)}));n.key=(null==i?void 0:i.key)||e,n.columnQueryProperty="data."+e,s.push(n)}else console.warn("Component with path "+e+" is not found in the resource form.")})),t.component.components=s,t.resourceComponentsReady.resolve()})).catch((function(t){console.warn("Unable to get data table resource form: "+t+".")})):this.resourceComponentsReady.resolve()},e.prototype.attach=function(e){var n=this,i=new Formio.Promise((function(t,e){n.dataTableReady={resolve:t,reject:e}}));return this.dataTableReady.promise=i,this.builderMode?t.prototype.attach.call(this,e):this.resourceComponentsReady.promise.then((function(){return t.prototype.attach.call(n,e)})).then((function(){var t;return n.attachModal(n.element),n.loadRefs(n.element,{tableContainer:"single"}),n.formioGrid&&n.refs.tableContainer?(n.formioGrid.setData(n.dataValue),n.formioGrid.init(),n.formioGrid.attach(n.refs.tableContainer),n.selectedRowsSubmitEnabled&&!n.options.readOnly&&(n.formioGrid.selectedRows=n.dataValue,n.formioGrid.setSelections()),void((null===(t=n.component.fetch)||void 0===t?void 0:t.enableFetch)&&n.dataTableReady.resolve())):n.loadFormioGrid().then((function(t){return n.FormioCore.Template.framework=Formio.Templates.framework,n.initFormioGrid(t).then((function(){n.selectedRowsSubmitEnabled&&!n.options.readOnly&&(n.formioGrid.selectedRows=n.dataValue,n.formioGrid.setSelections()),n.dataTableReady.resolve()}))}))}))},e.prototype.loadFormioGrid=function(){var t=this;return Formio.requireLibrary("formioGridCSS","FormioGrid",[{type:"styles",src:Formio.cdn.grid+"/formio.grid.min.css"}],!1),Formio.requireLibrary("FormioCore","FormioCore",Formio.cdn.core+"/formio.core.min.js",!0).then((function(e){return t.FormioCore=e,Formio.requireLibrary("FormioGrid","FormioGrid",Formio.cdn.grid+"/formio.grid.min.js",!0)}))},e.prototype.attachComponent=function(t){var e,n=this,i=t.key,r=t.element,o=t.value,s=t.onChange,l=t.row,c=(t.rowIndex,t.index),u=t.readOnly,h=this.columns[i];if(h){h=Tr(Tr({},h),{hideLabel:!0,hidden:!1,disabled:!1});var d=Tr(Tr({},this.options),{onChange:function(t,e,i){i&&(null==s||s(e.value),n.component.inlineEditing&&!a.isUndefined(l)&&e.instance.checkComponentValidity())},readOnly:u});a.isUndefined(l)&&(delete h.validate,"phoneNumber"===h.type&&(h.inputMask=""),["selectboxes","radio"].includes(h.type)&&(h.inline=!1),["signature","file","checkbox"].includes(h.type)&&(h={optionsLabelPosition:"right",values:[{label:"Yes",value:"signature"!==h.type||"/./i"},{label:"No",value:"signature"===h.type&&"^(?!.)*$/i"}],dataType:"boolean",key:h.key,type:"radio",hideLabel:!0,input:!0}));var f=this.createComponent(h,d,((e={})[i]=o,e),!1,!0);return f.rowIndex=null!=c?c:f.rowIndex,f.data=null!=l?l:f.data,f.build(r),{component:f,resetValue:function(){f.resetValue()}}}return null},e.prototype.customFilters=function(t){return br[null==t?void 0:t.type]},e.prototype.isSortable=function(t){return!["button","htmlelement","content"].includes(t.type)&&!t.disableSortingAndFiltering},e.prototype.isFilterable=function(t){return!["button","htmlelement","content","address","datatable","editgrid","password","tagpad","sketchpad","form","container","tree","datagrid","datamap"].includes(t.type)&&!t.disableSortingAndFiltering},Object.defineProperty(e.prototype,"maxLength",{get:function(){var t,e,n;return null!==(n=null===(e=null===(t=this.component)||void 0===t?void 0:t.validate)||void 0===e?void 0:e.maxLength)&&void 0!==n?n:1/0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minLength",{get:function(){var t,e,n;return null!==(n=null===(e=null===(t=this.component)||void 0===t?void 0:t.validate)||void 0===e?void 0:e.minLength)&&void 0!==n?n:0},enumerable:!1,configurable:!0}),e.prototype.isAttachable=function(t){return this.component.inlineEditing||["button","htmlelement","content"].includes(t)},Object.defineProperty(e.prototype,"visibility",{get:function(){var t=this.dataValue,e=this.savedRows;return e.length?a.reduce(e,(function(e,n){return a.each(n.components,(function(i){var r=!0,o=i.component,a=o.conditional,s=o.logic,l=(null==a?void 0:a.show)===e[i.key],c=(null==s?void 0:s.length)&&s.some((function(t){var n=t.actions;return n.length&&n.some((function(t){var n;return"hidden"===(null===(n=t.property)||void 0===n?void 0:n.value)&&!t.state===e[i.key]}))}));e.hasOwnProperty(i.key)&&(l||c)?r=e[i.key]:(null==s?void 0:s.length)&&i.hasCondition()?"hidden"===i.type||i.component.hideColumnByDefault?r=!1:"function"==typeof i.checkConditions&&(r=i.checkConditions(t,{},n.data)):r=i.visible,e[i.key]=r})),e}),{}):a.mapValues(this.columns,(function(t){var e;return!(t.hidden&&!t.hideColumnByDefault)&&(null===(e=!t.hideColumnByDefault)||void 0===e||e)}))},enumerable:!1,configurable:!0}),e.prototype.updateComponentsVisibility=function(){var t,e=this.formioGrid,n=this.visibility;(null===(t=null==e?void 0:e.component)||void 0===t?void 0:t.components.length)&&this.formioGrid.menu.emit("changeVisibility",this.formioGrid.component.components.map((function(t){var e;return Tr(Tr({},t),{show:t.key in n?n[t.key]:(null===(e=!t.hideColumnByDefault)||void 0===e||e)&&!t.hidden})})))},Object.defineProperty(e.prototype,"resouceFormUrl",{get:function(){var t;return(this.options.formio?this.options.formio.formsUrl:Formio.getProjectUrl()+"/form")+"/"+(null===(t=this.component.fetch)||void 0===t?void 0:t.resource)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resourceFetchUrl",{get:function(){return this.resouceFormUrl+"/submission"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fetchProvider",{get:function(){var t,e,n,i=this;if(this.fetchUrl||this.fetchResource){var r=o.Providers.getProvider("fetch",(null===(t=this.component.fetch)||void 0===t?void 0:t.provider)||"url");if(r){var s=this.fetchResource,l=s?this.resourceFetchUrl:this.interpolate(this.component.fetch.url);return new r({headers:a.map((null===(e=this.component.fetch)||void 0===e?void 0:e.headers)||[],(function(t){return t.value=i.interpolate(t.value),t})),url:l,addFormioToken:s||this.component.fetch&&this.component.fetch.authenticate,ignoreCache:!this.component.allowCaching,method:"GET"})}return console.warn(((null===(n=this.component.fetch)||void 0===n?void 0:n.provider)||"url")+" fetch provider is not found."),null}return null},enumerable:!1,configurable:!0}),e.prototype.initFormioGrid=function(t){var e=this,n=[];o.Utils.eachComponent(this.component.components,(function(t){var i,r;return(t.tableView||["htmlelement","content"].includes(t.type))&&(n.push(Tr(Tr({type:"datavalue",sortable:e.isSortable(t),show:t.hidden&&!(null===(i=e.component.fetch)||void 0===i?void 0:i.enableFetch)?e.visibility[t.key]:null===(r=!t.hideColumnByDefault)||void 0===r||r,attach:e.isAttachable(t.type)?function(t){var n,i=t.key,r=t.element,o=t.value,a=t.onChange,s=t.row,l=t.rowIndex,c=t.index;a=null!=a?a:function(t){e.dataValue[c][i]=t},o=(null===(n=e.component.fetch)||void 0===n?void 0:n.enableFetch)||null!=o?o:e.dataValue[c][i],e.attachComponent({key:i,element:r,value:o,onChange:a,row:s,rowIndex:l,index:c,readOnly:e.options.readOnly||e.component.disabled})}:null},t),{filterable:e.isFilterable(t)})),e.columns[t.key]=t),["datagrid","editgrid","datamap","datatable","tree","container","tagpad"].includes(t.type)}),!0),n.sort((function(t,e){var n,i;return(null!==(n=t.columnWeight)&&void 0!==n?n:0)-(null!==(i=e.columnWeight)&&void 0!==i?i:0)}));var i=this.component,r=i.sortable,s=i.filterable,l=i.disabled,c=i.cellMaxWidth,u=i.clipCells,h=i.itemsPerPage,d=i.showEditBtn,f=void 0===d||d,p=i.showDeleteBtn,g=void 0===p||p,m=i.showDeleteAllBtn,v=i.fetch,y=i.isSubmitData,b=void 0!==y&&y,_=i.hideLabel,w=this.options,x=w.readOnly,k=w.pdf,C=void 0!==k&&k;return this.initComponents=this.createRowComponents({},0),t.render(this.refs.tableContainer,{components:n,fetch:v,isSubmitData:b,hideLabel:_,pagination:{itemsPerPage:h||10},cellMaxWidth:c,clipCells:u,showAddBtn:this.shouldShowAddBtn(),showEditBtn:!this.selectedRowsSubmitEnabled&&f,showDeleteBtn:!this.selectedRowsSubmitEnabled&&g&&this.minLength<this.dataValue.length,showDeleteAllBtn:!this.selectedRowsSubmitEnabled&&m,enableRowSelect:!(x&&this.selectedRowsSubmitEnabled)},{sortable:r,filterable:s,readOnly:x||l,actions:this.options.dataTableActions,fetchProvider:this.fetchProvider,hooks:{attachFilter:this.attachComponent.bind(this),format:function(t,n){return e.format(t,n)},filter:function(t){return e.customFilters(e.columns[t])},transformData:function(t){return e.transformFetchedData(t)}},pdf:C,displayInReadOnly:this.selectedRowsSubmitEnabled},this.dataValue).then((function(t){var n;e.formioGrid=t,e.formioGrid.on("rowAdd",(function(){e.emit("rowAdd",e),e.onAddRow()})),e.formioGrid.on("rowEdit",(function(t,n,i){e.emit("rowEdit",t,n,i,e),e.onEditRow(t,n,i)})),e.formioGrid.on("rowDelete",(function(t,n,i){window&&!window.confirm("Are you sure you wish to delete the row?")||(e.emit("rowDelete",t,n,i,e),a.isEqual(e.dataValue[i],t)||(i=a.findIndex(e.dataValue,t)),e.dataValue.splice(i,1),e.savedRows.splice(i,1),e.setValue(e.dataValue))})),e.formioGrid.on("deleteAll",(function(){window&&!window.confirm(e.component.deleteAllConfirmationMessage)||(e.emit("deleteAll",e),e.dataValue=e.defaultValue,e.setValue(e.dataValue))})),e.formioGrid.on("rowClick",(function(t,n,i,r){e.emit("rowClick",t,n,i,e)})),e.formioGrid.on("rowSelectChange",(function(t){e.selectedRowsSubmitEnabled&&e.setValue(t),e.emit("rowSelectChange",t,e)})),null===(n=e.component.customHeaderElements)||void 0===n||n.forEach((function(t){e.formioGrid.on(t.customBtnEvent,(function(){e.emit(t.customBtnEvent,e)}))})),e.formioGrid.on("page",(function(t,n){var i;(null===(i=e.component.fetch)||void 0===i?void 0:i.enableFetch)&&n&&!e.builderMode&&!e.selectedRowsSubmitEnabled&&(e.setValue(n),e.triggerChange()),e.emit("page",t,e,n)})),e.formioGrid.on("changeItemsPerPage",(function(t){e.emit("changeItemsPerPage",t)}))}))},e.prototype.transformFetchedData=function(t){var e=this,n=null;if(this.fetchResource)return n=a.map(t,(function(t){var n,i={};return a.each((null===(n=e.component.fetch)||void 0===n?void 0:n.components)||[],(function(e){var n=e||{},r=n.path,o=void 0===r?"":r,s=n.key,l=void 0===s?"":s;if(o){var c=a.get(t,"data."+o);a.set(i,l||o,c)}})),i})),n;var i=o.Utils._.get(this.component,"fetch.mapFunction");if(!i)return t;try{n=this.evaluate(i,{responseData:t},"value")}catch(e){n=t}return n},e.prototype.createRowComponents=function(e,n){var i=t.prototype.createRowComponents.call(this,e,n);return this.disabled&&i.forEach((function(t){t.disabled=!0})),i},e.prototype.createComponent=function(e,n,i,r,o){var a=t.prototype.createComponent.call(this,e,n,i,r);if(o){var s=this.visibility;s.hasOwnProperty(e.key)&&a.visible!==s[e.key]&&(a.visible=s[e.key])}return a.inDataTable=!0,a},e.prototype.getComponents=function(e){var n;return this.savedRows=this.savedRows||[],this.builderMode?t.prototype.getComponents.call(this):a.isNumber(e)?(null===(n=this.savedRows[e])||void 0===n?void 0:n.components)||[]:this.savedRows.reduce((function(t,e){return t.concat(e.components||[])}),[])},e.prototype.beforeFocus=function(t){var e=this.savedRows.findIndex((function(e){return e.components.find((function(e){return t===e}))}));a.isNumber(e)&&!this.builderMode&&this.onEditRow(this.dataValue[e],e,e)},e.prototype.onAddRow=function(){if(!this.options.readOnly){var t={};this.editRows=[{components:this.createRowComponents(t,0),data:t,state:"new",index:this.dataValue.length}],this.openModal(),this.redraw()}},e.prototype.onEditRow=function(t,e,n){var i=Tr({},t);this.editRows=[{components:this.createRowComponents(i,n),data:i,state:"editing",index:n}],this.openModal(),this.redraw()},e.prototype.cancelRow=function(){this.closeModal()},e.prototype.saveRow=function(t,e){var n,i=this.editRows[t];if(!this.validateRow(i,!0)){var r=i.components.filter((function(t){return t.error})).map((function(t){return t.error})),o=this.renderTemplate("errorsList",{errors:r});return this.root.setAlert.call(this.editRows[0].components[0],"danger",o),!1}"editing"===i.state?(this.dataValue[i.index]=i.data,i.state="saved",this.savedRows[i.index]=i,this.editRows=[],this.setValue(this.dataValue),this.emit("rowEdited",i.data,i.index,this)):(this.dataValue.unshift(i.data),i.state="saved",this.savedRows.unshift(i),this.editRows=[],this.setValue(this.dataValue),this.emit("rowAdded",i.data,this)),this.closeModal(),this.checkData(this.root.data,!0,i.data,!1)?this.redraw():null===(n=this.root)||void 0===n||n.showErrors()},e.prototype.format=function(t,e){var n=this.columns[t];return n?(o.Utils.getComponent(this.initComponents,t,!0)||o.Components.create(n,this.options,e,!0)).getView(e):e},Object.defineProperty(e.prototype,"iteratableRows",{get:function(){return this.savedRows||[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectedRowsSubmitEnabled",{get:function(){var t=this.component,e=t.submitSelectedRows,n=t.fetch;return e&&(void 0===n?{}:n).enableFetch},enumerable:!1,configurable:!0}),e.prototype.setValue=function(t,e){var n,i,r,o,a=this;if(void 0===e&&(e={}),!this.builderMode)return this.selectedRowsSubmitEnabled?(this.dataValue=t||[],void(this.formioGrid&&(this.options.readOnly?(this.formioGrid.setData(this.dataValue),null===(n=this.formioGrid.topPagination)||void 0===n||n.setTotalItems(this.dataValue.length),this.formioGrid.refreshTbody(this.dataValue)):(this.formioGrid.selectedRows=this.dataValue,this.formioGrid.refreshTbody())))):void((null===(i=this.component.fetch)||void 0===i?void 0:i.enableFetch)?this.dataValue=t:(t||(null===(r=this.component.fetch)||void 0===r?void 0:r.enableFetch)||(t=this.defaultValue),this.dataValue=t,this.savedRows=this.dataValue.map((function(t,e){return{components:a.createRowComponents(t,0),data:t,state:"saved",index:e}})),this.checkData(),this.formioGrid&&!(null===(o=this.component.fetch)||void 0===o?void 0:o.enableFetch)&&(this.formioGrid.component.showAddBtn=this.shouldShowAddBtn(),this.formioGrid.component.showDeleteBtn=!this.selectedRowsSubmitEnabled&&this.component.showDeleteBtn&&this.minLength<this.dataValue.length,this.formioGrid.component.showDeleteAllBtn=!this.selectedRowsSubmitEnabled&&this.component.showDeleteAllBtn,this.formioGrid.setData(this.dataValue),this.updateComponentsVisibility(),this.formioGrid.refreshGrid())))},e.prototype.shouldShowAddBtn=function(){var t=this.component.showAddBtn,e=void 0===t||t;return!this.selectedRowsSubmitEnabled&&e&&(!this.maxLength||this.maxLength>this.dataValue.length)},e.prototype.updateValue=function(e,n){void 0===n&&(n={}),t.prototype.updateValue.call(this,e,n)},e.prototype.destroy=function(){var e,n;t.prototype.destroy.call(this),this.emit("destroy"),null===(n=null===(e=this.formioGrid)||void 0===e?void 0:e.destroy)||void 0===n||n.call(e)},e.prototype.openModal=function(){var t,e;this.isModalOpened=!0,null===(t=this.refs.dataTableModalWrapper)||void 0===t||t.classList.add("formio-dialog-disabled-animation"),null===(e=this.refs.dataTableModalWrapper)||void 0===e||e.classList.remove("component-rendering-hidden")},e.prototype.closeModal=function(){var t,e;null===(t=this.refs.dataTableModalWrapper)||void 0===t||t.classList.remove("formio-dialog-disabled-animation"),null===(e=this.refs.dataTableModalWrapper)||void 0===e||e.classList.add("component-rendering-hidden"),this.isModalOpened=!1,this.editRows=[],this.checkValidity(this.root.data,!0,this.root.data)},e.prototype.attachModal=function(t){var e=this;this.loadRefs(t,{dataTableModalOverlay:"single",dataTableModalContents:"single",dataTableModalClose:"single",dataTableModalWrapper:"single"}),this.isModalOpened?this.openModal():this.closeModal(),this.addEventListener(this.refs.dataTableModalOverlay,"click",(function(){return e.closeModal()})),this.addEventListener(this.refs.dataTableModalClose,"click",(function(){return e.closeModal()}))},e.prototype.resetValue=function(){t.prototype.resetValue.call(this),this.closeModal()},e.prototype.beforeSubmit=function(){var e;return this.component.isSubmitData&&!(null===(e=this.component.fetch)||void 0===e?void 0:e.enableFetch)||this.selectedRowsSubmitEnabled||(this.dataValue=[]),t.prototype.beforeSubmit.call(this)},e.editForm=Er,e}(Pr),Ir=jr,Dr=[{weight:0,type:"textfield",input:!0,key:"label",label:"Label",placeholder:"Field Label",tooltip:"The label for this field.",validate:{required:!0}},{type:"select",input:!0,key:"reviewFields",label:"Review Fields",weight:600,tooltip:"Enter the fields to review",dataSrc:"custom",valueProperty:"value",multiple:!0,data:{custom:function(t){var e=[],n=["textfield","checkbox","currency","datetime","day","email","number","phoneNumber","radio","select","textarea","tags","signature","time","url","selectboxes","address"],i=[];return t.utils.eachComponent(t.instance.options.editForm.components,(function(r,o){!r.tree||["container","address"].includes(r.type)&&("address"!==r.type||r.enableManualMode)||i.push(o),r.key===t.data.key||!n.includes(r.type)||i.some((function(t){return s().startsWith(o,t)}))&&"address"!==r.type||e.push({label:r.label||r.key,value:{path:o,label:r.label}})})),e}}},{key:"multiple",ignore:!0},{key:"defaultValue",ignore:!0},{key:"dbIndex",ignore:!0},{key:"persistent",ignore:!0},{key:"protected",ignore:!0},{key:"encrypted",ignore:!0},{key:"redrawOn",ignore:!0},{key:"clearOnHide",ignore:!0},{key:"calculateServer",ignore:!0},{key:"allowCalculateOverride",ignore:!0},{key:"customDefaultValuePanel",ignore:!0},{key:"calculateValuePanel",ignore:!0}],Lr=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},zr=o.Components.components.component.editForm;function Vr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return zr.apply(void 0,Lr([[{key:"data",components:Dr},{key:"display",ignore:!0},{key:"api",ignore:!0},{key:"conditional",ignore:!0},{key:"logic",ignore:!0},{key:"addons",ignore:!0},{key:"validation",ignore:!0},{key:"layout",ignore:!0},{key:"addons",ignore:!0}]],t))}var Br,Wr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ur=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},Nr=o.Components.components.component,qr=function(t){function e(e,n,i){var r=t.call(this,e,n,i)||this;return r.reviewComponents=[],r.component.reviewFields&&(r.reviewComponents=a.cloneDeep(r.component.reviewFields)),r}return Wr(e,t),e.schema=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Nr.schema.apply(Nr,Ur([{label:"Review Page",key:"reviewPage",type:"reviewpage",tag:"div"}],t))},Object.defineProperty(e,"builderInfo",{get:function(){return{title:"Review Page",icon:"info",group:"premium",documentation:"/userguide/form-building/premium-components#review-page",weight:116,schema:e.schema()}},enumerable:!1,configurable:!0}),e.savedValueTypes=function(){return[]},e.prototype.init=function(){var e,n=this;return this.options.readOnly||null===(e=this.reviewComponents)||void 0===e||e.forEach((function(t){var e,i=null===(e=n.root)||void 0===e?void 0:e.getComponent(t.path);(null==i?void 0:i.defaultValue)&&(t.data=i.getView(i.defaultValue))})),t.prototype.init.call(this)},Object.defineProperty(e.prototype,"inputInfo",{get:function(){return t.prototype.inputInfo},enumerable:!1,configurable:!0}),e.prototype.render=function(){var e,n=this;return null===(e=this.reviewComponents)||void 0===e||e.forEach((function(t){var e,i=null===(e=n.root)||void 0===e?void 0:e.getComponent(t.path);t.visible=null==i?void 0:i.visible,n.options.readOnly&&n.data&&n.assignValue(t,i)})),t.prototype.render.call(this,this.renderTemplate("reviewpage",{reviewComponents:this.reviewComponents}))},e.prototype.checkRefreshOn=function(e){var n=this;this.builderMode||(null==e||e.forEach((function(t){var e=n.reviewComponents.find((function(e){return e.path===t.instance.path}));if(e){if("address"===t.component.type&&t.instance.manualMode)return void(e.data="");e.data=t.instance.getView(t.value)}})),t.prototype.checkRefreshOn.call(this,e),this.redraw())},e.prototype.assignValue=function(t,e){t.data=e.getView(this.data[t.path])||(a.isString(this.data[t.path])?this.data[t.path]:""),!t.data&&a.isUndefined(this.data[t.path])&&(t.data=e.data[e.component.key])},e.prototype.attach=function(e){var n,i,r=this;return(this.options.readOnly&&this.data||!this.options.readOnly&&(null===(n=this.root._submission)||void 0===n?void 0:n._id))&&(null===(i=this.reviewComponents)||void 0===i||i.forEach((function(t){var e;if(!t.data&&t.visible){var n=null===(e=r.root)||void 0===e?void 0:e.getComponent(t.path);if("address"===n.component.type&&n.manualMode)return void(t.data="");r.assignValue(t,n)}}))),t.prototype.attach.call(this,e)},e.editForm=Vr,e}(Nr),Hr=qr,Gr=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},Zr=o.Components.components.signature.editForm;function Kr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Zr.apply(void 0,Gr([[{key:"addons",ignore:!0}]],t))}!function(t){t[t.None=1]="None",t[t.S_Bracket=2]="S_Bracket"}(Br||(Br={}));var Yr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Xr=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},$r=o.Components.components.signature,Jr=o.Components.components.field,Qr=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=t.apply(this,e)||this;return i.downloadURL="",i}return Yr(e,t),e.schema=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return $r.schema.apply($r,Xr([{type:"signature",label:"Signature",key:"premiumsignature",hideLabel:!0}],t))},Object.defineProperty(e,"builderInfo",{get:function(){return{title:"Signature",icon:"edit",group:"premium",documentation:"/userguide/form-building/premium-components#signature",weight:120,schema:e.schema()}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var e=this;t.prototype.init.call(this),this.options.building||this.isDefaultProvider()||this.options.readOnly||(this.hasEventHandler("submitDone")||this.once("submitDone",(function(t){var e=t.data.esign;if(e&&e.signers){var n=a.find(e.signers,(function(t){return!a.isEmpty(t.embed_url)}));n&&(null===window||void 0===window||window.location.replace(n.embed_url))}})),this.on("beforeSetSubmission",(function(t){var n=a.get(t.data,"esign");n&&a.set(e.root.data,"esign",n)})))},Object.defineProperty(e.prototype,"defaultSchema",{get:function(){return e.schema()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allowData",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styles",{get:function(){var t=this.component.overlay.height,e=this.options.building,n="pdf"===this.options.display||this.options.pdf,i=e?40:50,r=e?24:50;return n&&this.options.building,t&&e?r=.5*t:t&&n&&(r=t),"\n      height: "+(t||i)+"px;\n      font-size: "+r+"px;\n      line-height: "+(t||i)+"px;\n      width: max-content;\n      color: #fff;\n    "},enumerable:!1,configurable:!0}),e.prototype.buildTag=function(){var t=1;return this.component.order&&(t=this.component.order),this.component.provider.tagtype===Br.S_Bracket?"[[s|"+t+"]]":""},e.prototype.attach=function(e){return t.prototype.attach.call(this,e)},e.prototype.detach=function(e){return t.prototype.detach.call(this,e)},e.prototype.isDefaultProvider=function(){var t,e;return!this.component.provider||!this.component.provider.name||"default"===this.component.provider.name||!a.get(Formio.Providers.getProviders("esign"),null===(e=null===(t=this.component)||void 0===t?void 0:t.provider)||void 0===e?void 0:e.name)},e.prototype.render=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.isDefaultProvider()?t.prototype.render.apply(this,e):Jr.prototype.render.call(this,this.renderTemplate("premiumsignature",{isPDF:"pdf"===this.options.display||this.options.pdf,styles:this.styles,tag:this.buildTag(),eSignType:this.component.provider.name,downloadURL:this.downloadURL}))},e.prototype.destroy=function(){this.off("formLoad"),this.off("addComponent"),this.off("formDelete"),this.off("submitDone"),t.prototype.destroy.call(this)},e.editForm=Kr,e.downloadURL="",e}($r),to=Qr,eo=[{label:"CAPTCHA provider",widget:"choicesjs",tableView:!0,data:{values:[{label:"Google reCAPTCHA",value:"google"},{label:"Cloudflare Turnstile",value:"cloudflare"}]},key:"provider",type:"select",input:!0,defaultValue:"google"},{key:"eventType",label:"Type of event",tooltip:"Specify type of event that this reCAPTCHA would react to",type:"radio",values:[{label:"Form Load",value:"formLoad"},{label:"Button Click",value:"buttonClick"}]},{type:"select",input:!0,label:"Button Key",key:"buttonKey",dataSrc:"custom",valueProperty:"value",tooltip:"Specify key of button on this form that this reCAPTCHA should react to",customConditional:function(t){return"buttonClick"===t.data.eventType},data:{custom:function(t){return o.Utils.getContextButtons(t)}}},{label:"Visible Verification",defaultValue:!0,key:"isVisibleVerification",conditional:{show:!0,conjunction:"all",conditions:[{component:"provider",operator:"isEqual",value:"cloudflare"}]},type:"checkbox",tooltip:"If checked, space will be added for the CAPTCHA widget",input:!0},{key:"label",ignore:!0},{key:"hideLabel",ignore:!0},{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"tooltip",ignore:!0},{key:"errorLabel",ignore:!0},{key:"customClass",ignore:!0},{key:"tabindex",ignore:!0},{key:"multiple",ignore:!0},{key:"clearOnHide",ignore:!0},{key:"hidden",ignore:!0},{key:"mask",ignore:!0},{key:"dataGridLabel",ignore:!0},{key:"disabled",ignore:!0},{key:"autofocus",ignore:!0},{key:"tableView",ignore:!0},{key:"modalEdit",ignore:!0}],no=o.Components.components.component.editForm;function io(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return no([{label:"Display",key:"display",components:eo},{key:"data",ignore:!0},{key:"validation",ignore:!0},{key:"conditional",ignore:!0},{key:"logic",ignore:!0},{key:"api",ignore:!0},{key:"layout",ignore:!0}])}var ro,oo,ao=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),so=function(){return so=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},so.apply(this,arguments)},lo=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},co=o.Components.components.component,uo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ao(e,t),e.schema=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return co.schema.apply(co,lo([{type:"captcha",key:"captcha",label:"CAPTCHA"}],t))},Object.defineProperty(e,"builderInfo",{get:function(){return{title:"CAPTCHA",group:"premium",icon:"refresh",documentation:"/userguide/form-building/premium-components",weight:40,schema:e.schema()}},enumerable:!1,configurable:!0}),e.savedValueTypes=function(){return[]},Object.defineProperty(e,"conditionOperatorsSettings",{get:function(){return so(so({},t.conditionOperatorsSettings),{operators:["isEmpty","isNotEmpty"]})},enumerable:!1,configurable:!0}),Object.defineProperty(e,"serverConditionSettings",{get:function(){return e.conditionOperatorsSettings},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"captchaType",{get:function(){return"cloudflare"===this.component.provider?"CAPTCHA":"reCAPTCHA"},enumerable:!1,configurable:!0}),e.prototype.render=function(){if(this.captchaResult=null,this.options.building)return t.prototype.render.call(this,this.captchaType);var e=a.get(this.root.form,"settings.captcha.siteKey");return this.options.readOnly||"google"===this.component.provider||!e?t.prototype.render.call(this,"",!0):t.prototype.render.call(this,"<div id='cf-turnstile' "+(this.component.isVisibleVerification?"style='min-height:65px'":"")+"></div>",!0)},Object.defineProperty(e.prototype,"skipInEmail",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.renderCloudFlareWidget=function(t,e,n,i,r){var o=this;this.cloudflareId=t.render("#cf-turnstile",{action:e,sitekey:n,callback:function(t){o.sendVerificationRequest(t,"captcha").then((function(t){var e=t.verificationResult,n=t.token;o.captchaResult=so(so({},e),{token:n}),o.isLoading=!1,o.updateValue(o.captchaResult),o.captchaVerifiedPromise=i(e)}))},"error-callback":function(t){o.isLoading=!1,console.warn("Turnstile client-side error code:"+t),o.setCustomValidity("CAPTCHA: Turnstile client-side error."),o.captchaVerifiedPromise=r()}})},e.prototype.verify=function(t){var e=this;if(!this.options.readOnly&&!this.options.building){var n=this.captchaType.toLowerCase(),i=a.get(this.root.form,"settings."+n+".siteKey");if(i){if(!this.captchaApiReady)if("cloudflare"===this.component.provider)this.captchaApiReady=Formio.requireLibrary("cloudflareTurnstile","turnstile","https://challenges.cloudflare.com/turnstile/v0/api.js",!0);else{var r="https://www.google.com/recaptcha/api.js?render="+a.get(this.root.form,"settings.recaptcha.siteKey");this.captchaApiReady=Formio.requireLibrary("googleRecaptcha","grecaptcha",r,!0)}this.captchaApiReady&&(this.captchaVerifiedPromise=new Promise((function(n,r){e.captchaApiReady.then((function(o){e.isLoading||(e.isLoading=!0,"cloudflare"===e.component.provider?(e.cloudflareProvider=o,e.currentForm.getComponentById(e.id)&&e.renderCloudFlareWidget(o,t,i,n,r)):o.ready(a.debounce((function(){o.execute(i,{action:t}).then((function(t){return e.sendVerificationRequest(t).then((function(t){var i=t.verificationResult,r=t.token;return e.captchaResult=so(so({},i),{token:r}),e.updateValue(e.captchaResult),n(i)}))})).catch((function(){e.isLoading=!1}))}),1e3)))})).catch((function(){return e.isLoading=!1,r()}))})).then((function(){e.isLoading=!1})))}else console.warn("There is no Site Key specified in settings in form JSON")}},e.prototype.beforeSubmit=function(){var e=this;return this.captchaVerifiedPromise?this.captchaVerifiedPromise.then((function(){return t.prototype.beforeSubmit.call(e)})):t.prototype.beforeSubmit.call(this)},e.prototype.sendVerificationRequest=function(t,e){return void 0===e&&(e="recaptcha"),Formio.makeStaticRequest(Formio.projectUrl+"/captcha?captchaToken="+t+"&captchaType="+e).then((function(e){return{verificationResult:e,token:t}}))},e.prototype.checkComponentValidity=function(e,n,i,r,o){void 0===r&&(r={}),void 0===o&&(o=[]),e=e||this.rootValue,i=i||this.data;var a=r.async;if(void 0===a||!a)return t.prototype.checkComponentValidity.call(this,e,n,i,r,o);var s=i[this.component.key];return s&&s.token?s.success?Promise.resolve(!0):(this.setCustomValidity(this.component.label+": Token validation error"),Promise.resolve(!1)):(this.setCustomValidity(this.component.label+": Token is not specified in submission"),Promise.resolve(!1))},e.prototype.normalizeValue=function(t){return this.captchaResult?this.captchaResult:t},e.prototype.destroy=function(){var e;this.cloudflareId&&"function"==typeof(null===(e=this.cloudflareProvider)||void 0===e?void 0:e.remove)&&this.cloudflareProvider.remove(this.cloudflareId),t.prototype.destroy.call(this)},e.editForm=io,e}(co),ho={component:j,base:j,signature:to,datasource:G,sketchpad:ni,tagpad:tr,dynamicWizard:vr,datatable:Ir,reviewpage:Hr,captcha:uo},fo=i(57460),po={storage:{csv:("CSV","csv",ro=i.n(fo)(),oo=function(){return{title:"CSV",name:"csv",uploadFile:function(t,e){var n=this;return new Promise((function(i,r){var o=new FileReader;o.onloadend=function(){i({storage:"base64",name:e,contents:ro.parse(o.result),size:t.size,type:t.type})},o.onerror=function(){r(n)},o.readAsText(t)}))},downloadFile:function(t){return Promise.resolve(t)}}},oo.title="CSV",oo)},fetch:p},go={form:i(62175).Z},mo={form:i(48352).Z},vo={form:i(35353).Z},yo=i(82656),bo=i(11970),_o={form:yo.Z,html:bo.Z},wo=i(1752),xo=i(55066),ko={sketchpad:go,tagpad:mo,codereader:vo,dynamicWizard:_o,datatable:{form:wo.Z,html:xo.Z},reviewpage:{form:i(45960).Z},premiumsignature:{form:i(55452).Z}},Co={form:i(76005).Z},So={form:i(432).Z},Ro={form:i(10333).Z},Oo=i(43290),Eo=i(60469),Ao={form:Oo.Z,html:Eo.Z},To=i(52209),Mo=i(80339),Po={bootstrap:ko,bootstrap3:{tagpad:Co,sketchpad:So,codereader:Ro,dynamicWizard:Ao,datatable:{form:To.Z,html:Mo.Z},reviewpage:{form:i(87041).Z}},semantic:{}},Fo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),jo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Fo(e,t),e.prototype.emitWizardPageSelected=function(t){this.setChangingMode(),this.emit("wizardPageSelected",this.pages[t],t)},e.prototype.emitNextPage=function(){this.setChangingMode(),this.emit("nextPage",{page:this.page,submission:this.submission})},e.prototype.emitPrevPage=function(){this.setChangingMode(),this.emit("prevPage",{page:this.page,submission:this.submission})},e.prototype.focusOnComponent=function(e){var n=t.prototype.focusOnComponent.call(this,e),i=this.hasDynamicWizard();if(i){var r=this.getComponent(e);i.switchToStep(r)}else this.element&&this.element.classList.contains("dynamicWizard-changingMode")&&this.element.classList.remove("dynamicWizard-changingMode");return n},e.prototype.hasButton=function(t,e){void 0===e&&(e=this.getNextPage());var n=o.Utils._.get(this.currentPage,"component.buttonSettings",{}),i=n.previous,r=void 0===i?this.options.buttonSettings.showPrevious:i,a=n.cancel,s=void 0===a?this.options.buttonSettings.showCancel:a,l=n.submit,c=void 0===l?this.options.buttonSettings.showSubmit:l,u=n.next,h=void 0===u?this.options.buttonSettings.showNext:u,d=this.hasDynamicWizard(),f=!(null==d?void 0:d.isChangingMode)||!d.hasComponents,p=f||this.options.readOnly;switch(t){case"previous":return r&&this.getPreviousPage()>-1&&p;case"next":return h&&null!==e&&-1!==e&&p;case"cancel":return s&&!this.options.readOnly&&p;case"submit":return c&&!this.options.readOnly&&(null===e||this.page===this.pages.length-1)&&f;default:return!0}},e.prototype.setEditMode=function(t){if(!this.editMode&&t._id&&!this.options.readOnly){this.editMode=!0;var e=this.hasDynamicWizard();e&&(e.shouldUpdate=!1,e.isChangingMode=!1),this.redraw()}},e.prototype.setChangingMode=function(){if(!this.options.readOnly){var t=this.hasDynamicWizard();if(t&&!this.editMode&&t.hasComponents){if(t.shouldUpdate&&(t.addRow(),t.shouldUpdate=!1,t.secondRender=!0),this.element&&!this.element.classList.contains("dynamicWizard-changingMode")){if((null==t?void 0:t.editRows.length)===o.Utils._.get(null==t?void 0:t.component,"validate.maxLength")&&!t.isOpen(t.editRows[t.changingRowIndex]))return;this.element.classList.add("dynamicWizard-changingMode"),this.redraw()}}else this.element&&((null==t?void 0:t.isChangingMode)&&t.hasComponents&&(t.isChangingMode=!1,this.redraw()),this.element.classList.contains("dynamicWizard-changingMode")&&this.element.classList.remove("dynamicWizard-changingMode"))}},e.prototype.hasDynamicWizard=function(){var t;return null===(t=this.currentPage)||void 0===t?void 0:t.components.find((function(t){return"dynamicWizard"===t.component.type&&t._parentVisible&&t._visible&&!t._disabled}))},e.prototype.updatePages=function(){this.pages=this.allPages;var t=this.hasDynamicWizard();this.element&&this.element.classList.contains("dynamicWizard-changingMode")&&!t&&this.element.classList.remove("dynamicWizard-changingMode")},e}(o.Displays.displays.wizard),Io={components:ho,providers:po,templates:Po,displays:{wizard:jo}}}(),r.default}()}));